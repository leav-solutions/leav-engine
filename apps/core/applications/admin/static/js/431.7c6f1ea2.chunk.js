"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[431],{70431:function(e,n,i){i.r(n),i.d(n,{default:function(){return O}});var l,r,t=i(56666),a=i(33028),s=i(2867),d=i(71171),o=i(80688),c=i(95472),u=i(54681),f=i(70663),h=i(19106),m=i(24202),Z=i(63851),b=i(8450),x=i(92042),j=i(55152),v=i(37893),p=i(26637),y=i(74790),C=i(71446),g=i(52987),w=i(76307),k=i(31010),$=i(35925),D=i(56022),I=i(74280),R=i(64449),A=i(34795),H=i(77162),E=i.n(H),L=i(42737),P=i.n(L)()(l||(l=(0,d.Z)(["\n    mutation DELETE_LIBRARY($libID: ID!) {\n        deleteLibrary(id: $libID) {\n            id\n        }\n    }\n"]))),U=i(16058),_=i(52788),z=i(57450),B=function(e){var n=e.library,i=(e.filters,(0,f.$G)().t),l=(0,p.Z)(),r=(0,o.useMutation)(P,{update:function(e,n){var i=n.data.deleteLibrary;(0,C.k9)(e,i)}}),t=(0,s.Z)(r,1)[0],a=function(){var e=(0,A.Z)(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t({variables:{libID:n.id}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=null!==n.label&&(n.label.fr||n.label.en)||n.id;return l.permissions[g.Au.admin_delete_library]?(0,z.jsx)(U.Z,{action:a,confirmMessage:i("libraries.confirm_delete",{libLabel:d}),children:(0,z.jsx)(_.Z,{disabled:!!n.system})}):null},S=B,F=(0,v.ZP)(k.Z.Cell)(r||(r=(0,d.Z)(["\n    display: flex;\n    justify-content: center;\n"]))),G=function(e){var n=e.libraries,i=e.onRowClick,l=e.onFiltersUpdate,r=e.loading,t=e.filters,a=(0,f.$G)().t,s=(0,I.Z)().lang,d=function(e,n){"checkbox"===n.type&&!1===t.system&&n.checked&&(n.indeterminate=!0,n.checked=!1),l&&l(n)};return(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(k.Z,{selectable:!0,striped:!0,children:[(0,z.jsxs)(k.Z.Header,{children:[(0,z.jsxs)(k.Z.Row,{children:[(0,z.jsx)(k.Z.HeaderCell,{width:1}),(0,z.jsx)(k.Z.HeaderCell,{width:7,children:a("libraries.label")}),(0,z.jsx)(k.Z.HeaderCell,{width:6,children:a("libraries.ID")}),(0,z.jsx)(k.Z.HeaderCell,{width:1,children:a("libraries.isSystem")}),(0,z.jsx)(k.Z.HeaderCell,{width:1})]}),(0,z.jsxs)(k.Z.Row,{className:"filters",children:[(0,z.jsx)(k.Z.HeaderCell,{}),(0,z.jsx)(k.Z.HeaderCell,{children:(0,z.jsx)($.Z,{size:"small",fluid:!0,placeholder:a("libraries.label")+"...",name:"label",value:t.label||"",onChange:d})}),(0,z.jsx)(k.Z.HeaderCell,{children:(0,z.jsx)($.Z,{size:"small",fluid:!0,placeholder:a("libraries.ID")+"...",name:"id",value:t.id||"",onChange:d})}),(0,z.jsx)(k.Z.HeaderCell,{children:(0,z.jsx)(D.Z,{indeterminate:"undefined"===typeof t.system,name:"system",checked:t.system,onChange:d})}),(0,z.jsx)(k.Z.HeaderCell,{})]})]}),(0,z.jsx)(k.Z.Body,{children:r?(0,z.jsx)(k.Z.Row,{children:(0,z.jsx)(k.Z.Cell,{colSpan:6,children:(0,z.jsx)(R.Z,{})})}):n&&n.map((function(e){var n=(0,C.dX)(e.label,s);return(0,z.jsxs)(k.Z.Row,{onClick:function(){return i(e)},children:[(0,z.jsx)(F,{children:(0,z.jsx)(w.Z,{library:e})}),(0,z.jsx)(k.Z.Cell,{children:n}),(0,z.jsx)(k.Z.Cell,{children:e.id}),(0,z.jsx)(k.Z.Cell,{children:(0,z.jsx)(D.Z,{readOnly:!0,checked:!!e.system})}),(0,z.jsx)(k.Z.Cell,{children:(0,z.jsx)(S,{library:e,filters:t})})]},e.id)}))})]})})};G.defaultProps={loading:!1,libraries:[],filters:{}};var q,M=G,N=(0,v.ZP)(Z.Z)(q||(q=(0,d.Z)(["\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n"]))),O=function(e){var n,i,l=e.history,r=(0,f.$G)().t,d=(0,p.Z)(),Z=(0,c.h)(),v=(0,u.useState)({}),w=(0,s.Z)(v,2),k=w[0],$=w[1],D=(0,o.useQuery)(y.c,{variables:(0,a.Z)({},(0,C.Rw)(k))}),I=D.loading,R=D.error,A=D.data,H=(null!==(n=null===A||void 0===A||null===(i=A.libraries)||void 0===i?void 0:i.list)&&void 0!==n?n:[]).filter((function(e){return(0,C.Xp)(Z.currentApp,e.id)}));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(b.Z,{children:[(0,z.jsx)(b.Z.Column,{textAlign:"left",floated:"left",width:8,verticalAlign:"middle",children:(0,z.jsxs)(N,{size:"large",children:[(0,z.jsx)(h.af,{size:30}),r("libraries.title")]})}),d.permissions[g.Au.admin_create_library]&&(0,z.jsx)(b.Z.Column,{floated:"right",width:6,textAlign:"right",verticalAlign:"middle",children:(0,z.jsxs)(x.Z,{primary:!0,icon:!0,labelPosition:"left",size:"medium",as:m.rU,to:"/libraries/edit",children:[(0,z.jsx)(j.Z,{name:"plus"}),r("libraries.new")]})})]}),"undefined"!==typeof R?(0,z.jsxs)("p",{children:["Error: ",R.message]}):(0,z.jsx)(M,{loading:I||!A,libraries:H,onRowClick:function(e){return l.push("/libraries/edit/"+e.id)},onFiltersUpdate:function(e){var n="checkbox"===e.type?e.indeterminate?void 0:e.checked:e.value;$((0,a.Z)((0,a.Z)({},k),{},(0,t.Z)({},e.name,n)))},filters:k})]})}},16058:function(e,n,i){i.d(n,{Z:function(){return d}});var l=i(2867),r=i(54681),t=i(70663),a=i(5918),s=i(57450),d=function(e){var n=e.confirmMessage,i=e.children,d=(0,t.$G)().t,o=(0,r.useState)(!1),c=(0,l.Z)(o,2),u=c[0],f=c[1],h=function(e){e.preventDefault(),e.stopPropagation(),f(!1)},m=r.cloneElement(i,{onClick:function(e){e.preventDefault(),e.stopPropagation(),f(!0)}});return(0,s.jsxs)("div",{onClick:function(e){e.preventDefault(),e.stopPropagation()},children:[m,(0,s.jsx)(a.Z,{open:u,content:n,onCancel:h,onConfirm:function(n){h(n),e.action()},cancelButton:d("admin.cancel"),closeOnDocumentClick:!1,closeOnDimmerClick:!1})]})}},52788:function(e,n,i){i.d(n,{Z:function(){return t}});i(54681);var l=i(92042),r=i(57450);var t=function(e){var n=e.disabled,i=e.onClick;return(0,r.jsx)(l.Z,{"aria-label":"delete",className:"delete",circular:!0,icon:"trash",disabled:n,onClick:i})}},76307:function(e,n,i){i.d(n,{Z:function(){return d}});var l=i(56666),r=(i(54681),i(55152)),t=i(52987),a=i(73657),s=i(57450);var d=function(e){var n,i,d,o,c=e.library,u=(n={},(0,l.Z)(n,t.mU.files,"images outline"),(0,l.Z)(n,t.mU.directories,"folder outline"),(0,l.Z)(n,t.mU.standard,"file alternate outline"),n),f=null!==(i=null===c||void 0===c?void 0:c.behavior)&&void 0!==i?i:t.mU.standard;return null!==c&&void 0!==c&&null!==(d=c.icon)&&void 0!==d&&null!==(o=d.whoAmI)&&void 0!==o&&o.preview?(0,s.jsx)(a.Z,{image:c.icon.whoAmI.preview.small,color:null,label:null}):(0,s.jsx)(r.Z,{"data-testid":"generic-icon",name:u[f],size:"big"})}},74790:function(e,n,i){i.d(n,{c:function(){return d}});var l,r=i(71171),t=i(42737),a=i.n(t),s=i(50500),d=a()(l||(l=(0,r.Z)(["\n    ","\n    query GET_LIBRARIES($id: ID, $label: String, $system: Boolean, $behavior: [LibraryBehavior!]) {\n        libraries(filters: {id: $id, label: $label, system: $system, behavior: $behavior}) {\n            totalCount\n            list {\n                id\n                system\n                label\n                behavior\n                icon {\n                    ...RecordIdentity\n                }\n                gqlNames {\n                    query\n                    type\n                    list\n                    filter\n                    searchableFields\n                }\n            }\n        }\n    }\n"])),s.T)}}]);
//# sourceMappingURL=431.7c6f1ea2.chunk.js.map