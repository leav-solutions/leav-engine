"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[194],{72194:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var i,r=t(56666),a=t(33028),l=t(2867),o=t(80688),c=t(43157),s=t(61318),d=t(54681),u=t(70663),p=t(47016),f=t(24202),h=t(8450),Z=t(63851),m=t(55152),x=t(92042),v=t(26637),j=t(71446),C=t(52987),b=t(29653),g=t(64449),y=t(74280),k=t(31010),w=t(35925),G=t(69356),P=t(57450),A=function(e){var n=e.applications,t=void 0===n?[]:n,i=e.loading,r=void 0!==i&&i,a=e.withFilters,l=void 0===a||a,o=e.filters,c=void 0===o?{}:o,s=e.onRowClick,p=e.actions,f=e.onFiltersUpdate,h=function(e,n){"checkbox"===n.type&&!1===c[n.name]&&n.checked&&(n.indeterminate=!0,n.checked=!1),f&&f(n)},Z=(0,u.$G)().t,m=(0,y.Z)().lang,x=p?Array.isArray(p)?p:[p]:[],v=Object.keys(C.vQ).map((function(e){return{key:e,value:e,text:Z("applications.types."+e)}}));return(0,P.jsxs)(k.Z,{selectable:!0,striped:!0,children:[(0,P.jsxs)(k.Z.Header,{children:[(0,P.jsxs)(k.Z.Row,{children:[(0,P.jsx)(k.Z.HeaderCell,{width:4,children:Z("admin.label")}),(0,P.jsx)(k.Z.HeaderCell,{width:4,children:Z("admin.id")}),(0,P.jsx)(k.Z.HeaderCell,{width:1,children:Z("applications.endpoint")}),(0,P.jsx)(k.Z.HeaderCell,{width:1,children:Z("applications.type")}),(0,P.jsx)(k.Z.HeaderCell,{width:1})]}),l&&(0,P.jsxs)(k.Z.Row,{className:"filters",children:[(0,P.jsx)(k.Z.HeaderCell,{children:(0,P.jsx)(w.Z,{size:"small",fluid:!0,placeholder:Z("admin.label")+"...",name:"label","aria-label":"label",value:c.label||"",onChange:h})}),(0,P.jsx)(k.Z.HeaderCell,{children:(0,P.jsx)(w.Z,{size:"small",fluid:!0,placeholder:Z("admin.id")+"...",name:"id","aria-label":"id",value:c.id||"",onChange:h})}),(0,P.jsx)(k.Z.HeaderCell,{children:(0,P.jsx)(w.Z,{size:"small",fluid:!0,placeholder:Z("applications.endpoint")+"...",name:"endpoint","aria-label":"endpoint",value:c.endpoint||"",onChange:h})}),(0,P.jsx)(k.Z.HeaderCell,{children:(0,P.jsx)(G.Z,{fluid:!0,multiple:!0,search:!0,selection:!0,options:v,placeholder:Z("attributes.type")+"...",name:"type",value:c.type||[],onChange:h})}),(0,P.jsx)(k.Z.HeaderCell,{})]})]}),(0,P.jsx)(k.Z.Body,{children:r?(0,P.jsx)(k.Z.Row,{children:(0,P.jsx)(k.Z.Cell,{colSpan:6,children:(0,P.jsx)(g.Z,{})})}):!!t&&t.map((function(e){var n=(0,b.a0)(e.label,m);return(0,P.jsxs)(k.Z.Row,{onClick:function(){return s(e)},children:[(0,P.jsx)(k.Z.Cell,{children:n}),(0,P.jsx)(k.Z.Cell,{children:e.id}),(0,P.jsx)(k.Z.Cell,{children:e.endpoint}),(0,P.jsx)(k.Z.Cell,{children:Z("applications.types."+e.type)}),(0,P.jsx)(k.Z.Cell,{textAlign:"right",width:1,className:"actions",children:x.map((function(n){return d.cloneElement(n,{application:e})}))})]},e.id)}))})]})},R=t(34795),E=t(77162),N=t.n(E),I=t(16058),H=t(52788),D=t(71171),z=(0,t(175).gql)(i||(i=(0,D.Z)(["\n    mutation DELETE_APPLICATION($appId: ID!) {\n        deleteApplication(id: $appId) {\n            id\n        }\n    }\n"]))),T=t(19913),_=function(e){var n=e.application,t=(0,u.$G)().t,i=(0,y.Z)().lang,r=(0,o.useMutation)(z,{onError:function(){},update:function(e,n){var t=n.data.deleteApplication;(0,T.k9)(e,t)}}),a=(0,l.Z)(r,1)[0],c=function(){var e=(0,R.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a({variables:{appId:n.id}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=(0,b.a0)(null===n||void 0===n?void 0:n.label,i);return n?(0,P.jsx)(I.Z,{action:c,confirmMessage:t("applications.confirm_delete",{appLabel:s}),children:(0,P.jsx)(H.Z,{disabled:!1})}):(0,P.jsx)(P.Fragment,{})},F=_,K=function(){var e,n,t=(0,u.$G)().t,i=(0,d.useState)({}),b=(0,l.Z)(i,2),g=b[0],y=b[1],k=(0,v.Z)(),w=(0,p.k6)(),G=(0,o.useQuery)(s.N,{variables:{filters:(0,a.Z)({},(0,j.Rw)(g,["label","id","endpoint"]))}}),R=G.loading,E=G.error,N=G.data;return E?(0,P.jsx)(c.Z,{message:E.message}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(h.Z,{children:[(0,P.jsx)(h.Z.Column,{textAlign:"left",floated:"left",width:8,verticalAlign:"middle",children:(0,P.jsxs)(Z.Z,{size:"large",children:[(0,P.jsx)(m.Z,{name:"th"}),t("applications.title")]})}),k.permissions[C.Au.admin_create_application]&&(0,P.jsx)(h.Z.Column,{floated:"right",width:6,textAlign:"right",verticalAlign:"middle",children:(0,P.jsxs)(x.Z,{primary:!0,icon:!0,labelPosition:"left",size:"medium",as:f.rU,to:"/applications/edit/",children:[(0,P.jsx)(m.Z,{name:"plus"}),t("applications.new")]})})]}),E?(0,P.jsxs)("p",{children:["Error: ",E.message]}):(0,P.jsx)(A,{loading:R,applications:null!==(e=null===N||void 0===N||null===(n=N.applications)||void 0===n?void 0:n.list)&&void 0!==e?e:[],onRowClick:function(e){return w.push("/applications/edit/"+e.id)},onFiltersUpdate:function(e){var n="checkbox"===e.type?e.indeterminate?void 0:e.checked:e.value;y((0,a.Z)((0,a.Z)({},g),{},(0,r.Z)({},e.name,n)))},filters:g,actions:k.permissions[C.Au.admin_delete_application]?(0,P.jsx)(F,{},"delete_app"):(0,P.jsx)(P.Fragment,{})})]})}},16058:function(e,n,t){t.d(n,{Z:function(){return c}});var i=t(2867),r=t(54681),a=t(70663),l=t(5918),o=t(57450),c=function(e){var n=e.confirmMessage,t=e.children,c=(0,a.$G)().t,s=(0,r.useState)(!1),d=(0,i.Z)(s,2),u=d[0],p=d[1],f=function(e){e.preventDefault(),e.stopPropagation(),p(!1)},h=r.cloneElement(t,{onClick:function(e){e.preventDefault(),e.stopPropagation(),p(!0)}});return(0,o.jsxs)("div",{onClick:function(e){e.preventDefault(),e.stopPropagation()},children:[h,(0,o.jsx)(l.Z,{open:u,content:n,onCancel:f,onConfirm:function(n){f(n),e.action()},cancelButton:c("admin.cancel"),closeOnDocumentClick:!1,closeOnDimmerClick:!1})]})}},52788:function(e,n,t){t.d(n,{Z:function(){return a}});t(54681);var i=t(92042),r=t(57450);var a=function(e){var n=e.disabled,t=e.onClick;return(0,r.jsx)(i.Z,{"aria-label":"delete",className:"delete",circular:!0,icon:"trash",disabled:n,onClick:t})}},19913:function(e,n,t){t.d(n,{AX:function(){return i.AX},CE:function(){return i.CE},FQ:function(){return i.FQ},GV:function(){return i.GV},Ku:function(){return i.Ku},NE:function(){return i.NE},PT:function(){return i.PT},Rw:function(){return i.Rw},TB:function(){return i.TB},aW:function(){return i.aW},ci:function(){return i.ci},dX:function(){return i.dX},ei:function(){return i.ei},k9:function(){return i.k9},nV:function(){return i.nV},u_:function(){return i.u_},xN:function(){return i.xN},zQ:function(){return i.zQ}});var i=t(71446)},35925:function(e,n,t){var i=t(7896),r=t(81665),a=t(64223),l=t(48839),o=t(37200),c=t(47884),s=t(62132),d=t(98140),u=t(81856),p=t(54681),f=t(84215),h=t(83331),Z=t(91843),m=t(82923),x=t(58429),v=t(37886),j=t(92042),C=t(55152),b=t(53259),g=function(e){function n(){for(var t,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(t=e.call.apply(e,[this].concat(a))||this).inputRef=(0,p.createRef)(),t.computeIcon=function(){var e=t.props,n=e.loading,i=e.icon;return(0,s.Z)(i)?n?"spinner":void 0:i},t.computeTabIndex=function(){var e=t.props,n=e.disabled,i=e.tabIndex;return(0,s.Z)(i)?n?-1:void 0:i},t.focus=function(){return t.inputRef.current.focus()},t.select=function(){return t.inputRef.current.select()},t.handleChange=function(e){var n=(0,c.Z)(e,"target.value");(0,o.Z)(t.props,"onChange",e,(0,i.Z)({},t.props,{value:n}))},t.handleChildOverrides=function(e,n){return(0,i.Z)({},n,e.props,{ref:function(n){(0,d.n)(e.ref,n),t.inputRef.current=n}})},t.partitionProps=function(){var e=t.props,r=e.disabled,a=e.type,l=t.computeTabIndex(),o=(0,f.Z)(n,t.props),c=(0,h.vR)(o),s=c[0],d=c[1];return[(0,i.Z)({},s,{disabled:r,type:a,tabIndex:l,onChange:t.handleChange,ref:t.inputRef}),d]},t}return(0,r.Z)(n,e),n.prototype.render=function(){var e=this,t=this.props,r=t.action,o=t.actionPosition,c=t.children,s=t.className,d=t.disabled,f=t.error,h=t.fluid,g=t.focus,y=t.icon,k=t.iconPosition,w=t.input,G=t.inverted,P=t.label,A=t.labelPosition,R=t.loading,E=t.size,N=t.transparent,I=t.type,H=(0,u.Z)("ui",E,(0,Z.lG)(d,"disabled"),(0,Z.lG)(f,"error"),(0,Z.lG)(h,"fluid"),(0,Z.lG)(g,"focus"),(0,Z.lG)(G,"inverted"),(0,Z.lG)(R,"loading"),(0,Z.lG)(N,"transparent"),(0,Z.cD)(o,"action")||(0,Z.lG)(r,"action"),(0,Z.cD)(k,"icon")||(0,Z.lG)(y||R,"icon"),(0,Z.cD)(A,"labeled")||(0,Z.lG)(P,"labeled"),"input",s),D=(0,m.Z)(n,this.props),z=this.partitionProps(),T=z[0],_=z[1];if(!x.kK(c)){var F=(0,l.Z)(p.Children.toArray(c),(function(n){return"input"!==n.type?n:(0,p.cloneElement)(n,e.handleChildOverrides(n,T))}));return p.createElement(D,(0,i.Z)({},_,{className:H}),F)}var K=j.Z.create(r,{autoGenerateKey:!1}),O=b.Z.create(P,{defaultProps:{className:(0,u.Z)("label",(0,a.Z)(A,"corner")&&A)},autoGenerateKey:!1});return p.createElement(D,(0,i.Z)({},_,{className:H}),"left"===o&&K,"right"!==A&&O,(0,v.MO)(w||I,{defaultProps:T,autoGenerateKey:!1}),C.Z.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==o&&K,"right"===A&&O)},n}(p.Component);g.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],g.propTypes={},g.defaultProps={type:"text"},g.create=(0,v.u5)(g,(function(e){return{type:e}})),n.Z=g}}]);
//# sourceMappingURL=194.dcf876e5.chunk.js.map