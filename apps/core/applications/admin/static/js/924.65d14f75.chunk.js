"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[924],{16058:function(e,n,t){t.d(n,{Z:function(){return d}});var l=t(2867),r=t(54681),i=t(70663),s=t(5918),a=t(57450),d=function(e){var n=e.confirmMessage,t=e.children,d=(0,i.$G)().t,c=(0,r.useState)(!1),o=(0,l.Z)(c,2),u=o[0],f=o[1],h=function(e){e.preventDefault(),e.stopPropagation(),f(!1)},m=r.cloneElement(t,{onClick:function(e){e.preventDefault(),e.stopPropagation(),f(!0)}});return(0,a.jsxs)("div",{onClick:function(e){e.preventDefault(),e.stopPropagation()},children:[m,(0,a.jsx)(s.Z,{open:u,content:n,onCancel:h,onConfirm:function(n){h(n),e.action()},cancelButton:d("admin.cancel"),closeOnDocumentClick:!1,closeOnDimmerClick:!1})]})}},52788:function(e,n,t){t.d(n,{Z:function(){return i}});t(54681);var l=t(92042),r=t(57450);var i=function(e){var n=e.disabled,t=e.onClick;return(0,r.jsx)(l.Z,{"aria-label":"delete",className:"delete",circular:!0,icon:"trash",disabled:n,onClick:t})}},3924:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var l,r=t(56666),i=t(33028),s=t(2867),a=t(71171),d=t(80688),c=t(43157),o=t(64449),u=t(95472),f=t(54681),h=t(70663),m=t(10478),Z=t(24202),x=t(63851),j=t(8450),p=t(92042),v=t(55152),C=t(37893),b=t(26637),g=t(72335),y=t(71446),k=t(52987),w=t(31010),E=t(35925),$=t(56022),D=t(74280),R=t(34795),T=t(77162),H=t.n(T),A=t(42737),_=t.n(A)()(l||(l=(0,a.Z)(["\n    mutation DELETE_TREE($treeId: ID!) {\n        deleteTree(id: $treeId) {\n            id\n        }\n    }\n"]))),I=t(16058),P=t(52788),S=t(57450),G=function(e){var n=e.tree,t=(e.filters,(0,h.$G)().t),l=(0,D.Z)().lang,r=(0,b.Z)(),i=(0,d.useMutation)(_,{refetchQueries:[g.T],update:function(e,n){var t=n.data;(0,y.k9)(e,t.deleteTree)}}),a=(0,s.Z)(i,1)[0],c=function(){var e=(0,R.Z)(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a({variables:{treeId:n.id}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=(0,y.dX)(n.label,l);return n&&r.permissions[k.Au.admin_delete_tree]?(0,S.jsx)(I.Z,{action:c,confirmMessage:t("trees.confirm_delete",{treeLabel:o}),children:(0,S.jsx)(P.Z,{disabled:n.system})}):(0,S.jsx)(S.Fragment,{})},z=G,F=function(e){var n=e.trees,t=e.loading,l=e.filters,r=e.onFiltersUpdate,i=e.onRowClick,s=(0,h.$G)().t,a=(0,D.Z)().lang,d=function(e,n){"checkbox"===n.type&&!1===l.system&&n.checked&&(n.indeterminate=!0,n.checked=!1),r&&r(n)};return(0,S.jsxs)(w.Z,{selectable:!0,striped:!0,children:[(0,S.jsxs)(w.Z.Header,{children:[(0,S.jsxs)(w.Z.Row,{children:[(0,S.jsx)(w.Z.HeaderCell,{width:8,children:s("trees.label")}),(0,S.jsx)(w.Z.HeaderCell,{width:6,children:s("trees.ID")}),(0,S.jsx)(w.Z.HeaderCell,{width:1,children:s("trees.isSystem")}),(0,S.jsx)(w.Z.HeaderCell,{width:1})]}),(0,S.jsxs)(w.Z.Row,{className:"filters",children:[(0,S.jsx)(w.Z.HeaderCell,{children:(0,S.jsx)(E.Z,{size:"small",fluid:!0,placeholder:s("trees.label")+"...",name:"label",value:l.label||"",onChange:d})}),(0,S.jsx)(w.Z.HeaderCell,{children:(0,S.jsx)(E.Z,{size:"small",fluid:!0,placeholder:s("trees.ID")+"...",name:"id",value:l.id||"",onChange:d})}),(0,S.jsx)(w.Z.HeaderCell,{children:(0,S.jsx)($.Z,{indeterminate:"undefined"===typeof l.system,name:"system",checked:l.system,onChange:d})}),(0,S.jsx)(w.Z.HeaderCell,{})]})]}),(0,S.jsx)(w.Z.Body,{children:t?(0,S.jsx)(w.Z.Row,{children:(0,S.jsx)(w.Z.Cell,{colSpan:6,children:(0,S.jsx)(o.Z,{})})}):n&&n.map((function(e){var n=(0,y.dX)(e.label,a);return(0,S.jsxs)(w.Z.Row,{onClick:function(){return i(e)},children:[(0,S.jsx)(w.Z.Cell,{children:n}),(0,S.jsx)(w.Z.Cell,{children:e.id}),(0,S.jsx)(w.Z.Cell,{children:(0,S.jsx)($.Z,{readOnly:!0,checked:!!e.system})}),(0,S.jsx)(w.Z.Cell,{children:(0,S.jsx)(z,{tree:e,filters:l})})]},e.id)}))})]})};F.defaultProps={loading:!1,trees:[],filters:{}};var M,O=F,B=(0,C.ZP)(x.Z)(M||(M=(0,a.Z)(["\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n"]))),U=function(e){var n,t,l=e.history,a=(0,h.$G)().t,x=(0,u.h)(),C=(0,f.useState)({}),w=(0,s.Z)(C,2),E=w[0],$=w[1],D=(0,d.useQuery)(g.u,{variables:(0,i.Z)({},(0,y.Rw)(E))}),R=D.loading,T=D.error,H=D.data,A=(0,b.Z)(),_=(null!==(n=null===H||void 0===H||null===(t=H.trees)||void 0===t?void 0:t.list)&&void 0!==n?n:[]).filter((function(e){return(0,y.D)(x.currentApp,e.id)}));return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(j.Z,{children:[(0,S.jsx)(j.Z.Column,{textAlign:"left",floated:"left",width:8,verticalAlign:"middle",children:(0,S.jsxs)(B,{size:"large",children:[(0,S.jsx)(m.bOb,{size:30}),a("trees.title")]})}),A.permissions[k.Au.admin_create_tree]&&(0,S.jsx)(j.Z.Column,{floated:"right",width:6,textAlign:"right",verticalAlign:"middle",children:(0,S.jsx)(p.Z,{primary:!0,icon:!0,labelPosition:"left",size:"medium",as:Z.rU,to:"/trees/edit/",children:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(v.Z,{name:"plus"}),a("trees.new")]})})})]}),R&&(0,S.jsx)(o.Z,{}),T&&(0,S.jsx)(c.Z,{message:T.message}),!R&&!T&&(0,S.jsx)(O,{trees:_,onRowClick:function(e){return l.push("/trees/edit/"+e.id)},onFiltersUpdate:function(e){var n="checkbox"===e.type?e.indeterminate?void 0:e.checked:e.value;$((0,i.Z)((0,i.Z)({},E),{},(0,r.Z)({},e.name,n)))},filters:E,loading:R})]})}},72335:function(e,n,t){t.d(n,{T:function(){return s},u:function(){return a}});var l,r=t(71171),i=t(42737),s="GET_TREES",a=t.n(i)()(l||(l=(0,r.Z)(["\n    query GET_TREES($id: ID, $label: String, $system: Boolean) {\n        trees(filters: {id: $id, label: $label, system: $system}) {\n            totalCount\n            list {\n                id\n                label\n                system\n                behavior\n                libraries {\n                    library {\n                        id\n                        label\n                    }\n                    settings {\n                        allowMultiplePositions\n                        allowedAtRoot\n                        allowedChildren\n                    }\n                }\n            }\n        }\n    }\n"])))}}]);
//# sourceMappingURL=924.65d14f75.chunk.js.map