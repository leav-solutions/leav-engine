"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[420],{1420:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var i,r,l=n(56666),a=n(33028),s=n(2867),u=n(71171),o=n(80688),d=n(54681),c=n(70663),f=n(87964),m=n(24202),h=n(63851),b=n(8450),p=n(92042),Z=n(55152),x=n(37893),j=n(26637),v=n(39918),C=n(71446),y=n(52987),k=n(59820),g=n(34795),w=n(77162),$=n.n(w),_=n(19913),A=n(74280),H=n(42737),T=n.n(H)()(i||(i=(0,u.Z)(["\n    mutation DELETE_ATTRIBUTE($attrId: ID!) {\n        deleteAttribute(id: $attrId) {\n            id\n        }\n    }\n"]))),E=n(16058),R=n(52788),D=n(57450),B=function(e){var t=e.attribute,n=(e.filters,(0,c.$G)().t),i=((0,A.Z)().lang,(0,o.useMutation)(T,{update:function(e,t){var n=t.data.deleteAttribute;(0,_.k9)(e,n)}})),r=(0,s.Z)(i,1)[0],l=function(){var e=(0,g.Z)($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r({variables:{attrId:t.id}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=null!==t.label&&(t.label.fr||t.label.en)||t.id;return t?(0,D.jsx)(E.Z,{action:l,confirmMessage:n("attributes.confirm_delete",{attrLabel:a}),children:(0,D.jsx)(R.Z,{disabled:t.system})}):(0,D.jsx)(D.Fragment,{})},I=B,F=(0,x.ZP)(h.Z)(r||(r=(0,u.Z)(["\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n"]))),G=function(e){var t=(0,c.$G)().t,n=e.history,i=(0,d.useState)({}),r=(0,s.Z)(i,2),u=r[0],h=r[1],x=(0,j.Z)(),g=(0,o.useQuery)(v.V,{variables:(0,a.Z)({},(0,C.Rw)(u))}),w=g.loading,$=g.error,_=g.data;return(0,D.jsxs)("div",{children:[(0,D.jsxs)(b.Z,{children:[(0,D.jsx)(b.Z.Column,{textAlign:"left",floated:"left",width:8,verticalAlign:"middle",children:(0,D.jsxs)(F,{size:"large",children:[(0,D.jsx)(f.jh6,{size:30}),t("attributes.title")]})}),x.permissions[y.Au.admin_create_attribute]&&(0,D.jsx)(b.Z.Column,{floated:"right",width:6,textAlign:"right",verticalAlign:"middle",children:(0,D.jsxs)(p.Z,{primary:!0,icon:!0,labelPosition:"left",size:"medium",as:m.rU,to:"/attributes/edit/",children:[(0,D.jsx)(Z.Z,{name:"plus"}),t("attributes.new")]})})]}),$?(0,D.jsxs)("p",{children:["Error: ",$.message]}):(0,D.jsx)(k.Z,{loading:w||!_,attributes:_&&_.attributes?_.attributes.list:[],onRowClick:function(e){return n.push("/attributes/edit/"+e.id)},onFiltersUpdate:function(e){var t="checkbox"===e.type?e.indeterminate?void 0:e.checked:e.value;h((0,a.Z)((0,a.Z)({},u),{},(0,l.Z)({},e.name,t)))},filters:u,actions:x.permissions[y.Au.admin_delete_attribute]?(0,D.jsx)(I,{filters:u},"delete_attr"):(0,D.jsx)(D.Fragment,{})})]})}},59820:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(54681),r=n(70663),l=n(31010),a=n(35925),s=n(69356),u=n(56022),o=n(74280),d=n(71446),c=n(52987),f=n(64449),m=n(57450),h=function(e){var t=e.attributes,n=void 0===t?[]:t,h=e.loading,b=void 0!==h&&h,p=e.withFilters,Z=void 0===p||p,x=e.filters,j=void 0===x?{}:x,v=e.onRowClick,C=e.actions,y=e.onFiltersUpdate,k=function(e,t){"checkbox"===t.type&&!1===j[t.name]&&t.checked&&(t.indeterminate=!0,t.checked=!1),y&&y(t)},g=(0,r.$G)().t,w=(0,o.Z)().lang,$=C?Array.isArray(C)?C:[C]:[],_=Object.keys(c.GC).map((function(e){return{key:e,value:e,text:g("attributes.types."+e)}})),A=Object.keys(c.aZ).map((function(e){return{key:e,value:e,text:g("attributes.formats."+e)}}));return(0,m.jsxs)(l.Z,{selectable:!0,striped:!0,children:[(0,m.jsxs)(l.Z.Header,{children:[(0,m.jsxs)(l.Z.Row,{children:[(0,m.jsx)(l.Z.HeaderCell,{width:4,children:g("attributes.label")}),(0,m.jsx)(l.Z.HeaderCell,{width:4,children:g("attributes.ID")}),(0,m.jsx)(l.Z.HeaderCell,{width:3,children:g("attributes.type")}),(0,m.jsx)(l.Z.HeaderCell,{width:3,children:g("attributes.format")}),(0,m.jsx)(l.Z.HeaderCell,{width:1,children:g("attributes.multiple_values")}),(0,m.jsx)(l.Z.HeaderCell,{width:1,children:g("attributes.isSystem")}),(0,m.jsx)(l.Z.HeaderCell,{width:1})]}),Z&&(0,m.jsxs)(l.Z.Row,{className:"filters",children:[(0,m.jsx)(l.Z.HeaderCell,{children:(0,m.jsx)(a.Z,{size:"small",fluid:!0,placeholder:g("attributes.label")+"...",name:"label",value:j.label||"",onChange:k})}),(0,m.jsx)(l.Z.HeaderCell,{children:(0,m.jsx)(a.Z,{size:"small",fluid:!0,placeholder:g("attributes.ID")+"...",name:"id",value:j.id||"",onChange:k})}),(0,m.jsx)(l.Z.HeaderCell,{children:(0,m.jsx)(s.Z,{fluid:!0,multiple:!0,search:!0,selection:!0,options:_,placeholder:g("attributes.type")+"...",name:"type",value:j.type||[],onChange:k})}),(0,m.jsx)(l.Z.HeaderCell,{children:(0,m.jsx)(s.Z,{fluid:!0,multiple:!0,search:!0,selection:!0,options:A,placeholder:g("attributes.format")+"...",name:"format",value:j.format||[],onChange:k})}),(0,m.jsx)(l.Z.HeaderCell,{children:(0,m.jsx)(u.Z,{indeterminate:"undefined"===typeof j.multiple_values,name:"multiple_values",checked:j.multiple_values,onChange:k})}),(0,m.jsx)(l.Z.HeaderCell,{children:(0,m.jsx)(u.Z,{indeterminate:"undefined"===typeof j.system,name:"system",checked:j.system,onChange:k})}),(0,m.jsx)(l.Z.HeaderCell,{})]})]}),(0,m.jsx)(l.Z.Body,{children:b?(0,m.jsx)(l.Z.Row,{children:(0,m.jsx)(l.Z.Cell,{colSpan:6,children:(0,m.jsx)(f.Z,{})})}):!!n&&n.map((function(e){var t=(0,d.dX)(e.label,w);return(0,m.jsxs)(l.Z.Row,{onClick:function(){return v(e)},children:[(0,m.jsx)(l.Z.Cell,{children:t}),(0,m.jsx)(l.Z.Cell,{children:e.id}),(0,m.jsx)(l.Z.Cell,{children:g("attributes.types."+e.type)}),(0,m.jsx)(l.Z.Cell,{children:e.format?g("attributes.formats."+e.format):""}),(0,m.jsx)(l.Z.Cell,{width:1,children:(0,m.jsx)(u.Z,{readOnly:!0,checked:e.multiple_values})}),(0,m.jsx)(l.Z.Cell,{width:1,children:(0,m.jsx)(u.Z,{readOnly:!0,checked:e.system})}),(0,m.jsx)(l.Z.Cell,{textAlign:"right",width:1,className:"actions",children:$.map((function(t){return i.cloneElement(t,{attribute:e})}))})]},e.id)}))})]})}},16058:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(2867),r=n(54681),l=n(70663),a=n(5918),s=n(57450),u=function(e){var t=e.confirmMessage,n=e.children,u=(0,l.$G)().t,o=(0,r.useState)(!1),d=(0,i.Z)(o,2),c=d[0],f=d[1],m=function(e){e.preventDefault(),e.stopPropagation(),f(!1)},h=r.cloneElement(n,{onClick:function(e){e.preventDefault(),e.stopPropagation(),f(!0)}});return(0,s.jsxs)("div",{onClick:function(e){e.preventDefault(),e.stopPropagation()},children:[h,(0,s.jsx)(a.Z,{open:c,content:t,onCancel:m,onConfirm:function(t){m(t),e.action()},cancelButton:u("admin.cancel"),closeOnDocumentClick:!1,closeOnDimmerClick:!1})]})}},52788:function(e,t,n){n.d(t,{Z:function(){return l}});n(54681);var i=n(92042),r=n(57450);var l=function(e){var t=e.disabled,n=e.onClick;return(0,r.jsx)(i.Z,{"aria-label":"delete",className:"delete",circular:!0,icon:"trash",disabled:t,onClick:n})}},39918:function(e,t,n){n.d(t,{V:function(){return a}});var i,r=n(71171),l=n(42737),a=n.n(l)()(i||(i=(0,r.Z)(["\n    query GET_ATTRIBUTES(\n        $id: ID\n        $label: String\n        $type: [AttributeType]\n        $format: [AttributeFormat]\n        $system: Boolean\n        $multiple_values: Boolean\n        $versionable: Boolean\n        $libraries: [String!]\n    ) {\n        attributes(\n            filters: {\n                id: $id\n                label: $label\n                type: $type\n                format: $format\n                system: $system\n                multiple_values: $multiple_values\n                versionable: $versionable\n                libraries: $libraries\n            }\n        ) {\n            totalCount\n            list {\n                id\n                label\n                type\n                format\n                system\n                multiple_values\n                ... on StandardAttribute {\n                    unique\n                }\n                ... on LinkAttribute {\n                    linked_library {\n                        id\n                    }\n                    reverse_link\n                }\n                ... on TreeAttribute {\n                    linked_tree {\n                        id\n                    }\n                }\n            }\n        }\n    }\n"])))},19913:function(e,t,n){n.d(t,{AX:function(){return i.AX},CE:function(){return i.CE},FQ:function(){return i.FQ},GV:function(){return i.GV},Ku:function(){return i.Ku},NE:function(){return i.NE},PT:function(){return i.PT},Rw:function(){return i.Rw},TB:function(){return i.TB},aW:function(){return i.aW},ci:function(){return i.ci},dX:function(){return i.dX},ei:function(){return i.ei},k9:function(){return i.k9},nV:function(){return i.nV},u_:function(){return i.u_},xN:function(){return i.xN},zQ:function(){return i.zQ}});var i=n(71446)}}]);
//# sourceMappingURL=420.ff8eda35.chunk.js.map