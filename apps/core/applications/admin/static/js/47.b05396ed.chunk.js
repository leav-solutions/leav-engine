"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[47],{44702:function(n,e,i){i.r(e),i.d(e,{default:function(){return Dn}});var l,a,r=i(71171),t=i(80688),o=i(43157),s=i(64449),d=i(54681),u=d.createContext(null),c=function(){return(0,d.useContext)(u)},p=u,v=i(175),f=i(50500),m=i(52399),b=(0,v.gql)(l||(l=(0,r.Z)(["\n    ","\n    ","\n    query GET_APPLICATION_BY_ID($id: ID!) {\n        applications(filters: {id: $id}) {\n            list {\n                ...ApplicationDetails\n            }\n        }\n    }\n"])),f.T,m.i),h=i(70663),Z=i(37893),x=i(2867),g=i(29653),j=i(33028),y=i(81592),I=i(57450),w=(0,Z.ZP)(y.Z)(a||(a=(0,r.Z)(["\n    display: grid;\n    grid-template-rows: 4rem minmax(500px, 1fr);\n"])));w.displayName="Tab";var C,_,k=function(n){return(0,I.jsx)(w,(0,j.Z)({},n))},S=i(74280),A=i(47016),P=i(63851),E=i(55152),N=i(52987),T=i(34795),R=i(77162),q=i.n(R),$=(0,v.gql)(C||(C=(0,r.Z)(["\n    ","\n    mutation SAVE_APPLICATION($application: ApplicationInput!) {\n        saveApplication(application: $application) {\n            id\n            color\n            module\n            description\n            endpoint\n            label\n            system\n            icon {\n                ...RecordIdentity\n            }\n        }\n    }\n"])),f.T),O=i(56666),G=i(59740),B=i(45611),Q=i(46389),D=i(91492),L=i(5168),M=i(56022),F=i(80687),U=i(61247),V=i(19913),z=i(9983),X=i(36770),H=i(43248),K=(0,v.gql)(_||(_=(0,r.Z)(["\n    query GET_APPLICATION_MODULES {\n        applicationsModules {\n            id\n            description\n            version\n        }\n    }\n"]))),J=i(69356),Y=["modules"],W=function(n){var e,i=n.modules,l=(0,G.Z)(n,Y),a=(null!==i&&void 0!==i?i:[]).map((function(n){return{key:n.id,value:n.id,text:n.id,content:(0,I.jsx)(P.Z,{size:"small",content:n.id,subheader:n.description})}}));return(0,I.jsx)(L.Z.Dropdown,(0,j.Z)((0,j.Z)({},l),{},{search:!0,options:a,searchInput:(0,I.jsx)(J.Z.SearchInput,{name:null!==(e=l.name)&&void 0!==e?e:"component"})}))};var nn,en,ln,an,rn=function(n){var e,i=(0,t.useQuery)(K),l=i.loading,a=i.data;return(0,I.jsx)(W,(0,j.Z)((0,j.Z)({},n),{},{"aria-label":"select-module",loading:l,modules:null!==(e=null===a||void 0===a?void 0:a.applicationsModules)&&void 0!==e?e:[]}))},tn=["isNewApp"],on=(0,Z.ZP)((function(n){n.isNewApp;var e=(0,G.Z)(n,tn);return(0,I.jsx)(L.Z,(0,j.Z)({},e))}))(nn||(nn=(0,r.Z)(["\n    && {\n        position: unset;\n        display: grid;\n        grid-template-rows: ",";\n    }\n"])),(function(n){return n.isNewApp?"auto 6rem":"auto"})),sn=Z.ZP.div(en||(en=(0,r.Z)(["\n    overflow-y: auto;\n"]))),dn=Z.ZP.div(ln||(ln=(0,r.Z)(["\n    border-top: 1px solid #dddddd;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    padding: 1em;\n    text-align: right;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n"]))),un=Z.ZP.div(an||(an=(0,r.Z)(["\n    margin-right 1em;\n    color: #999;\n"])));var cn=function(n){var e,i,l=n.onSubmitInfos,a=n.errors,r=n.onCheckIdIsUnique,t=n.loading,o=(0,h.$G)().t,s=c(),d=s.application,u=s.readonly,p=(0,S.Z)(),v=p.availableLangs,f=p.defaultLang,m=u||t,b={id:"",type:N.vQ.internal,color:"",icon:null,module:"",label:v.reduce((function(n,e){return n[e]="",n}),{}),description:v.reduce((function(n,e){return n[e]="",n}),{}),endpoint:"",libraries:[],trees:[]},Z=!d,g=(0,j.Z)((0,j.Z)((0,j.Z)({},b),d),{},{libraries:null!==(null===d||void 0===d?void 0:d.libraries)?(null!==(e=null===d||void 0===d?void 0:d.libraries)&&void 0!==e?e:[]).map((function(n){return n.id})):null,trees:null!==(null===d||void 0===d?void 0:d.trees)?(null!==(i=null===d||void 0===d?void 0:d.trees)&&void 0!==i?i:[]).map((function(n){return n.id})):null}),y=a&&a.extensions.code===z.Z.VALIDATION_ERROR?a.extensions.fields:{},w=U.Z_().required().matches(/^[a-z0-9_]+$/);Z&&(w=w.test("isIdUnique",o("admin.validation_errors.id_exists"),r));var C=U.Ry().shape({id:w,type:U.Z_().oneOf(Object.values(N.vQ)),color:U.Z_().nullable(),icon:U.Ry().shape({whoAmI:U.Ry({id:U.Z_(),label:U.Z_().nullable(),color:U.Z_().nullable(),library:U.Ry().shape({id:U.Z_(),label:U.Ry()}),preview:U.Ry().nullable()}).nullable()}).nullable(),module:U.Z_(),label:U.Ry().shape((0,O.Z)({},f,U.Z_().required())),description:U.Ry().shape((0,O.Z)({},f,U.Z_())).nullable(),endpoint:U.Z_().required(),libraries:U.IX(U.Z_()).nullable(),trees:U.IX(U.Z_()).nullable()});return(0,I.jsxs)(I.Fragment,{children:[(null===a||void 0===a?void 0:a.extensions.code)===z.Z.PERMISSION_ERROR&&(0,I.jsx)(F.Z,{negative:!0,children:(0,I.jsxs)(F.Z.Header,{children:[(0,I.jsx)(E.Z,{name:"ban"})," ",a.message,(0,I.jsx)(E.Z,{"aria-label":"ban"})," ",a.message]})}),(0,I.jsx)(D.J9,{initialValues:g,onSubmit:function(n){l(n)},validateOnChange:!0,validationSchema:C,children:function(n){var e,i,l,a,r=n.handleSubmit,s=n.handleBlur,d=n.setFieldValue,c=n.errors,p=n.values,b=n.touched,h=n.submitForm,g=function(n,e){j(n,e);var i=e.name,l=e.value,a=i.split("."),r=(0,x.Z)(a,2),t=r[0],o=r[1];Z&&"label"===t&&o===f&&d("id",(0,V.GV)(l))},j=function(){var n=(0,T.Z)(q().mark((function n(e,i){var l,a,r;return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l="checkbox"===i.type,a=l?i.checked:i.value,r=i.name,n.next=5,d(r,a);case 5:case"end":return n.stop()}}),n)})));return function(e,i){return n.apply(this,arguments)}}(),w=function(){var n=(0,T.Z)(q().mark((function n(e,i){var l;return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=i.checked,n.next=3,d("libraries",l?null:[]);case 3:Z||h();case 4:case"end":return n.stop()}}),n)})));return function(e,i){return n.apply(this,arguments)}}(),C=function(){var n=(0,T.Z)(q().mark((function n(e,i){var l;return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=i.checked,n.next=3,d("trees",l?null:[]);case 3:Z||h();case 4:case"end":return n.stop()}}),n)})));return function(e,i){return n.apply(this,arguments)}}(),_=function(){var n=(0,T.Z)(q().mark((function n(e,i){return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j(e,i);case 2:Z||h();case 3:case"end":return n.stop()}}),n)})));return function(e,i){return n.apply(this,arguments)}}(),k=function(){var n=(0,T.Z)(q().mark((function n(e){return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:_(null,{name:"icon",value:{whoAmI:e}});case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),S=function(n){return(0,V.zQ)(n,b,y||{},c)},A=function(n){Z?s(n):h()},P=function(n){"Enter"===n.key&&h()};return(0,I.jsxs)(on,{onSubmit:function(){return r()},"aria-label":"infos-form",isNewApp:Z,children:[(0,I.jsxs)(sn,{children:[(0,I.jsxs)(L.Z.Group,{grouped:!0,children:[(0,I.jsx)("label",{children:o("admin.label")}),v.map((function(n){var e,i;return(0,I.jsx)(H.Z,{error:S("label.".concat(n)),children:(0,I.jsx)(L.Z.Input,{required:n===f,label:n,width:"4",name:"label.".concat(n),"aria-label":"label.".concat(n),disabled:m,onChange:g,onBlur:A,onKeyPress:P,value:null!==(e=null===(i=p.label)||void 0===i?void 0:i[n])&&void 0!==e?e:""})},n)}))]}),(0,I.jsxs)(L.Z.Group,{grouped:!0,children:[(0,I.jsx)("label",{children:o("admin.description")}),v.map((function(n){var e,i;return(0,I.jsx)(H.Z,{error:S("description.".concat(n)),children:(0,I.jsx)(L.Z.Input,{label:n,value:null!==(e=null===(i=p.description)||void 0===i?void 0:i[n])&&void 0!==e?e:"",width:"4",name:"description.".concat(n),"aria-label":"description.".concat(n),disabled:m,onChange:j,onBlur:A,onKeyPress:P})},n)}))]}),(0,I.jsx)(H.Z,{error:S("id"),children:(0,I.jsx)(L.Z.Input,{required:!0,label:o("admin.id"),width:"4",disabled:!Z||m,name:"id","aria-label":"id",onChange:j,onBlur:A,value:p.id})}),(0,I.jsx)(H.Z,{error:S("type"),children:(0,I.jsx)(L.Z.Select,{required:!0,label:o("applications.type"),width:"4",disabled:!Z||m,name:"type","aria-label":"type",onChange:_,options:Object.keys(N.vQ).map((function(n){return{text:o("applications.types."+n),value:n}})),value:p.type})}),p.type===N.vQ.internal&&(0,I.jsx)(H.Z,{error:S("module"),children:(0,I.jsx)(rn,{required:!0,label:o("applications.module"),placeholder:o("applications.select_module"),fluid:!0,selection:!0,width:"4",disabled:m,name:"module","aria-label":"id",onChange:_,onBlur:A,value:p.module})}),(0,I.jsx)(H.Z,{error:S("endpoint"),children:(0,I.jsx)(L.Z.Input,{required:!0,label:o("applications.endpoint"),width:"4",disabled:m,name:"endpoint","aria-label":"endpoint",onChange:_,onBlur:A,value:p.endpoint})}),p.type===N.vQ.internal&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:"field",children:[(0,I.jsx)("label",{children:o("applications.libraries")}),(0,I.jsx)(H.Z,{error:S("libraries"),children:(0,I.jsx)(B.Z,{placeholder:o("applications.all_libraries"),fluid:!0,selection:!0,multiple:!0,width:"4",disabled:m||null===p.libraries,name:"libraries","aria-label":"id",onChange:_,onBlur:A,value:null!==(e=p.libraries)&&void 0!==e?e:[]})}),(0,I.jsx)(M.Z,{toggle:!0,label:o("applications.no_library"),name:"no_libraries",onChange:w,checked:null===p.libraries,disabled:m,"aria-label":"no_libraries"})]}),(0,I.jsxs)("div",{className:"field",children:[(0,I.jsx)("label",{children:o("applications.trees")}),(0,I.jsx)(H.Z,{error:S("trees"),children:(0,I.jsx)(Q.Z,{placeholder:o("applications.all_trees"),fluid:!0,selection:!0,multiple:!0,width:"4",disabled:m||null===p.trees,name:"trees","aria-label":"id",onChange:_,onBlur:A,value:null!==(i=p.trees)&&void 0!==i?i:[]})}),(0,I.jsx)(M.Z,{toggle:!0,label:o("applications.no_tree"),name:"no_libraries",onChange:C,checked:null===p.trees,disabled:m,"aria-label":"no_trees"})]}),(0,I.jsx)(H.Z,{error:S("icon.whoAmI"),children:(0,I.jsx)(X.Z,{onChange:k,value:null!==(l=null===(a=p.icon)||void 0===a?void 0:a.whoAmI)&&void 0!==l?l:null,label:o("applications.icon")})})]})]}),!u&&Z&&(0,I.jsxs)(dn,{children:[Z&&t&&(0,I.jsx)(un,{children:o("applications.install_pending")}),(0,I.jsxs)(L.Z.Button,{type:"submit",primary:!0,icon:!0,loading:t,"data-test-id":"attribute-infos-submit-btn",style:{float:"right"},labelPosition:"left",children:[(0,I.jsx)(E.Z,{name:"save outline"}),o("admin.submit")]})]})]})}})]})},pn=cn;var vn,fn,mn,bn,hn=function(){var n,e=(0,t.useApolloClient)(),i=c().application,l=(0,A.k6)(),a=!i,r=(0,t.useMutation)($,{onError:function(){},onCompleted:function(n){a&&l.push("/applications/edit/".concat(n.saveApplication.id))},update:function(n){a&&n.evict({fieldName:"applications"})}}),o=(0,x.Z)(r,2),s=o[0],d=o[1],u=d.error,p=d.loading,v=function(){var n=(0,T.Z)(q().mark((function n(e){var i,l;return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l={application:{id:e.id,label:e.label,description:e.description,module:e.module,endpoint:e.endpoint,libraries:e.libraries,trees:e.trees,icon:null!==(i=e.icon)&&void 0!==i&&i.whoAmI?{libraryId:e.icon.whoAmI.library.id,recordId:e.icon.whoAmI.id}:null}},n.next=3,s({variables:l});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),f=function(){var n=(0,T.Z)(q().mark((function n(i){var l,a,r,t;return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i){n.next=2;break}return n.abrupt("return",!0);case 2:return n.prev=2,n.next=5,e.query({query:b,fetchPolicy:"no-cache",variables:{id:i}});case 5:return t=n.sent,n.abrupt("return",!(null!==t&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(a=l.applications)&&void 0!==a&&null!==(r=a.list)&&void 0!==r&&r.length));case 9:return n.prev=9,n.t0=n.catch(2),n.abrupt("return",!0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}(),m=null!==u&&void 0!==u&&null!==(n=u.graphQLErrors)&&void 0!==n&&n.length?u.graphQLErrors[0]:null;return(0,I.jsx)(pn,{onSubmitInfos:v,onCheckIdIsUnique:f,loading:p,errors:m})},Zn=hn,xn=(0,v.gql)(vn||(vn=(0,r.Z)(["\n    ","\n    subscription APPLICATION_EVENTS($filters: ApplicationEventFiltersInput) {\n        applicationEvent(filters: $filters) {\n            type\n            application {\n                ...ApplicationDetails\n            }\n        }\n    }\n"])),m.i),gn=function(n){return(0,t.useSubscription)(xn,{variables:{filters:{applicationId:n}},onSubscriptionData:function(n){var e,i,l,a,r=n.client,t=n.subscriptionData;if((null===t||void 0===t||null===(e=t.data)||void 0===e||null===(i=e.applicationEvent)||void 0===i?void 0:i.type)===N.jM.SAVE&&null!==t&&void 0!==t&&null!==(l=t.data)&&void 0!==l&&null!==(a=l.applicationEvent)&&void 0!==a&&a.application){var o=r.cache.identify(t.data.applicationEvent.application),s=r.readFragment({id:o,fragment:m.i}),d=(0,j.Z)((0,j.Z)({},s),{},{install:t.data.applicationEvent.application.install});r.writeFragment({id:o,data:d,fragment:m.i})}}})},jn=(0,v.gql)(fn||(fn=(0,r.Z)(["\n    mutation INSTALL_APPLICATION($id: ID!) {\n        installApplication(id: $id)\n    }\n"]))),yn=i(75891),In=i(85031),wn=i(37256),Cn=i(92042),_n=(0,Z.ZP)(wn.Z)(mn||(mn=(0,r.Z)(["\n    font-family: Monaco, Menlo, Ubuntu Mono, Consolas, source-code-pro, monospace;\n    white-space: pre-wrap;\n"]))),kn=(0,Z.ZP)(P.Z)(bn||(bn=(0,r.Z)(["\n    display: flex;\n    justify-content: space-between;\n    align-content: center;\n    align-items: center;\n"])));var Sn=function(n){var e,i,l,a,r=n.onInstall,t=n.loading,o=c().application,s=(0,h.$G)().t,d=(e={},(0,O.Z)(e,N.iT.NONE,(0,I.jsx)(E.Z,{name:"question circle outline",color:"grey"})),(0,O.Z)(e,N.iT.RUNNING,(0,I.jsx)(E.Z,{name:"play circle outline",color:"orange"})),(0,O.Z)(e,N.iT.SUCCESS,(0,I.jsx)(E.Z,{name:"check circle outline",color:"green"})),(0,O.Z)(e,N.iT.ERROR,(0,I.jsx)(E.Z,{name:"times circle outline",color:"red"})),e),u=null!==(i=null===o||void 0===o||null===(l=o.install)||void 0===l?void 0:l.status)&&void 0!==i?i:N.iT.NONE;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(kn,{size:"small",children:[(0,I.jsxs)("div",{children:[s("applications.status_label"),": ",s("applications.statuses.".concat(u))," ",d[u]]}),(0,I.jsxs)(Cn.Z,{primary:!0,icon:!0,loading:t,labelPosition:"left",onClick:function(){return r()},children:[(0,I.jsx)(E.Z,{name:"redo alternate"}),s("applications.reinstall")]})]}),!t&&(0,I.jsx)(_n,{inverted:!0,children:null===o||void 0===o||null===(a=o.install)||void 0===a?void 0:a.lastCallResult})]})};var An,Pn=function(){var n=(0,h.$G)().t,e=c().application,i=(0,yn.I0)();gn(e.id);var l=(0,t.useMutation)(jn,{variables:{id:e.id},onCompleted:function(){i((0,In.Hz)({type:In.Q7.SUCCESS,title:n("applications.install_request_success"),icon:"clock"}))}}),a=(0,x.Z)(l,2),r=a[0],o=a[1].loading;return(0,I.jsx)(Sn,{onInstall:function(){r()},loading:o})},En=i(90930),Nn=Z.ZP.div(An||(An=(0,r.Z)(["\n    display: grid;\n    grid-template-rows: auto;\n"])));var Tn,Rn=function(){var n=c(),e=n.application,i=n.readonly;return(0,I.jsx)(Nn,{children:(0,I.jsx)(En.Z,{type:N.r3.application,applyTo:e.id,readOnly:i})})},qn=i(8426),$n=(i(61202),Z.ZP.div(Tn||(Tn=(0,r.Z)(["\n    .jsoneditor {\n        border: none;\n    }\n\n    .jsoneditor-menu {\n        background-color: #ddd;\n        border-color: #ddd;\n\n        > button {\n            background-color: #000;\n            filter: invert(100%);\n            opacity: 0.5;\n        }\n\n        .jsoneditor-modes {\n            color: #000;\n        }\n\n        .jsoneditor-search {\n            .jsoneditor-results {\n                color: #000;\n            }\n\n            .jsoneditor-frame {\n                background: none;\n\n                input {\n                    margin: 0 0.5em;\n                    border-radius: 3px;\n                    height: 100%;\n                }\n\n                button {\n                    filter: invert(100%);\n                    opacity: 0.5;\n                }\n            }\n        }\n    }\n"]))));var On=function(){var n,e=c(),i=e.application,l=e.readonly,a=(0,t.useMutation)($,{onError:function(){}}),r=(0,x.Z)(a,2),o=r[0],s=r[1];return s.error,s.loading,(0,I.jsx)($n,{children:(0,I.jsx)(qn.A,{mode:l?"view":"tree",value:null!==(n=null===i||void 0===i?void 0:i.settings)&&void 0!==n?n:"",navigationBar:!1,statusBar:!1,onChange:function(n){var e={application:{id:i.id,settings:n}};o({variables:e})},allowedModes:l?[]:["code","tree"]})})};var Gn,Bn=function(){var n,e=(0,h.$G)().t,i=c().application,l=(0,S.Z)().lang,a=!i,r=(0,A.TH)(),t=(0,A.k6)(),o=r.hash.replace("#",""),s=[{key:"infos",menuItem:e("applications.information"),displayCondition:!0,render:function(){return(0,I.jsx)(y.Z.Pane,{className:"grow",children:(0,I.jsx)(Zn,{})},"info")}},{key:"permissions",menuItem:e("admin.permissions"),displayCondition:!a,render:function(){return(0,I.jsx)(y.Z.Pane,{className:"",style:{display:"grid"},children:(0,I.jsx)(Rn,{})},"permissions")}},{key:"settings",menuItem:e("applications.settings"),displayCondition:!a,render:function(){return(0,I.jsx)(y.Z.Pane,{style:{padding:0},children:(0,I.jsx)(On,{})},"settings")}},{key:"install",menuItem:e("applications.install"),displayCondition:!a&&i.type===N.vQ.internal,render:function(){return(0,I.jsx)(y.Z.Pane,{className:"",children:(0,I.jsx)(Pn,{})},"install")}}].filter((function(n){return n.displayCondition})),u=(0,d.useState)(o?s.findIndex((function(n){return o===n.key})):0),p=(0,x.Z)(u,2),v=p[0],f=p[1],m=null!==i&&void 0!==i&&i.label?(0,g.a0)(i.label,l):e("applications.new"),b=!a&&(null===i||void 0===i||null===(n=i.install)||void 0===n?void 0:n.status)===N.iT.SUCCESS;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(P.Z,{children:[(0,I.jsx)(P.Z.Content,{children:m}),b&&(0,I.jsxs)(P.Z.Subheader,{as:"a",href:i.url,children:[(0,I.jsx)(E.Z,{name:"external alternate"}),e("applications.open_application")]})]}),(0,I.jsx)(k,{menu:{secondary:!0,pointing:!0},panes:s,onTabChange:function(n,e){e.panes&&void 0!==e.activeIndex&&(f(Number(e.activeIndex.toString())),t.replace("#".concat(e.panes[e.activeIndex].key)))},activeIndex:v})]})},Qn=Z.ZP.div(Gn||(Gn=(0,r.Z)(["\n    display: grid;\n    grid-template-rows: auto 1fr;\n"])));var Dn=function(n){var e,i,l,a,r,d=n.match,u=(0,h.$G)().t,c=null!==(e=null===(i=d.params)||void 0===i?void 0:i.id)&&void 0!==e?e:null,v=!c,f=(0,t.useQuery)(b,{variables:{id:c},skip:v}),m=f.loading,Z=f.error,x=f.data;if(m)return(0,I.jsx)(s.Z,{});if(Z)return(0,I.jsx)(o.Z,{message:Z.message});if(!v&&(null===x||void 0===x||null===(l=x.applications)||void 0===l||!l.list.length))return(0,I.jsx)(o.Z,{message:u("applications.not_found")});var g=null===x||void 0===x||null===(a=x.applications)||void 0===a?void 0:a.list[0],j="undefined"!==typeof(null===g||void 0===g||null===(r=g.permissions)||void 0===r?void 0:r.admin_application)&&!g.permissions.admin_application;return(0,I.jsx)(Qn,{children:(0,I.jsx)(p.Provider,{value:{application:null!==g&&void 0!==g?g:null,readonly:j},children:(0,I.jsx)(Bn,{})})})}},45611:function(n,e,i){i.d(e,{Z:function(){return f}});var l=i(33028),a=i(80688),r=(i(54681),i(74790)),t=i(59740),o=i(5168),s=i(74280),d=i(71446),u=i(57450),c=["loading","libraries"],p=function(n){n.loading;var e=n.libraries,i=(0,t.Z)(n,c),a=(0,s.Z)().lang,r=e?e.map((function(n){return{key:n.id,value:n.id,text:(0,d.dX)(n.label,a)}})):[];return delete i.t,delete i.tReady,delete i.defaultNS,delete i.i18nOptions,delete i.reportNS,(0,u.jsx)(o.Z.Dropdown,(0,l.Z)((0,l.Z)({},i),{},{search:!0,options:r}))};p.defaultProps={loading:!1,libraries:[]};var v=p;var f=function(n){var e=(0,a.useQuery)(r.c),i=e.loading,t=e.data;return(0,u.jsx)(v,(0,l.Z)((0,l.Z)({},n),{},{loading:i,libraries:t&&t.libraries?t.libraries.list:null}))}},36770:function(n,e,i){i.d(e,{Z:function(){return c}});var l=i(80688),a=i(74790),r=(i(54681),i(70663)),t=i(52987),o=i(43157),s=i(64449),d=i(45871),u=i(57450);var c=function(n){var e,i,c=n.label,p=n.value,v=n.onChange,f=n.disabled,m=(0,r.$G)().t,b=(0,l.useQuery)(a.c,{variables:{behavior:[t.mU.files]}}),h=b.loading,Z=b.error,x=b.data;if(h)return(0,u.jsx)(s.Z,{});if(Z)return(0,u.jsx)(o.Z,{message:Z.message});var g=null!==(e=null===x||void 0===x||null===(i=x.libraries)||void 0===i?void 0:i.list)&&void 0!==e?e:[];return g.length?(0,u.jsx)(d.Z,{label:c,value:p,onChange:v,disabled:f,libraries:g.map((function(n){return n.id}))}):(0,u.jsx)(o.Z,{message:m("file_selector.no_files_libraries")})}},45871:function(n,e,i){i.d(e,{Z:function(){return b}});var l,a=i(2867),r=i(71171),t=i(73377),o=i(19046),s=i(54681),d=i(70663),u=i(92042),c=i(55152),p=i(5918),v=i(37893),f=i(57450),m=v.ZP.div(l||(l=(0,r.Z)(["\n    display: flex;\n    height: 3rem;\n\n    && .buttons {\n        display: none;\n    }\n\n    &:hover .buttons {\n        display: block;\n    }\n\n    > * {\n        margin-right: 1em;\n    }\n"])));var b=function(n){var e=n.onChange,i=n.label,l=n.value,r=n.disabled,v=n.libraries,b=n.required,h=void 0!==b&&b,Z=(0,d.$G)().t,x=s.useState(!1),g=(0,a.Z)(x,2),j=g[0],y=g[1],I=s.useState(!1),w=(0,a.Z)(I,2),C=w[0],_=w[1],k=function(){return _(!1)},S=function(){y(!0)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("label",{children:i}),(0,f.jsxs)(m,{children:[l&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.Z,{record:l}),!r&&(0,f.jsxs)(u.Z.Group,{basic:!0,children:[(0,f.jsx)(u.Z,{type:"button",icon:!0,onClick:S,title:"exchange","aria-label":"exchange",name:"exchange",children:(0,f.jsx)(c.Z,{name:"exchange"})}),!h&&(0,f.jsx)(u.Z,{type:"button",icon:!0,onClick:function(){return _(!0)},"aria-label":"delete",children:(0,f.jsx)(c.Z,{name:"close"})})]})]}),!l&&(0,f.jsxs)(u.Z,{type:"button",icon:!0,labelPosition:"left",onClick:S,children:[(0,f.jsx)(c.Z,{name:"search"}),Z("record_selector.select")]})]}),j&&(0,f.jsx)(t.Z,{library:v,open:j,onClose:function(){return y(!1)},onSelect:function(n){e(n),y(!1)}}),C&&(0,f.jsx)(p.Z,{open:C,onCancel:k,onConfirm:function(){e(null),k()},content:Z("record_selector.delete_confirm"),confirmButton:Z("admin.submit"),cancelButton:Z("admin.cancel")})]})}},46389:function(n,e,i){i.d(e,{Z:function(){return f}});var l=i(33028),a=i(59740),r=i(80688),t=(i(54681),i(72335)),o=i(5168),s=i(74280),d=i(71446),u=i(57450),c=["trees"],p=function(n){var e=n.trees,i=(0,a.Z)(n,c),r=(0,s.Z)().lang,t=e?e.map((function(n){return{key:n.id,value:n.id,text:(0,d.dX)(n.label,r)}})):[];return delete i.t,delete i.tReady,delete i.defaultNS,delete i.i18nOptions,delete i.reportNS,(0,u.jsx)(o.Z.Dropdown,(0,l.Z)((0,l.Z)({},i),{},{search:!0,options:t}))},v=["filters"];var f=function(n){var e=n.filters,i=(0,a.Z)(n,v),o=(0,r.useQuery)(t.u,{variables:e}),s=o.loading,d=o.data;return(0,u.jsx)(p,(0,l.Z)((0,l.Z)({},i),{},{loading:s,trees:d&&d.trees?d.trees.list:[]}))}},72335:function(n,e,i){i.d(e,{T:function(){return t},u:function(){return o}});var l,a=i(71171),r=i(42737),t="GET_TREES",o=i.n(r)()(l||(l=(0,a.Z)(["\n    query GET_TREES($id: ID, $label: String, $system: Boolean) {\n        trees(filters: {id: $id, label: $label, system: $system}) {\n            totalCount\n            list {\n                id\n                label\n                system\n                behavior\n                libraries {\n                    library {\n                        id\n                        label\n                    }\n                    settings {\n                        allowMultiplePositions\n                        allowedAtRoot\n                        allowedChildren\n                    }\n                }\n            }\n        }\n    }\n"])))}}]);
//# sourceMappingURL=47.b05396ed.chunk.js.map