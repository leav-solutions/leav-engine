import{u as e,r as s,j as i}from"./useTranslation-e596755c.js";import{ad as r}from"./RecordCard-cc8b414d.js";import{u as a,L as t}from"./LibraryItemsList-344d0936.js";import{a as l,u as o,b as n,c as d,W as p,l as c,I as m,s as b,d as u,e as j,E as f,f as y}from"./index-ba602e11.js";import"./ImportReducerContext-32a848c6.js";import"./utils-e6894fde.js";import"./styled-components.browser.esm-f2eded25.js";import"./index-4c873b97.js";import"./asyncToGenerator-2132afe6.js";import"./progress-1d8d10a8.js";import"./index-b8ef5a18.js";import"./index-275ce878.js";import"./index-39382eca.js";function v({library:v}){var x,g,R;const{lang:h}=r(),{t:I}=e(),E=l(),L=o(),[q,_]=n(),{activePanel:T,selection:k}=d((e=>e)),{loading:A,data:C,error:F}=a({library:v}),M=null==(g=null==(x=null==C?void 0:C.libraries)?void 0:x.list[0])?void 0:g.permissions.access_library;return s.useEffect((()=>{var e;if(A||F||!(null==(e=null==C?void 0:C.libraries)?void 0:e.list.length)||T!==p.LIBRARY||!M)return;const s=C.libraries.list[0],i=c(s.label,h);if(v!==(null==q?void 0:q.id)){const{query:e,type:r,filter:a,searchableFields:t}=s.gqlNames,{attributes:l}=s;_({id:v,name:i,filter:a,behavior:s.behavior,attributes:l,gql:{searchableFields:t,query:e,type:r},trees:s.linkedTrees,permissions:s.permissions})}const r={content:I("info.active-lib",{lib:i,appLabel:c(E.currentApp.label,h),interpolation:{escapeValue:!1}}),type:m.basic};L(b(r))}),[q,C,L,F,h,v,A,I,_,T,M]),s.useEffect((()=>{L(u({...k.selection,selected:k.selection.selected.filter((e=>e.library===v))}))}),[]),A?i.jsx(j,{}):F?i.jsx(f,{message:F.message}):(null==(R=null==C?void 0:C.libraries)?void 0:R.list.length)?M?i.jsx(t,{selectionMode:!1,library:C.libraries.list[0]},v):i.jsx(f,{type:y.PERMISSION_ERROR}):i.jsx(f,{message:I("lib_detail.not_found",{libraryId:v})})}export{v as default};
