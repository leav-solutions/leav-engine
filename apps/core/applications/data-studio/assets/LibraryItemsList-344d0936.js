import{r as e,f as t,e as n,a as r,_ as i,b as o,d as a,c as l,j as s,u as c,g as u,h as d}from"./useTranslation-e596755c.js";import{D as p,P as f,g as v,h as m,i as g,r as h,j as b,k as y,R as x,m as w,n as E,o as S,p as C,q as I,t as k,v as R,w as _,x as T,y as j,z as A,A as O,l as P,B as N,C as D,F as L,_ as $,G as M,H as B,J as V,K as F,M as z,N as H,O as G,Q as U,S as W,U as q,E as Y,V as X,X as K,Y as Q,c as Z,Z as J,f as ee,e as te,$ as ne,a0 as re,a1 as ie,a2 as oe,a3 as ae,a4 as le,a5 as se,a6 as ce,a7 as ue,a8 as de,a9 as pe,aa as fe,ab as ve,u as me,ac as ge,I as he,ad as be,a as ye,ae as xe,af as we,ag as Ee,ah as Se,ai as Ce,aj as Ie,ak as ke,al as Re,am as _e,an as Te,ao as je,ap as Ae,aq as Oe,ar as Pe,as as Ne,d as De,b as Le,at as $e,au as Me,av as Be,aw as Ve,ax as Fe,ay as ze,az as He,aA as Ge,aB as Ue,aC as We,aD as qe,aE as Ye,aF as Xe,aG as Ke,aH as Qe,aI as Ze,aJ as Je,aK as et,aL as tt,aM as nt,aN as rt,aO as it,aP as ot,aQ as at,aR as lt,aS as st,aT as ct,aU as ut,aV as dt,aW as pt,aX as ft,aY as vt,aZ as mt,a_ as gt}from"./index-ba602e11.js";import{A as ht,_ as bt,b as yt,g as xt,m as wt,r as Et,o as St,H as Ct,d as It,c as kt,p as Rt,t as _t,S as Tt,G as jt,n as At,e as Ot,h as Pt,f as Nt,az as Dt,R as Lt,T as $t,F as Mt,ba as Bt,bb as Vt,O as Ft,P as zt,V as Ht,M as Gt,I as Ut,bc as Wt,bd as qt,be as Yt,bf as Xt,B as Kt,bg as Qt,K as Zt,L as Jt,Z as en,k as tn,v as nn,bh as rn}from"./ImportReducerContext-32a848c6.js";import{a6 as on,a8 as an,af as ln,ag as sn,a7 as cn,ap as un,r as dn,aq as pn,ar as fn,as as vn,E as mn,J as gn,P as hn,R as bn,n as yn,x as xn,ad as wn,y as En,ab as Sn,at as Cn,au as In,av as kn,L as Rn,a0 as _n,aw as Tn,M as jn,O as An,ax as On,a2 as Pn,U as Nn,W as Dn,a3 as Ln,ay as $n,az as Mn,aA as Bn,ak as Vn,aB as Fn,ae as zn,aC as Hn,aD as Gn,a9 as Un,X as Wn,Y as qn,Z as Yn,$ as Xn,aE as Kn,aF as Qn,aG as Zn,aH as Jn,aa as er,ac as tr,aI as nr,aJ as rr,aK as ir,aL as or,a5 as ar,aM as lr,ah as sr,aN as cr,aO as ur,aP as dr,aQ as pr,aR as fr,aS as vr,aT as mr}from"./RecordCard-cc8b414d.js";import{l as gr,k as hr,ar as br,at as yr,_ as xr,h as wr,j as Er,ag as Sr,aD as Cr,a as Ir,C as kr,c as Rr,az as _r,d as Tr,e as jr,aE as Ar,aF as Or,a7 as Pr,aG as Nr,aH as Dr,aI as Lr,T as $r,t as Mr,S as Br,aJ as Vr,aK as Fr,aL as zr,aM as Hr,aN as Gr,a8 as Ur,o as Wr,X as qr,Q as Yr,aO as Xr,w as Kr,v as Qr,aP as Zr,aQ as Jr,aR as ei,aS as ti,aT as ni,aU as ri,aV as ii}from"./utils-e6894fde.js";import{h as oi,s as ai}from"./styled-components.browser.esm-f2eded25.js";import{T as li,P as si,S as ci}from"./index-4c873b97.js";import{D as ui,a as di,m as pi}from"./progress-1d8d10a8.js";import{U as fi,I as vi}from"./index-b8ef5a18.js";import{A as mi}from"./index-275ce878.js";import{R as gi}from"./index-39382eca.js";const hi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zM464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm0 400H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z"}}]},name:"appstore",theme:"filled"};var bi=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:hi}))};bi.displayName="AppstoreFilled";const yi=e.forwardRef(bi);const xi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855 160.1l-189.2 23.5c-6.6.8-9.3 8.8-4.7 13.5l54.7 54.7-153.5 153.5a8.03 8.03 0 000 11.3l45.1 45.1c3.1 3.1 8.2 3.1 11.3 0l153.6-153.6 54.7 54.7a7.94 7.94 0 0013.5-4.7L863.9 169a7.9 7.9 0 00-8.9-8.9zM416.6 562.3a8.03 8.03 0 00-11.3 0L251.8 715.9l-54.7-54.7a7.94 7.94 0 00-13.5 4.7L160.1 855c-.6 5.2 3.7 9.5 8.9 8.9l189.2-23.5c6.6-.8 9.3-8.8 4.7-13.5l-54.7-54.7 153.6-153.6c3.1-3.1 3.1-8.2 0-11.3l-45.2-45z"}}]},name:"arrows-alt",theme:"outlined"};var wi=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:xi}))};wi.displayName="ArrowsAltOutlined";const Ei=e.forwardRef(wi);const Si={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"};var Ci=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Si}))};Ci.displayName="BranchesOutlined";const Ii=e.forwardRef(Ci);const ki={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M632 888H392c-4.4 0-8 3.6-8 8v32c0 17.7 14.3 32 32 32h192c17.7 0 32-14.3 32-32v-32c0-4.4-3.6-8-8-8zM512 64c-181.1 0-328 146.9-328 328 0 121.4 66 227.4 164 284.1V792c0 17.7 14.3 32 32 32h264c17.7 0 32-14.3 32-32V676.1c98-56.7 164-162.7 164-284.1 0-181.1-146.9-328-328-328zm127.9 549.8L604 634.6V752H420V634.6l-35.9-20.8C305.4 568.3 256 484.5 256 392c0-141.4 114.6-256 256-256s256 114.6 256 256c0 92.5-49.4 176.3-128.1 221.8z"}}]},name:"bulb",theme:"outlined"};var Ri=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:ki}))};Ri.displayName="BulbOutlined";const _i=e.forwardRef(Ri);const Ti={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:t}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:e}}]}},name:"check-circle",theme:"twotone"};var ji=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Ti}))};ji.displayName="CheckCircleTwoTone";const Ai=e.forwardRef(ji);const Oi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z"}}]},name:"expand",theme:"outlined"};var Pi=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Oi}))};Pi.displayName="ExpandOutlined";const Ni=e.forwardRef(Pi);const Di={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 757.4h-53.8c-4.2 0-7.7 3.5-7.7 7.7v61.8H197.1V197.1h629.8v61.8c0 4.2 3.5 7.7 7.7 7.7h53.8c4.2 0 7.7-3.4 7.7-7.7V158.7c0-17-13.7-30.7-30.7-30.7H158.7c-17 0-30.7 13.7-30.7 30.7v706.6c0 17 13.7 30.7 30.7 30.7h706.6c17 0 30.7-13.7 30.7-30.7V765.1c0-4.3-3.5-7.7-7.7-7.7zm18.6-251.7L765 393.7c-5.3-4.2-13-.4-13 6.3v76H438c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"export",theme:"outlined"};var Li=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Di}))};Li.displayName="ExportOutlined";const $i=e.forwardRef(Li);const Mi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};var Bi=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Mi}))};Bi.displayName="FileAddOutlined";const Vi=e.forwardRef(Bi);const Fi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"};var zi=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Fi}))};zi.displayName="FileTextOutlined";const Hi=e.forwardRef(zi);const Gi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};var Ui=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Gi}))};Ui.displayName="FilterOutlined";const Wi=e.forwardRef(Ui);const qi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"};var Yi=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:qi}))};Yi.displayName="FolderAddOutlined";const Xi=e.forwardRef(Yi);const Ki={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zM288 421a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm376 272h-48.1c-4.2 0-7.8-3.2-8.1-7.4C604 636.1 562.5 597 512 597s-92.1 39.1-95.8 88.6c-.3 4.2-3.9 7.4-8.1 7.4H360a8 8 0 01-8-8.4c4.4-84.3 74.5-151.6 160-151.6s155.6 67.3 160 151.6a8 8 0 01-8 8.4zm24-224a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"frown",theme:"filled"};var Qi=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Ki}))};Qi.displayName="FrownFilled";const Zi=e.forwardRef(Qi);const Ji={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M912 820.1V203.9c28-9.9 48-36.6 48-67.9 0-39.8-32.2-72-72-72-31.3 0-58 20-67.9 48H203.9C194 84 167.3 64 136 64c-39.8 0-72 32.2-72 72 0 31.3 20 58 48 67.9v616.2C84 830 64 856.7 64 888c0 39.8 32.2 72 72 72 31.3 0 58-20 67.9-48h616.2c9.9 28 36.6 48 67.9 48 39.8 0 72-32.2 72-72 0-31.3-20-58-48-67.9zM888 112c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 912c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-752c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm704 680H184V184h656v656zm48 72c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}},{tag:"path",attrs:{d:"M288 474h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64zm-56 420h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64z"}}]},name:"group",theme:"outlined"};var eo=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Ji}))};eo.displayName="GroupOutlined";const to=e.forwardRef(eo);const no={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M448 224a64 64 0 10128 0 64 64 0 10-128 0zm96 168h-64c-4.4 0-8 3.6-8 8v464c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V400c0-4.4-3.6-8-8-8z"}}]},name:"info",theme:"outlined"};var ro=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:no}))};ro.displayName="InfoOutlined";const io=e.forwardRef(ro);const oo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};var ao=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:oo}))};ao.displayName="MenuOutlined";const lo=e.forwardRef(ao);const so={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};var co=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:so}))};co.displayName="MoreOutlined";const uo=e.forwardRef(co);const po={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 394c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H400V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v236H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h228v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h164c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V394h164zM628 630H400V394h228v236z"}}]},name:"number",theme:"outlined"};var fo=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:po}))};fo.displayName="NumberOutlined";const vo=e.forwardRef(fo);const mo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};var go=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:mo}))};go.displayName="RedoOutlined";const ho=e.forwardRef(go);const bo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};var yo=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:bo}))};yo.displayName="RotateLeftOutlined";const xo=e.forwardRef(yo);const wo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};var Eo=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:wo}))};Eo.displayName="RotateRightOutlined";const So=e.forwardRef(Eo);const Co={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"};var Io=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Co}))};Io.displayName="SaveFilled";const ko=e.forwardRef(Io);const Ro={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};var _o=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Ro}))};_o.displayName="SettingOutlined";const To=e.forwardRef(_o);const jo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM416 702h-76V172c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v530h-76c-6.7 0-10.5 7.8-6.3 13l112 141.9a8 8 0 0012.6 0l112-141.9c4.1-5.2.4-13-6.3-13z"}}]},name:"sort-ascending",theme:"outlined"};var Ao=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:jo}))};Ao.displayName="SortAscendingOutlined";const Oo=e.forwardRef(Ao);const Po={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};var No=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Po}))};No.displayName="ZoomInOutlined";const Do=e.forwardRef(No);const Lo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};var $o=function(t,n){return e.createElement(ht,bt(bt({},t),{},{ref:n,icon:Lo}))};$o.displayName="ZoomOutOutlined";const Mo=e.forwardRef($o);var Bo=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Vo=t=>{const{prefixCls:n,separator:r="/",children:i,menu:o,overlay:a,dropdownProps:l}=t,s=Bo(t,["prefixCls","separator","children","menu","overlay","dropdownProps"]),{getPrefixCls:c}=e.useContext(yt),u=c("breadcrumb",n);let d;return d="href"in s?e.createElement("a",Object.assign({className:`${u}-link`},s),i):e.createElement("span",Object.assign({className:`${u}-link`},s),i),d=(n=>{if(o||a){const r=Object.assign({},l);return"overlay"in t&&(r.overlay=a),e.createElement(on,Object.assign({menu:o,placement:"bottom"},r),e.createElement("span",{className:`${u}-overlay-link`},n,e.createElement(an,null)))}return n})(d),null!=i?e.createElement("li",null,d,r&&e.createElement("span",{className:`${u}-separator`},r)):null};Vo.__ANT_BREADCRUMB_ITEM=!0;const Fo=Vo,zo=t=>{let{children:n}=t;const{getPrefixCls:r}=e.useContext(yt),i=r("breadcrumb");return e.createElement("li",{className:`${i}-separator`,"aria-hidden":"true"},n||"/")};zo.__ANT_BREADCRUMB_SEPARATOR=!0;const Ho=zo,Go=e=>{const{componentCls:t,iconCls:n}=e;return{[t]:Object.assign(Object.assign({},Et(e)),{color:e.breadcrumbBaseColor,fontSize:e.breadcrumbFontSize,[n]:{fontSize:e.breadcrumbIconFontSize},ol:{display:"flex",flexWrap:"wrap",margin:0,padding:0,listStyle:"none"},a:Object.assign({color:e.breadcrumbLinkColor,transition:`color ${e.motionDurationMid}`,padding:`0 ${e.paddingXXS}px`,borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",marginInline:-e.marginXXS,"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover}},St(e)),"li:last-child":{color:e.breadcrumbLastItemColor,[`& > ${t}-separator`]:{display:"none"}},[`${t}-separator`]:{marginInline:e.breadcrumbSeparatorMargin,color:e.breadcrumbSeparatorColor},[`${t}-link`]:{[`\n          > ${n} + span,\n          > ${n} + a\n        `]:{marginInlineStart:e.marginXXS}},[`${t}-overlay-link`]:{borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",padding:`0 ${e.paddingXXS}px`,marginInline:-e.marginXXS,[`> ${n}`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSizeIcon},"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover,a:{color:e.breadcrumbLinkColorHover}},a:{"&:hover":{backgroundColor:"transparent"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},Uo=xt("Breadcrumb",(e=>{const t=wt(e,{breadcrumbBaseColor:e.colorTextDescription,breadcrumbFontSize:e.fontSize,breadcrumbIconFontSize:e.fontSize,breadcrumbLinkColor:e.colorTextDescription,breadcrumbLinkColorHover:e.colorText,breadcrumbLastItemColor:e.colorText,breadcrumbSeparatorMargin:e.marginXS,breadcrumbSeparatorColor:e.colorTextDescription});return[Go(t)]}));var Wo=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function qo(t,n,r,i){const o=r.indexOf(t)===r.length-1,a=function(e,t){if(!e.breadcrumbName)return null;const n=Object.keys(t).join("|");return e.breadcrumbName.replace(new RegExp(`:(${n})`,"g"),((e,n)=>t[n]||e))}(t,n);return o?e.createElement("span",null,a):e.createElement("a",{href:`#/${i.join("/")}`},a)}const Yo=(e,t)=>(e=(e||"").replace(/^\//,""),Object.keys(t).forEach((n=>{e=e.replace(`:${n}`,t[n])})),e),Xo=(e,t,n)=>{const r=gr(e),i=Yo(t||"",n);return i&&r.push(i),r},Ko=t=>{var{prefixCls:n,separator:r="/",style:i,className:o,rootClassName:a,routes:l,children:s,itemRender:c=qo,params:u={}}=t,d=Wo(t,["prefixCls","separator","style","className","rootClassName","routes","children","itemRender","params"]);const{getPrefixCls:p,direction:f}=e.useContext(yt);let v;const m=p("breadcrumb",n),[g,h]=Uo(m);if(l&&l.length>0){const t=[];v=l.map((n=>{const i=Yo(n.path,u);let o;i&&t.push(i),n.children&&n.children.length&&(o=e.createElement(ln,{items:n.children.map((e=>({key:e.path||e.breadcrumbName,label:c(e,u,l,Xo(t,e.path,u))})))}));const a={separator:r};return o&&(a.overlay=o),e.createElement(Fo,Object.assign({},a,{key:i||n.breadcrumbName}),c(n,u,l,t))}))}else s&&(v=Ct(s).map(((e,t)=>e?It(e,{separator:r,key:t}):e)));const b=kt(m,{[`${m}-rtl`]:"rtl"===f},o,a,h);return g(e.createElement("nav",Object.assign({className:b,style:i},d),e.createElement("ol",null,v)))};Ko.Item=Fo,Ko.Separator=Ho;const Qo=Ko;var Zo=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Jo=t=>{var{prefixCls:n,className:r,hoverable:i=!0}=t,o=Zo(t,["prefixCls","className","hoverable"]);const{getPrefixCls:a}=e.useContext(yt),l=a("card",n),s=kt(`${l}-grid`,r,{[`${l}-grid-hoverable`]:i});return e.createElement("div",Object.assign({},o,{className:s}))},ea=e=>{const{antCls:t,componentCls:n,cardHeadHeight:r,cardPaddingBase:i,cardHeadTabsMarginBottom:o}=e;return Object.assign(Object.assign({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:r,marginBottom:-1,padding:`0 ${i}px`,color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,background:"transparent",borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorBorderSecondary}`,borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`},Rt()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":Object.assign(Object.assign({display:"inline-block",flex:1},_t),{[`\n          > ${n}-typography,\n          > ${n}-typography-edit-content\n        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${t}-tabs-top`]:{clear:"both",marginBottom:o,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorBorderSecondary}`}}})},ta=e=>{const{cardPaddingBase:t,colorBorderSecondary:n,cardShadow:r,lineWidth:i}=e;return{width:"33.33%",padding:t,border:0,borderRadius:0,boxShadow:`\n      ${i}px 0 0 0 ${n},\n      0 ${i}px 0 0 ${n},\n      ${i}px ${i}px 0 0 ${n},\n      ${i}px 0 0 0 ${n} inset,\n      0 ${i}px 0 0 ${n} inset;\n    `,transition:`all ${e.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:r}}},na=e=>{const{componentCls:t,iconCls:n,cardActionsLiMargin:r,cardActionsIconSize:i,colorBorderSecondary:o}=e;return Object.assign(Object.assign({margin:0,padding:0,listStyle:"none",background:e.colorBgContainer,borderTop:`${e.lineWidth}px ${e.lineType} ${o}`,display:"flex",borderRadius:`0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px `},Rt()),{"& > li":{margin:r,color:e.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:2*e.cardActionsIconSize,fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:`color ${e.motionDurationMid}`},[`a:not(${t}-btn), > ${n}`]:{display:"inline-block",width:"100%",color:e.colorTextDescription,lineHeight:e.fontSize*e.lineHeight+"px",transition:`color ${e.motionDurationMid}`,"&:hover":{color:e.colorPrimary}},[`> ${n}`]:{fontSize:i,lineHeight:i*e.lineHeight+"px"}},"&:not(:last-child)":{borderInlineEnd:`${e.lineWidth}px ${e.lineType} ${o}`}}})},ra=e=>Object.assign(Object.assign({margin:`-${e.marginXXS}px 0`,display:"flex"},Rt()),{"&-avatar":{paddingInlineEnd:e.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":Object.assign({color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG},_t),"&-description":{color:e.colorTextDescription}}),ia=e=>{const{componentCls:t,cardPaddingBase:n,colorFillAlter:r}=e;return{[`${t}-head`]:{padding:`0 ${n}px`,background:r,"&-title":{fontSize:e.fontSize}},[`${t}-body`]:{padding:`${e.padding}px ${n}px`}}},oa=e=>{const{componentCls:t}=e;return{overflow:"hidden",[`${t}-body`]:{userSelect:"none"}}},aa=e=>{const{componentCls:t,cardShadow:n,cardHeadPadding:r,colorBorderSecondary:i,boxShadowTertiary:o,cardPaddingBase:a}=e;return{[t]:Object.assign(Object.assign({},Et(e)),{position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,[`&:not(${t}-bordered)`]:{boxShadow:o},[`${t}-head`]:ea(e),[`${t}-extra`]:{marginInlineStart:"auto",color:"",fontWeight:"normal",fontSize:e.fontSize},[`${t}-body`]:Object.assign({padding:a,borderRadius:` 0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px`},Rt()),[`${t}-grid`]:ta(e),[`${t}-cover`]:{"> *":{display:"block",width:"100%"},img:{borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`}},[`${t}-actions`]:na(e),[`${t}-meta`]:ra(e)}),[`${t}-bordered`]:{border:`${e.lineWidth}px ${e.lineType} ${i}`,[`${t}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${t}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${e.motionDurationMid}, border-color ${e.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:n}},[`${t}-contain-grid`]:{[`${t}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${t}-loading) ${t}-body`]:{marginBlockStart:-e.lineWidth,marginInlineStart:-e.lineWidth,padding:0}},[`${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{paddingTop:r}}},[`${t}-type-inner`]:ia(e),[`${t}-loading`]:oa(e),[`${t}-rtl`]:{direction:"rtl"}}},la=e=>{const{componentCls:t,cardPaddingSM:n,cardHeadHeightSM:r}=e;return{[`${t}-small`]:{[`> ${t}-head`]:{minHeight:r,padding:`0 ${n}px`,fontSize:e.fontSize,[`> ${t}-head-wrapper`]:{[`> ${t}-extra`]:{fontSize:e.fontSize}}},[`> ${t}-body`]:{padding:n}},[`${t}-small${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{minHeight:r,paddingTop:0,display:"flex",alignItems:"center"}}}}},sa=xt("Card",(e=>{const t=wt(e,{cardShadow:e.boxShadowCard,cardHeadHeight:e.fontSizeLG*e.lineHeightLG+2*e.padding,cardHeadHeightSM:e.fontSize*e.lineHeight+2*e.paddingXS,cardHeadPadding:e.padding,cardPaddingBase:e.paddingLG,cardHeadTabsMarginBottom:-e.padding-e.lineWidth,cardActionsLiMargin:`${e.paddingSM}px 0`,cardActionsIconSize:e.fontSize,cardPaddingSM:12});return[aa(t),la(t)]}));var ca=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ua=e.forwardRef(((t,n)=>{const{getPrefixCls:r,direction:i}=e.useContext(yt),o=e.useContext(Tt),{prefixCls:a,className:l,rootClassName:s,extra:c,headStyle:u={},bodyStyle:d={},title:p,loading:f,bordered:v=!0,size:m,type:g,cover:h,actions:b,tabList:y,children:x,activeTabKey:w,defaultActiveTabKey:E,tabBarExtraContent:S,hoverable:C,tabProps:I={}}=t,k=ca(t,["prefixCls","className","rootClassName","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),R=r("card",a),[_,T]=sa(R),j=e.createElement(sn,{loading:!0,active:!0,paragraph:{rows:4},title:!1},x),A=void 0!==w,O=Object.assign(Object.assign({},I),{[A?"activeKey":"defaultActiveKey"]:A?w:E,tabBarExtraContent:S});let P;const N=y&&y.length?e.createElement(li,Object.assign({size:"large"},O,{className:`${R}-head-tabs`,onChange:e=>{var n;null===(n=t.onTabChange)||void 0===n||n.call(t,e)},items:y.map((e=>{var t;return{label:e.tab,key:e.key,disabled:null!==(t=e.disabled)&&void 0!==t&&t}}))})):null;(p||c||N)&&(P=e.createElement("div",{className:`${R}-head`,style:u},e.createElement("div",{className:`${R}-head-wrapper`},p&&e.createElement("div",{className:`${R}-head-title`},p),c&&e.createElement("div",{className:`${R}-extra`},c)),N));const D=h?e.createElement("div",{className:`${R}-cover`},h):null,L=e.createElement("div",{className:`${R}-body`,style:d},f?j:x),$=b&&b.length?e.createElement("ul",{className:`${R}-actions`},function(t){return t.map(((n,r)=>e.createElement("li",{style:{width:100/t.length+"%"},key:`action-${r}`},e.createElement("span",null,n))))}(b)):null,M=jt(k,["onTabChange"]),B=m||o,V=kt(R,{[`${R}-loading`]:f,[`${R}-bordered`]:v,[`${R}-hoverable`]:C,[`${R}-contain-grid`]:(()=>{let n;return e.Children.forEach(t.children,(e=>{e&&e.type&&e.type===Jo&&(n=!0)})),n})(),[`${R}-contain-tabs`]:y&&y.length,[`${R}-${B}`]:B,[`${R}-type-${g}`]:!!g,[`${R}-rtl`]:"rtl"===i},l,s,T);return _(e.createElement("div",Object.assign({ref:n},M,{className:V}),P,D,L,$))}));var da=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const pa=t=>{const{prefixCls:n,className:r,avatar:i,title:o,description:a}=t,l=da(t,["prefixCls","className","avatar","title","description"]),{getPrefixCls:s}=e.useContext(yt),c=s("card",n),u=kt(`${c}-meta`,r),d=i?e.createElement("div",{className:`${c}-meta-avatar`},i):null,p=o?e.createElement("div",{className:`${c}-meta-title`},o):null,f=a?e.createElement("div",{className:`${c}-meta-description`},a):null,v=p||f?e.createElement("div",{className:`${c}-meta-detail`},p,f):null;return e.createElement("div",Object.assign({},l,{className:u}),d,v)},fa=ua;fa.Grid=Jo,fa.Meta=pa;const va=fa;function ma(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[];return t.Children.forEach(e,(function(e){(null!=e||r.keepEmpty)&&(Array.isArray(e)?i=i.concat(ma(e)):n.isFragment(e)&&e.props?i=i.concat(ma(e.props.children,r)):i.push(e))})),i}function ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ga(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ga(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ba(t){var n=e.useRef();n.current=t;var r=e.useCallback((function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))}),[]);return r}var ya="undefined"!=typeof window&&window.document&&window.document.createElement?e.useLayoutEffect:e.useEffect,xa=function(t,n){var r=e.useRef(!0);ya((function(){if(!r.current)return t()}),n),ya((function(){return r.current=!1,function(){r.current=!0}}),[])};function wa(t){var n=e.useRef(!1),r=ha(e.useState(t),2),i=r[0],o=r[1];return e.useEffect((function(){return n.current=!1,function(){n.current=!0}}),[]),[i,function(e,t){t&&n.current||o(e)}]}function Ea(e){return void 0!==e}var Sa={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Sa.F1&&t<=Sa.F12)return!1;switch(t){case Sa.ALT:case Sa.CAPS_LOCK:case Sa.CONTEXT_MENU:case Sa.CTRL:case Sa.DOWN:case Sa.END:case Sa.ESC:case Sa.HOME:case Sa.INSERT:case Sa.LEFT:case Sa.MAC_FF_META:case Sa.META:case Sa.NUMLOCK:case Sa.NUM_CENTER:case Sa.PAGE_DOWN:case Sa.PAGE_UP:case Sa.PAUSE:case Sa.PRINT_SCREEN:case Sa.RIGHT:case Sa.SHIFT:case Sa.UP:case Sa.WIN_KEY:case Sa.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Sa.ZERO&&e<=Sa.NINE)return!0;if(e>=Sa.NUM_ZERO&&e<=Sa.NUM_MULTIPLY)return!0;if(e>=Sa.A&&e<=Sa.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case Sa.SPACE:case Sa.QUESTION_MARK:case Sa.NUM_PLUS:case Sa.NUM_MINUS:case Sa.NUM_PERIOD:case Sa.NUM_DIVISION:case Sa.SEMICOLON:case Sa.DASH:case Sa.EQUALS:case Sa.COMMA:case Sa.PERIOD:case Sa.SLASH:case Sa.APOSTROPHE:case Sa.SINGLE_QUOTE:case Sa.OPEN_SQUARE_BRACKET:case Sa.BACKSLASH:case Sa.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Ca=t.forwardRef((function(e,n){var o,a=e.prefixCls,l=e.forceRender,s=e.className,c=e.style,u=e.children,d=e.isActive,p=e.role,f=t.useState(d||l),v=r(f,2),m=v[0],g=v[1];return t.useEffect((function(){(l||d)&&g(!0)}),[l,d]),m?t.createElement("div",{ref:n,className:kt("".concat(a,"-content"),(o={},i(o,"".concat(a,"-content-active"),d),i(o,"".concat(a,"-content-inactive"),!d),o),s),style:c,role:p},t.createElement("div",{className:"".concat(a,"-content-box")},u)):null}));Ca.displayName="PanelContent";var Ia=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],ka=t.forwardRef((function(e,n){var r,o,a=e.showArrow,l=void 0===a||a,s=e.headerClass,c=e.isActive,u=e.onItemClick,d=e.forceRender,p=e.className,f=e.prefixCls,v=e.collapsible,m=e.accordion,g=e.panelKey,h=e.extra,b=e.header,y=e.expandIcon,x=e.openMotion,w=e.destroyInactivePanel,E=e.children,S=At(e,Ia),C="disabled"===v,I="header"===v,k="icon"===v,R=null!=h&&"boolean"!=typeof h,_=function(){null==u||u(g)},T="function"==typeof y?y(e):t.createElement("i",{className:"arrow"});T&&(T=t.createElement("div",{className:"".concat(f,"-expand-icon"),onClick:["header","icon"].includes(v)?_:void 0},T));var j=kt((i(r={},"".concat(f,"-item"),!0),i(r,"".concat(f,"-item-active"),c),i(r,"".concat(f,"-item-disabled"),C),r),p),A={className:kt((i(o={},"".concat(f,"-header"),!0),i(o,"headerClass",s),i(o,"".concat(f,"-header-collapsible-only"),I),i(o,"".concat(f,"-icon-collapsible-only"),k),o)),"aria-expanded":c,"aria-disabled":C,onKeyPress:function(e){"Enter"!==e.key&&e.keyCode!==Sa.ENTER&&e.which!==Sa.ENTER||_()}};return I||k||(A.onClick=_,A.role=m?"tab":"button",A.tabIndex=C?-1:0),t.createElement("div",Ot({},S,{ref:n,className:j}),t.createElement("div",A,l&&T,t.createElement("span",{className:"".concat(f,"-header-text"),onClick:"header"===v?_:void 0},b),R&&t.createElement("div",{className:"".concat(f,"-extra")},h)),t.createElement(hr,Ot({visible:c,leavedClassName:"".concat(f,"-content-hidden")},x,{forceRender:d,removeOnLeave:w}),(function(e,n){var r=e.className,i=e.style;return t.createElement(Ca,{ref:n,prefixCls:f,className:r,style:i,isActive:c,forceRender:d,role:m?"tabpanel":void 0},E)})))}));function Ra(e){var t=e;if(!Array.isArray(t)){var n=Pt(t);t="number"===n||"string"===n?[t]:[]}return t.map((function(e){return String(e)}))}var _a=t.forwardRef((function(e,n){var i,o,a,l,s,c,u,d,p,f,v,m,g,h,b,y=e.prefixCls,x=void 0===y?"rc-collapse":y,w=e.destroyInactivePanel,E=void 0!==w&&w,S=e.style,C=e.accordion,I=e.className,k=e.children,R=e.collapsible,_=e.openMotion,T=e.expandIcon,j=e.activeKey,A=e.defaultActiveKey,O=e.onChange,P=kt(x,I),N=(i=[],a=(o={value:j,onChange:function(e){return null==O?void 0:O(e)},defaultValue:A,postState:Ra}||{}).defaultValue,l=o.value,s=o.onChange,c=o.postState,u=ha(wa((function(){return Ea(l)?l:Ea(a)?"function"==typeof a?a():a:"function"==typeof i?i():i})),2),d=u[0],p=u[1],f=void 0!==l?l:d,v=c?c(f):f,m=ba(s),g=ha(wa([f]),2),h=g[0],b=g[1],xa((function(){var e=h[0];d!==e&&m(d,e)}),[h]),xa((function(){Ea(l)||p(l)}),[l]),[v,ba((function(e,t){p(e,t),b([f],t)}))]),D=r(N,2),L=D[0],$=D[1],M=ma(k).map((function(e,n){if(!e)return null;var r=e.key||String(n),i=e.props,o=i.header,a=i.headerClass,l=i.destroyInactivePanel,s=i.collapsible,c=i.onItemClick,u=!1;u=C?L[0]===r:L.indexOf(r)>-1;var d=null!=s?s:R,p={key:r,panelKey:r,header:o,headerClass:a,isActive:u,prefixCls:x,destroyInactivePanel:null!=l?l:E,openMotion:_,accordion:C,children:e.props.children,onItemClick:function(e){"disabled"!==d&&(!function(e){$((function(){return C?L[0]===e?[]:[e]:L.indexOf(e)>-1?L.filter((function(t){return t!==e})):[].concat(Nt(L),[e])}))}(e),null==c||c(e))},expandIcon:T,collapsible:d};return"string"==typeof e.type?e:(Object.keys(p).forEach((function(e){void 0===p[e]&&delete p[e]})),t.cloneElement(e,p))}));return t.createElement("div",{ref:n,className:P,style:S,role:C?"tablist":void 0},M)}));const Ta=Object.assign(_a,{Panel:ka});Ta.Panel;const ja=e.forwardRef(((t,n)=>{const{getPrefixCls:r}=e.useContext(yt),{prefixCls:i,className:o="",showArrow:a=!0}=t,l=r("collapse",i),s=kt({[`${l}-no-arrow`]:!a},o);return e.createElement(Ta.Panel,Object.assign({ref:n},t,{prefixCls:l,className:s}))})),Aa=e=>{const{componentCls:t,collapseContentBg:n,padding:r,collapseContentPaddingHorizontal:i,collapseHeaderBg:o,collapseHeaderPadding:a,collapseHeaderPaddingSM:l,collapseHeaderPaddingLG:s,collapsePanelBorderRadius:c,lineWidth:u,lineType:d,colorBorder:p,colorText:f,colorTextHeading:v,colorTextDisabled:m,fontSize:g,fontSizeLG:h,lineHeight:b,marginSM:y,paddingSM:x,paddingLG:w,motionDurationSlow:E,fontSizeIcon:S}=e,C=`${u}px ${d} ${p}`;return{[t]:Object.assign(Object.assign({},Et(e)),{backgroundColor:o,border:C,borderBottom:0,borderRadius:`${c}px`,"&-rtl":{direction:"rtl"},[`& > ${t}-item`]:{borderBottom:C,"&:last-child":{[`\n            &,\n            & > ${t}-header`]:{borderRadius:`0 0 ${c}px ${c}px`}},[`> ${t}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:a,color:v,lineHeight:b,cursor:"pointer",transition:`all ${E}, visibility 0s`,[`> ${t}-header-text`]:{flex:"auto"},"&:focus":{outline:"none"},[`${t}-expand-icon`]:{height:g*b,display:"flex",alignItems:"center",paddingInlineEnd:y},[`${t}-arrow`]:Object.assign(Object.assign({},Dt()),{fontSize:S,svg:{transition:`transform ${E}`}}),[`${t}-header-text`]:{marginInlineEnd:"auto"}},[`${t}-header-collapsible-only`]:{cursor:"default",[`${t}-header-text`]:{flex:"none",cursor:"pointer"}},[`${t}-icon-collapsible-only`]:{cursor:"default",[`${t}-expand-icon`]:{cursor:"pointer"}},[`&${t}-no-arrow`]:{[`> ${t}-header`]:{paddingInlineStart:x}}},[`${t}-content`]:{color:f,backgroundColor:n,borderTop:C,[`& > ${t}-content-box`]:{padding:`${r}px ${i}px`},"&-hidden":{display:"none"}},"&-small":{[`> ${t}-item`]:{[`> ${t}-header`]:{padding:l},[`> ${t}-content > ${t}-content-box`]:{padding:x}}},"&-large":{[`> ${t}-item`]:{fontSize:h,[`> ${t}-header`]:{padding:s,[`> ${t}-expand-icon`]:{height:h*b}},[`> ${t}-content > ${t}-content-box`]:{padding:w}}},[`${t}-item:last-child`]:{[`> ${t}-content`]:{borderRadius:`0 0 ${c}px ${c}px`}},[`& ${t}-item-disabled > ${t}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:m,cursor:"not-allowed"}},[`&${t}-icon-position-end`]:{[`& > ${t}-item`]:{[`> ${t}-header`]:{[`${t}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:y}}}}})}},Oa=e=>{const{componentCls:t}=e;return{[`${t}-rtl`]:{[`> ${t}-item > ${t}-header ${t}-arrow svg`]:{transform:"rotate(180deg)"}}}},Pa=e=>{const{componentCls:t,collapseHeaderBg:n,paddingXXS:r,colorBorder:i}=e;return{[`${t}-borderless`]:{backgroundColor:n,border:0,[`> ${t}-item`]:{borderBottom:`1px solid ${i}`},[`\n        > ${t}-item:last-child,\n        > ${t}-item:last-child ${t}-header\n      `]:{borderRadius:0},[`> ${t}-item:last-child`]:{borderBottom:0},[`> ${t}-item > ${t}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${t}-item > ${t}-content > ${t}-content-box`]:{paddingTop:r}}}},Na=e=>{const{componentCls:t,paddingSM:n}=e;return{[`${t}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${t}-item`]:{borderBottom:0,[`> ${t}-content`]:{backgroundColor:"transparent",border:0,[`> ${t}-content-box`]:{paddingBlock:n}}}}}},Da=xt("Collapse",(e=>{const t=wt(e,{collapseContentBg:e.colorBgContainer,collapseHeaderBg:e.colorFillAlter,collapseHeaderPadding:`${e.paddingSM}px ${e.padding}px`,collapseHeaderPaddingSM:`${e.paddingXS}px ${e.paddingSM}px`,collapseHeaderPaddingLG:`${e.padding}px ${e.paddingLG}px`,collapsePanelBorderRadius:e.borderRadiusLG,collapseContentPaddingHorizontal:16});return[Aa(t),Pa(t),Na(t),Oa(t),br(t)]})),La=e.forwardRef(((t,n)=>{const{getPrefixCls:r,direction:i}=e.useContext(yt),o=e.useContext(Tt),{prefixCls:a,className:l,rootClassName:s,bordered:c=!0,ghost:u,size:d,expandIconPosition:p="start"}=t,f=d||o||"middle",v=r("collapse",a),m=r(),[g,h]=Da(v),b=e.useMemo((()=>"left"===p?"start":"right"===p?"end":p),[p]),y=kt(`${v}-icon-position-${b}`,{[`${v}-borderless`]:!c,[`${v}-rtl`]:"rtl"===i,[`${v}-ghost`]:!!u,[`${v}-${f}`]:"middle"!==f},l,s,h),x=Object.assign(Object.assign({},yr(m)),{motionAppear:!1,leavedClassName:`${v}-content-hidden`});return g(e.createElement(Ta,Object.assign({ref:n,openMotion:x},jt(t,["rootClassName"]),{expandIcon:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{expandIcon:r}=t,i=r?r(n):e.createElement(cn,{rotate:n.isActive?90:void 0});return It(i,(()=>({className:kt(i.props.className,`${v}-arrow`)})))},prefixCls:v,className:y}),(()=>{const{children:e}=t;return Ct(e).map(((e,t)=>{var n;if(null===(n=e.props)||void 0===n?void 0:n.disabled){const n=e.key||String(t),{disabled:r,collapsible:i}=e.props,o=Object.assign(Object.assign({},jt(e.props,["disabled"])),{key:n,collapsible:null!=i?i:r?"disabled":void 0});return It(e,o)}return e}))})()))})),$a=Object.assign(La,{Panel:ja}),Ma=e=>{let{children:t}=e;return t};function Ba(e){return null!=e}const Va=t=>{let{itemPrefixCls:n,component:r,span:i,className:o,style:a,labelStyle:l,contentStyle:s,bordered:c,label:u,content:d,colon:p}=t;const f=r;return c?e.createElement(f,{className:kt({[`${n}-item-label`]:Ba(u),[`${n}-item-content`]:Ba(d)},o),style:a,colSpan:i},Ba(u)&&e.createElement("span",{style:l},u),Ba(d)&&e.createElement("span",{style:s},d)):e.createElement(f,{className:kt(`${n}-item`,o),style:a,colSpan:i},e.createElement("div",{className:`${n}-item-container`},(u||0===u)&&e.createElement("span",{className:kt(`${n}-item-label`,{[`${n}-item-no-colon`]:!p}),style:l},u),(d||0===d)&&e.createElement("span",{className:kt(`${n}-item-content`),style:s},d)))};function Fa(t,n,r){let{colon:i,prefixCls:o,bordered:a}=n,{component:l,type:s,showLabel:c,showContent:u,labelStyle:d,contentStyle:p}=r;return t.map(((t,n)=>{let{props:{label:r,children:f,prefixCls:v=o,className:m,style:g,labelStyle:h,contentStyle:b,span:y=1},key:x}=t;return"string"==typeof l?e.createElement(Va,{key:`${s}-${x||n}`,className:m,style:g,labelStyle:Object.assign(Object.assign({},d),h),contentStyle:Object.assign(Object.assign({},p),b),span:y,colon:i,component:l,itemPrefixCls:v,bordered:a,label:c?r:null,content:u?f:null}):[e.createElement(Va,{key:`label-${x||n}`,className:m,style:Object.assign(Object.assign(Object.assign({},d),g),h),span:1,colon:i,component:l[0],itemPrefixCls:v,bordered:a,label:r}),e.createElement(Va,{key:`content-${x||n}`,className:m,style:Object.assign(Object.assign(Object.assign({},p),g),b),span:2*y-1,component:l[1],itemPrefixCls:v,bordered:a,content:f})]}))}const za=t=>{const n=e.useContext(qa),{prefixCls:r,vertical:i,row:o,index:a,bordered:l}=t;return i?e.createElement(e.Fragment,null,e.createElement("tr",{key:`label-${a}`,className:`${r}-row`},Fa(o,t,Object.assign({component:"th",type:"label",showLabel:!0},n))),e.createElement("tr",{key:`content-${a}`,className:`${r}-row`},Fa(o,t,Object.assign({component:"td",type:"content",showContent:!0},n)))):e.createElement("tr",{key:a,className:`${r}-row`},Fa(o,t,Object.assign({component:l?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},n)))},Ha=e=>{const{componentCls:t,descriptionsSmallPadding:n,descriptionsDefaultPadding:r,descriptionsMiddlePadding:i,descriptionsBg:o}=e;return{[`&${t}-bordered`]:{[`${t}-view`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto",borderCollapse:"collapse"}},[`${t}-item-label, ${t}-item-content`]:{padding:r,borderInlineEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:o,"&::after":{display:"none"}},[`${t}-row`]:{borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBottom:"none"}},[`&${t}-middle`]:{[`${t}-item-label, ${t}-item-content`]:{padding:i}},[`&${t}-small`]:{[`${t}-item-label, ${t}-item-content`]:{padding:n}}}}},Ga=e=>{const{componentCls:t,descriptionsExtraColor:n,descriptionItemPaddingBottom:r,descriptionsItemLabelColonMarginRight:i,descriptionsItemLabelColonMarginLeft:o,descriptionsTitleMarginBottom:a}=e;return{[t]:Object.assign(Object.assign(Object.assign({},Et(e)),Ha(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:a},[`${t}-title`]:Object.assign(Object.assign({},_t),{flex:"auto",color:e.colorText,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:n,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed"}},[`${t}-row`]:{"> th, > td":{paddingBottom:r},"&:last-child":{borderBottom:"none"}},[`${t}-item-label`]:{color:e.colorTextTertiary,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${o}px ${i}px`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},Ua=xt("Descriptions",(e=>{const t=e.colorFillAlter,n=e.fontSizeSM*e.lineHeightSM,r=e.colorText,i=`${e.paddingXS}px ${e.padding}px`,o=`${e.padding}px ${e.paddingLG}px`,a=`${e.paddingSM}px ${e.paddingLG}px`,l=e.padding,s=e.marginXS,c=e.marginXXS/2,u=wt(e,{descriptionsBg:t,descriptionsTitleMarginBottom:n,descriptionsExtraColor:r,descriptionItemPaddingBottom:l,descriptionsSmallPadding:i,descriptionsDefaultPadding:o,descriptionsMiddlePadding:a,descriptionsItemLabelColonMarginRight:s,descriptionsItemLabelColonMarginLeft:c});return[Ga(u)]}));var Wa=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const qa=e.createContext({}),Ya={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function Xa(e,t,n){let r=e;return(void 0===n||n>t)&&(r=It(e,{span:t})),r}function Ka(t){var{prefixCls:n,title:r,extra:i,column:o=Ya,colon:a=!0,bordered:l,layout:s,children:c,className:u,rootClassName:d,style:p,size:f,labelStyle:v,contentStyle:m}=t,g=Wa(t,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle"]);const{getPrefixCls:h,direction:b}=e.useContext(yt),y=h("descriptions",n),[x,w]=e.useState({}),E=function(e,t){if("number"==typeof e)return e;if("object"==typeof e)for(let n=0;n<dn.length;n++){const r=dn[n];if(t[r]&&void 0!==e[r])return e[r]||Ya[r]}return 3}(o,x),[S,C]=Ua(y),I=un();e.useEffect((()=>{const e=I.subscribe((e=>{"object"==typeof o&&w(e)}));return()=>{I.unsubscribe(e)}}),[]);const k=function(e,t){const n=Ct(e).filter((e=>e)),r=[];let i=[],o=t;return n.forEach(((e,a)=>{var l;const s=null===(l=e.props)||void 0===l?void 0:l.span,c=s||1;if(a===n.length-1)return i.push(Xa(e,o,s)),void r.push(i);c<o?(o-=c,i.push(e)):(i.push(Xa(e,o,c)),r.push(i),o=t,i=[])})),r}(c,E),R=e.useMemo((()=>({labelStyle:v,contentStyle:m})),[v,m]);return S(e.createElement(qa.Provider,{value:R},e.createElement("div",Object.assign({className:kt(y,{[`${y}-${f}`]:f&&"default"!==f,[`${y}-bordered`]:!!l,[`${y}-rtl`]:"rtl"===b},u,d,C),style:p},g),(r||i)&&e.createElement("div",{className:`${y}-header`},r&&e.createElement("div",{className:`${y}-title`},r),i&&e.createElement("div",{className:`${y}-extra`},i)),e.createElement("div",{className:`${y}-view`},e.createElement("table",null,e.createElement("tbody",null,k.map(((t,n)=>e.createElement(za,{key:n,index:n,colon:a,prefixCls:y,vertical:"vertical"===s,bordered:l,row:t})))))))))}Ka.Item=Ma;const Qa=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:n,colorSplit:r,lineWidth:i}=e;return{[t]:Object.assign(Object.assign({},Et(e)),{borderBlockStart:`${i}px solid ${r}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:`0 ${e.dividerVerticalGutterMargin}px`,verticalAlign:"middle",borderTop:0,borderInlineStart:`${i}px solid ${r}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${e.dividerHorizontalGutterMargin}px 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${e.dividerHorizontalWithTextGutterMargin}px 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${r}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${i}px solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:"5%"},"&::after":{width:"95%"}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:"95%"},"&::after":{width:"5%"}},[`${t}-inner-text`]:{display:"inline-block",padding:"0 1em"},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:`${i}px 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStart:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:n}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:n}}})}},Za=xt("Divider",(e=>{const t=wt(e,{dividerVerticalGutterMargin:e.marginXS,dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG});return[Qa(t)]}),{sizePaddingEdgeHorizontal:0});var Ja=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const el=t=>{const{getPrefixCls:n,direction:r}=e.useContext(yt),{prefixCls:i,type:o="horizontal",orientation:a="center",orientationMargin:l,className:s,rootClassName:c,children:u,dashed:d,plain:p}=t,f=Ja(t,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain"]),v=n("divider",i),[m,g]=Za(v),h=a.length>0?`-${a}`:a,b=!!u,y="left"===a&&null!=l,x="right"===a&&null!=l,w=kt(v,g,`${v}-${o}`,{[`${v}-with-text`]:b,[`${v}-with-text${h}`]:b,[`${v}-dashed`]:!!d,[`${v}-plain`]:!!p,[`${v}-rtl`]:"rtl"===r,[`${v}-no-default-orientation-margin-left`]:y,[`${v}-no-default-orientation-margin-right`]:x},s,c),E=Object.assign(Object.assign({},y&&{marginLeft:l}),x&&{marginRight:l});return m(e.createElement("div",Object.assign({className:w},f,{role:"separator"}),u&&"vertical"!==o&&e.createElement("span",{className:`${v}-inner-text`,style:E},u)))};function tl(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}}const nl=Object.freeze(Object.defineProperty({__proto__:null,Panel:f,default:p},Symbol.toStringTag,{value:"Module"}));var rl=["visible","onVisibleChange","getContainer","current","countRender"],il=e.createContext({previewUrls:new Map,setPreviewUrls:function(){return null},current:null,setCurrent:function(){return null},setShowPreview:function(){return null},setMousePosition:function(){return null},registerImage:function(){return function(){return null}},rootClassName:""}),ol=il.Provider;function al(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function ll(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var sl,cl,ul,dl=(sl=al(),cl="undefined"!=typeof window?window:{},ul={animationend:ll("Animation","AnimationEnd"),transitionend:ll("Transition","TransitionEnd")},sl&&("AnimationEvent"in cl||delete ul.animationend.animation,"TransitionEvent"in cl||delete ul.transitionend.transition),ul),pl={};if(al()){var fl=document.createElement("div");pl=fl.style}var vl={};function ml(e){if(vl[e])return vl[e];var t=dl[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in pl)return vl[e]=t[o],vl[e]}return""}var gl=ml("animationend"),hl=ml("transitionend"),bl=!(!gl||!hl),yl=gl||"animationend",xl=hl||"transitionend";function wl(e,t){return e?"object"===Pt(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}var El="none",Sl="appear",Cl="enter",Il="leave",kl="none",Rl="prepare",_l="start",Tl="active",jl="end";function Al(t){var n=e.useRef(!1),i=e.useState(t),o=r(i,2),a=o[0],l=o[1];return e.useEffect((function(){return n.current=!1,function(){n.current=!0}}),[]),[a,function(e,t){t&&n.current||l(e)}]}var Ol=function(e){return+setTimeout(e,16)},Pl=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(Ol=function(e){return window.requestAnimationFrame(e)},Pl=function(e){return window.cancelAnimationFrame(e)});var Nl=0,Dl=new Map;function Ll(e){Dl.delete(e)}function $l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Nl+=1;function r(t){if(0===t)Ll(n),e();else{var i=Ol((function(){r(t-1)}));Dl.set(n,i)}}return r(t),n}$l.cancel=function(e){var t=Dl.get(e);return Ll(t),Pl(t)};var Ml=al()?e.useLayoutEffect:e.useEffect,Bl=[Rl,_l,Tl,jl];function Vl(e){return e===Tl||e===jl}const Fl=function(t,n){var i=Al(kl),o=r(i,2),a=o[0],l=o[1],s=function(){var t=e.useRef(null);function n(){$l.cancel(t.current)}return e.useEffect((function(){return function(){n()}}),[]),[function e(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var o=$l((function(){i<=1?r({isCanceled:function(){return o!==t.current}}):e(r,i-1)}));t.current=o},n]}(),c=r(s,2),u=c[0],d=c[1];return Ml((function(){if(a!==kl&&a!==jl){var e=Bl.indexOf(a),t=Bl[e+1],r=n(a);false===r?l(t,!0):u((function(e){function n(){e.isCanceled()||l(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[t,a]),e.useEffect((function(){return function(){d()}}),[]),[function(){l(Rl,!0)},a]};function zl(t,n,o,a){var l=a.motionEnter,s=void 0===l||l,c=a.motionAppear,u=void 0===c||c,d=a.motionLeave,p=void 0===d||d,f=a.motionDeadline,v=a.motionLeaveImmediately,m=a.onAppearPrepare,g=a.onEnterPrepare,h=a.onLeavePrepare,b=a.onAppearStart,y=a.onEnterStart,x=a.onLeaveStart,w=a.onAppearActive,E=a.onEnterActive,S=a.onLeaveActive,C=a.onAppearEnd,I=a.onEnterEnd,k=a.onLeaveEnd,R=a.onVisibleChanged,_=Al(),T=r(_,2),j=T[0],A=T[1],O=Al(El),P=r(O,2),N=P[0],D=P[1],L=Al(null),$=r(L,2),M=$[0],B=$[1],V=e.useRef(!1),F=e.useRef(null);function z(){return o()}var H=e.useRef(!1);function G(e){var t=z();if(!e||e.deadline||e.target===t){var n,r=H.current;N===Sl&&r?n=null==C?void 0:C(t,e):N===Cl&&r?n=null==I?void 0:I(t,e):N===Il&&r&&(n=null==k?void 0:k(t,e)),N!==El&&r&&!1!==n&&(D(El,!0),B(null,!0))}}var U=function(t){var n=e.useRef(),r=e.useRef(t);r.current=t;var i=e.useCallback((function(e){r.current(e)}),[]);function o(e){e&&(e.removeEventListener(xl,i),e.removeEventListener(yl,i))}return e.useEffect((function(){return function(){o(n.current)}}),[]),[function(e){n.current&&n.current!==e&&o(n.current),e&&e!==n.current&&(e.addEventListener(xl,i),e.addEventListener(yl,i),n.current=e)},o]}(G),W=r(U,1)[0],q=e.useMemo((function(){var e,t,n;switch(N){case Sl:return i(e={},Rl,m),i(e,_l,b),i(e,Tl,w),e;case Cl:return i(t={},Rl,g),i(t,_l,y),i(t,Tl,E),t;case Il:return i(n={},Rl,h),i(n,_l,x),i(n,Tl,S),n;default:return{}}}),[N]),Y=Fl(N,(function(e){if(e===Rl){var t=q[Rl];return!!t&&t(z())}var n;Q in q&&B((null===(n=q[Q])||void 0===n?void 0:n.call(q,z(),null))||null);return Q===Tl&&(W(z()),f>0&&(clearTimeout(F.current),F.current=setTimeout((function(){G({deadline:!0})}),f))),true})),X=r(Y,2),K=X[0],Q=X[1],Z=Vl(Q);H.current=Z,Ml((function(){A(n);var e,r=V.current;(V.current=!0,t)&&(!r&&n&&u&&(e=Sl),r&&n&&s&&(e=Cl),(r&&!n&&p||!r&&v&&!n&&p)&&(e=Il),e&&(D(e),K()))}),[n]),e.useEffect((function(){(N===Sl&&!u||N===Cl&&!s||N===Il&&!p)&&D(El)}),[u,s,p]),e.useEffect((function(){return function(){V.current=!1,clearTimeout(F.current)}}),[]);var J=e.useRef(!1);e.useEffect((function(){j&&(J.current=!0),void 0!==j&&N===El&&((J.current||j)&&(null==R||R(j)),J.current=!0)}),[j,N]);var ee=M;return q[Rl]&&Q===_l&&(ee=bt({transition:"none"},ee)),[N,Q,ee,null!=j?j:n]}var Hl=function(e){xr(n,e);var t=wr(n);function n(){return o(this,n),t.apply(this,arguments)}return a(n,[{key:"render",value:function(){return this.props.children}}]),n}(e.Component);const Gl=function(t){var o=t;function a(e){return!(!e.motionName||!o)}"object"===Pt(t)&&(o=t.transitionSupport);var l=e.forwardRef((function(t,o){var l=t.visible,s=void 0===l||l,c=t.removeOnLeave,u=void 0===c||c,d=t.forceRender,p=t.children,f=t.motionName,v=t.leavedClassName,m=t.eventProps,g=a(t),h=e.useRef(),b=e.useRef();var y=zl(g,s,(function(){try{return h.current instanceof HTMLElement?h.current:(e=b.current)instanceof HTMLElement?e:Lt.findDOMNode(e)}catch(t){return null}var e}),t),x=r(y,4),w=x[0],E=x[1],S=x[2],C=x[3],I=e.useRef(C);C&&(I.current=!0);var k,R,_,T,j,A=e.useCallback((function(e){h.current=e,function(e,t){"function"==typeof e?e(t):"object"===Pt(e)&&e&&"current"in e&&(e.current=t)}(o,e)}),[o]),O=bt(bt({},m),{},{visible:s});if(p)if(w!==El&&a(t)){var P,N;E===Rl?N="prepare":Vl(E)?N="active":E===_l&&(N="start"),k=p(bt(bt({},O),{},{className:kt(wl(f,w),(P={},i(P,wl(f,"".concat(w,"-").concat(N)),N),i(P,f,"string"==typeof f),P)),style:S}),A)}else k=C?p(bt({},O),A):!u&&I.current&&v?p(bt(bt({},O),{},{className:v}),A):d||!u&&!v?p(bt(bt({},O),{},{style:{display:"none"}}),A):null;else k=null;!e.isValidElement(k)||(R=k,"function"==typeof(j=n.isMemo(R)?R.type.type:R.type)&&!(null===(_=j.prototype)||void 0===_?void 0:_.render)||"function"==typeof R&&!(null===(T=R.prototype)||void 0===T?void 0:T.render))||(k.ref||(k=e.cloneElement(k,{ref:A})));return e.createElement(Hl,{ref:b},k)}));return l.displayName="CSSMotion",l}(bl);var Ul="add",Wl="keep",ql="remove",Yl="removed";function Xl(e){var t;return t=e&&"object"===Pt(e)&&"key"in e?e:{key:e},bt(bt({},t),{},{key:String(t.key)})}function Kl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(Xl)}function Ql(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,o=Kl(e),a=Kl(t);o.forEach((function(e){for(var t=!1,o=r;o<i;o+=1){var l=a[o];if(l.key===e.key){r<o&&(n=n.concat(a.slice(r,o).map((function(e){return bt(bt({},e),{},{status:Ul})}))),r=o),n.push(bt(bt({},l),{},{status:Wl})),r+=1,t=!0;break}}t||n.push(bt(bt({},e),{},{status:ql}))})),r<i&&(n=n.concat(a.slice(r).map((function(e){return bt(bt({},e),{},{status:Ul})}))));var l={};n.forEach((function(e){var t=e.key;l[t]=(l[t]||0)+1}));var s=Object.keys(l).filter((function(e){return l[e]>1}));return s.forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==ql}))).forEach((function(t){t.key===e&&(t.status=Wl)}))})),n}var Zl=["component","children","onVisibleChanged","onAllRemoved"],Jl=["status"],es=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gl,r=function(t){xr(l,t);var r=wr(l);function l(){var e;o(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),i(Er(e),"state",{keyEntities:[]}),i(Er(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:bt(bt({},e),{},{status:Yl})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==Yl})).length})),e}return a(l,[{key:"render",value:function(){var t=this,r=this.state.keyEntities,i=this.props,o=i.component,a=i.children,l=i.onVisibleChanged,s=i.onAllRemoved,c=At(i,Zl),u=o||e.Fragment,d={};return es.forEach((function(e){d[e]=c[e],delete c[e]})),delete c.keys,e.createElement(u,c,r.map((function(r){var i=r.status,o=At(r,Jl),c=i===Ul||i===Wl;return e.createElement(n,Ot({},d,{key:o.key,visible:c,eventProps:o,onVisibleChanged:function(e){(null==l||l(e,{key:o.key}),e)||0===t.removeKey(o.key)&&s&&s()}}),a)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=Kl(n);return{keyEntities:Ql(r,i).filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==Yl||e.status!==ql}))}}}]),l}(e.Component);i(r,"defaultProps",{component:"div"})}(bl);var ts=function(t){var n,r=t.visible,o=t.maskTransitionName,a=t.getContainer,l=t.prefixCls,s=t.rootClassName,c=t.icons,u=t.countRender,d=t.showSwitch,p=t.showProgress,f=t.current,m=t.count,g=t.scale,h=t.onSwitchLeft,b=t.onSwitchRight,y=t.onClose,x=t.onZoomIn,w=t.onZoomOut,E=t.onRotateRight,S=t.onRotateLeft,C=c.rotateLeft,I=c.rotateRight,k=c.zoomIn,R=c.zoomOut,_=c.close,T=c.left,j=c.right,A="".concat(l,"-operations-operation"),O="".concat(l,"-operations-icon"),P=[{icon:_,onClick:y,type:"close"},{icon:k,onClick:x,type:"zoomIn",disabled:50===g},{icon:R,onClick:w,type:"zoomOut",disabled:1===g},{icon:I,onClick:E,type:"rotateRight"},{icon:C,onClick:S,type:"rotateLeft"}],N=e.createElement(e.Fragment,null,d&&e.createElement(e.Fragment,null,e.createElement("div",{className:kt("".concat(l,"-switch-left"),i({},"".concat(l,"-switch-left-disabled"),0===f)),onClick:h},T),e.createElement("div",{className:kt("".concat(l,"-switch-right"),i({},"".concat(l,"-switch-right-disabled"),f===m-1)),onClick:b},j)),e.createElement("ul",{className:"".concat(l,"-operations")},p&&e.createElement("li",{className:"".concat(l,"-operations-progress")},null!==(n=null==u?void 0:u(f+1,m))&&void 0!==n?n:"".concat(f+1," / ").concat(m)),P.map((function(t){var n,r=t.icon,o=t.onClick,a=t.type,s=t.disabled;return e.createElement("li",{className:kt(A,(n={},i(n,"".concat(l,"-operations-operation-").concat(a),!0),i(n,"".concat(l,"-operations-operation-disabled"),!!s),n)),onClick:o,key:a},e.isValidElement(r)?e.cloneElement(r,{className:O}):r)}))));return e.createElement(Gl,{visible:r,motionName:o},(function(t){var n=t.className,r=t.style;return e.createElement(v,{open:!0,getContainer:null!=a?a:document.body},e.createElement("div",{className:kt("".concat(l,"-operations-wrapper"),n,s),style:r},N))}))},ns={x:0,y:0,rotate:0,scale:1};function rs(e,t,n,r){var o=t+n,a=(n-r)/2;if(n>r){if(t>0)return i({},e,a);if(t<0&&o<r)return i({},e,-a)}else if(t<0||o>r)return i({},e,t<0?a:-a);return{}}var is=["prefixCls","src","alt","onClose","afterClose","visible","icons","rootClassName","getContainer","countRender","scaleStep","transitionName","maskTransitionName"],os=function(n){var o=n.prefixCls,a=n.src,l=n.alt,s=n.onClose;n.afterClose;var c=n.visible,u=n.icons,d=void 0===u?{}:u,f=n.rootClassName,v=n.getContainer,m=n.countRender,g=n.scaleStep,h=void 0===g?.5:g,b=n.transitionName,y=void 0===b?"zoom":b,x=n.maskTransitionName,w=void 0===x?"fade":x,E=At(n,is),S=e.useRef(),C=e.useRef({deltaX:0,deltaY:0,transformX:0,transformY:0}),I=e.useState(!1),k=r(I,2),R=k[0],_=k[1],T=e.useContext(il),j=T.previewUrls,A=T.current,O=T.isPreviewGroup,P=T.setCurrent,N=j.size,D=Array.from(j.keys()),L=D.indexOf(A),$=O?j.get(A):a,M=O&&N>1,B=O&&N>=1,V=function(t){var n=e.useRef(null),i=e.useRef([]),o=e.useState(ns),a=r(o,2),l=a[0],s=a[1],c=function(e){null===n.current&&(i.current=[],n.current=Sr((function(){s((function(e){var t=e;return i.current.forEach((function(e){t=bt(bt({},t),e)})),n.current=null,t}))}))),i.current.push(bt(bt({},l),e))};return{transform:l,resetTransform:function(){s(ns)},updateTransform:c,dispatchZoonChange:function(e,n,r){var i=t.current,o=i.width,a=i.height,s=i.offsetWidth,u=i.offsetHeight,d=i.offsetLeft,p=i.offsetTop,f=e,v=l.scale*e;v>50?(f=50/l.scale,v=50):v<1&&(f=1/l.scale,v=1);var m=null!=n?n:innerWidth/2,g=null!=r?r:innerHeight/2,h=f-1,b=h*o*.5,y=h*a*.5,x=h*(m-l.x-d),w=h*(g-l.y-p),E=l.x-(x-b),S=l.y-(w-y);if(e<1&&1===v){var C=s*v,I=u*v,k=tl(),R=k.width,_=k.height;C<=R&&I<=_&&(E=0,S=0)}c({x:E,y:S,scale:v})}}}(S),F=V.transform,z=V.resetTransform,H=V.updateTransform,G=V.dispatchZoonChange,U=F.rotate,W=F.scale,q=kt(i({},"".concat(o,"-moving"),R)),Y=function(){if(c&&R){_(!1);var e=C.current,t=e.transformX,n=e.transformY;if(!(F.x!==t&&F.y!==n))return;var r=S.current.offsetWidth*W,i=S.current.offsetHeight*W,o=S.current.getBoundingClientRect(),a=o.left,l=o.top,s=U%180!=0,u=function(e,t,n,r){var i=tl(),o=i.width,a=i.height,l=null;return e<=o&&t<=a?l={x:0,y:0}:(e>o||t>a)&&(l=bt(bt({},rs("x",n,e,o)),rs("y",r,t,a))),l}(s?i:r,s?r:i,a,l);u&&H(bt({},u))}},X=function(e){c&&R&&H({x:e.pageX-C.current.deltaX,y:e.pageY-C.current.deltaY})},K=e.useCallback((function(e){c&&M&&(e.keyCode===fn.LEFT?L>0&&P(D[L-1]):e.keyCode===fn.RIGHT&&L<N-1&&P(D[L+1]))}),[L,N,D,P,M,c]);return e.useEffect((function(){var e,t,n=Cr(window,"mouseup",Y,!1),r=Cr(window,"mousemove",X,!1),i=Cr(window,"keydown",K,!1);try{window.top!==window.self&&(e=Cr(window.top,"mouseup",Y,!1),t=Cr(window.top,"mousemove",X,!1))}catch(o){}return function(){var o,a;n.remove(),r.remove(),i.remove(),null===(o=e)||void 0===o||o.remove(),null===(a=t)||void 0===a||a.remove()}}),[c,R,K]),t.createElement(t.Fragment,null,t.createElement(p,Ot({transitionName:y,maskTransitionName:w,closable:!1,keyboard:!0,prefixCls:o,onClose:s,afterClose:function(){z()},visible:c,wrapClassName:q,rootClassName:f,getContainer:v},E),t.createElement("div",{className:"".concat(o,"-img-wrapper")},t.createElement("img",{width:n.width,height:n.height,onWheel:function(e){if(c&&0!=e.deltaY){var t=Math.abs(e.deltaY/100),n=1+Math.min(t,.2)*h;e.deltaY>0&&(n=1/n),G(n,e.clientX,e.clientY)}},onMouseDown:function(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),C.current={deltaX:e.pageX-F.x,deltaY:e.pageY-F.y,transformX:F.x,transformY:F.y},_(!0))},onDoubleClick:function(e){c&&(1!==W?H({x:0,y:0,scale:1}):G(1+h,e.clientX,e.clientY))},ref:S,className:"".concat(o,"-img"),src:$,alt:l,style:{transform:"translate3d(".concat(F.x,"px, ").concat(F.y,"px, 0) scale3d(").concat(W,", ").concat(W,", 1) rotate(").concat(U,"deg)")}}))),t.createElement(ts,{visible:c,maskTransitionName:w,getContainer:v,prefixCls:o,rootClassName:f,icons:d,countRender:m,showSwitch:M,showProgress:B,current:L,count:N,scale:W,onSwitchLeft:function(e){e.preventDefault(),e.stopPropagation(),L>0&&P(D[L-1])},onSwitchRight:function(e){e.preventDefault(),e.stopPropagation(),L<N-1&&P(D[L+1])},onZoomIn:function(){G(1+h)},onZoomOut:function(){G(1-h)},onRotateRight:function(){H({rotate:U+90})},onRotateLeft:function(){H({rotate:U-90})},onClose:s}))},as=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName","crossOrigin","decoding","loading","referrerPolicy","sizes","srcSet","useMap","draggable"],ls=["src","visible","onVisibleChange","getContainer","mask","maskClassName","icons","scaleStep"],ss=0,cs=function(t){var n,o=t.src,a=t.alt,l=t.onPreviewClose,s=t.prefixCls,c=void 0===s?"rc-image":s,u=t.previewPrefixCls,d=void 0===u?"".concat(c,"-preview"):u,p=t.placeholder,f=t.fallback,v=t.width,m=t.height,g=t.style,h=t.preview,b=void 0===h||h,y=t.className,x=t.onClick,w=t.onError,E=t.wrapperClassName,S=t.wrapperStyle,C=t.rootClassName,I=t.crossOrigin,k=t.decoding,R=t.loading,_=t.referrerPolicy,T=t.sizes,j=t.srcSet,A=t.useMap,O=t.draggable,P=At(t,as),N=p&&!0!==p,D="object"===Pt(b)?b:{},L=D.src,$=D.visible,M=void 0===$?void 0:$,B=D.onVisibleChange,V=void 0===B?l:B,F=D.getContainer,z=void 0===F?void 0:F,H=D.mask,G=D.maskClassName,U=D.icons,W=D.scaleStep,q=At(D,ls),Y=null!=L?L:o,X=void 0!==M,K=pn(!!M,{value:M,onChange:V}),Q=r(K,2),Z=Q[0],J=Q[1],ee=e.useState(N?"loading":"normal"),te=r(ee,2),ne=te[0],re=te[1],ie=e.useState(null),oe=r(ie,2),ae=oe[0],le=oe[1],se="error"===ne,ce=e.useContext(il),ue=ce.isPreviewGroup,de=ce.setCurrent,pe=ce.setShowPreview,fe=ce.setMousePosition,ve=ce.registerImage,me=e.useState((function(){return ss+=1})),ge=r(me,1)[0],he=!!b,be=e.useRef(!1),ye=function(){re("normal")};e.useEffect((function(){return ve(ge,Y)}),[]),e.useEffect((function(){ve(ge,Y,he)}),[Y,he]),e.useEffect((function(){se&&re("normal"),N&&!be.current&&re("loading")}),[o]);var xe=kt(c,E,C,i({},"".concat(c,"-error"),se)),we=se&&f?f:Y,Ee={crossOrigin:I,decoding:k,draggable:O,loading:R,referrerPolicy:_,sizes:T,srcSet:j,useMap:A,alt:a,className:kt("".concat(c,"-img"),i({},"".concat(c,"-img-placeholder"),!0===p),y),style:bt({height:m},g)};return e.createElement(e.Fragment,null,e.createElement("div",Ot({},P,{className:xe,onClick:he?function(e){if(!X){var t=(i=e.target,o=i.getBoundingClientRect(),a=document.documentElement,{left:o.left+(window.pageXOffset||a.scrollLeft)-(a.clientLeft||document.body.clientLeft||0),top:o.top+(window.pageYOffset||a.scrollTop)-(a.clientTop||document.body.clientTop||0)}),n=t.left,r=t.top;ue?(de(ge),fe({x:n,y:r})):le({x:n,y:r})}var i,o,a;ue?pe(!0):J(!0),x&&x(e)}:x,style:bt({width:v,height:m},S)}),e.createElement("img",Ot({},Ee,{ref:function(e){be.current=!1,"loading"===ne&&null!=e&&e.complete&&(e.naturalWidth||e.naturalHeight)&&(be.current=!0,ye())}},se&&f?{src:f}:{onLoad:ye,onError:function(e){w&&w(e),re("error")},src:o},{width:v,height:m})),"loading"===ne&&e.createElement("div",{"aria-hidden":"true",className:"".concat(c,"-placeholder")},p),H&&he&&e.createElement("div",{className:kt("".concat(c,"-mask"),G),style:{display:"none"===(null===(n=Ee.style)||void 0===n?void 0:n.display)?"none":void 0}},H)),!ue&&he&&e.createElement(os,Ot({"aria-hidden":!Z,visible:Z,prefixCls:d,onClose:function(e){e.stopPropagation(),J(!1),X||le(null)},mousePosition:ae,src:we,alt:a,getContainer:z,icons:U,scaleStep:W,rootClassName:C},q)))};cs.PreviewGroup=function(t){var n=t.previewPrefixCls,i=void 0===n?"rc-image-preview":n,o=t.children,a=t.icons,l=void 0===a?{}:a,s=t.preview,c="object"===Pt(s)?s:{},u=c.visible,d=void 0===u?void 0:u,p=c.onVisibleChange,f=void 0===p?void 0:p,v=c.getContainer,m=void 0===v?void 0:v,g=c.current,h=void 0===g?0:g,b=c.countRender,y=void 0===b?void 0:b,x=At(c,rl),w=e.useState(new Map),E=r(w,2),S=E[0],C=E[1],I=e.useState(),k=r(I,2),R=k[0],_=k[1],T=pn(!!d,{value:d,onChange:f}),j=r(T,2),A=j[0],O=j[1],P=e.useState(null),N=r(P,2),D=N[0],L=N[1],$=void 0!==d,M=Array.from(S.keys())[h],B=new Map(Array.from(S).filter((function(e){return!!r(e,2)[1].canPreview})).map((function(e){var t=r(e,2);return[t[0],t[1].url]})));return e.useEffect((function(){_(M)}),[M]),e.useEffect((function(){!A&&$&&_(M)}),[M,$,A]),e.createElement(ol,{value:{isPreviewGroup:!0,previewUrls:B,setPreviewUrls:C,current:R,setCurrent:_,setShowPreview:O,setMousePosition:L,registerImage:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=function(){C((function(t){var n=new Map(t);return n.delete(e)?n:t}))};return C((function(r){return new Map(r).set(e,{url:t,canPreview:n})})),r}}},o,e.createElement(os,Ot({"aria-hidden":!A,visible:A,prefixCls:i,onClose:function(e){e.stopPropagation(),O(!1),L(null)},mousePosition:D,src:B.get(R),icons:l,getContainer:m,countRender:y},x)))},cs.displayName="Image";const us=Object.freeze(Object.defineProperty({__proto__:null,default:cs},Symbol.toStringTag,{value:"Module"})),ds=e=>({position:e||"absolute",inset:0}),ps=e=>{const{iconCls:t,motionDurationSlow:n,paddingXXS:r,marginXXS:i,prefixCls:o}=e;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",background:new $t("#000").setAlpha(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${n}`,[`.${o}-mask-info`]:Object.assign(Object.assign({},_t),{padding:`0 ${r}px`,[t]:{marginInlineEnd:i,svg:{verticalAlign:"baseline"}}})}},fs=e=>{const{previewCls:t,modalMaskBg:n,paddingSM:r,imagePreviewOperationDisabledColor:i,motionDurationSlow:o}=e,a=new $t(n).setAlpha(.1),l=a.clone().setAlpha(.2);return{[`${t}-operations`]:Object.assign(Object.assign({},Et(e)),{display:"flex",flexDirection:"row-reverse",alignItems:"center",color:e.imagePreviewOperationColor,listStyle:"none",background:a.toRgbString(),pointerEvents:"auto","&-operation":{marginInlineStart:r,padding:r,cursor:"pointer",transition:`all ${o}`,"&:hover":{background:l.toRgbString()},"&-disabled":{color:i,pointerEvents:"none"},"&:last-of-type":{marginInlineStart:0}},"&-progress":{position:"absolute",left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%)"},"&-icon":{fontSize:e.imagePreviewOperationSize}})}},vs=e=>{const{modalMaskBg:t,iconCls:n,imagePreviewOperationDisabledColor:r,previewCls:i,zIndexPopup:o,motionDurationSlow:a}=e,l=new $t(t).setAlpha(.1),s=l.clone().setAlpha(.2);return{[`${i}-switch-left, ${i}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:o+1,display:"flex",alignItems:"center",justifyContent:"center",width:e.imagePreviewSwitchSize,height:e.imagePreviewSwitchSize,marginTop:-e.imagePreviewSwitchSize/2,color:e.imagePreviewOperationColor,background:l.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${a}`,pointerEvents:"auto","&:hover":{background:s.toRgbString()},"&-disabled":{"&, &:hover":{color:r,background:"transparent",cursor:"not-allowed",[`> ${n}`]:{cursor:"not-allowed"}}},[`> ${n}`]:{fontSize:e.imagePreviewOperationSize}},[`${i}-switch-left`]:{insetInlineStart:e.marginSM},[`${i}-switch-right`]:{insetInlineEnd:e.marginSM}}},ms=e=>{const{motionEaseOut:t,previewCls:n,motionDurationSlow:r,componentCls:i}=e;return[{[`${i}-preview-root`]:{[n]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${n}-body`]:Object.assign(Object.assign({},ds()),{overflow:"hidden"}),[`${n}-img`]:{maxWidth:"100%",maxHeight:"100%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${r} ${t} 0s`,userSelect:"none",pointerEvents:"auto","&-wrapper":Object.assign(Object.assign({},ds()),{transition:`transform ${r} ${t} 0s`,display:"flex",justifyContent:"center",alignItems:"center","&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${n}-moving`]:{[`${n}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${i}-preview-root`]:{[`${n}-wrap`]:{zIndex:e.zIndexPopup}}},{[`${i}-preview-operations-wrapper`]:{position:"fixed",insetBlockStart:0,insetInlineEnd:0,zIndex:e.zIndexPopup+1,width:"100%"},"&":[fs(e),vs(e)]}]},gs=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-mask`]:Object.assign({},ps(e)),[`${t}-mask:hover`]:{opacity:1},[`${t}-placeholder`]:Object.assign({},ds())}}},hs=e=>{const{previewCls:t}=e;return{[`${t}-root`]:Ir(e,"zoom"),"&":g(e,!0)}},bs=xt("Image",(e=>{const t=new $t(e.colorTextLightSolid),n=`${e.componentCls}-preview`,r=wt(e,{previewCls:n,imagePreviewOperationColor:t.toRgbString(),imagePreviewOperationDisabledColor:new $t(t).setAlpha(.25).toRgbString(),modalMaskBg:new $t("#000").setAlpha(.45).toRgbString(),imagePreviewOperationSize:1.5*e.fontSizeIcon,imagePreviewSwitchSize:e.controlHeightLG});return[gs(r),ms(r),m(wt(r,{componentCls:n})),hs(r)]}),(e=>({zIndexPopup:e.zIndexPopupBase+80})));var ys=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const xs={rotateLeft:e.createElement(xo,null),rotateRight:e.createElement(So,null),zoomIn:e.createElement(Do,null),zoomOut:e.createElement(Mo,null),close:e.createElement(kr,null),left:e.createElement(vn,null),right:e.createElement(cn,null)},ws=t=>{var{previewPrefixCls:n,preview:r}=t,i=ys(t,["previewPrefixCls","preview"]);const{getPrefixCls:o}=e.useContext(yt),a=o("image",n),l=`${a}-preview`,s=o(),[c,u]=bs(a),d=e.useMemo((()=>{if(!1===r)return r;const e="object"==typeof r?r:{};return Object.assign(Object.assign({},e),{transitionName:Rr(s,"zoom",e.transitionName),maskTransitionName:Rr(s,"fade",e.maskTransitionName),rootClassName:u})}),[r]);return c(e.createElement(cs.PreviewGroup,Object.assign({preview:d,previewPrefixCls:l,icons:xs},i)))};var Es=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Ss=t=>{var{prefixCls:n,preview:r,rootClassName:i}=t,o=Es(t,["prefixCls","preview","rootClassName"]);const{getPrefixCls:a,locale:l=Mt,getPopupContainer:s}=e.useContext(yt),c=a("image",n),u=a(),d=l.Image||Mt.Image,[p,f]=bs(c),v=kt(i,f),m=e.useMemo((()=>{if(!1===r)return r;const t="object"==typeof r?r:{},{getContainer:n}=t,i=Es(t,["getContainer"]);return Object.assign(Object.assign({mask:e.createElement("div",{className:`${c}-mask-info`},e.createElement(_r,null),null==d?void 0:d.preview),icons:xs},i),{getContainer:n||s,transitionName:Rr(u,"zoom",t.transitionName),maskTransitionName:Rr(u,"fade",t.maskTransitionName)})}),[r,d]);return p(e.createElement(cs,Object.assign({prefixCls:`${c}`,preview:m,rootClassName:v},o)))};Ss.PreviewGroup=ws;const Cs=Ss;const Is=(e,t,n)=>{const r="string"!=typeof(i=n)?i:i.charAt(0).toUpperCase()+i.slice(1);var i;return{[`${e.componentCls}-${t}`]:{color:e[`color${n}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`]}}},ks=e=>Tr(e,((t,n)=>{let{textColor:r,lightBorderColor:i,lightColor:o,darkColor:a}=n;return{[`${e.componentCls}-${t}`]:{color:r,background:o,borderColor:i,"&-inverse":{color:e.colorTextLightSolid,background:a,borderColor:a}}}})),Rs=e=>{const{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:r,componentCls:i}=e,o=r-n,a=t-n;return{[i]:Object.assign(Object.assign({},Et(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:o,fontSize:e.tagFontSize,lineHeight:`${e.tagLineHeight}px`,whiteSpace:"nowrap",background:e.tagDefaultBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",[`&${i}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.tagDefaultColor},[`${i}-close-icon`]:{marginInlineStart:a,color:e.colorTextDescription,fontSize:e.tagIconSize,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${i}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${i}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:o}})}},_s=xt("Tag",(e=>{const{fontSize:t,lineHeight:n,lineWidth:r,fontSizeIcon:i}=e,o=Math.round(t*n),a=e.fontSizeSM,l=o-2*r,s=e.colorFillAlter,c=e.colorText,u=wt(e,{tagFontSize:a,tagLineHeight:l,tagDefaultBg:s,tagDefaultColor:c,tagIconSize:i-2*r,tagPaddingHorizontal:8});return[Rs(u),ks(u),Is(u,"success","Success"),Is(u,"processing","Info"),Is(u,"error","Error"),Is(u,"warning","Warning")]}));var Ts=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const js=t=>{var{prefixCls:n,className:r,checked:i,onChange:o,onClick:a}=t,l=Ts(t,["prefixCls","className","checked","onChange","onClick"]);const{getPrefixCls:s}=e.useContext(yt),c=s("tag",n),[u,d]=_s(c),p=kt(c,{[`${c}-checkable`]:!0,[`${c}-checkable-checked`]:i},r,d);return u(e.createElement("span",Object.assign({},l,{className:p,onClick:e=>{null==o||o(!i),null==a||a(e)}})))};var As=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Os=(t,n)=>{var{prefixCls:r,className:i,rootClassName:o,style:a,children:l,icon:s,color:c,onClose:u,closeIcon:d,closable:p=!1}=t,f=As(t,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable"]);const{getPrefixCls:v,direction:m}=e.useContext(yt),[g,h]=e.useState(!0);e.useEffect((()=>{"visible"in f&&h(f.visible)}),[f.visible]);const b=jr(c)||Ar(c),y=Object.assign({backgroundColor:c&&!b?c:void 0},a),x=v("tag",r),[w,E]=_s(x),S=kt(x,{[`${x}-${c}`]:b,[`${x}-has-color`]:c&&!b,[`${x}-hidden`]:!g,[`${x}-rtl`]:"rtl"===m},i,o,E),C=e=>{e.stopPropagation(),null==u||u(e),e.defaultPrevented||h(!1)},I="function"==typeof f.onClick||l&&"a"===l.type,k=s||null,R=k?e.createElement(e.Fragment,null,k,e.createElement("span",null,l)):l,_=e.createElement("span",Object.assign({},f,{ref:n,className:S,style:y}),R,p?d?e.createElement("span",{className:`${x}-close-icon`,onClick:C},d):e.createElement(kr,{className:`${x}-close-icon`,onClick:C}):null);return w(I?e.createElement(Bt,null,_):_)},Ps=e.forwardRef(Os);Ps.CheckableTag=js;const Ns=Ps;var Ds=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Ls=["reactReduxForwardedRef"],$s=[],Ms=[null,null];function Bs(e,t){var n=e[1];return[t.payload,n+1]}function Vs(e,t,n){y((function(){return e.apply(void 0,t)}),n)}function Fs(e,t,n,r,i,o,a){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,a())}function zs(e,t,n,r,i,o,a,l,s,c){if(e){var u=!1,d=null,p=function(){if(!u){var e,n,p=t.getState();try{e=r(p,i.current)}catch(f){n=f,d=f}n||(d=null),e===o.current?a.current||s():(o.current=e,l.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=p,n.trySubscribe(),p();return function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var Hs=function(){return[null,0]};function Gs(n,r){void 0===r&&(r={});var i=r,o=i.getDisplayName,a=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,l=i.methodName,s=void 0===l?"connectAdvanced":l,c=i.renderCountProp,u=void 0===c?void 0:c,d=i.shouldHandleStateChanges,p=void 0===d||d,f=i.storeKey,v=void 0===f?"store":f;i.withRef;var m=i.forwardRef,g=void 0!==m&&m,y=i.context,w=void 0===y?x:y,E=Vt(i,Ds),S=w;return function(r){var i=r.displayName||r.name||"Component",o=a(i),l=Ot({},E,{getDisplayName:a,methodName:s,renderCountProp:u,shouldHandleStateChanges:p,storeKey:v,displayName:o,wrappedComponentName:i,WrappedComponent:r}),c=E.pure;var d=c?e.useMemo:function(e){return e()};function f(i){var o=e.useMemo((function(){var e=i.reactReduxForwardedRef,t=Vt(i,Ls);return[i.context,e,t]}),[i]),a=o[0],s=o[1],c=o[2],u=e.useMemo((function(){return a&&a.Consumer&&h.isContextConsumer(t.createElement(a.Consumer,null))?a:S}),[a,S]),f=e.useContext(u),v=Boolean(i.store)&&Boolean(i.store.getState)&&Boolean(i.store.dispatch);Boolean(f)&&Boolean(f.store);var m=v?i.store:f.store,g=e.useMemo((function(){return function(e){return n(e.dispatch,l)}(m)}),[m]),y=e.useMemo((function(){if(!p)return Ms;var e=b(m,v?null:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[m,v,f]),x=y[0],w=y[1],E=e.useMemo((function(){return v?f:Ot({},f,{subscription:x})}),[v,f,x]),C=e.useReducer(Bs,$s,Hs),I=C[0][0],k=C[1];if(I&&I.error)throw I.error;var R=e.useRef(),_=e.useRef(c),T=e.useRef(),j=e.useRef(!1),A=d((function(){return T.current&&c===_.current?T.current:g(m.getState(),c)}),[m,I,c]);Vs(Fs,[_,R,j,c,A,T,w]),Vs(zs,[p,m,x,g,_,R,j,T,w,k],[m,x,g]);var O=e.useMemo((function(){return t.createElement(r,Ot({},A,{ref:s}))}),[s,r,A]);return e.useMemo((function(){return p?t.createElement(u.Provider,{value:E},O):O}),[u,O,E])}var m=c?t.memo(f):f;if(m.WrappedComponent=r,m.displayName=f.displayName=o,g){var y=t.forwardRef((function(e,n){return t.createElement(m,Ot({},e,{reactReduxForwardedRef:n}))}));return y.displayName=o,y.WrappedComponent=r,oi(y,r)}return oi(m,r)}}function Us(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Ws(e,t){if(Us(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Us(e[n[i]],t[n[i]]))return!1;return!0}function qs(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Ys(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Xs(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Ys(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=Ys(i),i=r(t,n)),i},r}}const Ks=[function(e){return"function"==typeof e?Xs(e):void 0},function(e){return e?void 0:qs((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?qs((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"==typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}];const Qs=[function(e){return"function"==typeof e?Xs(e):void 0},function(e){return e?void 0:qs((function(){return{}}))}];function Zs(e,t,n){return Ot({},n,e,t)}const Js=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,l){var s=e(t,n,l);return a?i&&o(s,r)||(r=s):(a=!0,r=s),r}}}(e):void 0},function(e){return e?void 0:function(){return Zs}}];var ec=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function tc(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function nc(e,t,n,r,i){var o,a,l,s,c,u=i.areStatesEqual,d=i.areOwnPropsEqual,p=i.areStatePropsEqual,f=!1;function v(i,f){var v,m,g=!d(f,a),h=!u(i,o);return o=i,a=f,g&&h?(l=e(o,a),t.dependsOnOwnProps&&(s=t(r,a)),c=n(l,s,a)):g?(e.dependsOnOwnProps&&(l=e(o,a)),t.dependsOnOwnProps&&(s=t(r,a)),c=n(l,s,a)):h?(v=e(o,a),m=!p(v,l),l=v,m&&(c=n(l,s,a)),c):c}return function(i,u){return f?v(i,u):(l=e(o=i,a=u),s=t(r,a),c=n(l,s,a),f=!0,c)}}function rc(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=Vt(t,ec),a=n(e,o),l=r(e,o),s=i(e,o);return(o.pure?nc:tc)(a,l,s,e,o)}var ic=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function oc(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function ac(e,t){return e===t}function lc(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?Gs:n,i=t.mapStateToPropsFactories,o=void 0===i?Qs:i,a=t.mapDispatchToPropsFactories,l=void 0===a?Ks:a,s=t.mergePropsFactories,c=void 0===s?Js:s,u=t.selectorFactory,d=void 0===u?rc:u;return function(e,t,n,i){void 0===i&&(i={});var a=i,s=a.pure,u=void 0===s||s,p=a.areStatesEqual,f=void 0===p?ac:p,v=a.areOwnPropsEqual,m=void 0===v?Ws:v,g=a.areStatePropsEqual,h=void 0===g?Ws:g,b=a.areMergedPropsEqual,y=void 0===b?Ws:b,x=Vt(a,ic),w=oc(e,o,"mapStateToProps"),E=oc(t,l,"mapDispatchToProps"),S=oc(n,c,"mergeProps");return r(d,Ot({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:E,initMergeProps:S,pure:u,areStatesEqual:f,areOwnPropsEqual:m,areStatePropsEqual:h,areMergedPropsEqual:y},x))}}const sc=lc(),cc=e=>e.attributes.reduce(((t,n)=>{if((null===n.format||n.format&&Object.values(Ft).includes(n.format))&&n.type&&Object.values(zt).includes(n.type)){const r=[{id:n.id,type:n.type,format:n.format,label:n.label,isLink:w(n.type),isMultiple:n.multiple_values,linkedLibrary:n.linked_library,linkedTree:n.linked_tree,library:e.id,embedded_fields:n.embedded_fields}];if((n.type===zt.simple_link||n.type===zt.advanced_link)&&n.linked_library){const e=n.linked_library.id,t=n.linked_library.attributes.map((t=>({id:t.id,type:t.type,format:t.format,label:t.label,isLink:w(t.type),isMultiple:t.multiple_values,linkedLibrary:n.linked_library,linkedTree:n.linked_tree,library:e})));r.push(...t)}if(n.type===zt.tree&&n.linked_tree){const e=n.linked_tree.libraries.map((e=>{const t=e.library.id;return e.library.attributes.map((e=>({id:e.id,type:e.type,format:e.format,label:e.label,isLink:w(e.type),isMultiple:e.multiple_values,library:t})))})).flat();r.push(...e)}return[...t,...r]}return t}),[]),uc=mn`
    ${E}
    fragment ViewDetails on View {
        id
        display {
            size
            type
        }
        shared
        created_by {
            id
            whoAmI {
                id
                label
                library {
                    id
                    gqlNames {
                        query
                        type
                    }
                }
            }
        }
        label
        description
        color
        filters {
            field
            value
            tree {
                id
                label
            }
            condition
            operator
        }
        sort {
            field
            order
        }
        valuesVersions {
            treeId
            treeNode {
                id
                record {
                    ...RecordIdentity
                }
            }
        }
        settings {
            name
            value
        }
    }
`,dc=gn`
    ${E}
    ${uc}
    query GET_VIEW($viewId: String!) {
        view(viewId: $viewId) {
            ...ViewDetails
        }
    }
`,pc=e.createContext(!1),fc=e=>{switch(e.type){case zt.simple:case zt.advanced:return e.id;case zt.simple_link:case zt.advanced_link:return`${e.id} {\n                ...RecordIdentity\n            }`;case zt.tree:return`${e.id} {\n                record {\n                    ...RecordIdentity\n                }\n            }`}},vc=(e,t,n)=>{const r=null==e?void 0:e.toUpperCase();return(null==r?void 0:r.length)?A`
        ${E}
        query ${"GET_RECORDS_FROM_"+r} (
            $limit: Int!
            $offset: Int
            $filters: [RecordFilterInput]
            $sort: RecordSortInput
            $fullText: String
            $version: [ValueVersionInput]
        ) {
            ${e} (
                pagination: {limit: $limit, offset: $offset}
                filters: $filters
                sort: $sort
                searchQuery: $fullText,
                version: $version
            ) {
                ${n?"totalCount":""}
                list {
                    _id: id
                    ${((e=[])=>e.length?e.map((e=>{if(e.parentAttributeData){const t=e.parentAttributeData.id;switch(e.parentAttributeData.type){case zt.simple:case zt.advanced:return fc(e);case zt.simple_link:case zt.advanced_link:return`${t} {\n                        ${fc(e)}\n                    }`;case zt.tree:const n=Or(e.recordLibrary);return n?`${t} {\n                        record {\n                            ...on ${n} {\n                                ${fc(e)}\n                            }\n                        }\n                    }`:""}}else if(e.embeddedData)return[...e.embeddedData.path.split(".")].shift();return fc(e)})):"id")(t)}
                    ...RecordIdentity
                }
            }
        }
    `:A`
            query nothing {
                libraries {
                    list {
                        id
                    }
                }
            }
        `},mc=(e,t,n,r)=>{let i;const o=e.split("."),a=O(e,t.id,n);let l=null;if(3===o.length){const e=o[0],r=n.find((n=>e===n.id&&t.id===n.library));r&&(i={id:r.id,type:r.type},l=o[1])}if(!a)return null;const s="string"==typeof a.label?a.label:P(a.label,r);return{key:e,id:a.id,library:a.library,label:s,format:a.format,type:a.type,multipleValues:a.isMultiple,parentAttributeData:i,recordLibrary:l}},gc=(e,t,n)=>{var r;const i=cc(t);return(null==(r=e.settings)?void 0:r.find((e=>e.name===N)))?e.settings.find((e=>e.name===N)).value.reduce(((e,r)=>{const o=mc(r,t,i,n);return o?[...e,o]:e}),[]):[]};var hc=(e=>(e.UPDATE_RESULT="UPDATE_RESULT",e.SET_PAGINATION="SET_PAGINATION",e.SET_OFFSET="SET_OFFSET",e.SET_LOADING="SET_LOADING",e.SET_SORT="SET_SORT",e.CANCEL_SORT="CANCEL_SORT",e.SET_ATTRIBUTES="SET_ATTRIBUTES",e.SET_FIELDS="SET_FIELDS",e.SET_FULLTEXT="SET_FULLTEXT",e.SET_FILTERS="SET_FILTERS",e.SET_VIEW_RELOAD="SET_VIEW_RELOAD",e.SET_VIEW_SYNC="SET_VIEW_SYNC",e.CHANGE_VIEW="CHANGE_VIEW",e.SET_USER_VIEWS_ORDER="SET_USER_VIEWS_ORDER",e.SET_SHARED_VIEWS_ORDER="SET_SHARED_VIEWS_ORDER",e.SET_DISPLAY="SET_DISPLAY",e.RESET_FILTERS="RESET_FILTERS",e.DISABLE_FILTERS="DISABLE_FILTERS",e.ENABLE_FILTERS="ENABLE_FILTERS",e.APPLY_FILTERS="APPLY_FILTERS",e.SET_VALUES_VERSIONS="SET_VALUES_VERSIONS",e.TOGGLE_TRANSPARENCY="TOGGLE_TRANSPARENCY",e))(hc||{});const bc={library:null,records:[],totalCount:0,loading:!1,pagination:20,offset:0,attributes:[],fields:[],fullText:"",filters:[],display:{type:Ht.list,size:Gt.MEDIUM},view:{current:C,reload:!1,sync:!0},userViewsOrder:[],sharedViewsOrder:[],valuesVersions:{},lang:null},yc=(e,t)=>{var n,r,i,o;let a=((e,t)=>{var n,r,i,o,a,l,s,c,u,d,p,f,v,m,g,h;let b=!0;if(t.sort&&(b=(null==(n=e.sort)?void 0:n.field)===(null==(o=null==(i=null==(r=e.view)?void 0:r.current)?void 0:i.sort)?void 0:o.field)&&(null==(a=e.sort)?void 0:a.order)===(null==(c=null==(s=null==(l=e.view)?void 0:l.current)?void 0:s.sort)?void 0:c.order)),t.filters&&(b=b&&JSON.stringify(null==(u=e.view.current)?void 0:u.filters)===JSON.stringify(e.filters)),t.display&&(b=b&&e.display.type===(null==(p=null==(d=e.view.current)?void 0:d.display)?void 0:p.type)&&e.display.size===(null==(v=null==(f=e.view.current)?void 0:f.display)?void 0:v.size)),t.fields){const t=(null==(g=null==(m=e.view.current)?void 0:m.settings)?void 0:g.find((e=>e.name===N)))?null==(h=e.view.current)?void 0:h.settings.find((e=>e.name===N)).value:[];b=b&&e.fields.map((e=>e.id)).join(".")===t.join(".")}return b})(e,{sort:"SET_SORT"!==t.type,filters:"SET_FILTERS"!==t.type,display:"SET_DISPLAY"!==t.type,fields:"SET_FIELDS"!==t.type,valuesVersions:"SET_VALUES_VERSIONS"!==t.type});switch(t.type){case"UPDATE_RESULT":return{...e,records:t.records,totalCount:t.totalCount,loading:!1};case"SET_PAGINATION":return{...e,pagination:t.page,loading:!0};case"SET_OFFSET":return{...e,offset:t.offset,loading:!0};case"SET_LOADING":return{...e,loading:t.loading};case"SET_SORT":return a=a&&(null==(n=e.view.current.sort)?void 0:n.field)===t.sort.field&&(null==(r=e.view.current.sort)?void 0:r.order)===t.sort.order,{...e,sort:t.sort,view:{...e.view,sync:a}};case"CANCEL_SORT":const{sort:l,...s}=e;return a=a&&void 0===e.view.current.sort,{...s,view:{...e.view,sync:a},loading:!0};case"SET_ATTRIBUTES":return{...e,attributes:t.attributes};case"SET_FIELDS":const c=(null==(i=e.view.current.settings)?void 0:i.find((e=>e.name===N)))?null==(o=e.view.current)?void 0:o.settings.find((e=>e.name===N)).value:[];return a=a&&t.fields.map((e=>e.id)).join(".")===c.join("."),{...e,fields:t.fields,view:{...e.view,sync:a},loading:!0};case"SET_FULLTEXT":return{...e,fullText:t.fullText};case"SET_FILTERS":return a=a&&JSON.stringify(e.view.current.filters)===JSON.stringify(t.filters),{...e,filters:t.filters,view:{...e.view,sync:a}};case"CHANGE_VIEW":return{...e,view:{current:t.view,reload:!0,sync:!0},fields:gc(t.view,e.library,e.lang),filters:t.view.filters,sort:t.view.sort,display:t.view.display,valuesVersions:t.view.valuesVersions};case"SET_VIEW_RELOAD":return{...e,view:{...e.view,reload:t.reload}};case"SET_VIEW_SYNC":return{...e,view:{...e.view,sync:t.sync}};case"SET_DISPLAY":return a=a&&t.display.type===e.view.current.display.type&&t.display.size===e.view.current.display.size,{...e,display:t.display,view:{...e.view,sync:a}};case"SET_USER_VIEWS_ORDER":return{...e,userViewsOrder:t.userViewsOrder};case"SET_SHARED_VIEWS_ORDER":return{...e,sharedViewsOrder:t.sharedViewsOrder};case"RESET_FILTERS":return{...e,filters:[],loading:!0};case"DISABLE_FILTERS":return{...e,filters:e.filters.map((e=>({...e,active:!1}))),loading:!0};case"ENABLE_FILTERS":return{...e,filters:e.filters.map((e=>({...e,active:!0}))),loading:!0};case"APPLY_FILTERS":return{...e,offset:0,loading:!0};case"SET_VALUES_VERSIONS":return a=a&&JSON.stringify(e.view.current.valuesVersions)===JSON.stringify(t.valuesVersions),{...e,view:{...e.view,sync:a},valuesVersions:{...e.valuesVersions,...t.valuesVersions}}}},xc=t.createContext({state:bc,dispatch:null}),wc=e=>{const t=e.filter((e=>e.active)).reduce(((e,t)=>{var n,r,i,o;let a=[];const l=t.condition===D.THROUGH?L.EQUAL:t.condition;if(null===t.value)a=[{field:l in L?t.key:null,condition:Ut[l],treeId:null==(n=t.tree)?void 0:n.id}];else if("string"==typeof t.value.value&&t.value.value.match(/\n/g)){const e=t.value.value.split("\n").filter(Boolean);a.push({operator:Wt.OPEN_BRACKET});for(const n of e)a.push({field:l in L?t.key:null,value:n,condition:Ut[l]}),a.push({operator:Wt.OR});a.pop(),a.push({operator:Wt.CLOSE_BRACKET})}else a=[{field:(null==t?void 0:t.condition)in L?t.key:null,value:(null==t?void 0:t.condition)===L.BETWEEN?JSON.stringify((null==(r=null==t?void 0:t.value)?void 0:r.value)??""):((null==(i=null==t?void 0:t.value)?void 0:i.value)??"").toString(),condition:Ut[null==t?void 0:t.condition],treeId:null==(o=t.tree)?void 0:o.id}];return e.concat(...a,{operator:Wt.AND})}),[]);return t.pop(),t},Ec=()=>e.useContext(xc);var Sc=$;var Cc=function(e,t,n){var r=null==e?void 0:Sc(e,t);return void 0===r?n:r},Ic={},kc={get exports(){return Ic},set exports(e){Ic=e}},Rc={};!function(e,t){function n(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function l(e){n(a,i,o,l,s,"next",e)}function s(e){n(a,i,o,l,s,"throw",e)}l(void 0)}))}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var l={init:"init"},s=function(e){var t=e.value;return void 0===t?"":t},c=function(){return t.createElement(t.Fragment,null,"")},u={Cell:s,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){var n=t.style,r=t.className;return e=i({},e,{},o(t,["style","className"])),n&&(e.style=e.style?i({},e.style||{},{},n||{}):n),r&&(e.className=e.className?e.className+" "+r:r),""===e.className&&delete e.className,e}),{})}var p=function(e,t){return void 0===t&&(t={}),function(n){return void 0===n&&(n={}),[].concat(e,[n]).reduce((function(e,r){return function e(t,n,r){return"function"==typeof n?e({},n(t,r)):Array.isArray(n)?d.apply(void 0,[t].concat(n)):d(t,n)}(e,r,i({},t,{userProps:n}))}),{})}},f=function(e,t,n,r){return void 0===n&&(n={}),e.reduce((function(e,t){return t(e,n)}),t)},v=function(e,t,n){return void 0===n&&(n={}),e.forEach((function(e){e(t,n)}))};function m(e,t,n,r){e.findIndex((function(e){return e.pluginName===n})),t.forEach((function(t){e.findIndex((function(e){return e.pluginName===t}))}))}function g(e,t){return"function"==typeof e?e(t):e}function h(e){var n=t.useRef();return n.current=e,t.useCallback((function(){return n.current}),[])}var b="undefined"!=typeof document?t.useLayoutEffect:t.useEffect;function y(e,n){var r=t.useRef(!1);b((function(){r.current&&e(),r.current=!0}),n)}function x(e,t,n){return void 0===n&&(n={}),function(r,o){void 0===o&&(o={});var a="string"==typeof r?t[r]:r;if(void 0===a)throw console.info(t),new Error("Renderer Error ");return w(a,i({},e,{column:t},n,{},o))}}function w(e,n){return"function"==typeof(r=o=e)&&(i=Object.getPrototypeOf(r)).prototype&&i.prototype.isReactComponent||"function"==typeof o||function(e){return"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}(o)?t.createElement(e,n):e;var r,i,o}function E(e,t,n){return void 0===n&&(n=0),e.map((function(e){return C(e=i({},e,{parent:t,depth:n})),e.columns&&(e.columns=E(e.columns,e,n+1)),e}))}function S(e){return j(e,"columns")}function C(e){var t=e.id,n=e.accessor,r=e.Header;if("string"==typeof n){t=t||n;var i=n.split(".");n=function(e){return function(e,t,n){if(!t)return e;var r,i,o="function"==typeof t?t:JSON.stringify(t),a=R.get(o)||(i=function e(t,n){if(void 0===n&&(n=[]),Array.isArray(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}(t).map((function(e){return String(e).replace(".","_")})).join(".").replace(L,".").replace($,"").split("."),R.set(o,i),i);try{r=a.reduce((function(e,t){return e[t]}),e)}catch(i){}return void 0!==r?r:n}(e,i)}}if(!t&&"string"==typeof r&&r&&(t=r),!t&&e.columns)throw console.error(e),new Error('A column ID (or unique "Header" value) is required!');if(!t)throw console.error(e),new Error("A column ID (or string accessor) is required!");return Object.assign(e,{id:t,accessor:n}),e}function I(e,t){if(!t)throw new Error;return Object.assign(e,i({Header:c,Footer:c},u,{},t,{},e)),Object.assign(e,{originalWidth:e.width}),e}function k(e,t,n){void 0===n&&(n=function(){return{}});for(var r=[],o=e,a=0,l=function(){return a++},s=function(){var e={headers:[]},a=[],s=o.some((function(e){return e.parent}));o.forEach((function(r){var o,c=[].concat(a).reverse()[0];s&&(o=r.parent?i({},r.parent,{originalId:r.parent.id,id:r.parent.id+"_"+l(),headers:[r]},n(r)):I(i({originalId:r.id+"_placeholder",id:r.id+"_placeholder_"+l(),placeholderOf:r,headers:[r]},n(r)),t),c&&c.originalId===o.originalId?c.headers.push(r):a.push(o)),e.headers.push(r)})),r.push(e),o=a};o.length;)s();return r.reverse()}var R=new Map;function _(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r+=1)if(void 0!==t[r])return t[r]}function T(e){if("function"==typeof e)return e}function j(e,t){var n=[];return function e(r){r.forEach((function(r){r[t]?e(r[t]):n.push(r)}))}(e),n}function A(e,t){var n=t.manualExpandedKey,r=t.expanded,i=t.expandSubRows,o=void 0===i||i,a=[];return e.forEach((function(e){return function e(t,i){void 0===i&&(i=!0),t.isExpanded=t.original&&t.original[n]||r[t.id],t.canExpand=t.subRows&&!!t.subRows.length,i&&a.push(t),t.subRows&&t.subRows.length&&t.isExpanded&&t.subRows.forEach((function(t){return e(t,o)}))}(e)})),a}function O(e,t,n){return T(e)||t[e]||n[e]||n.text}function P(e,t,n){return e?e(t,n):void 0===t}function N(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var D=null,L=/\[/g,$=/\]/g,M=function(e){return i({role:"table"},e)},B=function(e){return i({role:"rowgroup"},e)},V=function(e,t){var n=t.column;return i({key:"header_"+n.id,colSpan:n.totalVisibleHeaderCount,role:"columnheader"},e)},F=function(e,t){var n=t.column;return i({key:"footer_"+n.id,colSpan:n.totalVisibleHeaderCount},e)},z=function(e,t){return i({key:"headerGroup_"+t.index,role:"row"},e)},H=function(e,t){return i({key:"footerGroup_"+t.index},e)},G=function(e,t){return i({key:"row_"+t.row.id,role:"row"},e)},U=function(e,t){var n=t.cell;return i({key:"cell_"+n.row.id+"_"+n.column.id,role:"cell"},e)};function W(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[M],getTableBodyProps:[B],getHeaderGroupProps:[z],getFooterGroupProps:[H],getHeaderProps:[V],getFooterProps:[F],getRowProps:[G],getCellProps:[U],useFinalInstance:[]}}l.resetHiddenColumns="resetHiddenColumns",l.toggleHideColumn="toggleHideColumn",l.setHiddenColumns="setHiddenColumns",l.toggleHideAllColumns="toggleHideAllColumns";var q=function(e){e.getToggleHiddenProps=[Y],e.getToggleHideAllColumnsProps=[X],e.stateReducers.push(K),e.useInstanceBeforeDimensions.push(Q),e.headerGroupsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.hiddenColumns])})),e.useInstance.push(Z)};q.pluginName="useColumnVisibility";var Y=function(e,t){var n=t.column;return[e,{onChange:function(e){n.toggleHidden(!e.target.checked)},style:{cursor:"pointer"},checked:n.isVisible,title:"Toggle Column Visible"}]},X=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleHideAllColumns(!e.target.checked)},style:{cursor:"pointer"},checked:!n.allColumnsHidden&&!n.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!n.allColumnsHidden&&n.state.hiddenColumns.length}]};function K(e,t,n,r){if(t.type===l.init)return i({hiddenColumns:[]},e);if(t.type===l.resetHiddenColumns)return i({},e,{hiddenColumns:r.initialState.hiddenColumns||[]});if(t.type===l.toggleHideColumn){var o=(void 0!==t.value?t.value:!e.hiddenColumns.includes(t.columnId))?[].concat(e.hiddenColumns,[t.columnId]):e.hiddenColumns.filter((function(e){return e!==t.columnId}));return i({},e,{hiddenColumns:o})}return t.type===l.setHiddenColumns?i({},e,{hiddenColumns:g(t.value,e.hiddenColumns)}):t.type===l.toggleHideAllColumns?i({},e,{hiddenColumns:(void 0!==t.value?t.value:!e.hiddenColumns.length)?r.allColumns.map((function(e){return e.id})):[]}):void 0}function Q(e){var n=e.headers,r=e.state.hiddenColumns;t.useRef(!1).current;var i=0;n.forEach((function(e){return i+=function e(t,n){t.isVisible=n&&!r.includes(t.id);var i=0;return t.headers&&t.headers.length?t.headers.forEach((function(n){return i+=e(n,t.isVisible)})):i=t.isVisible?1:0,t.totalVisibleHeaderCount=i,i}(e,!0)}))}function Z(e){var n=e.columns,r=e.flatHeaders,i=e.dispatch,o=e.allColumns,a=e.getHooks,s=e.state.hiddenColumns,c=e.autoResetHiddenColumns,u=void 0===c||c,d=h(e),f=o.length===s.length,v=t.useCallback((function(e,t){return i({type:l.toggleHideColumn,columnId:e,value:t})}),[i]),m=t.useCallback((function(e){return i({type:l.setHiddenColumns,value:e})}),[i]),g=t.useCallback((function(e){return i({type:l.toggleHideAllColumns,value:e})}),[i]),b=p(a().getToggleHideAllColumnsProps,{instance:d()});r.forEach((function(e){e.toggleHidden=function(t){i({type:l.toggleHideColumn,columnId:e.id,value:t})},e.getToggleHiddenProps=p(a().getToggleHiddenProps,{instance:d(),column:e})}));var x=h(u);y((function(){x()&&i({type:l.resetHiddenColumns})}),[i,n]),Object.assign(e,{allColumnsHidden:f,toggleHideColumn:v,setHiddenColumns:m,toggleHideAllColumns:g,getToggleHideAllColumnsProps:b})}var J={},ee={},te=function(e,t,n){return e},ne=function(e,t){return e.subRows||[]},re=function(e,t,n){return""+(n?[n.id,t].join("."):t)},ie=function(e){return e};function oe(e){var t=e.initialState,n=void 0===t?J:t,r=e.defaultColumn,a=void 0===r?ee:r,l=e.getSubRows,s=void 0===l?ne:l,c=e.getRowId,u=void 0===c?re:c,d=e.stateReducer,p=void 0===d?te:d,f=e.useControlledState,v=void 0===f?ie:f;return i({},o(e,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:n,defaultColumn:a,getSubRows:s,getRowId:u,stateReducer:p,useControlledState:v})}function ae(e,t){void 0===t&&(t=0);var n=0,r=0,i=0,o=0;return e.forEach((function(e){var a=e.headers;if(e.totalLeft=t,a&&a.length){var l=ae(a,t),s=l[0],c=l[1],u=l[2],d=l[3];e.totalMinWidth=s,e.totalWidth=c,e.totalMaxWidth=u,e.totalFlexWidth=d}else e.totalMinWidth=e.minWidth,e.totalWidth=Math.min(Math.max(e.minWidth,e.width),e.maxWidth),e.totalMaxWidth=e.maxWidth,e.totalFlexWidth=e.canResize?e.totalWidth:0;e.isVisible&&(t+=e.totalWidth,n+=e.totalMinWidth,r+=e.totalWidth,i+=e.totalMaxWidth,o+=e.totalFlexWidth)})),[n,r,i,o]}function le(e){var t=e.data,n=e.rows,r=e.flatRows,i=e.rowsById,o=e.column,a=e.getRowId,l=e.getSubRows,s=e.accessValueHooks,c=e.getInstance;t.forEach((function(e,u){return function e(n,u,d,p,v){void 0===d&&(d=0);var m=n,g=a(n,u,p),h=i[g];if(h)h.subRows&&h.originalSubRows.forEach((function(t,n){return e(t,n,d+1,h)}));else if((h={id:g,original:m,index:u,depth:d,cells:[{}]}).cells.map=N,h.cells.filter=N,h.cells.forEach=N,h.cells[0].getCellProps=N,h.values={},v.push(h),r.push(h),i[g]=h,h.originalSubRows=l(n,u),h.originalSubRows){var b=[];h.originalSubRows.forEach((function(t,n){return e(t,n,d+1,h,b)})),h.subRows=b}o.accessor&&(h.values[o.id]=o.accessor(n,u,h,v,t)),h.values[o.id]=f(s,h.values[o.id],{row:h,column:o,instance:c()})}(e,u,0,void 0,n)}))}l.resetExpanded="resetExpanded",l.toggleRowExpanded="toggleRowExpanded",l.toggleAllRowsExpanded="toggleAllRowsExpanded";var se=function(e){e.getToggleAllRowsExpandedProps=[ce],e.getToggleRowExpandedProps=[ue],e.stateReducers.push(de),e.useInstance.push(pe),e.prepareRow.push(fe)};se.pluginName="useExpanded";var ce=function(e,t){var n=t.instance;return[e,{onClick:function(e){n.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},ue=function(e,t){var n=t.row;return[e,{onClick:function(){n.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function de(e,t,n,r){if(t.type===l.init)return i({expanded:{}},e);if(t.type===l.resetExpanded)return i({},e,{expanded:r.initialState.expanded||{}});if(t.type===l.toggleAllRowsExpanded){var s=t.value,c=r.rowsById,u=Object.keys(c).length===Object.keys(e.expanded).length;if(void 0!==s?s:!u){var d={};return Object.keys(c).forEach((function(e){d[e]=!0})),i({},e,{expanded:d})}return i({},e,{expanded:{}})}if(t.type===l.toggleRowExpanded){var p,f=t.id,v=t.value,m=e.expanded[f],g=void 0!==v?v:!m;if(!m&&g)return i({},e,{expanded:i({},e.expanded,(p={},p[f]=!0,p))});if(m&&!g){var h=e.expanded;return h[f],i({},e,{expanded:o(h,[f].map(a))})}return e}}function pe(e){var n=e.data,r=e.rows,i=e.rowsById,o=e.manualExpandedKey,a=void 0===o?"expanded":o,s=e.paginateExpandedRows,c=void 0===s||s,u=e.expandSubRows,d=void 0===u||u,f=e.autoResetExpanded,v=void 0===f||f,g=e.getHooks,b=e.plugins,x=e.state.expanded,w=e.dispatch;m(b,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var E=h(v),S=Boolean(Object.keys(i).length&&Object.keys(x).length);S&&Object.keys(i).some((function(e){return!x[e]}))&&(S=!1),y((function(){E()&&w({type:l.resetExpanded})}),[w,n]);var C=t.useCallback((function(e,t){w({type:l.toggleRowExpanded,id:e,value:t})}),[w]),I=t.useCallback((function(e){return w({type:l.toggleAllRowsExpanded,value:e})}),[w]),k=t.useMemo((function(){return c?A(r,{manualExpandedKey:a,expanded:x,expandSubRows:d}):r}),[c,r,a,x,d]),R=t.useMemo((function(){return e=x,t=0,Object.keys(e).forEach((function(e){var n=e.split(".");t=Math.max(t,n.length)})),t;var e,t}),[x]),_=h(e),T=p(g().getToggleAllRowsExpandedProps,{instance:_()});Object.assign(e,{preExpandedRows:r,expandedRows:k,rows:k,expandedDepth:R,isAllRowsExpanded:S,toggleRowExpanded:C,toggleAllRowsExpanded:I,getToggleAllRowsExpandedProps:T})}function fe(e,t){var n=t.instance.getHooks,r=t.instance;e.toggleRowExpanded=function(t){return r.toggleRowExpanded(e.id,t)},e.getToggleRowExpandedProps=p(n().getToggleRowExpandedProps,{instance:r,row:e})}var ve=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return String(r).toLowerCase().includes(String(n).toLowerCase())}))}))};ve.autoRemove=function(e){return!e};var me=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return void 0===r||String(r).toLowerCase()===String(n).toLowerCase()}))}))};me.autoRemove=function(e){return!e};var ge=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return void 0===r||String(r)===String(n)}))}))};ge.autoRemove=function(e){return!e};var he=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t].includes(n)}))}))};he.autoRemove=function(e){return!e||!e.length};var be=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return r&&r.length&&n.every((function(e){return r.includes(e)}))}))}))};be.autoRemove=function(e){return!e||!e.length};var ye=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return r&&r.length&&n.some((function(e){return r.includes(e)}))}))}))};ye.autoRemove=function(e){return!e||!e.length};var xe=function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return n.includes(r)}))}))};xe.autoRemove=function(e){return!e||!e.length};var we=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t]===n}))}))};we.autoRemove=function(e){return void 0===e};var Ee=function(e,t,n){return e.filter((function(e){return t.some((function(t){return e.values[t]==n}))}))};Ee.autoRemove=function(e){return null==e};var Se=function(e,t,n){var r=n||[],i=r[0],o=r[1];if((i="number"==typeof i?i:-1/0)>(o="number"==typeof o?o:1/0)){var a=i;i=o,o=a}return e.filter((function(e){return t.some((function(t){var n=e.values[t];return n>=i&&n<=o}))}))};Se.autoRemove=function(e){return!e||"number"!=typeof e[0]&&"number"!=typeof e[1]};var Ce=Object.freeze({__proto__:null,text:ve,exactText:me,exactTextCase:ge,includes:he,includesAll:be,includesSome:ye,includesValue:xe,exact:we,equals:Ee,between:Se});l.resetFilters="resetFilters",l.setFilter="setFilter",l.setAllFilters="setAllFilters";var Ie=function(e){e.stateReducers.push(ke),e.useInstance.push(Re)};function ke(e,t,n,r){if(t.type===l.init)return i({filters:[]},e);if(t.type===l.resetFilters)return i({},e,{filters:r.initialState.filters||[]});if(t.type===l.setFilter){var o=t.columnId,a=t.filterValue,s=r.allColumns,c=r.filterTypes,u=s.find((function(e){return e.id===o}));if(!u)throw new Error("React-Table: Could not find a column with id: "+o);var d=O(u.filter,c||{},Ce),p=e.filters.find((function(e){return e.id===o})),f=g(a,p&&p.value);return P(d.autoRemove,f,u)?i({},e,{filters:e.filters.filter((function(e){return e.id!==o}))}):i({},e,p?{filters:e.filters.map((function(e){return e.id===o?{id:o,value:f}:e}))}:{filters:[].concat(e.filters,[{id:o,value:f}])})}if(t.type===l.setAllFilters){var v=t.filters,m=r.allColumns,h=r.filterTypes;return i({},e,{filters:g(v,e.filters).filter((function(e){var t=m.find((function(t){return t.id===e.id}));return!P(O(t.filter,h||{},Ce).autoRemove,e.value,t)}))})}}function Re(e){var n=e.data,r=e.rows,i=e.flatRows,o=e.rowsById,a=e.allColumns,s=e.filterTypes,c=e.manualFilters,u=e.defaultCanFilter,d=void 0!==u&&u,p=e.disableFilters,f=e.state.filters,v=e.dispatch,m=e.autoResetFilters,g=void 0===m||m,b=t.useCallback((function(e,t){v({type:l.setFilter,columnId:e,filterValue:t})}),[v]),x=t.useCallback((function(e){v({type:l.setAllFilters,filters:e})}),[v]);a.forEach((function(e){var t=e.id,n=e.accessor,r=e.defaultCanFilter,i=e.disableFilters;e.canFilter=n?_(!0!==i&&void 0,!0!==p&&void 0,!0):_(r,d,!1),e.setFilter=function(t){return b(e.id,t)};var o=f.find((function(e){return e.id===t}));e.filterValue=o&&o.value}));var w=t.useMemo((function(){if(c||!f.length)return[r,i,o];var e=[],t={};return[function n(r,i){void 0===i&&(i=0);var o=r;return(o=f.reduce((function(e,t){var n=t.id,r=t.value,o=a.find((function(e){return e.id===n}));if(!o)return e;0===i&&(o.preFilteredRows=e);var l=O(o.filter,s||{},Ce);return l?(o.filteredRows=l(e,[n],r),o.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+o.id+"."),e)}),r)).forEach((function(r){e.push(r),t[r.id]=r,r.subRows&&(r.subRows=r.subRows&&r.subRows.length>0?n(r.subRows,i+1):r.subRows)})),o}(r),e,t]}),[c,f,r,i,o,a,s]),E=w[0],S=w[1],C=w[2];t.useMemo((function(){a.filter((function(e){return!f.find((function(t){return t.id===e.id}))})).forEach((function(e){e.preFilteredRows=E,e.filteredRows=E}))}),[E,f,a]);var I=h(g);y((function(){I()&&v({type:l.resetFilters})}),[v,c?null:n]),Object.assign(e,{preFilteredRows:r,preFilteredFlatRows:i,preFilteredRowsById:o,filteredRows:E,filteredFlatRows:S,filteredRowsById:C,rows:E,flatRows:S,rowsById:C,setFilter:b,setAllFilters:x})}Ie.pluginName="useFilters",l.resetGlobalFilter="resetGlobalFilter",l.setGlobalFilter="setGlobalFilter";var _e=function(e){e.stateReducers.push(Te),e.useInstance.push(je)};function Te(e,t,n,r){if(t.type===l.resetGlobalFilter)return i({},e,{globalFilter:r.initialState.globalFilter||void 0});if(t.type===l.setGlobalFilter){var a=t.filterValue,s=r.userFilterTypes,c=O(r.globalFilter,s||{},Ce),u=g(a,e.globalFilter);return P(c.autoRemove,u)?(e.globalFilter,o(e,["globalFilter"])):i({},e,{globalFilter:u})}}function je(e){var n=e.data,r=e.rows,i=e.flatRows,o=e.rowsById,a=e.allColumns,s=e.filterTypes,c=e.globalFilter,u=e.manualGlobalFilter,d=e.state.globalFilter,p=e.dispatch,f=e.autoResetGlobalFilter,v=void 0===f||f,m=e.disableGlobalFilter,g=t.useCallback((function(e){p({type:l.setGlobalFilter,filterValue:e})}),[p]),b=t.useMemo((function(){if(u||void 0===d)return[r,i,o];var e=[],t={},n=O(c,s||{},Ce);if(!n)return console.warn("Could not find a valid 'globalFilter' option."),r;a.forEach((function(e){var t=e.disableGlobalFilter;e.canFilter=_(!0!==t&&void 0,!0!==m&&void 0,!0)}));var l=a.filter((function(e){return!0===e.canFilter}));return[function r(i){return(i=n(i,l.map((function(e){return e.id})),d)).forEach((function(n){e.push(n),t[n.id]=n,n.subRows=n.subRows&&n.subRows.length?r(n.subRows):n.subRows})),i}(r),e,t]}),[u,d,c,s,a,r,i,o,m]),x=b[0],w=b[1],E=b[2],S=h(v);y((function(){S()&&p({type:l.resetGlobalFilter})}),[p,u?null:n]),Object.assign(e,{preGlobalFilteredRows:r,preGlobalFilteredFlatRows:i,preGlobalFilteredRowsById:o,globalFilteredRows:x,globalFilteredFlatRows:w,globalFilteredRowsById:E,rows:x,flatRows:w,rowsById:E,setGlobalFilter:g,disableGlobalFilter:m})}function Ae(e,t){return t.reduce((function(e,t){return e+("number"==typeof t?t:0)}),0)}_e.pluginName="useGlobalFilter";var Oe=Object.freeze({__proto__:null,sum:Ae,min:function(e){var t=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.min(t,e))})),t},max:function(e){var t=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.max(t,e))})),t},minMax:function(e){var t=e[0]||0,n=e[0]||0;return e.forEach((function(e){"number"==typeof e&&(t=Math.min(t,e),n=Math.max(n,e))})),t+".."+n},average:function(e){return Ae(0,e)/e.length},median:function(e){if(!e.length)return null;var t=Math.floor(e.length/2),n=[].concat(e).sort((function(e,t){return e-t}));return e.length%2!=0?n[t]:(n[t-1]+n[t])/2},unique:function(e){return Array.from(new Set(e).values())},uniqueCount:function(e){return new Set(e).size},count:function(e){return e.length}}),Pe=[],Ne={};l.resetGroupBy="resetGroupBy",l.setGroupBy="setGroupBy",l.toggleGroupBy="toggleGroupBy";var De=function(e){e.getGroupByToggleProps=[Le],e.stateReducers.push($e),e.visibleColumnsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.groupBy])})),e.visibleColumns.push(Me),e.useInstance.push(Ve),e.prepareRow.push(Fe)};De.pluginName="useGroupBy";var Le=function(e,t){var n=t.header;return[e,{onClick:n.canGroupBy?function(e){e.persist(),n.toggleGroupBy()}:void 0,style:{cursor:n.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function $e(e,t,n,r){if(t.type===l.init)return i({groupBy:[]},e);if(t.type===l.resetGroupBy)return i({},e,{groupBy:r.initialState.groupBy||[]});if(t.type===l.setGroupBy)return i({},e,{groupBy:t.value});if(t.type===l.toggleGroupBy){var o=t.columnId,a=t.value,s=void 0!==a?a:!e.groupBy.includes(o);return i({},e,s?{groupBy:[].concat(e.groupBy,[o])}:{groupBy:e.groupBy.filter((function(e){return e!==o}))})}}function Me(e,t){var n=t.instance.state.groupBy,r=n.map((function(t){return e.find((function(e){return e.id===t}))})).filter(Boolean),i=e.filter((function(e){return!n.includes(e.id)}));return(e=[].concat(r,i)).forEach((function(e){e.isGrouped=n.includes(e.id),e.groupedIndex=n.indexOf(e.id)})),e}var Be={};function Ve(e){var n=e.data,r=e.rows,o=e.flatRows,a=e.rowsById,s=e.allColumns,c=e.flatHeaders,u=e.groupByFn,d=void 0===u?ze:u,f=e.manualGroupBy,v=e.aggregations,g=void 0===v?Be:v,b=e.plugins,x=e.state.groupBy,w=e.dispatch,E=e.autoResetGroupBy,S=void 0===E||E,C=e.disableGroupBy,I=e.defaultCanGroupBy,k=e.getHooks;m(b,["useColumnOrder","useFilters"],"useGroupBy");var R=h(e);s.forEach((function(t){var n=t.accessor,r=t.defaultGroupBy,i=t.disableGroupBy;t.canGroupBy=n?_(t.canGroupBy,!0!==i&&void 0,!0!==C&&void 0,!0):_(t.canGroupBy,r,I,!1),t.canGroupBy&&(t.toggleGroupBy=function(){return e.toggleGroupBy(t.id)}),t.Aggregated=t.Aggregated||t.Cell}));var T=t.useCallback((function(e,t){w({type:l.toggleGroupBy,columnId:e,value:t})}),[w]),A=t.useCallback((function(e){w({type:l.setGroupBy,value:e})}),[w]);c.forEach((function(e){e.getGroupByToggleProps=p(k().getGroupByToggleProps,{instance:R(),header:e})}));var O=t.useMemo((function(){if(f||!x.length)return[r,o,a,Pe,Ne,o,a];var e=x.filter((function(e){return s.find((function(t){return t.id===e}))})),t=[],n={},l=[],c={},u=[],p={},v=function r(o,a,f){if(void 0===a&&(a=0),a===e.length)return o.map((function(e){return i({},e,{depth:a})}));var v=e[a],m=d(o,v);return Object.entries(m).map((function(i,o){var d,m,h,b,y=i[0],x=i[1],w=v+":"+y,E=r(x,a+1,w=f?f+">"+w:w),S=a?j(x,"leafRows"):x,C=(d=S,m=x,h=a,b={},s.forEach((function(t){if(e.includes(t.id))b[t.id]=m[0]?m[0].values[t.id]:null;else{var n="function"==typeof t.aggregate?t.aggregate:g[t.aggregate]||Oe[t.aggregate];if(n){var r=m.map((function(e){return e.values[t.id]})),i=d.map((function(e){var n=e.values[t.id];if(!h&&t.aggregateValue){var r="function"==typeof t.aggregateValue?t.aggregateValue:g[t.aggregateValue]||Oe[t.aggregateValue];if(!r)throw console.info({column:t}),new Error("React Table: Invalid column.aggregateValue option for column listed above");n=r(n,e,t)}return n}));b[t.id]=n(i,r)}else{if(t.aggregate)throw console.info({column:t}),new Error("React Table: Invalid column.aggregate option for column listed above");b[t.id]=null}}})),b),I={id:w,isGrouped:!0,groupByID:v,groupByVal:y,values:C,subRows:E,leafRows:S,depth:a,index:o};return E.forEach((function(e){t.push(e),n[e.id]=e,e.isGrouped?(l.push(e),c[e.id]=e):(u.push(e),p[e.id]=e)})),I}))}(r);return v.forEach((function(e){t.push(e),n[e.id]=e,e.isGrouped?(l.push(e),c[e.id]=e):(u.push(e),p[e.id]=e)})),[v,t,n,l,c,u,p]}),[f,x,r,o,a,s,g,d]),P=O[0],N=O[1],D=O[2],L=O[3],$=O[4],M=O[5],B=O[6],V=h(S);y((function(){V()&&w({type:l.resetGroupBy})}),[w,f?null:n]),Object.assign(e,{preGroupedRows:r,preGroupedFlatRow:o,preGroupedRowsById:a,groupedRows:P,groupedFlatRows:N,groupedRowsById:D,onlyGroupedFlatRows:L,onlyGroupedRowsById:$,nonGroupedFlatRows:M,nonGroupedRowsById:B,rows:P,flatRows:N,rowsById:D,toggleGroupBy:T,setGroupBy:A})}function Fe(e){e.allCells.forEach((function(t){var n;t.isGrouped=t.column.isGrouped&&t.column.id===e.groupByID,t.isPlaceholder=!t.isGrouped&&t.column.isGrouped,t.isAggregated=!t.isGrouped&&!t.isPlaceholder&&(null==(n=e.subRows)?void 0:n.length)}))}function ze(e,t){return e.reduce((function(e,n,r){var i=""+n.values[t];return e[i]=Array.isArray(e[i])?e[i]:[],e[i].push(n),e}),{})}var He=/([0-9]+)/gm;function Ge(e,t){return e===t?0:e>t?1:-1}function Ue(e,t,n){return[e.values[n],t.values[n]]}function We(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}var qe=Object.freeze({__proto__:null,alphanumeric:function(e,t,n){var r=Ue(e,t,n),i=r[0],o=r[1];for(i=We(i),o=We(o),i=i.split(He).filter(Boolean),o=o.split(He).filter(Boolean);i.length&&o.length;){var a=i.shift(),l=o.shift(),s=parseInt(a,10),c=parseInt(l,10),u=[s,c].sort();if(isNaN(u[0])){if(a>l)return 1;if(l>a)return-1}else{if(isNaN(u[1]))return isNaN(s)?-1:1;if(s>c)return 1;if(c>s)return-1}}return i.length-o.length},datetime:function(e,t,n){var r=Ue(e,t,n),i=r[0],o=r[1];return Ge(i=i.getTime(),o=o.getTime())},basic:function(e,t,n){var r=Ue(e,t,n);return Ge(r[0],r[1])},string:function(e,t,n){var r=Ue(e,t,n),i=r[0],o=r[1];for(i=i.split("").filter(Boolean),o=o.split("").filter(Boolean);i.length&&o.length;){var a=i.shift(),l=o.shift(),s=a.toLowerCase(),c=l.toLowerCase();if(s>c)return 1;if(c>s)return-1;if(a>l)return 1;if(l>a)return-1}return i.length-o.length},number:function(e,t,n){var r=Ue(e,t,n),i=r[0],o=r[1],a=/[^0-9.]/gi;return Ge(i=Number(String(i).replace(a,"")),o=Number(String(o).replace(a,"")))}});l.resetSortBy="resetSortBy",l.setSortBy="setSortBy",l.toggleSortBy="toggleSortBy",l.clearSortBy="clearSortBy",u.sortType="alphanumeric",u.sortDescFirst=!1;var Ye=function(e){e.getSortByToggleProps=[Xe],e.stateReducers.push(Ke),e.useInstance.push(Qe)};Ye.pluginName="useSortBy";var Xe=function(e,t){var n=t.instance,r=t.column,i=n.isMultiSortEvent,o=void 0===i?function(e){return e.shiftKey}:i;return[e,{onClick:r.canSort?function(e){e.persist(),r.toggleSortBy(void 0,!n.disableMultiSort&&o(e))}:void 0,style:{cursor:r.canSort?"pointer":void 0},title:r.canSort?"Toggle SortBy":void 0}]};function Ke(e,t,n,r){if(t.type===l.init)return i({sortBy:[]},e);if(t.type===l.resetSortBy)return i({},e,{sortBy:r.initialState.sortBy||[]});if(t.type===l.clearSortBy)return i({},e,{sortBy:e.sortBy.filter((function(e){return e.id!==t.columnId}))});if(t.type===l.setSortBy)return i({},e,{sortBy:t.sortBy});if(t.type===l.toggleSortBy){var o,a=t.columnId,s=t.desc,c=t.multi,u=r.allColumns,d=r.disableMultiSort,p=r.disableSortRemove,f=r.disableMultiRemove,v=r.maxMultiSortColCount,m=void 0===v?Number.MAX_SAFE_INTEGER:v,g=e.sortBy,h=u.find((function(e){return e.id===a})).sortDescFirst,b=g.find((function(e){return e.id===a})),y=g.findIndex((function(e){return e.id===a})),x=null!=s,w=[];return"toggle"!=(o=!d&&c?b?"toggle":"add":y!==g.length-1||1!==g.length?"replace":b?"toggle":"replace")||p||x||c&&f||!(b&&b.desc&&!h||!b.desc&&h)||(o="remove"),"replace"===o?w=[{id:a,desc:x?s:h}]:"add"===o?(w=[].concat(g,[{id:a,desc:x?s:h}])).splice(0,w.length-m):"toggle"===o?w=g.map((function(e){return e.id===a?i({},e,{desc:x?s:!b.desc}):e})):"remove"===o&&(w=g.filter((function(e){return e.id!==a}))),i({},e,{sortBy:w})}}function Qe(e){var n=e.data,r=e.rows,i=e.flatRows,o=e.allColumns,a=e.orderByFn,s=void 0===a?Ze:a,c=e.sortTypes,u=e.manualSortBy,d=e.defaultCanSort,f=e.disableSortBy,v=e.flatHeaders,g=e.state.sortBy,b=e.dispatch,x=e.plugins,w=e.getHooks,E=e.autoResetSortBy,S=void 0===E||E;m(x,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var C=t.useCallback((function(e){b({type:l.setSortBy,sortBy:e})}),[b]),I=t.useCallback((function(e,t,n){b({type:l.toggleSortBy,columnId:e,desc:t,multi:n})}),[b]),k=h(e);v.forEach((function(e){var t=e.accessor,n=e.canSort,r=e.disableSortBy,i=e.id,o=t?_(!0!==r&&void 0,!0!==f&&void 0,!0):_(d,n,!1);e.canSort=o,e.canSort&&(e.toggleSortBy=function(t,n){return I(e.id,t,n)},e.clearSortBy=function(){b({type:l.clearSortBy,columnId:e.id})}),e.getSortByToggleProps=p(w().getSortByToggleProps,{instance:k(),column:e});var a=g.find((function(e){return e.id===i}));e.isSorted=!!a,e.sortedIndex=g.findIndex((function(e){return e.id===i})),e.isSortedDesc=e.isSorted?a.desc:void 0}));var R=t.useMemo((function(){if(u||!g.length)return[r,i];var e=[],t=g.filter((function(e){return o.find((function(t){return t.id===e.id}))}));return[function n(r){var i=s(r,t.map((function(e){var t=o.find((function(t){return t.id===e.id}));if(!t)throw new Error("React-Table: Could not find a column with id: "+e.id+" while sorting");var n=t.sortType,r=T(n)||(c||{})[n]||qe[n];if(!r)throw new Error("React-Table: Could not find a valid sortType of '"+n+"' for column '"+e.id+"'.");return function(t,n){return r(t,n,e.id,e.desc)}})),t.map((function(e){var t=o.find((function(t){return t.id===e.id}));return t&&t.sortInverted?e.desc:!e.desc})));return i.forEach((function(t){e.push(t),t.subRows&&0!==t.subRows.length&&(t.subRows=n(t.subRows))})),i}(r),e]}),[u,g,r,i,o,s,c]),j=R[0],A=R[1],O=h(S);y((function(){O()&&b({type:l.resetSortBy})}),[u?null:n]),Object.assign(e,{preSortedRows:r,preSortedFlatRows:i,sortedRows:j,sortedFlatRows:A,rows:j,flatRows:A,setSortBy:C,toggleSortBy:I})}function Ze(e,t,n){return[].concat(e).sort((function(e,r){for(var i=0;i<t.length;i+=1){var o=t[i],a=!1===n[i]||"desc"===n[i],l=o(e,r);if(0!==l)return a?-l:l}return n[0]?e.index-r.index:r.index-e.index}))}l.resetPage="resetPage",l.gotoPage="gotoPage",l.setPageSize="setPageSize";var Je=function(e){e.stateReducers.push(et),e.useInstance.push(tt)};function et(e,t,n,r){if(t.type===l.init)return i({pageSize:10,pageIndex:0},e);if(t.type===l.resetPage)return i({},e,{pageIndex:r.initialState.pageIndex||0});if(t.type===l.gotoPage){var o=r.pageCount,a=r.page,s=g(t.pageIndex,e.pageIndex),c=!1;return s>e.pageIndex?c=-1===o?a.length>=e.pageSize:s<o:s<e.pageIndex&&(c=s>-1),c?i({},e,{pageIndex:s}):e}if(t.type===l.setPageSize){var u=t.pageSize,d=e.pageSize*e.pageIndex;return i({},e,{pageIndex:Math.floor(d/u),pageSize:u})}}function tt(e){var n=e.rows,r=e.autoResetPage,i=void 0===r||r,o=e.manualExpandedKey,a=void 0===o?"expanded":o,s=e.plugins,c=e.pageCount,u=e.paginateExpandedRows,d=void 0===u||u,p=e.expandSubRows,f=void 0===p||p,v=e.state,g=v.pageSize,b=v.pageIndex,x=v.expanded,w=v.globalFilter,E=v.filters,S=v.groupBy,C=v.sortBy,I=e.dispatch,k=e.data,R=e.manualPagination;m(s,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var _=h(i);y((function(){_()&&I({type:l.resetPage})}),[I,R?null:k,w,E,S,C]);var T=R?c:Math.ceil(n.length/g),j=t.useMemo((function(){return T>0?[].concat(new Array(T)).fill(null).map((function(e,t){return t})):[]}),[T]),O=t.useMemo((function(){var e;if(R)e=n;else{var t=g*b,r=t+g;e=n.slice(t,r)}return d?e:A(e,{manualExpandedKey:a,expanded:x,expandSubRows:f})}),[f,x,a,R,b,g,d,n]),P=b>0,N=-1===T?O.length>=g:b<T-1,D=t.useCallback((function(e){I({type:l.gotoPage,pageIndex:e})}),[I]),L=t.useCallback((function(){return D((function(e){return e-1}))}),[D]),$=t.useCallback((function(){return D((function(e){return e+1}))}),[D]),M=t.useCallback((function(e){I({type:l.setPageSize,pageSize:e})}),[I]);Object.assign(e,{pageOptions:j,pageCount:T,page:O,canPreviousPage:P,canNextPage:N,gotoPage:D,previousPage:L,nextPage:$,setPageSize:M})}Je.pluginName="usePagination",l.resetPivot="resetPivot",l.togglePivot="togglePivot";var nt=function(e){e.getPivotToggleProps=[it],e.stateReducers.push(ot),e.useInstanceAfterData.push(at),e.allColumns.push(lt),e.accessValue.push(st),e.materializedColumns.push(ct),e.materializedColumnsDeps.push(ut),e.visibleColumns.push(dt),e.visibleColumnsDeps.push(pt),e.useInstance.push(ft),e.prepareRow.push(vt)};nt.pluginName="usePivotColumns";var rt=[],it=function(e,t){var n=t.header;return[e,{onClick:n.canPivot?function(e){e.persist(),n.togglePivot()}:void 0,style:{cursor:n.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function ot(e,t,n,r){if(t.type===l.init)return i({pivotColumns:rt},e);if(t.type===l.resetPivot)return i({},e,{pivotColumns:r.initialState.pivotColumns||rt});if(t.type===l.togglePivot){var o=t.columnId,a=t.value,s=void 0!==a?a:!e.pivotColumns.includes(o);return i({},e,s?{pivotColumns:[].concat(e.pivotColumns,[o])}:{pivotColumns:e.pivotColumns.filter((function(e){return e!==o}))})}}function at(e){e.allColumns.forEach((function(t){t.isPivotSource=e.state.pivotColumns.includes(t.id)}))}function lt(e,t){var n=t.instance;return e.forEach((function(e){e.isPivotSource=n.state.pivotColumns.includes(e.id),e.uniqueValues=new Set})),e}function st(e,t){var n=t.column;return n.uniqueValues&&void 0!==e&&n.uniqueValues.add(e),e}function ct(e,t){var n=t.instance,r=n.allColumns,o=n.state;if(!o.pivotColumns.length||!o.groupBy||!o.groupBy.length)return e;var a=o.pivotColumns.map((function(e){return r.find((function(t){return t.id===e}))})).filter(Boolean),l=r.filter((function(e){return!e.isPivotSource&&!o.groupBy.includes(e.id)&&!o.pivotColumns.includes(e.id)})),s=S(function e(t,n,r){void 0===t&&(t=0),void 0===r&&(r=[]);var o=a[t];return o?Array.from(o.uniqueValues).sort().map((function(a){var l=i({},o,{Header:o.PivotHeader||"string"==typeof o.header?o.Header+": "+a:a,isPivotGroup:!0,parent:n,depth:t,id:n?n.id+"."+o.id+"."+a:o.id+"."+a,pivotValue:a});return l.columns=e(t+1,l,[].concat(r,[function(e){return e.values[o.id]===a}])),l})):l.map((function(e){return i({},e,{canPivot:!1,isPivoted:!0,parent:n,depth:t,id:""+(n?n.id+"."+e.id:e.id),accessor:function(t,n,i){if(r.every((function(e){return e(i)})))return i.values[e.id]}})}))}());return[].concat(e,s)}function ut(e,t){var n=t.instance.state,r=n.pivotColumns,i=n.groupBy;return[].concat(e,[r,i])}function dt(e,t){var n=t.instance.state;return e=e.filter((function(e){return!e.isPivotSource})),n.pivotColumns.length&&n.groupBy&&n.groupBy.length&&(e=e.filter((function(e){return e.isGrouped||e.isPivoted}))),e}function pt(e,t){var n=t.instance;return[].concat(e,[n.state.pivotColumns,n.state.groupBy])}function ft(e){var t=e.columns,n=e.allColumns,r=e.flatHeaders,i=e.getHooks,o=e.plugins,a=e.dispatch,s=e.autoResetPivot,c=void 0===s||s,u=e.manaulPivot,d=e.disablePivot,f=e.defaultCanPivot;m(o,["useGroupBy"],"usePivotColumns");var v=h(e);n.forEach((function(t){var n=t.accessor,r=t.defaultPivot,i=t.disablePivot;t.canPivot=n?_(t.canPivot,!0!==i&&void 0,!0!==d&&void 0,!0):_(t.canPivot,r,f,!1),t.canPivot&&(t.togglePivot=function(){return e.togglePivot(t.id)}),t.Aggregated=t.Aggregated||t.Cell})),r.forEach((function(e){e.getPivotToggleProps=p(i().getPivotToggleProps,{instance:v(),header:e})}));var g=h(c);y((function(){g()&&a({type:l.resetPivot})}),[a,u?null:t]),Object.assign(e,{togglePivot:function(e,t){a({type:l.togglePivot,columnId:e,value:t})}})}function vt(e){e.allCells.forEach((function(e){e.isPivoted=e.column.isPivoted}))}l.resetSelectedRows="resetSelectedRows",l.toggleAllRowsSelected="toggleAllRowsSelected",l.toggleRowSelected="toggleRowSelected",l.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var mt=function(e){e.getToggleRowSelectedProps=[gt],e.getToggleAllRowsSelectedProps=[ht],e.getToggleAllPageRowsSelectedProps=[bt],e.stateReducers.push(yt),e.useInstance.push(xt),e.prepareRow.push(wt)};mt.pluginName="useRowSelect";var gt=function(e,t){var n=t.instance,r=t.row,i=n.manualRowSelectedKey,o=void 0===i?"isSelected":i;return[e,{onChange:function(e){r.toggleRowSelected(e.target.checked)},style:{cursor:"pointer"},checked:!(!r.original||!r.original[o])||r.isSelected,title:"Toggle Row Selected",indeterminate:r.isSomeSelected}]},ht=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleAllRowsSelected(e.target.checked)},style:{cursor:"pointer"},checked:n.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:Boolean(!n.isAllRowsSelected&&Object.keys(n.state.selectedRowIds).length)}]},bt=function(e,t){var n=t.instance;return[e,{onChange:function(e){n.toggleAllPageRowsSelected(e.target.checked)},style:{cursor:"pointer"},checked:n.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:Boolean(!n.isAllPageRowsSelected&&n.page.some((function(e){var t=e.id;return n.state.selectedRowIds[t]})))}]};function yt(e,t,n,r){if(t.type===l.init)return i({selectedRowIds:{}},e);if(t.type===l.resetSelectedRows)return i({},e,{selectedRowIds:r.initialState.selectedRowIds||{}});if(t.type===l.toggleAllRowsSelected){var o=t.value,a=r.isAllRowsSelected,s=r.rowsById,c=r.nonGroupedRowsById,u=void 0===c?s:c,d=void 0!==o?o:!a,p=Object.assign({},e.selectedRowIds);return d?Object.keys(u).forEach((function(e){p[e]=!0})):Object.keys(u).forEach((function(e){delete p[e]})),i({},e,{selectedRowIds:p})}if(t.type===l.toggleRowSelected){var f=t.id,v=t.value,m=r.rowsById,g=r.selectSubRows,h=void 0===g||g,b=r.getSubRows,y=e.selectedRowIds[f],x=void 0!==v?v:!y;if(y===x)return e;var w=i({},e.selectedRowIds);return function e(t){var n=m[t];if(n&&(n.isGrouped||(x?w[t]=!0:delete w[t]),h&&b(n)))return b(n).forEach((function(t){return e(t.id)}))}(f),i({},e,{selectedRowIds:w})}if(t.type===l.toggleAllPageRowsSelected){var E=t.value,S=r.page,C=r.rowsById,I=r.selectSubRows,k=void 0===I||I,R=r.isAllPageRowsSelected,_=r.getSubRows,T=void 0!==E?E:!R,j=i({},e.selectedRowIds);return S.forEach((function(e){return function e(t){var n=C[t];if(n.isGrouped||(T?j[t]=!0:delete j[t]),k&&_(n))return _(n).forEach((function(t){return e(t.id)}))}(e.id)})),i({},e,{selectedRowIds:j})}return e}function xt(e){var n=e.data,r=e.rows,i=e.getHooks,o=e.plugins,a=e.rowsById,s=e.nonGroupedRowsById,c=void 0===s?a:s,u=e.autoResetSelectedRows,d=void 0===u||u,f=e.state.selectedRowIds,v=e.selectSubRows,g=void 0===v||v,b=e.dispatch,x=e.page,w=e.getSubRows;m(o,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var E=t.useMemo((function(){var e=[];return r.forEach((function(t){var n=g?function e(t,n,r){if(n[t.id])return!0;var i=r(t);if(i&&i.length){var o=!0,a=!1;return i.forEach((function(t){a&&!o||(e(t,n,r)?a=!0:o=!1)})),!!o||!!a&&null}return!1}(t,f,w):!!f[t.id];t.isSelected=!!n,t.isSomeSelected=null===n,n&&e.push(t)})),e}),[r,g,f,w]),S=Boolean(Object.keys(c).length&&Object.keys(f).length),C=S;S&&Object.keys(c).some((function(e){return!f[e]}))&&(S=!1),S||x&&x.length&&x.some((function(e){var t=e.id;return!f[t]}))&&(C=!1);var I=h(d);y((function(){I()&&b({type:l.resetSelectedRows})}),[b,n]);var k=t.useCallback((function(e){return b({type:l.toggleAllRowsSelected,value:e})}),[b]),R=t.useCallback((function(e){return b({type:l.toggleAllPageRowsSelected,value:e})}),[b]),_=t.useCallback((function(e,t){return b({type:l.toggleRowSelected,id:e,value:t})}),[b]),T=h(e),j=p(i().getToggleAllRowsSelectedProps,{instance:T()}),A=p(i().getToggleAllPageRowsSelectedProps,{instance:T()});Object.assign(e,{selectedFlatRows:E,isAllRowsSelected:S,isAllPageRowsSelected:C,toggleRowSelected:_,toggleAllRowsSelected:k,getToggleAllRowsSelectedProps:j,getToggleAllPageRowsSelectedProps:A,toggleAllPageRowsSelected:R})}function wt(e,t){var n=t.instance;e.toggleRowSelected=function(t){return n.toggleRowSelected(e.id,t)},e.getToggleRowSelectedProps=p(n.getHooks().getToggleRowSelectedProps,{instance:n,row:e})}var Et=function(e){return{}},St=function(e){return{}};l.setRowState="setRowState",l.setCellState="setCellState",l.resetRowState="resetRowState";var Ct=function(e){e.stateReducers.push(It),e.useInstance.push(kt),e.prepareRow.push(Rt)};function It(e,t,n,r){var o=r.initialRowStateAccessor,a=void 0===o?Et:o,s=r.initialCellStateAccessor,c=void 0===s?St:s,u=r.rowsById;if(t.type===l.init)return i({rowState:{}},e);if(t.type===l.resetRowState)return i({},e,{rowState:r.initialState.rowState||{}});if(t.type===l.setRowState){var d,p=t.rowId,f=t.value,v=void 0!==e.rowState[p]?e.rowState[p]:a(u[p]);return i({},e,{rowState:i({},e.rowState,(d={},d[p]=g(f,v),d))})}if(t.type===l.setCellState){var m,h,b,y,x,w=t.rowId,E=t.columnId,S=t.value,C=void 0!==e.rowState[w]?e.rowState[w]:a(u[w]),I=void 0!==(null==C||null==(m=C.cellState)?void 0:m[E])?C.cellState[E]:c(null==(h=u[w])||null==(b=h.cells)?void 0:b.find((function(e){return e.column.id===E})));return i({},e,{rowState:i({},e.rowState,(x={},x[w]=i({},C,{cellState:i({},C.cellState||{},(y={},y[E]=g(S,I),y))}),x))})}}function kt(e){var n=e.autoResetRowState,r=void 0===n||n,i=e.data,o=e.dispatch,a=t.useCallback((function(e,t){return o({type:l.setRowState,rowId:e,value:t})}),[o]),s=t.useCallback((function(e,t,n){return o({type:l.setCellState,rowId:e,columnId:t,value:n})}),[o]),c=h(r);y((function(){c()&&o({type:l.resetRowState})}),[i]),Object.assign(e,{setRowState:a,setCellState:s})}function Rt(e,t){var n=t.instance,r=n.initialRowStateAccessor,i=void 0===r?Et:r,o=n.initialCellStateAccessor,a=void 0===o?St:o,l=n.state.rowState;e&&(e.state=void 0!==l[e.id]?l[e.id]:i(e),e.setState=function(t){return n.setRowState(e.id,t)},e.cells.forEach((function(t){e.state.cellState||(e.state.cellState={}),t.state=void 0!==e.state.cellState[t.column.id]?e.state.cellState[t.column.id]:a(t),t.setState=function(r){return n.setCellState(e.id,t.column.id,r)}})))}Ct.pluginName="useRowState",l.resetColumnOrder="resetColumnOrder",l.setColumnOrder="setColumnOrder";var _t=function(e){e.stateReducers.push(Tt),e.visibleColumnsDeps.push((function(e,t){var n=t.instance;return[].concat(e,[n.state.columnOrder])})),e.visibleColumns.push(jt),e.useInstance.push(At)};function Tt(e,t,n,r){return t.type===l.init?i({columnOrder:[]},e):t.type===l.resetColumnOrder?i({},e,{columnOrder:r.initialState.columnOrder||[]}):t.type===l.setColumnOrder?i({},e,{columnOrder:g(t.columnOrder,e.columnOrder)}):void 0}function jt(e,t){var n=t.instance.state.columnOrder;if(!n||!n.length)return e;for(var r=[].concat(n),i=[].concat(e),o=[],a=function(){var e=r.shift(),t=i.findIndex((function(t){return t.id===e}));t>-1&&o.push(i.splice(t,1)[0])};i.length&&r.length;)a();return[].concat(o,i)}function At(e){var n=e.dispatch;e.setColumnOrder=t.useCallback((function(e){return n({type:l.setColumnOrder,columnOrder:e})}),[n])}_t.pluginName="useColumnOrder",u.canResize=!0,l.columnStartResizing="columnStartResizing",l.columnResizing="columnResizing",l.columnDoneResizing="columnDoneResizing",l.resetResize="resetResize";var Ot=function(e){e.getResizerProps=[Pt],e.getHeaderProps.push({style:{position:"relative"}}),e.stateReducers.push(Nt),e.useInstance.push(Lt),e.useInstanceBeforeDimensions.push(Dt)},Pt=function(e,t){var n=t.instance,r=t.header,i=n.dispatch,o=function(e,t){var n=!1;if("touchstart"===e.type){if(e.touches&&e.touches.length>1)return;n=!0}var r,o,a,s,c=(a=t,s=[],function e(t){t.columns&&t.columns.length&&t.columns.map(e),s.push(t)}(a),s).map((function(e){return[e.id,e.totalWidth]})),u=n?Math.round(e.touches[0].clientX):e.clientX,d=function(){window.cancelAnimationFrame(r),r=null,i({type:l.columnDoneResizing})},p=function(){window.cancelAnimationFrame(r),r=null,i({type:l.columnResizing,clientX:o})},f=function(e){o=e,r||(r=window.requestAnimationFrame(p))},v={mouse:{moveEvent:"mousemove",moveHandler:function(e){return f(e.clientX)},upEvent:"mouseup",upHandler:function(e){document.removeEventListener("mousemove",v.mouse.moveHandler),document.removeEventListener("mouseup",v.mouse.upHandler),d()}},touch:{moveEvent:"touchmove",moveHandler:function(e){return e.cancelable&&(e.preventDefault(),e.stopPropagation()),f(e.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(e){document.removeEventListener(v.touch.moveEvent,v.touch.moveHandler),document.removeEventListener(v.touch.upEvent,v.touch.moveHandler),d()}}},m=n?v.touch:v.mouse,g=!!function(){if("boolean"==typeof D)return D;var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(n){e=!1}return D=e}()&&{passive:!1};document.addEventListener(m.moveEvent,m.moveHandler,g),document.addEventListener(m.upEvent,m.upHandler,g),i({type:l.columnStartResizing,columnId:t.id,columnWidth:t.totalWidth,headerIdWidths:c,clientX:u})};return[e,{onMouseDown:function(e){return e.persist()||o(e,r)},onTouchStart:function(e){return e.persist()||o(e,r)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function Nt(e,t){if(t.type===l.init)return i({columnResizing:{columnWidths:{}}},e);if(t.type===l.resetResize)return i({},e,{columnResizing:{columnWidths:{}}});if(t.type===l.columnStartResizing){var n=t.clientX,r=t.columnId,o=t.columnWidth,a=t.headerIdWidths;return i({},e,{columnResizing:i({},e.columnResizing,{startX:n,headerIdWidths:a,columnWidth:o,isResizingColumn:r})})}if(t.type===l.columnResizing){var s=t.clientX,c=e.columnResizing,u=c.startX,d=c.columnWidth,p=c.headerIdWidths,f=(s-u)/d,v={};return(void 0===p?[]:p).forEach((function(e){var t=e[0],n=e[1];v[t]=Math.max(n+n*f,0)})),i({},e,{columnResizing:i({},e.columnResizing,{columnWidths:i({},e.columnResizing.columnWidths,{},v)})})}return t.type===l.columnDoneResizing?i({},e,{columnResizing:i({},e.columnResizing,{startX:null,isResizingColumn:null})}):void 0}Ot.pluginName="useResizeColumns";var Dt=function(e){var t=e.flatHeaders,n=e.disableResizing,r=e.getHooks,i=e.state.columnResizing,o=h(e);t.forEach((function(e){var t=_(!0!==e.disableResizing&&void 0,!0!==n&&void 0,!0);e.canResize=t,e.width=i.columnWidths[e.id]||e.originalWidth||e.width,e.isResizing=i.isResizingColumn===e.id,t&&(e.getResizerProps=p(r().getResizerProps,{instance:o(),header:e}))}))};function Lt(e){var n=e.plugins,r=e.dispatch,i=e.autoResetResize,o=void 0===i||i,a=e.columns;m(n,["useAbsoluteLayout"],"useResizeColumns");var s=h(o);y((function(){s()&&r({type:l.resetResize})}),[a]);var c=t.useCallback((function(){return r({type:l.resetResize})}),[r]);Object.assign(e,{resetResizing:c})}var $t={position:"absolute",top:0},Mt=function(e){e.getTableBodyProps.push(Bt),e.getRowProps.push(Bt),e.getHeaderGroupProps.push(Bt),e.getFooterGroupProps.push(Bt),e.getHeaderProps.push((function(e,t){var n=t.column;return[e,{style:i({},$t,{left:n.totalLeft+"px",width:n.totalWidth+"px"})}]})),e.getCellProps.push((function(e,t){var n=t.cell;return[e,{style:i({},$t,{left:n.column.totalLeft+"px",width:n.column.totalWidth+"px"})}]})),e.getFooterProps.push((function(e,t){var n=t.column;return[e,{style:i({},$t,{left:n.totalLeft+"px",width:n.totalWidth+"px"})}]}))};Mt.pluginName="useAbsoluteLayout";var Bt=function(e,t){return[e,{style:{position:"relative",width:t.instance.totalColumnsWidth+"px"}}]},Vt={display:"inline-block",boxSizing:"border-box"},Ft=function(e,t){return[e,{style:{display:"flex",width:t.instance.totalColumnsWidth+"px"}}]},zt=function(e){e.getRowProps.push(Ft),e.getHeaderGroupProps.push(Ft),e.getFooterGroupProps.push(Ft),e.getHeaderProps.push((function(e,t){var n=t.column;return[e,{style:i({},Vt,{width:n.totalWidth+"px"})}]})),e.getCellProps.push((function(e,t){var n=t.cell;return[e,{style:i({},Vt,{width:n.column.totalWidth+"px"})}]})),e.getFooterProps.push((function(e,t){var n=t.column;return[e,{style:i({},Vt,{width:n.totalWidth+"px"})}]}))};function Ht(e){e.getTableProps.push(Gt),e.getRowProps.push(Ut),e.getHeaderGroupProps.push(Ut),e.getFooterGroupProps.push(Ut),e.getHeaderProps.push(Wt),e.getCellProps.push(qt),e.getFooterProps.push(Yt)}zt.pluginName="useBlockLayout",Ht.pluginName="useFlexLayout";var Gt=function(e,t){return[e,{style:{minWidth:t.instance.totalColumnsMinWidth+"px"}}]},Ut=function(e,t){return[e,{style:{display:"flex",flex:"1 0 auto",minWidth:t.instance.totalColumnsMinWidth+"px"}}]},Wt=function(e,t){var n=t.column;return[e,{style:{boxSizing:"border-box",flex:n.totalFlexWidth?n.totalFlexWidth+" 0 auto":void 0,minWidth:n.totalMinWidth+"px",width:n.totalWidth+"px"}}]},qt=function(e,t){var n=t.cell;return[e,{style:{boxSizing:"border-box",flex:n.column.totalFlexWidth+" 0 auto",minWidth:n.column.totalMinWidth+"px",width:n.column.totalWidth+"px"}}]},Yt=function(e,t){var n=t.column;return[e,{style:{boxSizing:"border-box",flex:n.totalFlexWidth?n.totalFlexWidth+" 0 auto":void 0,minWidth:n.totalMinWidth+"px",width:n.totalWidth+"px"}}]};function Xt(e){e.stateReducers.push(Jt),e.getTableProps.push(Kt),e.getHeaderProps.push(Qt),e.getRowProps.push(Zt)}l.columnStartResizing="columnStartResizing",l.columnResizing="columnResizing",l.columnDoneResizing="columnDoneResizing",l.resetResize="resetResize",Xt.pluginName="useGridLayout";var Kt=function(e,t){var n=t.instance;return[e,{style:{display:"grid",gridTemplateColumns:n.visibleColumns.map((function(e){var t;return n.state.gridLayout.columnWidths[e.id]?n.state.gridLayout.columnWidths[e.id]+"px":(null==(t=n.state.columnResizing)?void 0:t.isResizingColumn)?n.state.gridLayout.startWidths[e.id]+"px":"number"==typeof e.width?e.width+"px":e.width})).join(" ")}}]},Qt=function(e,t){var n=t.column;return[e,{id:"header-cell-"+n.id,style:{position:"sticky",gridColumn:"span "+n.totalVisibleHeaderCount}}]},Zt=function(e,t){var n=t.row;return n.isExpanded?[e,{style:{gridColumn:"1 / "+(n.cells.length+1)}}]:[e,{}]};function Jt(e,t,n,r){if(t.type===l.init)return i({gridLayout:{columnWidths:{}}},e);if(t.type===l.resetResize)return i({},e,{gridLayout:{columnWidths:{}}});if(t.type===l.columnStartResizing){var o=t.columnId,a=t.headerIdWidths,s=en(o);if(void 0!==s){var c=r.visibleColumns.reduce((function(e,t){var n;return i({},e,((n={})[t.id]=en(t.id),n))}),{}),u=r.visibleColumns.reduce((function(e,t){var n;return i({},e,((n={})[t.id]=t.minWidth,n))}),{}),d=r.visibleColumns.reduce((function(e,t){var n;return i({},e,((n={})[t.id]=t.maxWidth,n))}),{}),p=a.map((function(e){var t=e[0];return[t,en(t)]}));return i({},e,{gridLayout:i({},e.gridLayout,{startWidths:c,minWidths:u,maxWidths:d,headerIdGridWidths:p,columnWidth:s})})}return e}if(t.type===l.columnResizing){var f=t.clientX,v=e.columnResizing.startX,m=e.gridLayout,g=m.columnWidth,h=m.minWidths,b=m.maxWidths,y=m.headerIdGridWidths,x=(f-v)/g,w={};return(void 0===y?[]:y).forEach((function(e){var t=e[0],n=e[1];w[t]=Math.min(Math.max(h[t],n+n*x),b[t])})),i({},e,{gridLayout:i({},e.gridLayout,{columnWidths:i({},e.gridLayout.columnWidths,{},w)})})}return t.type===l.columnDoneResizing?i({},e,{gridLayout:i({},e.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function en(e){var t,n=null==(t=document.getElementById("header-cell-"+e))?void 0:t.offsetWidth;if(void 0!==n)return n}e._UNSTABLE_usePivotColumns=nt,e.actions=l,e.defaultColumn=u,e.defaultGroupByFn=ze,e.defaultOrderByFn=Ze,e.defaultRenderer=s,e.emptyRenderer=c,e.ensurePluginOrder=m,e.flexRender=w,e.functionalUpdate=g,e.loopHooks=v,e.makePropGetter=p,e.makeRenderer=x,e.reduceHooks=f,e.safeUseLayoutEffect=b,e.useAbsoluteLayout=Mt,e.useAsyncDebounce=function(e,n){void 0===n&&(n=0);var i,o=t.useRef({}),a=h(e),l=h(n);return t.useCallback((i=r(regeneratorRuntime.mark((function e(){var t,n,i,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length,n=new Array(t),i=0;i<t;i++)n[i]=s[i];return o.current.promise||(o.current.promise=new Promise((function(e,t){o.current.resolve=e,o.current.reject=t}))),o.current.timeout&&clearTimeout(o.current.timeout),o.current.timeout=setTimeout(r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete o.current.timeout,e.prev=1,e.t0=o.current,e.next=5,a().apply(void 0,n);case 5:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),o.current.reject(e.t2);case 12:return e.prev=12,delete o.current.promise,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])}))),l()),e.abrupt("return",o.current.promise);case 5:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)}),[a,l])},e.useBlockLayout=zt,e.useColumnOrder=_t,e.useExpanded=se,e.useFilters=Ie,e.useFlexLayout=Ht,e.useGetLatest=h,e.useGlobalFilter=_e,e.useGridLayout=Xt,e.useGroupBy=De,e.useMountedLayoutEffect=y,e.usePagination=Je,e.useResizeColumns=Ot,e.useRowSelect=mt,e.useRowState=Ct,e.useSortBy=Ye,e.useTable=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e=oe(e),r=[q].concat(r);var a=h(t.useRef({}).current);Object.assign(a(),i({},e,{plugins:r,hooks:W()})),r.filter(Boolean).forEach((function(e){e(a().hooks)}));var s=h(a().hooks);a().getHooks=s,delete a().hooks,Object.assign(a(),f(s().useOptions,oe(e)));var c=a(),u=c.data,d=c.columns,m=c.initialState,g=c.defaultColumn,b=c.getSubRows,y=c.getRowId,w=c.stateReducer,R=c.useControlledState,_=h(w),T=t.useCallback((function(e,t){if(!t.type)throw console.info({action:t}),new Error("Unknown Action ");return[].concat(s().stateReducers,Array.isArray(_())?_():[_()]).reduce((function(n,r){return r(n,t,e,a())||n}),e)}),[s,_,a]),j=t.useReducer(T,void 0,(function(){return T(m,{type:l.init})})),A=j[0],O=j[1],P=f([].concat(s().useControlledState,[R]),A,{instance:a()});Object.assign(a(),{state:P,dispatch:O});var N=t.useMemo((function(){return E(f(s().columns,d,{instance:a()}))}),[s,a,d].concat(f(s().columnsDeps,[],{instance:a()})));a().columns=N;var D=t.useMemo((function(){return f(s().allColumns,S(N),{instance:a()}).map(C)}),[N,s,a].concat(f(s().allColumnsDeps,[],{instance:a()})));a().allColumns=D;var L=t.useMemo((function(){for(var e=[],t=[],n={},r=[].concat(D);r.length;){var i=r.shift();le({data:u,rows:e,flatRows:t,rowsById:n,column:i,getRowId:y,getSubRows:b,accessValueHooks:s().accessValue,getInstance:a})}return[e,t,n]}),[D,u,y,b,s,a]),$=L[0],M=L[1],B=L[2];Object.assign(a(),{rows:$,initialRows:[].concat($),flatRows:M,rowsById:B}),v(s().useInstanceAfterData,a());var V=t.useMemo((function(){return f(s().visibleColumns,D,{instance:a()}).map((function(e){return I(e,g)}))}),[s,D,a,g].concat(f(s().visibleColumnsDeps,[],{instance:a()})));D=t.useMemo((function(){var e=[].concat(V);return D.forEach((function(t){e.find((function(e){return e.id===t.id}))||e.push(t)})),e}),[D,V]),a().allColumns=D;var F=t.useMemo((function(){return f(s().headerGroups,k(V,g),a())}),[s,V,g,a].concat(f(s().headerGroupsDeps,[],{instance:a()})));a().headerGroups=F;var z=t.useMemo((function(){return F.length?F[0].headers:[]}),[F]);a().headers=z,a().flatHeaders=F.reduce((function(e,t){return[].concat(e,t.headers)}),[]),v(s().useInstanceBeforeDimensions,a());var H=V.filter((function(e){return e.isVisible})).map((function(e){return e.id})).sort().join("_");V=t.useMemo((function(){return V.filter((function(e){return e.isVisible}))}),[V,H]),a().visibleColumns=V;var G=ae(z),U=G[0],Y=G[1],X=G[2];return a().totalColumnsMinWidth=U,a().totalColumnsWidth=Y,a().totalColumnsMaxWidth=X,v(s().useInstance,a()),[].concat(a().flatHeaders,a().allColumns).forEach((function(e){e.render=x(a(),e),e.getHeaderProps=p(s().getHeaderProps,{instance:a(),column:e}),e.getFooterProps=p(s().getFooterProps,{instance:a(),column:e})})),a().headerGroups=t.useMemo((function(){return F.filter((function(e,t){return e.headers=e.headers.filter((function(e){return e.headers?function e(t){return t.filter((function(t){return t.headers?e(t.headers):t.isVisible})).length}(e.headers):e.isVisible})),!!e.headers.length&&(e.getHeaderGroupProps=p(s().getHeaderGroupProps,{instance:a(),headerGroup:e,index:t}),e.getFooterGroupProps=p(s().getFooterGroupProps,{instance:a(),headerGroup:e,index:t}),!0)}))}),[F,a,s]),a().footerGroups=[].concat(a().headerGroups).reverse(),a().prepareRow=t.useCallback((function(e){e.getRowProps=p(s().getRowProps,{instance:a(),row:e}),e.allCells=D.map((function(t){var n=e.values[t.id],r={column:t,row:e,value:n};return r.getCellProps=p(s().getCellProps,{instance:a(),cell:r}),r.render=x(a(),t,{row:e,cell:r,value:n}),r})),e.cells=V.map((function(t){return e.allCells.find((function(e){return e.column.id===t.id}))})),v(s().prepareRow,e,{instance:a()})}),[s,a,D,V]),a().getTableProps=p(s().getTableProps,{instance:a()}),a().getTableBodyProps=p(s().getTableBodyProps,{instance:a()}),v(s().useFinalInstance,a()),a()},Object.defineProperty(e,"__esModule",{value:!0})}(Rc,e),kc.exports=Rc;var _c={};function Tc(){const{state:e,dispatch:t}=Ec(),n=e.offset/e.pagination+1;return s.jsx(hn,{defaultCurrent:n,current:n,total:e.totalCount,defaultPageSize:e.pagination,onShowSizeChange:(e,n)=>{t({type:hc.SET_PAGINATION,page:n})},showSizeChanger:!0,pageSizeOptions:M.map((e=>e.toString())),onChange:(e,n)=>{t({type:hc.SET_OFFSET,offset:(e-1)*(n??0)})}})}!function(e){function t(e){return"left"===e.sticky||"right"===e.sticky?e.sticky:e.parent?t(e.parent):null}function n(e,n){const r=n.findIndex((({id:t})=>t===e)),i=n[r],o=n[r+1],a="left"===t(i),l=o&&"left"===t(o);return a&&!l}function r(e,n){const r=n.findIndex((({id:t})=>t===e)),i=n[r],o=n[r-1],a="right"===t(i),l=o&&"right"===t(o);return a&&!l}function i(e,t){let n=0;for(let r=t.findIndex((({id:t})=>t===e))+1;r<t.length;r+=1)!1!==t[r].isVisible&&(n+=t[r].width);return n}Object.defineProperty(e,"__esModule",{value:!0}),e.checkErrors=e=>{const t=!!e.find((e=>e.parent)),n=e.filter((e=>e.sticky&&!e.parent)).map((({Header:e})=>`'${e}'`));if(t&&n.length)throw new Error(`WARNING react-table-sticky:\n      \nYour ReactTable has group and sticky columns outside groups, and that will break UI.\n      \nYou must place ${n.join(" and ")} columns into a group (even a group with an empty Header label)\n`);const r=e.find((e=>!e.sticky&&e.columns&&e.columns.find((e=>e.sticky))));if(!r)return;const i=r.columns.find((({sticky:e})=>e));if(i)throw new Error(`WARNING react-table-sticky:\n    \nYour ReactTable contain columns group with at least one child columns sticky.\n    \nWhen ReactTable has columns groups, only columns groups can be sticky\n    \nYou must set sticky: 'left' | 'right' for the '${r.Header}'\n    column, or remove the sticky property of '${i.Header}' column.`)},e.getStickyValue=t,e.columnIsLastLeftSticky=n,e.columnIsFirstRightSticky=r,e.getMarginRight=i;const o={position:"sticky",zIndex:3};function a(a,l){let s={};const c={};e.checkErrors(l.columns);const u=t(a);if(u){s=Object.assign({},o),c["data-sticky-td"]=!0;const e=function(e,t){return t.filter((t=>t.depth===e.depth))}(a,l.flatHeaders),t="left"===u?a.totalLeft:i(a.id,e);s=Object.assign(Object.assign({},s),{[u]:`${t}px`});n(a.id,e)&&(c["data-sticky-last-left-td"]=!0);r(a.id,e)&&(c["data-sticky-first-right-td"]=!0)}return Object.assign({style:s},c)}e.useSticky=e=>{e.getHeaderProps.push(((e,{instance:t,column:n})=>[e,a(n,t)])),e.getCellProps.push(((e,{instance:t,cell:n})=>[e,a(n.column,t)]))},e.useSticky.pluginName="useSticky"}(_c);const jc=mn`
    ${E}
    mutation CREATE_RECORD($library: ID!) {
        createRecord(library: $library) {
            ...RecordIdentity
        }
    }
`,Ac=gn`
    query GET_LIBRARY_PERMISSIONS($libraryId: ID!) {
        libraries(filters: {id: $libraryId}) {
            list {
                permissions {
                    access_library
                    access_record
                    create_record
                    edit_record
                    delete_record
                }
            }
        }
    }
`,Oc=mn`
    query IS_ALLOWED(
        $type: PermissionTypes!
        $actions: [PermissionsActions!]!
        $applyTo: ID
        $target: PermissionTarget
    ) {
        isAllowed(type: $type, actions: $actions, applyTo: $applyTo, target: $target) {
            name
            allowed
        }
    }
`;var Pc={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Nc=t.createContext&&t.createContext(Pc),Dc=globalThis&&globalThis.__assign||function(){return Dc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Dc.apply(this,arguments)},Lc=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function $c(e){return e&&e.map((function(e,n){return t.createElement(e.tag,Dc({key:n},e.attr),$c(e.child))}))}function Mc(e){return function(n){return t.createElement(Bc,Dc({attr:Dc({},e.attr)},n),$c(e.child))}}function Bc(e){var n=function(n){var r,i=e.attr,o=e.size,a=e.title,l=Lc(e,["attr","size","title"]),s=o||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",Dc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,l,{className:r,style:Dc(Dc({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&t.createElement("title",null,a),e.children)};return void 0!==Nc?t.createElement(Nc.Consumer,null,(function(e){return n(e)})):n(Pc)}function Vc(e){return Mc({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8.18535 1.08325L7.62706 1.08717L1.71796 5.12422L1.72152 5.95233L7.63062 9.91528L8.1818 9.91912L14.2727 5.95617L14.2762 5.1203L8.18535 1.08325ZM2.89198 5.53323L7.91335 2.10268L13.0891 5.5332L7.91329 8.90079L2.89198 5.53323ZM7.63059 12.4153L1.79257 8.5H3.58794L7.91326 11.4008L12.3716 8.5H14.2053L13.4056 9.02031C13.2722 9.00688 13.1369 9 13 9C11.224 9 9.71839 10.1574 9.19622 11.7591L8.18177 12.4191L7.63059 12.4153ZM9.00447 13.1908L7.91326 13.9008L3.58794 11H1.79257L7.63059 14.9153L8.18177 14.9191L9.20113 14.2559C9.08965 13.9185 9.02187 13.5612 9.00447 13.1908Z"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3333 10.5056C11.8266 10.1759 12.4067 10 13 10C13.7954 10.001 14.5578 10.3174 15.1202 10.8798C15.6826 11.4422 15.999 12.2046 16 13C16 13.5933 15.8241 14.1734 15.4944 14.6667C15.1648 15.1601 14.6962 15.5446 14.1481 15.7716C13.5999 15.9987 12.9967 16.0581 12.4147 15.9424C11.8328 15.8266 11.2982 15.5409 10.8787 15.1213C10.4591 14.7018 10.1734 14.1672 10.0576 13.5853C9.94189 13.0033 10.0013 12.4001 10.2284 11.8519C10.4554 11.3038 10.8399 10.8352 11.3333 10.5056ZM13.0315 14.3226L14.8213 11.9363L14.0213 11.3363L12.541 13.3099L11.6655 12.6095L11.0408 13.3903L12.3192 14.413L13.0315 14.3226Z"}}]})(e)}function Fc(e){return Mc({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M7.62706 1.08717L8.18535 1.08325L14.2762 5.1203L14.2727 5.95617L8.1818 9.91912L7.63062 9.91528L1.72152 5.95233L1.71796 5.12422L7.62706 1.08717ZM7.91335 2.10268L2.89198 5.53323L7.91329 8.90079L13.0891 5.5332L7.91335 2.10268ZM1.79257 8.5L7.63059 12.4153L8.18177 12.4191L14.2053 8.5H12.3716L7.91326 11.4008L3.58794 8.5H1.79257ZM7.63059 14.9153L1.79257 11H3.58794L7.91326 13.9008L12.3716 11H14.2053L8.18177 14.9191L7.63059 14.9153Z"}}]})(e)}const zc=mn`
    fragment ValuesVersionDetails on ValueVersion {
        treeId
        treeNode {
            id
            record {
                id
                whoAmI {
                    id
                    label
                    library {
                        id
                    }
                }
            }
        }
    }
`,Hc=mn`
    ${E}
    ${zc}

    fragment StandardValuesListFragment on StandardValuesListConf {
        ... on StandardStringValuesListConf {
            enable
            allowFreeEntry
            values
        }

        ... on StandardDateRangeValuesListConf {
            enable
            allowFreeEntry
            dateRangeValues: values {
                from
                to
            }
        }
    }

    query RECORD_FORM($libraryId: String!, $formId: String!, $recordId: String, $version: [ValueVersionInput!]) {
        recordForm(recordId: $recordId, libraryId: $libraryId, formId: $formId, version: $version) {
            id
            recordId
            library {
                id
            }
            elements {
                id
                containerId
                uiElementType
                type
                valueError
                values {
                    id_value
                    created_at
                    modified_at
                    created_by {
                        ...RecordIdentity
                    }
                    modified_by {
                        ...RecordIdentity
                    }
                    metadata {
                        name
                        value {
                            id_value
                            value
                            raw_value
                        }
                    }

                    version {
                        ...ValuesVersionDetails
                    }

                    ... on Value {
                        value
                        raw_value
                    }

                    ... on LinkValue {
                        linkValue: value {
                            ...RecordIdentity
                        }
                    }

                    ... on TreeValue {
                        treeValue: value {
                            id
                            record {
                                ...RecordIdentity
                            }

                            ancestors {
                                record {
                                    ...RecordIdentity
                                }
                            }
                        }
                    }
                }
                attribute {
                    id
                    label
                    description
                    type
                    format
                    system
                    readonly
                    multiple_values
                    permissions(record: {id: $recordId, library: $libraryId}) {
                        access_attribute
                        edit_value
                    }
                    versions_conf {
                        versionable
                        profile {
                            id
                            trees {
                                id
                                label
                            }
                        }
                    }
                    metadata_fields {
                        id
                        label
                        description
                        type
                        format
                        system
                        readonly
                        multiple_values
                        permissions(record: {id: $recordId, library: $libraryId}) {
                            access_attribute
                            edit_value
                        }
                        values_list {
                            ...StandardValuesListFragment
                        }
                        metadata_fields {
                            id
                        }
                    }

                    ... on StandardAttribute {
                        values_list {
                            ...StandardValuesListFragment
                        }
                    }

                    ... on LinkAttribute {
                        linked_library {
                            id
                            label
                            behavior
                            gqlNames {
                                type
                                query
                            }
                            permissions {
                                create_record
                            }
                        }
                        linkValuesList: values_list {
                            enable
                            allowFreeEntry
                            values {
                                ...RecordIdentity
                            }
                        }
                    }

                    ... on TreeAttribute {
                        linked_tree {
                            id
                            label
                        }
                        treeValuesList: values_list {
                            enable
                            allowFreeEntry
                            values {
                                id
                                record {
                                    ...RecordIdentity
                                }
                                ancestors {
                                    record {
                                        ...RecordIdentity
                                    }
                                }
                            }
                        }
                    }
                }
                settings {
                    key
                    value
                }
            }
        }
    }
`;var Gc=(e=>(e.SET_RECORD="SET_RECORD",e.SET_ACTIVE_VALUE="SET_ACTIVE_VALUE",e.SET_SIDEBAR_CONTENT="SET_SIDEBAR_CONTENT",e.SET_VALUES_VERSION="SET_VALUES_VERSION",e.SET_EDITING_VALUE="SET_CURRENT_VALUE_CONTENT",e))(Gc||{});const Uc={record:null,libraryId:null,activeValue:null,sidebarContent:"summary",valuesVersion:null,originValuesVersion:null},Wc=(e,t)=>{switch(t.type){case"SET_RECORD":return{...e,record:t.record};case"SET_ACTIVE_VALUE":return{...e,activeValue:t.value,sidebarContent:null!==t.value?"valueDetails":"summary"};case"SET_SIDEBAR_CONTENT":return{...e,sidebarContent:t.content};case"SET_VALUES_VERSION":return{...e,valuesVersion:t.valuesVersion};case"SET_CURRENT_VALUE_CONTENT":return{...e,activeValue:{...e.activeValue,editingValue:t.value}};default:return e}},qc=t.createContext({state:Uc,dispatch:()=>Uc}),Yc=()=>e.useContext(qc);function Xc({rows:e}){const t=Array(e).fill("").map(((e,t)=>t));return s.jsx(s.Fragment,{children:t.map((e=>s.jsxs("div",{"data-testid":"edit-record-skeleton",children:[s.jsx(sn.Input,{active:!0,size:"large",style:{width:100,margin:"0 .5rem"}}),s.jsx(sn.Input,{active:!0,size:"large",style:{width:450,margin:"0 .5rem"}}),s.jsx(el,{})]},e)))})}const Kc=e.createContext({elements:{},readOnly:!1,record:null}),Qc=()=>e.useContext(Kc);const Zc=ai(li)`
    && {
        padding: 1rem;
        border: 1px solid ${xn.borderLightColor};
        margin: 1rem 0;
        border-radius: 3px;
        overflow: visible;
    }
`;const Jc=e.createContext({}),eu=ai.div`
    position: fixed;
    z-index: 1;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: rgba(0, 0, 0, 0.2);
`;function tu({onClick:e}){return s.jsx(eu,{"data-testid":"dimmer",onClick:()=>e()})}const nu=ai.div`
    color: ${xn.errorColor};
    font-weight: bold;
`,ru=ai.ul`
    list-style: none;
`;function iu({error:e,onClose:t}){const n=Array.isArray(e)?s.jsx(ru,{children:e.map(((e,t)=>s.jsx("li",{children:e},t)))}):e;return s.jsx(nu,{children:s.jsxs(En,{size:"small",align:"start",children:[s.jsx(z,{}),n,s.jsx(Kt,{onClick:t,size:"small",icon:s.jsx(kr,{}),style:{border:"none"}})]})})}const ou=e=>e.reduce(((e,t,n)=>(n&&e.push({operator:Wt.OR}),e.push({field:"id",condition:Ut.EQUAL,value:t}),e)),[]),au=(t,n,r)=>{const[i,o]=e.useState(),a=e=>{var n;return((null==(n=e[t])?void 0:n.list)??[]).reduce(((e,t)=>(e[t._id]=t,e)),{})},l=R(((e,t)=>A`
    ${t.length?E:""}

    query RECORD_COLUMNS_VALUES_${e}($filters: [RecordFilterInput]) {
        ${e}(filters: $filters) {
            list {
                _id: id
                ${t.length?t.map((e=>(e=>`\n    ${e}: property(attribute: "${e}") {\n        ...on Value {\n            value\n        }\n\n        ...on LinkValue {\n            linkValue: value {\n                ...RecordIdentity\n            }\n        }\n\n        ...on TreeValue {\n            treeValue: value {\n                record {\n                    ...RecordIdentity\n                }\n            }\n        }\n    }\n`)(e))).join("\n"):""}
            }
        }
    }`)(t,n),{variables:{filters:ou(r)},skip:!t||!n.length||!r.length,onCompleted:e=>{const t=a(e);o(t)}});return{...l,loading:l.loading||void 0===typeof i,data:i,refetch:async e=>{const t={filters:ou(e??[])},n=await l.refetch(t),r=a(n.data);return o({...i,...r}),n}}},lu=mn`
    query NOOP {
        __typename
    }
`,su=e=>`\n    ${e.attributeId}: property(attribute: "${e.attributeId}") {\n        id_value\n        created_at\n        modified_at\n        version {\n            ...ValuesVersionDetails\n        }\n        created_by {\n            ...RecordIdentity\n        }\n        modified_by {\n            ...RecordIdentity\n        }\n\n        ...on Value {\n            value\n            raw_value\n        }\n\n        ...on LinkValue {\n            linkValue: value {\n                ...RecordIdentity\n\n                ${(e=>e.linkedLibrary?`... on ${Or(e.linkedLibrary.id)} {\n            ${e.linkedAttributes.length?e.linkedAttributes.join(" "):"id"}\n        }`:"")(e)}\n\n            }\n        }\n\n        ...on TreeValue {\n            treeValue: value {\n                record {\n                    ...RecordIdentity\n                }\n\n                ancestors {\n                    record {\n                        ...RecordIdentity\n                    }\n                }\n            }\n        }\n    }\n`,cu=(e,t,n)=>{const r=Lr(e),[i]=k((a=[{attributeId:t}],(o=r)?A`
        ${E}
        ${zc}

        query RECORD_PROPERTIES_${o}($recordId: String, $version: [ValueVersionInput!]) {
            ${o}(
                filters: [{field: "id", condition: ${Ut.EQUAL}, value: $recordId}],
                version: $version
            ) {
                list {
                    _id: id
                    ${a.length?a.map((e=>su(e))).join("\n"):""}
                }
            }
        }
    `:lu),{fetchPolicy:"network-only"});var o,a;return{fetchValues:async e=>{const o=await i({variables:{recordId:n,version:e?Pr(e).map((e=>({treeId:e.name,treeNodeId:e.value.id}))):null}});return o.data[r].list.length?o.data[r].list[0][t].map((e=>({...e,version:B(e.version??[])}))):null}}},uu=e=>e.values[e.activeScope].values,du=(e,t)=>{var n;if(e===t)return!0;if(!e||!t)return!1;for(const r of Object.keys(t))if((null==(n=null==e?void 0:e[r])?void 0:n.id)!==t[r].id)return!1;return!0};var pu=(e=>(e.SUCCESS="SUCCESS",e.ERROR="ERROR",e.PARTIAL="PARTIAL",e))(pu||{}),fu=(e=>(e.INHERITED="INHERITED",e.CURRENT="CURRENT",e))(fu||{}),vu=(e=>(e.ADD_VALUES="ADD_VALUES",e.DELETE_VALUE="DELETE_VALUE",e.DELETE_ALL_VALUES="DELETE_ALL_VALUES",e.SET_ERROR_MESSAGE="SET_ERROR_MESSAGE",e.CLEAR_ERROR_MESSAGE="CLEAR_ERROR_MESSAGE",e.SET_IS_VALUES_ADD_VISIBLE="SET_IS_VALUES_ADD_VISIBLE",e.CHANGE_ACTIVE_SCOPE="CHANGE_ACTIVE_SCOPE",e.REFRESH_VALUES="REFRESH_VALUES",e))(vu||{});const mu={record:null,formElement:null,attribute:null,isReadOnly:!1,activeScope:fu.CURRENT,values:{[fu.CURRENT]:{version:null,values:[]},[fu.INHERITED]:null},errorMessage:"",isValuesAddVisible:!1},gu=e=>{var t,n,r,i;const{attribute:o,values:a,formVersion:l}=e,s=(null==(t=null==o?void 0:o.versions_conf)?void 0:t.versionable)?o.versions_conf.profile.trees.reduce(((e,t)=>((null==l?void 0:l[t.id])&&(e[t.id]=l[t.id]),e)),{}):null,c=!!(null==(n=null==o?void 0:o.versions_conf)?void 0:n.versionable)&&!du(s,(null==(r=null==a?void 0:a[0])?void 0:r.version)??s),u=c?null==(i=null==a?void 0:a[0])?void 0:i.version:null;return{activeScope:c?fu.INHERITED:fu.CURRENT,values:{[fu.CURRENT]:{version:s??null,values:c?[]:a},[fu.INHERITED]:c?{version:u??null,values:a}:null}}},hu=e=>{const{element:t,record:n,isRecordReadOnly:r,formVersion:i}=e,o=t.attribute,a=t.values??[];return{...mu,attribute:o,record:n,formElement:t,isReadOnly:(null==o?void 0:o.readonly)||r||!o.permissions.edit_value,...gu({attribute:o,values:a,formVersion:i})}},bu=(e,t)=>{switch(t.type){case"ADD_VALUES":{const n=[...e.values[e.activeScope].values,...t.values];return{...e,values:{...e.values,[e.activeScope]:{...e.values[e.activeScope],values:n}}}}case"DELETE_VALUE":{const n=uu(e).filter((e=>e.id_value!==t.idValue));return{...e,values:{...e.values,[e.activeScope]:{...e.values[e.activeScope],values:n}}}}case"DELETE_ALL_VALUES":return{...e,values:{...e.values,[e.activeScope]:{...e.values[e.activeScope],values:[]}}};case"SET_ERROR_MESSAGE":return{...e,errorMessage:t.errorMessage};case"CLEAR_ERROR_MESSAGE":return{...e,errorMessage:""};case"SET_IS_VALUES_ADD_VISIBLE":return{...e,isValuesAddVisible:t.isValuesAddVisible};case"CHANGE_ACTIVE_SCOPE":return{...e,activeScope:t.scope};case"REFRESH_VALUES":return{...e,...gu({attribute:e.formElement.attribute,values:t.values,formVersion:e.values[fu.CURRENT].version})};default:return e}},yu=ai(Kt)`
    && {
        color: ${xn.secondaryTextColor};
        &,
        &:hover,
        &[disabled] {
            background: transparent;
        }
        text-align: ${e=>e.$centered?"center":"left"};

        ${e=>e.$bordered?"":"&, &:hover {border: 0;}"}
    }
`;function xu({children:e,bordered:t,centered:n,...r}){return s.jsx(yu,{...r,$bordered:t,$centered:n,children:e})}function wu({bordered:e=!1,linkField:t=!1,activeScope:n,...r}){const{t:i}=c();return s.jsxs(xu,{bordered:e,...r,style:{color:n===fu.INHERITED?xn.inheritedValuesVersionColor:xn.defaultTextColor},children:[s.jsx(si,{}),i(t?"record_edition.add_value_link":"record_edition.add_value")]})}function Eu({onDelete:t}){const{t:n}=c(),[r,i]=e.useState(!1);return s.jsx(H,{placement:"leftTop",title:n("record_edition.delete_all_values_confirm"),onConfirm:async()=>{i(!0),await t(),i(!1)},okText:n("global.submit"),okButtonProps:{"aria-label":"delete-confirm-button"},cancelText:n("global.cancel"),children:s.jsx($r,{title:n("record_edition.delete_all_values"),children:s.jsx(xu,{"aria-label":"delete-all-values",icon:s.jsx(ui,{}),shape:"circle",onClick:e=>e.stopPropagation(),loading:r})})})}const Su=ai.div`
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-direction: row-reverse;
    padding: 0.25rem;
    background: ${xn.lightBg};
    border-radius: ${e=>e.themeToken.borderRadius}px;
    border-top-left-radius: 0;
    border-top-right-radius: 0;

    ${e=>e.$bordered?`border: 1px solid ${xn.borderColor};`:""}

    {...style}
`;function Cu({children:e,bordered:t,style:n}){const{token:r}=Mr.useToken();return s.jsx(Su,{style:n,$bordered:t,themeToken:r,children:e})}const Iu=ai.span`
    font-style: italic;
    font-size: 0.9em;

    ::before {
        content: ' - ';
    }
`;function ku({version:e}){const{t:t}=c(),n=G(e);return s.jsxs(Iu,{children:[t("values_version.inherited_from"),": ",n]})}const Ru=ai.div`
    font-size: 1.1em;

    span {
        margin-left: 0.5em;
    }
`,_u=ai(Kt)`
    && {
        border: none;
        width: 100%;
        color: rgba(0, 0, 0, 0.25);
    }

    &&:hover {
        border: none;
    }
`;function Tu({canAddValue:e,onAddValue:t,linkField:n=!1}){const{t:r}=c();return s.jsx(Ru,{onClick:t,children:e?s.jsxs(_u,{onClick:t,size:"small",children:[s.jsx(Vi,{}),s.jsx("span",{children:r(n?"record_edition.add_value_link":"record_edition.add_value")})]}):s.jsxs(s.Fragment,{children:[s.jsx(Sn,{}),s.jsx("span",{children:r("record_edition.no_value")})]})})}function ju({value:e,attribute:t,basic:n=!1,...r}){const{dispatch:i}=Yc(),{t:o}=c(),a=()=>{const n=W(t.type)?null==e?void 0:e.value:null;i({type:Gc.SET_ACTIVE_VALUE,value:{value:e,editingValue:n,attribute:t}})},l=n?s.jsx(xu,{shape:"circle",...r,icon:s.jsx(U,{}),onClick:a}):s.jsx(Kt,{shape:"circle",...r,icon:s.jsx(io,{}),onClick:a});return s.jsx($r,{title:o("record_edition.value_details_tooltip"),children:l})}function Au({versions:e,activeScope:t,onScopeChange:n,basic:r,...i}){const{t:o}=c(),a=!!e[fu.INHERITED],l=e=>{e.domEvent.preventDefault(),e.domEvent.stopPropagation(),n(e.key)},u=G(e[fu.CURRENT]),d={size:"1.8em",style:{paddingTop:"5px"}},p=t===fu.CURRENT?s.jsx(Vc,{...d}):s.jsx(Fc,{...d}),f=[{key:fu.CURRENT,label:s.jsxs(En,{style:{paddingLeft:a?"1rem":0},children:[p,u]}),onClick:l}];if(a){const n=G(e[fu.INHERITED])+` (${o("values_version.inherited_value")})`,r={size:"1.8em",style:{paddingTop:"5px",color:xn.inheritedValuesVersionColor}},i=t===fu.INHERITED?s.jsx(Vc,{...r}):s.jsx(Fc,{...r});f.unshift({key:fu.INHERITED,label:s.jsxs(En,{children:[i,n]}),onClick:l})}const v=s.jsx(Fc,{size:"1.35em",style:{paddingTop:"3px"}}),m=r?s.jsx(xu,{"aria-label":"values-version",shape:"circle",...i,icon:v,centered:!0}):s.jsx(Kt,{"aria-label":"values-version",shape:"circle",...i,icon:v});return s.jsx(on,{trigger:["click"],menu:{items:f,activeKey:t},overlayStyle:{zIndex:1e3},children:m})}const Ou=ai.div`
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    background: ${e=>e.$isCurrentVersion?"none":xn.inheritedValuesVersionColor};
    width: 6px;
    z-index: 100;
    border-radius: ${e=>e.$themeToken.borderRadius}px;;

    .first-value & {
        border-top-left-radius: ${e=>e.$themeToken.borderRadius}}
    }

    ${e=>e.$style}

    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
`;function Pu({activeScope:e,style:t}){const n=e===fu.CURRENT,{token:r}=Mr.useToken();return s.jsx(Ou,{$isCurrentVersion:n,$style:t,$themeToken:r})}function Nu({onDelete:e,...t}){const{t:n}=c();return s.jsx(H,{placement:"leftTop",title:n("record_edition.delete_value_confirm"),onConfirm:()=>e(),okText:n("global.submit"),okButtonProps:{"aria-label":"delete-confirm-button"},cancelText:n("global.cancel"),children:s.jsx(Kt,{shape:"circle",...t,icon:s.jsx(ui,{}),style:{background:"#FFF"},danger:!0,"aria-label":"delete-value",onClick:e=>e.stopPropagation(),className:"delete-value-button"})})}function Du({record:t,valuesVersion:n,...r}){const[i,o]=e.useState();return s.jsxs(s.Fragment,{children:[s.jsx(Kt,{"aria-label":"edit-record",shape:"circle",...r,icon:s.jsx(Ei,{size:48}),onClick:e=>{e.stopPropagation(),e.preventDefault(),o(!0)}}),i&&s.jsx(TS,{open:i,record:t,library:t.library.id,onClose:()=>{o(!1)},valuesVersion:n})]})}function Lu({record:e,onDelete:t,value:n,attribute:r,isReadOnly:i,children:o}){const{t:a}=c(),l=()=>t(e),u=[{title:a("global.edit"),button:s.jsx(Du,{record:e,shape:"circle"})},{title:a("record_edition.value_details"),button:s.jsx(ju,{value:n,attribute:r})}];return i||u.push({title:a("global.delete"),button:s.jsx(Nu,{onDelete:l})}),s.jsxs("div",{children:[o,s.jsx(q,{actions:u})]})}const $u=gn`
    ${E}
    query TREE_NODE_CHILDREN($treeId: ID!, $node: ID, $pagination: Pagination) {
        treeNodeChildren(treeId: $treeId, node: $node, pagination: $pagination) {
            totalCount
            list {
                id
                childrenCount
                record {
                    ...RecordIdentity
                    active
                }
                permissions {
                    access_tree
                    detach
                    edit_children
                }
            }
        }
    }
`;function Mu({tree:t,onSelect:n,onCheck:r,selectedNode:i,multiple:o=!1,canSelectRoot:a=!1,selectableLibraries:l}){const{lang:u}=wn(),{t:d}=c(),p={title:P(t.label,u)||t.id,record:null,id:t.id,key:t.id,isLeaf:!1,paginationOffset:0,children:[]},[f,v]=e.useState({[t.id]:p}),[m,g]=e.useState(i),[h,b]=e.useState(),[y,{error:x,called:w}]=k($u),E=async(e,n=0)=>{try{const r=await y({variables:{treeId:t.id,node:e&&e!==t.id?e:null,pagination:{limit:X,offset:n}}}),i=(e=>e.map((e=>({record:e.record,title:e.record.whoAmI.label||e.record.whoAmI.id,id:e.id,key:e.id,isLeaf:!e.childrenCount,children:[]}))))(r.data.treeNodeChildren.list),o=e??t.id,a={...f},l=r.data.treeNodeChildren.totalCount,s=a[o],c="__showMore"+o+n;s.children=s.children.filter((e=>!e.key.match(`__showMore${o}`)));for(const e of i){const t={...e,paginationOffset:0};a[t.key]=t,s.paginationOffset=n,s.children.push(t)}if(l>s.paginationOffset+X){const e={id:o,key:c,record:null,title:d("tree-node-selection.show_more"),isLeaf:!1,paginationOffset:0,isShowMore:!0,selectable:!1,children:[]};s.children.push(e)}v(a),b(null)}catch(r){b(r.message)}};e.useEffect((()=>{g(i)}),[i]),e.useEffect((()=>{E()}),[]);return w?x||h?s.jsx(Y,{message:(null==x?void 0:x.message)??h}):s.jsx(Cn,{defaultExpandedKeys:[t.id],multiple:o,selectable:!0,selectedKeys:[m],onSelect:(e,r)=>{const i=f[r.node.key],o=i.id===t.id;!a&&o||!o&&void 0!==l&&-1===l.indexOf(i.record.whoAmI.library.id)||i&&n(i,r.selected)},onCheck:e=>{const t=("object"==typeof e?e.checked:e).map((e=>f[e]));r(t)},treeData:[f[p.key]],loadData:async e=>{var n,r;const{id:i,isShowMore:o}=e,a=(null==(n=f[i])?void 0:n.paginationOffset)??0,l=o?((null==(r=f[i])?void 0:r.paginationOffset)??0)+X:a;(i!==t.id||o)&&await E(String(i),l)},checkStrictly:!0,checkable:o,showLine:{showLeafIcon:!1},switcherIcon:s.jsx(an,{"aria-label":"toggle-children"})}):s.jsx(Br,{})}const Bu=gn`
    query GET_TREE_LIBRARIES($treeId: ID, $library: String) {
        trees(filters: {id: $treeId, library: $library}) {
            totalCount
            list {
                id
                behavior
                system
                libraries {
                    library {
                        id
                        label
                        behavior
                        system
                    }
                    settings {
                        allowMultiplePositions
                        allowedChildren
                        allowedAtRoot
                    }
                }
            }
        }
    }
`,Vu=gn`
    query DOES_FILE_EXIST_AS_CHILD($parentNode: ID, $treeId: ID!, $filename: String!) {
        doesFileExistAsChild(parentNode: $parentNode, treeId: $treeId, filename: $filename)
    }
`,Fu=gn`
    ${E}
    mutation CREATE_DIRECTORY($library: String!, $nodeId: String!, $name: String!) {
        createDirectory(library: $library, nodeId: $nodeId, name: $name) {
            ...RecordIdentity
        }
    }
`,{warning:zu}=K;function Hu({defaultSelectedKey:t,libraryId:n,onCompleted:r,onClose:i}){const{t:o}=c(),{token:a}=Mr.useToken(),[l,u]=e.useState(t);S();const[d,p]=e.useState(),[f,v]=e.useState("wait"),[m,g]=e.useState(t?1:0),[h,b]=e.useState(),[y]=k(Vu,{fetchPolicy:"no-cache"}),x=async(e,t)=>(await y({variables:{treeId:h,parentNode:e!==h?e:null,filename:t}})).data.doesFileExistAsChild;R(Bu,{variables:{library:n},onCompleted:e=>{const t=e.trees.list.filter((e=>e.system&&e.behavior===Qt.files))[0];b(t.id)}});const[w,{loading:E}]=V(Fu,{fetchPolicy:"no-cache",onCompleted:e=>{void 0!==r&&r(e),v("finish")},onError:e=>{v("error")}}),C=()=>{p(""),i()},I=()=>{zu({className:"warning-duplicate-modal",closable:!0,open:!0,title:o("create_directory.duplicate_modal.title"),okText:o("global.ok"),content:s.jsx("p",{children:o("create_directory.duplicate_modal.message",{directoryName:d})})})},_=[{title:o("create_directory.select_path_step_title"),content:s.jsx("div",{"data-testid":"select-tree-node",style:{borderRadius:a.borderRadiusLG,border:`1px dashed ${a.colorBorder}`},children:h&&n&&s.jsx(Mu,{tree:{id:h},onSelect:async(e,t)=>{const n=t?e:void 0;d&&n&&await x(null==n?void 0:n.id,d)?I():u(null==n?void 0:n.key)},selectedNode:l,canSelectRoot:!0,selectableLibraries:[n]})})},{title:o("create_directory.choose_name_step_title"),content:s.jsx(In,{"data-testid":"directory-name-input",placeholder:o("create_directory.directory_name"),value:d,onChange:e=>p(e.target.value)})}],T=_.map((e=>({key:e.title,title:e.title})));return s.jsxs(K,{"data-testid":"create-directory-modal",title:o("create_directory.title"),open:!0,width:"70rem",onCancel:C,footer:s.jsxs("div",{style:{marginTop:50},children:[m>0&&s.jsx(Kt,{"data-testid":"prev-btn",onClick:()=>{g(m-1)},children:o("create_directory.previous")}),m<_.length-1&&s.jsx(Kt,{"data-testid":"next-btn",disabled:!l,type:"primary",onClick:()=>{g(m+1)},children:o("create_directory.next")}),m>0&&s.jsx(Kt,{"data-testid":"create-btn",loading:E,disabled:!d,className:"submit-btn",title:"Create",type:"primary",onClick:async()=>{await x(l,d)?I():(v("process"),await w({variables:{library:n,nodeId:l,name:d}}),C())},children:o("create_directory.create_step_title")})]}),children:[s.jsx(Q,{status:f,current:m,items:T}),s.jsx("div",{style:{lineHeight:"260px",textAlign:"center",marginTop:16},children:_[m].content})]})}const Gu=(e=0)=>`\n        embedded_fields {\n            id\n            format\n            label\n            ${e>0?Gu(e-1):""}\n        }\n    `;function Uu({library:e}){var t;return R(A`
    query GET_LIBRARY_DETAIL_EXTENDED($libId: ID) {
        libraries(filters: {id: $libId}) {
            list {
                id
                system
                label
                behavior
                linkedTrees {
                    id
                    label
                    permissions {
                        access_tree
                    }
                }
                attributes {
                    type
                    format
                    label
                    multiple_values
                    system
                    readonly
                    ... on StandardAttribute {
                        id
                        ${Gu(t=100)}
                    }
                    ... on LinkAttribute {
                        id
                        linked_library {
                            id
                            label
                            attributes {
                                type
                                format
                                label
                                multiple_values
                                system
                                readonly
                                ... on StandardAttribute {
                                    id
                                    ${Gu(t)}
                                }
                                ... on LinkAttribute {
                                    id
                                }
                                ... on TreeAttribute {
                                    id
                                    linked_tree {
                                        id
                                        label
                                    }
                                }
                            }
                            __typename
                        }
                        __typename
                    }
                    ... on TreeAttribute {
                        id
                        linked_tree {
                            id
                            label
                            libraries {
                                library {
                                    id
                                    label
                                    attributes {
                                        id
                                        type
                                        format
                                        label
                                        multiple_values
                                        system
                                        readonly
                                        ... on StandardAttribute {
                                            id
                                            ${Gu(t)}
                                        }
                                        ... on LinkAttribute {
                                            id
                                        }
                                        ... on TreeAttribute {
                                            id
                                            linked_tree {
                                                id
                                                label
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                gqlNames {
                    query
                    type
                    filter
                    searchableFields
                }
                defaultView {
                    id
                    description
                    label
                    display {
                        size
                        type
                    }
                    shared
                    filters {
                        field
                        value
                        condition
                        operator
                    }
                    color
                    sort {
                        field
                        order
                    }
                    settings {
                        name
                        value
                    }
                }
                permissions {
                    access_library
                    access_record
                    create_record
                    edit_record
                    delete_record
                }
            }
        }
    }
`,{variables:{libId:e},skip:!e})}const Wu=ai.div`
    position: relative;
`;function qu({visible:e,setVisible:t,submitAction:n,libId:r}){var i,o;const{t:a}=c(),{selectionState:l}=Z((e=>({selectionState:e.selection}))),u=J(),d=()=>{u(ne()),t(!1)},p=()=>{n(l.searchSelection),d()},f=t=>s.jsx(K,{open:e,onCancel:d,width:"95vw",bodyStyle:{height:"90vh",overflow:"hidden"},style:{top:"1rem"},onOk:p,okText:a("global.apply"),cancelText:a("global.cancel"),children:t}),{loading:v,data:m,error:g}=Uu({library:r});return v?f(s.jsx(te,{})):g?f(s.jsx(Y,{message:g.message})):(null==(o=null==(i=null==m?void 0:m.libraries)?void 0:i.list)?void 0:o.length)?m.libraries.list[0].permissions.access_library?f(s.jsx(Wu,{children:s.jsx(QP,{selectionMode:!0,library:m.libraries.list[0],style:{height:"calc(100vh - 11rem)"}})})):s.jsx(Y,{type:ee.PERMISSION_ERROR,showActionButton:!1}):f(s.jsx(Y,{message:a("lib_detail.not_found",{libraryId:r})}))}var Yu={};const Xu=u(kn);var Ku={},Qu={};Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.genCheckboxStyle=Qu.default=void 0,Qu.getStyle=rd;var Zu=Tn,Ju=Rn(),ed=_n();const td=new Zu.Keyframes("antCheckboxEffect",{"0%":{transform:"scale(1)",opacity:.5},"100%":{transform:"scale(1.6)",opacity:0}}),nd=e=>{const{checkboxCls:t}=e,n=`${t}-wrapper`;return[{[`${t}-group`]:Object.assign(Object.assign({},(0,ed.resetComponent)(e)),{display:"inline-flex"}),[n]:Object.assign(Object.assign({},(0,ed.resetComponent)(e)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${n}`]:{marginInlineStart:e.marginXS},[`&${n}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[t]:Object.assign(Object.assign({},(0,ed.resetComponent)(e)),{top:"0.2em",position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,width:"100%",height:"100%",cursor:"pointer",opacity:0,[`&:focus-visible + ${t}-inner`]:Object.assign({},(0,ed.genFocusOutline)(e))},[`${t}-inner`]:{boxSizing:"border-box",position:"relative",top:0,insetInlineStart:0,display:"block",width:e.checkboxSize,height:e.checkboxSize,direction:"ltr",backgroundColor:e.colorBgContainer,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,borderCollapse:"separate",transition:`all ${e.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:e.checkboxSize/14*5,height:e.checkboxSize/14*8,border:`${e.lineWidthBold}px solid ${e.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${e.motionDurationFast} ${e.motionEaseInBack}, opacity ${e.motionDurationFast}`}},"& + span":{paddingInlineStart:e.paddingXS,paddingInlineEnd:e.paddingXS}})},{[t]:{"&-indeterminate":{[`${t}-inner`]:{"&:after":{top:"50%",insetInlineStart:"50%",width:e.fontSizeLG/2,height:e.fontSizeLG/2,backgroundColor:e.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}}}}},{[`${n}:hover ${t}:after`]:{visibility:"visible"},[`\n        ${n}:not(${n}-disabled),\n        ${t}:not(${t}-disabled)\n      `]:{[`&:hover ${t}-inner`]:{borderColor:e.colorPrimary}},[`${n}:not(${n}-disabled)`]:{[`&:hover ${t}-checked:not(${t}-disabled) ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${t}-checked:not(${t}-disabled):after`]:{borderColor:e.colorPrimaryHover}}},{[`${t}-checked`]:{[`${t}-inner`]:{backgroundColor:e.colorPrimary,borderColor:e.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack} ${e.motionDurationFast}`}},"&:after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderRadius:e.borderRadiusSM,visibility:"hidden",border:`${e.lineWidthBold}px solid ${e.colorPrimary}`,animationName:td,animationDuration:e.motionDurationSlow,animationTimingFunction:"ease-in-out",animationFillMode:"backwards",content:'""',transition:`all ${e.motionDurationSlow}`}},[`\n        ${n}-checked:not(${n}-disabled),\n        ${t}-checked:not(${t}-disabled)\n      `]:{[`&:hover ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${t}:after`]:{borderColor:e.colorPrimaryHover}}},{[`${n}-disabled`]:{cursor:"not-allowed"},[`${t}-disabled`]:{[`&, ${t}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${t}-inner`]:{background:e.colorBgContainerDisabled,borderColor:e.colorBorder,"&:after":{borderColor:e.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:e.colorTextDisabled},[`&${t}-indeterminate ${t}-inner::after`]:{background:e.colorTextDisabled}}}]};function rd(e,t){const n=(0,Ju.mergeToken)(t,{checkboxCls:`.${e}`,checkboxSize:t.controlInteractiveSize});return[nd(n)]}Qu.genCheckboxStyle=nd;var id,od,ad=(0,Ju.genComponentStyleHook)("Checkbox",((e,t)=>{let{prefixCls:n}=t;return[rd(n,e)]}));function ld(){if(id)return Ku;id=1;var t=jn.default,n=An.default;Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.default=Ku.GroupContext=void 0;var r=n(On),i=n(Zt),o=n(Pn),a=t(e),l=Nn,s=n(sd()),c=n(Qu);const u=a.createContext(null);Ku.GroupContext=u;const d=(e,t)=>{var{defaultValue:n,children:d,options:p=[],prefixCls:f,className:v,rootClassName:m,style:g,onChange:h}=e,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]);const{getPrefixCls:y,direction:x}=a.useContext(l.ConfigContext),[w,E]=a.useState(b.value||n||[]),[S,C]=a.useState([]);a.useEffect((()=>{"value"in b&&E(b.value||[])}),[b.value]);const I=()=>p.map((e=>"string"==typeof e||"number"==typeof e?{label:e,value:e}:e)),k=y("checkbox",f),R=`${k}-group`,[_,T]=(0,c.default)(k),j=(0,o.default)(b,["value","disabled"]);p&&p.length>0&&(d=I().map((e=>a.createElement(s.default,{prefixCls:k,key:e.value.toString(),disabled:"disabled"in e?e.disabled:b.disabled,value:e.value,checked:w.includes(e.value),onChange:e.onChange,className:`${R}-item`,style:e.style},e.label))));const A={toggleOption:e=>{const t=w.indexOf(e.value),n=(0,r.default)(w);-1===t?n.push(e.value):n.splice(t,1),"value"in b||E(n);const i=I();null==h||h(n.filter((e=>S.includes(e))).sort(((e,t)=>i.findIndex((t=>t.value===e))-i.findIndex((e=>e.value===t)))))},value:w,disabled:b.disabled,name:b.name,registerValue:e=>{C((t=>[].concat((0,r.default)(t),[e])))},cancelValue:e=>{C((t=>t.filter((t=>t!==e))))}},O=(0,i.default)(R,{[`${R}-rtl`]:"rtl"===x},v,m,T);return _(a.createElement("div",Object.assign({className:O,style:g},j,{ref:t}),a.createElement(u.Provider,{value:A},d)))},p=a.forwardRef(d);var f=a.memo(p);return Ku.default=f,Ku}function sd(){if(od)return Yu;od=1;var t=jn.default,n=An.default;Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.default=void 0;var r=n(Zt),i=n(Xu),o=t(e),a=Nn,l=$n;n(Dn);var s=ld(),c=n(Ln),u=n(Qu);const d=(e,t)=>{var n,{prefixCls:d,className:p,rootClassName:f,children:v,indeterminate:m=!1,style:g,onMouseEnter:h,onMouseLeave:b,skipGroup:y=!1,disabled:x}=e,w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]);const{getPrefixCls:E,direction:S}=o.useContext(a.ConfigContext),C=o.useContext(s.GroupContext),{isFormItemInput:I}=o.useContext(l.FormItemInputContext),k=o.useContext(c.default),R=null!==(n=(null==C?void 0:C.disabled)||x)&&void 0!==n?n:k,_=o.useRef(w.value);o.useEffect((()=>{null==C||C.registerValue(w.value)}),[]),o.useEffect((()=>{if(!y)return w.value!==_.current&&(null==C||C.cancelValue(_.current),null==C||C.registerValue(w.value),_.current=w.value),()=>null==C?void 0:C.cancelValue(w.value)}),[w.value]);const T=E("checkbox",d),[j,A]=(0,u.default)(T),O=Object.assign({},w);C&&!y&&(O.onChange=function(){w.onChange&&w.onChange.apply(w,arguments),C.toggleOption&&C.toggleOption({label:v,value:w.value})},O.name=C.name,O.checked=C.value.includes(w.value));const P=(0,r.default)({[`${T}-wrapper`]:!0,[`${T}-rtl`]:"rtl"===S,[`${T}-wrapper-checked`]:O.checked,[`${T}-wrapper-disabled`]:R,[`${T}-wrapper-in-form-item`]:I},p,f,A),N=(0,r.default)({[`${T}-indeterminate`]:m},A),D=m?"mixed":void 0;return j(o.createElement("label",{className:P,style:g,onMouseEnter:h,onMouseLeave:b},o.createElement(i.default,Object.assign({"aria-checked":D},O,{prefixCls:T,className:N,disabled:R,ref:t})),void 0!==v&&o.createElement("span",null,v)))};var p=o.forwardRef(d);return Yu.default=p,Yu}Qu.default=ad;const cd=d(sd()),ud=ai.div`
    background-color: ${xn.defaultBg};
    border-radius: 5px;

    .ant-list-items {
        max-height: ${e=>e.maxHeight||"auto"};
        overflow-y: auto;
    }
`,dd=ai(re.Item)`
    cursor: ${e=>e.onClick?"pointer":"auto"};
    && {
        padding: 0;
        justify-content: flex-start;
    }
`,pd=ai.div`
    margin: 0 1em;
`;function fd({maxHeight:e,onItemClick:t,renderItemContent:n,selectable:r,selectedItems:i,onSelectionChange:o,...a}){const l={renderItem:e=>{const a=t?()=>{t(e)}:null;return s.jsxs(dd,{onClick:a,children:[r&&s.jsx(pd,{onClick:e=>e.stopPropagation(),children:s.jsx(cd,{checked:i.some((t=>Vr(e,t))),onChange:t=>{const n=[...i];t.target.checked?n.push(e):n.splice(n.indexOf(e),1),o(n)}})}),n?n(e):e]})},...a},c="number"==typeof e?`${e}px`:String(e);return s.jsx(ud,{maxHeight:c,children:s.jsx(re,{...l})})}const vd=mn`
    subscription SUB_UPLOAD_UPDATE($filters: UploadFiltersInput) {
        upload(filters: $filters) {
            userId
            progress {
                length
                transferred
                speed
                runtime
                remaining
                percentage
                eta
                delta
            }
            uid
        }
    }
`,md=gn`
    ${E}
    mutation UPLOAD($library: String!, $nodeId: String!, $files: [FileInput!]!) {
        upload(library: $library, nodeId: $nodeId, files: $files) {
            uid
            record {
                ...RecordIdentity
            }
        }
    }
`;let gd;const hd=new Uint8Array(16);function bd(){if(!gd&&(gd="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gd(hd)}const yd=[];for(let ZP=0;ZP<256;++ZP)yd.push((ZP+256).toString(16).slice(1));const xd={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function wd(e,t,n){if(xd.randomUUID&&!t&&!e)return xd.randomUUID();const r=(e=e||{}).random||(e.rng||bd)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(yd[e[t+0]]+yd[e[t+1]]+yd[e[t+2]]+yd[e[t+3]]+"-"+yd[e[t+4]]+yd[e[t+5]]+"-"+yd[e[t+6]]+yd[e[t+7]]+"-"+yd[e[t+8]]+yd[e[t+9]]+"-"+yd[e[t+10]]+yd[e[t+11]]+yd[e[t+12]]+yd[e[t+13]]+yd[e[t+14]]+yd[e[t+15]]).toLowerCase()}(r)}const{confirm:Ed}=K;function Sd({defaultSelectedNode:t,libraryId:n,multiple:r=!1,onCompleted:i,onClose:o}){const{t:a}=c(),{token:l}=Mr.useToken(),[u,d]=e.useState(t),[p,f]=e.useState(),[v,m]=e.useState([]),[g]=S(),[h,b]=e.useState("process"),[y,x]=e.useState(t?1:0),[w,C]=e.useState(),[I,_]=e.useState(),[T,j]=e.useState(),[O,{loading:P}]=V(md,{fetchPolicy:"no-cache",onCompleted:e=>{void 0!==i&&i(e),b("finish")},onError:e=>{b("error"),j(e.message)}});R((e=>e?A`
    ${E}
    query GET_DIRECTORY_DATA($directoryId: String!) {
        ${Fr(e).query}(
            filters: [{field: "id", value: $directoryId, condition: EQUAL}])
        {
            list {
                ...RecordIdentity
                created_at
                created_by {
                    ...RecordIdentity
                }
                modified_at
                modified_by {
                    ...RecordIdentity
                }
                file_name
                file_path
                library {
                    behavior
                }
            }
        }
    }`:lu)(I),{skip:!I||!(null==u?void 0:u.recordId),onCompleted:e=>{const t=e[Fr(I).query].list[0];f({path:t.file_path,name:t.file_name})},variables:{directoryId:null==u?void 0:u.recordId}});const N={name:"files",multiple:r,maxCount:r?99999:1,showUploadList:!0,fileList:v,disabled:"process"!==h||P,beforeUpload:async e=>(e.uid=wd(),m((t=>t.concat([e]))),!1),onRemove:e=>{const t=v.filter((t=>t.uid!==e.uid));m(t)},iconRender:e=>"uploading"===e.status?s.jsx(en,{}):"success"===e.status?s.jsx(Ai,{twoToneColor:l.colorSuccess}):s.jsx(Sn,{}),progress:{showInfo:!0,strokeWidth:2}},[D]=k(Vu,{fetchPolicy:"no-cache"});R(Bu,{variables:{library:n},onCompleted:e=>{var t;const n=e.trees.list.filter((e=>e.system&&e.behavior===Qt.files))[0];C(n.id);const r=null==(t=n.libraries.filter((e=>e.library.behavior===Jt.directories))[0])?void 0:t.library.id;_(r)}}),ie(vd,{variables:{filters:{userId:null==g?void 0:g.userId}},skip:!(null==g?void 0:g.userId),onSubscriptionData:e=>{const t=e.subscriptionData.data.upload;m((e=>e.map((e=>(e.uid===t.uid&&(e.percent=t.progress.percentage,e.status=100===t.progress.percentage?"success":"uploading"),e)))))}});const L=()=>{m([]),o()},$=()=>{x(y+1)},M=s.jsxs(fi.Dragger,{"data-testid":"dragger",...N,children:[s.jsx("p",{className:"ant-upload-drag-icon",children:s.jsx(vi,{})}),s.jsx("p",{className:"ant-upload-text",children:a("upload.dragger_content")})]}),B="finish"===h||"error"===h,F=async e=>new Promise((t=>{let n=!1;Ed({className:"confirm-replace-modal",closable:!0,open:!0,title:a("upload.replace_modal.title"),content:s.jsx("p",{children:a("upload.replace_modal.message",{filename:e})}),footer:s.jsx(bn,{justify:"end",children:s.jsxs(En,{children:[s.jsx(Mn,{onChange:e=>{n=e.target.checked},children:a("upload.replace_modal.applyToAll")}),s.jsx(Kt,{onClick:()=>t({replace:!1,applyToAll:n}),children:a("upload.replace_modal.keepBtn")},"keepBtn"),s.jsx(Kt,{type:"primary",onClick:()=>t({replace:!0,applyToAll:n}),children:a("upload.replace_modal.replaceBtn")},"replaceBtn")]})})})})),z=()=>{const e=u?p?`${null==p?void 0:p.path}/${null==p?void 0:p.name}`.replace("./",""):w:a("upload.select_path_step_title");return s.jsx($r,{title:e,children:(null==e?void 0:e.length)>30?`${e.slice(0,30)}...`:e})},H=[{title:s.jsx(z,{}),content:s.jsx("div",{"data-testid":"select-tree-node",style:{borderRadius:l.borderRadiusLG,border:`1px dashed ${l.colorBorder}`},children:w&&I&&s.jsx(Mu,{tree:{id:w},onSelect:async(e,t)=>{var n;const r=t?{id:e.id,recordId:null==(n=e.record)?void 0:n.id}:void 0;d(r),(null==r?void 0:r.recordId)||f(null)},selectedNode:null==u?void 0:u.id,canSelectRoot:!0,selectableLibraries:[I]})})},{title:a("upload.select_files_step_title"),content:M},{title:a("upload.upload_step_title"),content:s.jsxs(s.Fragment,{children:[M,!!T&&s.jsxs(s.Fragment,{children:[s.jsx(el,{}),s.jsx(mi,{message:T,type:"error"})]})]}),icon:P?s.jsx(en,{}):null}],G=H.map((e=>({key:e.title,title:e.title,icon:e.icon})));return s.jsx(s.Fragment,{children:s.jsxs(K,{title:a("upload.title"),open:!0,width:"70rem",onCancel:L,footer:s.jsxs("div",{style:{marginTop:50},children:[y>0&&y<H.length-1&&s.jsx(Kt,{"data-testid":"prev-btn",onClick:()=>{x(y-1)},children:a("upload.previous")}),y<H.length-2&&s.jsx(Kt,{"data-testid":"next-btn",disabled:!u,type:"primary",onClick:()=>$(),children:a("upload.next")}),(!v.length||!B)&&y>=H.length-2&&s.jsx(Kt,{"data-testid":"upload-btn",loading:P,disabled:!v.length,className:"submit-btn",title:"Upload",type:"primary",onClick:()=>{(async e=>{let t;const n=[...v];for(const r of n)if(t)r.replace=r.replace??t.replace;else if((await D({variables:{treeId:w,parentNode:e!==w?e:null,filename:r.name}})).data.doesFileExistAsChild){const{applyToAll:e,replace:n}=await F(r.name);K.destroyAll(),r.replace=n,e&&(t={replace:n})}m(n)})(u.id).then((()=>{$(),(async()=>{await O({variables:{library:n,nodeId:u.id,files:v.map((e=>({data:e,uid:e.uid,size:e.size,replace:e.replace})))}})})()}))},children:a("upload.upload_step_title")}),B&&s.jsx(Kt,{"data-testid":"close-btn",onClick:L,children:a("global.close")})]}),"data-testid":"upload-modal","upload-modal":!0,children:[s.jsx(Q,{status:h,current:y,items:G}),s.jsx("div",{style:{marginTop:16},children:H[y].content})]})})}const Cd=ai.div`
    background-color: ${xn.defaultBg};
    padding: 1em;
    z-index: 1;
    position: relative;

    & .record-card .label {
        font-weight: normal;
        padding: 0.2em;
    }

    & .ant-list-pagination {
        margin-top: 5px;
    }
`,Id=ai.div`
    max-height: 30rem;
    overflow-y: scroll;
`,kd=ai.div`
    margin: 0 0 1em 0;
    width: 100%;
    display: flex;
    direction: row;
    align-items: center;
`,Rd=ai(En)`
    padding-top: 1em;
    width: 100%;
    display: flex;
    justify-content: space-between;
`,_d=ai(In.Search)`
    flex-grow: 1;
    margin-right: 1em;
`,Td=ai(kr)`
    margin-left: 2em;
`,jd=ai.div`
    padding: 0.5rem;
    font-style: italic;
`,Ad=e=>s.jsx(Vn,{record:e.whoAmI,size:ae.small,withLibrary:!1,withPreview:!1},e.id);function Od({attribute:t,onAdd:n,onClose:r}){var i,o;const{t:a}=c(),{lang:l}=wn(),u=t.linkValuesList.enable?t.linkValuesList.values:[],[d,p]=e.useState(u),f=e.useRef(),v=e.useRef(),[m,g]=e.useState([]),[h,b]=e.useState(!1),[y,x]=e.useState(!1),[w,E]=e.useState(!1),[S,C]=e.useState(!1),[I,R]=e.useState(1),[_,T]=e.useState(1),j=!t.linkValuesList.enable||t.linkValuesList.allowFreeEntry,A=t.linked_library.permissions.create_record&&t.linked_library.behavior!==Jt.files&&t.linked_library.behavior!==Jt.directories,O=t.linked_library.permissions.create_record&&t.linked_library.behavior===Jt.files,N=t.linked_library.permissions.create_record&&t.linked_library.behavior===Jt.directories,[D,{loading:L,error:$,data:M}]=k(vc(t.linked_library.gqlNames.query,[],!0));e.useEffect((()=>{var e;f.current.scrollIntoView({block:"nearest"}),null==(e=v.current)||e.focus()}),[]);const B=()=>r(),V=null==(o=null==(i=null==v?void 0:v.current)?void 0:i.input)?void 0:o.value,F=M&&V?M[t.linked_library.id].list.map((e=>({id:e.whoAmI.id,whoAmI:e.whoAmI}))):[],z={onItemClick:e=>{n([e])},renderItemContent:Ad,selectable:t.multiple_values,selectedItems:m,onSelectionChange:e=>g(e),locale:{emptyText:a("record_edition.no_matching_value")}},H={simple:!0,pageSize:10,current:I};return s.jsxs(s.Fragment,{children:[s.jsxs(Cd,{"data-testid":"values-add",ref:f,children:[s.jsxs(kd,{children:[s.jsx(_d,{placeholder:a("record_edition.search_elements"),onSearch:e=>{if(R(1),T(1),u.length){const t=u.filter((t=>{var n;const r=new RegExp(e.toLowerCase()),i=String(null==(n=t.whoAmI)?void 0:n.label)??"";return!e||t.id.match(r)||i.toLowerCase().match(r)}));p(t)}j&&e&&D({variables:{fullText:e,limit:10,offset:0}})},loading:L,allowClear:!0,ref:v,"aria-label":a("record_edition.search_elements")}),s.jsx(Td,{onClick:B,role:"button"})]}),s.jsxs(Id,{children:[d.length||F.length||!V?s.jsx(s.Fragment,{}):a("record_edition.no_matching_value"),!!d.length&&s.jsxs(s.Fragment,{children:[s.jsx(el,{orientation:"left",children:a("record_edition.values_list")}),s.jsx(fd,{...z,"data-testid":"values_list",dataSource:d,pagination:!1})]}),j&&!!F.length&&s.jsxs(s.Fragment,{children:[s.jsx(el,{orientation:"left",children:P(t.linked_library.label,l)}),L&&s.jsx(Br,{}),$&&s.jsx(Y,{message:$.message}),!L&&!$&&s.jsx(fd,{...z,"data-testid":"search_result",dataSource:F,pagination:{...H,total:(null==M?void 0:M[t.linked_library.id].totalCount)??0,current:_,onChange:e=>{v.current.input.value&&(T(e),D({variables:{fullText:v.current.input.value,limit:10,offset:10*(e-1)}}))}}})]}),j&&!V&&s.jsxs(jd,{children:[s.jsx(_i,{})," ",a("record_edition.start_typing_message")]})]}),s.jsxs(Rd,{children:[s.jsxs(En,{children:[j&&s.jsx(Kt,{size:"small",icon:s.jsx(Bn,{}),onClick:()=>{E(!0)},children:a("record_edition.advanced_search")}),A&&s.jsx(Kt,{size:"small",icon:s.jsx(si,{}),onClick:()=>{C(!0)},children:a("record_edition.new_record")}),O&&s.jsx(Kt,{size:"small",icon:s.jsx(oe,{}),onClick:()=>b(!0),children:a("upload.title")}),N&&s.jsx(Kt,{size:"small",icon:s.jsx(Xi,{}),onClick:()=>x(!0),children:a("create_directory.title")})]}),s.jsxs(En,{children:[s.jsx(Kt,{size:"small",onClick:B,children:a("global.cancel")}),s.jsx(Kt,{type:"primary",size:"small",onClick:()=>{n(m)},children:a("global.submit")})]})]})]}),w&&s.jsx(qu,{libId:t.linked_library.id,visible:w,setVisible:E,submitAction:async({selected:e})=>{if(!e.length)return;const r=(t.multiple_values?e:[e[0]]).map((e=>({id:e.id,whoAmI:{id:e.id,label:e.label,library:t.linked_library,color:null,preview:null}})));n(r)}}),S&&s.jsx(TS,{open:S,library:t.linked_library.id,record:null,onClose:()=>{C(!1)},afterCreate:e=>{n([{id:e.id,whoAmI:e}])}}),h&&s.jsx(Sd,{libraryId:t.linked_library.id,multiple:t.multiple_values,onCompleted:async e=>{const t=e.upload.map((e=>({id:e.record.id,whoAmI:e.record.whoAmI})));n(t)},onClose:()=>b(!1)}),y&&s.jsx(Hu,{libraryId:t.linked_library.id,onCompleted:async e=>{n([{id:e.createDirectory.id,whoAmI:e.createDirectory.whoAmI}])},onClose:()=>x(!1)})]})}const Pd=ai.div`
    position: relative;
    z-index: ${e=>e.isValuesAddVisible?1:"auto"};
    border: 1px solid ${xn.borderColor};
    margin-bottom: 1.5em;
    border-radius: ${e=>e.$themeToken.borderRadius}px;

    tr:not(:hover) .floating-menu {
        display: none;
    }

    td {
        height: 2.5rem; // In case we have no value on the whole row
    }

    // Disable some unwanted antd styles
    && table > thead > tr:first-child {
        th:first-child,
        th:last-child {
            border-radius: 0;
        }
    }

    &&& .ant-table-footer {
        padding: 0;
    }
`,Nd=ai(Fn)`
    && {
        top: calc(50% - 0.9em);
        font-size: 0.9em;
        background: ${xn.lightBg};
        padding: 0 0.5em;
        color: ${xn.secondaryTextColor};
        z-index: 1;
        margin-bottom: 0;
        border-top-left-radius: ${e=>e.$themeToken.borderRadius}px;
        border-top-right-radius: ${e=>e.$themeToken.borderRadius}px;
    }
`;const Dd="__new__";var Ld=(e=>(e.PRISTINE="PRISTINE",e.DIRTY="DIRTY",e))(Ld||{}),$d=(e=>(e.ADD_VALUE="ADD_VALUE",e.CHANGE_VALUE="CHANGE_VALUE",e.FOCUS_FIELD="FOCUS_FIELD",e.SET_ERROR="SET_ERROR",e.SET_ERROR_DISPLAY="SET_ERROR_DISPLAY",e.UNEDIT_FIELD="UNEDIT_FIELD",e.CLOSE_ERROR="CLOSE_ERROR",e.CLEAR_ERROR="CLEAR_ERROR",e.UPDATE_AFTER_SUBMIT="UPDATE_AFTER_SUBMIT",e.UPDATE_AFTER_DELETE="UPDATE_AFTER_DELETE",e.CANCEL_EDITING="CANCEL_EDITING",e.CHANGE_VERSION_SCOPE="CHANGE_VERSION_SCOPE",e.REFRESH_VALUES="REFRESH_VALUES",e))($d||{});const Md={idValue:null,index:0,value:null,displayValue:"",editingValue:"",originRawValue:"",error:"",isErrorDisplayed:!1,isEditing:!1,state:"PRISTINE"},Bd=(e,t,n)=>{var r,i,o,a;if(void 0===(null==e?void 0:e.idValue)||void 0===(null==(o=null==(i=null==(r=null==t?void 0:t.values)?void 0:r[t.activeScope])?void 0:i.values)?void 0:o[e.idValue]))return t;return{...t,values:{...t.values,[t.activeScope]:{...t.values[t.activeScope],values:{...null==(a=t.values[t.activeScope])?void 0:a.values,[e.idValue]:{...t.values[t.activeScope].values[e.idValue],...n}}}}}},Vd=e=>{var t,n,r,i;const{attribute:o,values:a,formVersion:l}=e,s=Array.isArray(a)&&a.length?a.reduce(((e,t,n)=>({...e,[(null==t?void 0:t.id_value)??null]:{...Md,idValue:(null==t?void 0:t.id_value)??null,index:n,value:t??null,displayValue:(null==t?void 0:t.value)??"",editingValue:o.format===Ft.encrypted?"":(null==t?void 0:t.raw_value)??"",originRawValue:o.format===Ft.encrypted?"":(null==t?void 0:t.raw_value)??""}})),{}):{[Dd]:{...Md,idValue:Dd}},c=(null==(t=null==o?void 0:o.versions_conf)?void 0:t.versionable)?o.versions_conf.profile.trees.reduce(((e,t)=>((null==l?void 0:l[t.id])&&(e[t.id]=l[t.id]),e)),{}):null,u=!!(null==(n=null==o?void 0:o.versions_conf)?void 0:n.versionable)&&!du(c,(null==(r=null==a?void 0:a[0])?void 0:r.version)??c),d=u?null==(i=null==a?void 0:a[0])?void 0:i.version:null;return{activeScope:u?fu.INHERITED:fu.CURRENT,values:{[fu.CURRENT]:{version:c??null,values:u?{[Dd]:{...Md,idValue:Dd}}:s},[fu.INHERITED]:u?{version:d??null,values:s}:null}}},Fd=(e,t)=>{var n,r,i;const o=e=>Object.keys(e).length?e:{[Dd]:{...Md,idValue:Dd}};switch(t.type){case"ADD_VALUE":return{...e,values:{...e.values,[e.activeScope]:{...e.values[e.activeScope],values:{...e.values[e.activeScope].values,[t.idValue??Dd]:{...Md,idValue:t.idValue??Dd,index:Object.keys(e.values).length,isEditing:!0}}}}};case"CHANGE_VALUE":return Bd(t,e,{editingValue:t.value,state:"DIRTY"});case"FOCUS_FIELD":return Bd(t,e,{isEditing:!0});case"SET_ERROR":return Bd(t,e,{error:t.error,isErrorDisplayed:!0,state:"DIRTY"});case"CLEAR_ERROR":return Bd(t,e,{error:"",isErrorDisplayed:!1});case"SET_ERROR_DISPLAY":return Bd(t,e,{isErrorDisplayed:t.displayError});case"UNEDIT_FIELD":return Bd(t,e,{isEditing:!1,isErrorDisplayed:!1,error:"",state:"PRISTINE"});case"UPDATE_AFTER_SUBMIT":{const o=e.attribute.format!==Ft.encrypted?t.newValue.raw_value:null==(r=null==(n=e.values[e.activeScope].values)?void 0:n[t.idValue])?void 0:r.editingValue,a=t.newValue.version?B(t.newValue.version):null,l={...Md,idValue:t.newValue.id_value,value:{...t.newValue,version:a},displayValue:t.newValue.value,editingValue:o,originRawValue:o,version:a};if(t.idValue!==Dd)return Bd(t,e,l);const s={...e},c=s.values[s.activeScope].values,u=null==(i=c[Dd])?void 0:i.index;return delete c[Dd],c[t.newValue.id_value]={...l,index:u??Object.keys(s.values).length},s}case"UPDATE_AFTER_DELETE":{const n={...e};let r=n.values[n.activeScope].values;return delete r[t.idValue],t.allDeleted?(n.values[n.activeScope].values=o({}),n):(r=o(r),r=Object.values(r).reduce(((e,t,n)=>({...e,[t.idValue]:{...t,index:n}})),{}),n.values[n.activeScope].values=r,n)}case"CANCEL_EDITING":{if(t.idValue!==Dd)return Bd(t,e,{editingValue:e.values[e.activeScope].values[t.idValue].originRawValue,isEditing:!1,state:"PRISTINE"});const n={...e};return delete n.values[n.activeScope].values[Dd],n.values[n.activeScope].values=o(n.values[n.activeScope].values),n}case"CHANGE_VERSION_SCOPE":return{...e,activeScope:t.scope};case"REFRESH_VALUES":{const n=Vd({attribute:e.formElement.attribute,values:t.values,formVersion:t.formVersion});return{...e,...n}}default:return e}};const zd=ai(In)`
    // Remove arrows on number input
    && {
        input {
            -moz-appearance: textfield;
            ::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }
        }
    }
`;function Hd({state:t,fieldValue:n,onFocus:r,onChange:i,onPressEnter:o,inputRef:a}){const{isEditing:l,editingValue:c}=n;e.useEffect((()=>{l&&a.current.focus()}),[l,a]);return s.jsx(In,{ref:a,className:"field-wrapper "+(c?"has-value":""),value:String(c),onFocus:r,onChange:e=>{i(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&o()},disabled:t.isReadOnly,allowClear:!0,autoFocus:!0},"editing")}const Gd=ai.div`
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    width: 100%;
`;function Ud({attribute:e,valuesList:t,onValueCopy:n,onValueSelect:r}){const{t:i,i18n:o}=c();return s.jsx(fd,{dataSource:t,bordered:!0,size:"small",maxHeight:250,locale:{emptyText:i("record_edition.no_matching_value")},renderItemContent:t=>{const r=e.format===Ft.date?new Intl.DateTimeFormat(o.language).format(new Date(1e3*Number(t.value))):t.value;return s.jsxs(Gd,{children:[s.jsxs("span",{children:[r,t.isNewValue&&` (${i("record_edition.new_value")})`]}),t.canCopy&&s.jsx($r,{title:i("record_edition.copy_value"),children:s.jsx(Kt,{icon:s.jsx(Hn,{}),shape:"circle",onClick:e=>{e.stopPropagation(),n(t.rawValue)}})})]})},onItemClick:e=>{r(e.rawValue)}})}const Wd=ai.div`
    color: ${xn.errorColor};
    font-weight: bold;
`,qd=ai.div`
    position: relative;
    z-index: ${e=>e.isEditing?2:0};
`,Yd=ai.div`
    position: relative;

    && input {
        background: ${xn.defaultBg};
        transition: none;
        border-radius: 0;
        line-height: 2.5em;
        padding-left: 17px;
    }

    ${qd}:not(:last-child) & input:not(:hover) {
        border-bottom: none;
    }

    ${qd}:first-child & input {
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
    }

    ${qd}:last-child & input {
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
    }

    &.editing input {
        border-radius: 5px;
    }

    &.editing .field-wrapper,
    &.editing .nested-input {
        z-index: 0;
    }

    &.format-boolean label {
        margin-right: 1em;
    }

    &:not(.format-boolean) label {
        position: absolute;
        left: 11px;
        top: calc(50% - 0.9em);
        font-size: 1.1em;
        background: transparent;
        padding: 0 0.5em;
        color: ${xn.secondaryTextColor};
        transition: all 0.2s ease;
        transition-property: left, top, font-size;
        z-index: 1;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        width: 100%;
    }

    &:not(.format-boolean):not(.editing):not(.has-value) label {
        padding-right: 3rem;
    }

    input:disabled {
        background: ${xn.defaultBg};
    }

    &.has-value:not(.format-boolean) label,
    &.editing:not(.format-boolean) label {
        top: 0px;
        font-size: 0.9em;
        background: transparent;
        text-shadow: 0px 0px 4px #fff;
        z-index: 2;
        border-radius: 5px;
    }

    ${qd}.first-value &.has-value:not(.format-boolean) input:not(:first-child),
    ${qd}.first-value &.editing:not(.format-boolean) input:not(:only-child),
    ${qd}.first-value &.editing.format-date_range input,
    ${qd}.first-value &.editing.format-date_range .ant-picker-range-separator {
        padding-top: 1em;
    }

    &:not(.has-value):not(.editing):not(.format-boolean) input {
        padding: 9px 0;
    }

    &:not(:hover) .floating-menu {
        display: none;
    }

    .floating-menu {
        top: 50%;
        transform: translateY(-50%);
    }
`,Xd=ai.div`
    position: absolute;
    display: flex;
    width: 100%;
    flex-direction: column;
`,Kd=ai.div`
    display: flex;
    margin: 0.5em 0;
    justify-content: flex-end;

    & > button {
        margin-left: 0.5em;
    }
`,Qd=ai(Gn.Item)`
    && {
        margin: 0;
    }
`,Zd={[Ft.text]:Hd,[Ft.date]:function({state:e,fieldValue:t,onFocus:n,onSubmit:r,settings:i}){var o,a;const{editingValue:l}=t,{i18n:u}=c(),d=e.formElement.attribute,p=!!(null==(o=null==d?void 0:d.values_list)?void 0:o.enable),f=!!(null==(a=null==d?void 0:d.values_list)?void 0:a.allowFreeEntry),v=e=>{const t=e?String(e.unix()):null;r(t)},m=l?se(1e3*Number(l)):null,g=p?{points:["bl","tl"],offset:[0,-1]}:null;return!p||f?s.jsx(ce,{className:"field-wrapper","data-testid":"datepicker",disabled:e.isReadOnly,picker:"date",onChange:v,value:m,autoFocus:!0,defaultOpen:!0,showTime:!!i.withTime,onOk:v,popupStyle:{background:xn.defaultBg},style:{background:xn.defaultBg,width:"100%"},allowClear:!1,dropdownAlign:g}):s.jsx(In,{className:"field-wrapper "+(l?"has-value":""),value:l?new Intl.DateTimeFormat(u.language).format(new Date(1e3*Number(l))):"",onFocus:n,disabled:!0,allowClear:!0,autoFocus:!0},"editing")},[Ft.date_range]:function({state:e,fieldValue:t,onFocus:n,onSubmit:r,settings:i}){var o,a;const{editingValue:l,displayValue:u}=t,{t:d}=c(),p=e.formElement.attribute,f=!!(null==(o=null==p?void 0:p.values_list)?void 0:o.enable),v=!!(null==(a=null==p?void 0:p.values_list)?void 0:a.allowFreeEntry),m=e=>{const[t,n]=e,i=e?{from:String(t.unix()),to:String(n.unix())}:null;r(i)},g=l,h=g?[se(1e3*Number(g.from)),se(1e3*Number(g.to))]:null,b=f?{points:["bl","tl"],offset:[0,-1]}:null,y=u;return!f||v?s.jsx(ce.RangePicker,{className:"field-wrapper","data-testid":"datepicker",disabled:e.isReadOnly,picker:"date",onChange:m,value:h,autoFocus:!0,defaultOpen:!0,showTime:!!i.withTime,onOk:m,popupStyle:{background:xn.defaultBg},style:{background:xn.defaultBg,width:"100%"},allowClear:!1,dropdownAlign:b}):s.jsx(In,{className:"field-wrapper "+(l?"has-value":""),value:y.from&&y.to?ue(y,d):"",onFocus:n,disabled:!0,allowClear:!0,autoFocus:!0},"editing")},[Ft.boolean]:function({state:e,fieldValue:t,onSubmit:n}){const{value:r}=t;return s.jsx(Mn,{className:"nested-input",disabled:e.isReadOnly,checked:!!(null==r?void 0:r.value),indeterminate:"boolean"!=typeof(null==r?void 0:r.value),onChange:e=>{n(String(e.target.checked))}})},[Ft.numeric]:function({state:e,fieldValue:t,onFocus:n,onPressEnter:r,onChange:i,inputRef:o}){const{editingValue:a}=t,l=Number(a),c=""!==a?l:"";return s.jsx(zd,{type:"number",ref:o,className:"nested-input",value:c,onFocus:n,onChange:e=>{i(String(e.target.value))},onPressEnter:()=>{r()},disabled:e.isReadOnly,allowClear:!0,autoFocus:!0})},[Ft.encrypted]:function({state:e,fieldValue:t,onChange:n,onPressEnter:r,inputRef:i}){const{editingValue:o}=t;return s.jsx(In.Password,{className:"nested-input",ref:i,value:String(o),onChange:e=>{n(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&r()},disabled:e.isReadOnly,autoFocus:!0,"data-testid":"encrypted-input"})},[Ft.extended]:Hd};function Jd({value:t,onSubmit:n,onDelete:r,onScopeChange:i,state:o,dispatch:a}){var l,u,d,p,f,v,m;const{t:g}=c(),{token:h}=Mr.useToken(),b=e.useRef(),y=e.useRef(),{state:x,dispatch:w}=Yc(),E=o.formElement.attribute,S=!!(null==(l=null==E?void 0:E.values_list)?void 0:l.enable),C=!!(null==(u=null==E?void 0:E.values_list)?void 0:u.allowFreeEntry);e.useEffect((()=>{var e;t.isEditing&&(null==(e=null==b?void 0:b.current)||e.scrollIntoView({block:"nearest"}))}),[t.isEditing]),e.useEffect((()=>{null===x.activeValue&&t.isEditing&&a({type:$d.CANCEL_EDITING,idValue:t.idValue})}),[x.activeValue]),e.useEffect((()=>{t.isEditing&&w({type:Gc.SET_EDITING_VALUE,value:t.editingValue})}),[t.isEditing,t.editingValue]);const I=async e=>{if(""===e)return R();const r="object"==typeof e?JSON.stringify(e):e;n(t.idValue,r)},k=async()=>{if(!S)return I(t.editingValue);const e=A();return e.length?I(e[0].value):void 0},R=async()=>{if(t.idValue===Dd)return j();r(t.idValue)},_=()=>{o.isReadOnly||t.isEditing||E.format===Ft.boolean||(a({type:$d.FOCUS_FIELD,idValue:t.idValue}),o.metadataEdit||w({type:Gc.SET_ACTIVE_VALUE,value:{value:t.value,editingValue:t.editingValue,attribute:E}}))},T=e=>{a({type:$d.CHANGE_VALUE,idValue:t.idValue,value:e})},j=()=>{a({type:$d.CANCEL_EDITING,idValue:t.idValue}),o.metadataEdit||w({type:Gc.SET_ACTIVE_VALUE,value:null})},A=()=>{var e,n,r;let i=[];if(S)if(E.format===Ft.date_range){i=((null==(e=null==E?void 0:E.values_list)?void 0:e.dateRangeValues)??[]).filter((e=>t.state===Ld.PRISTINE||!t.editingValue)).map((e=>{const t={from:de(1e3*Number(e.from)).format("L"),to:de(1e3*Number(e.to)).format("L")};return{value:ue(t,g),rawValue:{from:e.from,to:e.to}}}))}else{i=((null==(n=null==E?void 0:E.values_list)?void 0:n.values)??[]).filter((e=>t.state===Ld.PRISTINE||!t.editingValue||E.format===Ft.date||e.match(new RegExp(String(t.editingValue),"i")))).map((e=>({value:e,rawValue:e})))}const o=i.map((e=>({...e,isNewValue:!1,canCopy:C&&E.format!==Ft.date&&E.format!==Ft.date_range})));return C&&String(t.editingValue)&&E.format!==Ft.date_range&&!((null==(r=null==E?void 0:E.values_list)?void 0:r.values)??[]).some((e=>e===t.editingValue))&&o.unshift({value:String(t.editingValue),rawValue:String(t.editingValue),isNewValue:!0,canCopy:!1}),o},O=s.jsx(Wd,{children:s.jsxs(En,{size:"small",children:[s.jsx(z,{}),t.error,s.jsx(Kt,{onClick:()=>a({type:$d.SET_ERROR_DISPLAY,displayError:!1,idValue:t.idValue}),size:"small",icon:s.jsx(kr,{}),style:{border:"none"}})]})}),P=t.isErrorDisplayed,N=`\n        ${E.format?`format-${E.format}`:""}\n        ${(null==(d=null==t?void 0:t.value)?void 0:d.value)?"has-value":""}\n        ${t.isEditing?"editing":""}\n    `,D=!o.isReadOnly&&t.idValue!==Dd&&E.format!==Ft.boolean,L=A(),$=[];t.isEditing||$.push({button:s.jsx(ju,{value:t.value,attribute:E,shape:"circle"})});const M=E.multiple_values&&!!Object.keys(o.values[o.activeScope].values).length;if(null==(p=null==E?void 0:E.versions_conf)?void 0:p.versionable){const e={[fu.CURRENT]:(null==(f=o.values[fu.CURRENT])?void 0:f.version)??null,[fu.INHERITED]:(null==(v=o.values[fu.INHERITED])?void 0:v.version)??null};M||$.push({title:g("values_version.title"),button:s.jsx(Au,{versions:e,activeScope:o.activeScope,onScopeChange:i})})}D&&!t.isEditing&&t.displayValue&&$.push({title:g("global.delete"),button:s.jsx(Nu,{onDelete:R,shape:"circle"})});const B={top:"1px",left:"1px",bottom:M?"0":"1px",borderRadius:M?"none":h.borderRadius};return s.jsxs(s.Fragment,{children:[t.isEditing&&s.jsx(tu,{onClick:j}),s.jsx(qd,{isEditing:t.isEditing,className:t.index?"":"first-value",children:s.jsx(Gn,{children:s.jsxs(Qd,{children:[s.jsx(le,{placement:"topLeft",open:P,content:O,children:s.jsxs(Yd,{isEditing:t.isEditing,className:N,"data-testid":"input-wrapper",children:[s.jsx(Pu,{activeScope:o.activeScope,style:B}),!t.index&&s.jsxs("label",{className:"attribute-label",onClick:_,children:[o.formElement.settings.label,o.activeScope===fu.INHERITED&&s.jsx(ku,{version:o.values[fu.INHERITED].version})]}),(()=>{if(!t.isEditing&&E.format!==Ft.boolean){let e=String(t.displayValue);const n=null!==t.value;if(n)switch(E.format){case Ft.date_range:const n=t.displayValue;e=(null==n?void 0:n.from)&&(null==n?void 0:n.to)?ue(n,g):"";break;case Ft.encrypted:e=""}return s.jsx(In,{className:n?"has-value":"",value:e,onFocus:_,disabled:o.isReadOnly},"display")}const e=Zd[E.format];return e?s.jsx(e,{state:o,fieldValue:t,onChange:T,onFocus:_,onSubmit:I,onPressEnter:k,settings:o.formElement.settings,inputRef:y}):s.jsx("div",{children:g("record_edition.invalid_format")})})(),!o.metadataEdit&&s.jsx(q,{actions:$})]})}),s.jsxs(Xd,{ref:b,children:[t.isEditing&&(null==(m=null==E?void 0:E.values_list)?void 0:m.enable)&&s.jsx(Ud,{attribute:E,valuesList:L,onValueSelect:I,onValueCopy:e=>{var t;null==(t=null==y?void 0:y.current)||t.focus(),T(e)}}),t.isEditing&&s.jsxs(Kd,{children:[s.jsx(Kt,{size:"small",onClick:j,style:{background:"#FFF"},children:g("global.cancel")}),(!S||C)&&s.jsx(Kt,{type:"primary",size:"small",onClick:()=>{I(t.editingValue)},children:g("global.submit")})]})]})]})})})]})}const ep=ai.div`
    margin-bottom: ${e=>e.metadataEdit?0:"1.5em"};
`;function tp({element:t,onValueSubmit:n,onValueDelete:r,onDeleteMultipleValues:i,metadataEdit:o=!1}){var a,l,u,d,p,f,v,m;const{t:g}=c(),{readOnly:h,record:b}=Qc(),{state:y}=Yc(),{dispatch:x}=Yc(),{fetchValues:w}=cu(null==(l=null==(a=y.record)?void 0:a.library)?void 0:l.id,null==(u=t.attribute)?void 0:u.id,null==(d=y.record)?void 0:d.id),E=t.attribute.multiple_values,{attribute:S}=t,C=e.useContext(Jc),I=null===b,k=e.useMemo((()=>(e=>{const{element:t,record:n,metadataEdit:r,isRecordReadOnly:i,formVersion:o}=e,a=t.attribute,l=t.values??[];return{attribute:a,record:n,formElement:t,isReadOnly:(null==a?void 0:a.readonly)||i||!a.permissions.edit_value,metadataEdit:r,...Vd({attribute:a,values:l,formVersion:o})}})({element:t,record:b,isRecordReadOnly:h,formVersion:y.valuesVersion,metadataEdit:o})),[]),[R,_]=e.useReducer(Fd,k);e.useEffect((()=>{var e;if(C[S.id]){const t=(null==(e=Object.values(R.values[R.activeScope].values).filter((e=>e.editingValue===C[S.id].input)))?void 0:e[0].idValue)??null;_({type:$d.SET_ERROR,idValue:t,error:C[S.id].message})}}),[C,S.id,R.values]);const T=async(e,r)=>{var i;const o=e===Dd;_({type:$d.CLEAR_ERROR,idValue:e});const a=R.values[R.activeScope].version,l=await n([{value:r,idValue:o?null:e,attribute:S}],a);if(l.status===pu.SUCCESS){const n=l.values[0],r=R.metadataEdit?{...n.metadata.find((({name:e})=>e===t.attribute.id)).value,metadata:null,attribute:S}:n;return _({type:$d.UPDATE_AFTER_SUBMIT,newValue:r,idValue:e}),void(R.metadataEdit||x({type:Gc.SET_ACTIVE_VALUE,value:null}))}let s=l.error;if(!s&&l.errors){const e=null==(i=((null==l?void 0:l.errors)??[]).filter((e=>e.attribute===S.id)))?void 0:i[0];e&&(s=e.type===zr.VALIDATION_ERROR?e.message:g(`errors.${e.type}`))}_({type:$d.SET_ERROR,idValue:e,error:s})},j=async e=>{_({type:$d.UNEDIT_FIELD,idValue:e});const t=await r({id_value:e},S.id);if(t.status!==pu.SUCCESS)_({type:$d.SET_ERROR,idValue:e,error:t.error});else if(_({type:$d.UPDATE_AFTER_DELETE,idValue:e}),!I){const e=await w(R.values[R.activeScope].version);_({type:$d.REFRESH_VALUES,formVersion:y.valuesVersion,values:e})}},A=e=>{_({type:$d.CHANGE_VERSION_SCOPE,scope:e})};if(!t.attribute)return s.jsx(Y,{message:g("record_edition.missing_attribute")});const O=Object.values(R.values[R.activeScope].values).sort(((e,t)=>e.index-t.index)),P=O[0].idValue!==Dd&&null!==O[0].idValue,N=!R.isReadOnly&&E&&P&&S.format!==Ft.boolean,D=!R.isReadOnly&&P&&O.length>1,L=null==(p=null==S?void 0:S.versions_conf)?void 0:p.versionable,$={[fu.CURRENT]:(null==(f=R.values[fu.CURRENT])?void 0:f.version)??null,[fu.INHERITED]:(null==(v=R.values[fu.INHERITED])?void 0:v.version)??null};return s.jsxs(ep,{metadataEdit:o,children:[O.map((e=>s.jsx(Jd,{value:e,state:R,dispatch:_,onSubmit:T,onDelete:j,onScopeChange:A},e.idValue))),(D||N||(null==(m=null==S?void 0:S.versions_conf)?void 0:m.versionable))&&s.jsxs(Cu,{bordered:!0,style:{flexDirection:!N||D||L?"row-reverse":"row"},children:[s.jsxs("div",{children:[L&&s.jsx(Au,{basic:!0,versions:$,activeScope:R.activeScope,onScopeChange:A}),D&&s.jsx(Eu,{onDelete:async()=>{var e;const t=await i(S.id,Object.values(R.values[R.activeScope].values).map((e=>e.value)),null);if(t.status!==pu.SUCCESS)_({type:$d.SET_ERROR,idValue:null==(e=R.values[R.activeScope].values[0])?void 0:e.idValue,error:t.error});else if(_({type:$d.UPDATE_AFTER_DELETE,allDeleted:!0}),!I){const e=await w(R.values[R.activeScope].version);_({type:$d.REFRESH_VALUES,formVersion:y.valuesVersion,values:e})}}})]}),N&&s.jsx(wu,{activeScope:R.activeScope,onClick:()=>{x({type:Gc.SET_ACTIVE_VALUE,value:{attribute:S,value:null}}),_({type:$d.ADD_VALUE})}})]})]})}var np=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)rp.call(n,r)&&(e[r]=n[r])}return e},rp=Object.prototype.hasOwnProperty;var ip=function(e){if(e)throw e}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */;var op=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},ap=Object.prototype.hasOwnProperty,lp=Object.prototype.toString,sp=Object.defineProperty,cp=Object.getOwnPropertyDescriptor,up=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===lp.call(e)},dp=function(e){if(!e||"[object Object]"!==lp.call(e))return!1;var t,n=ap.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&ap.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||ap.call(e,t)},pp=function(e,t){sp&&"__proto__"===t.name?sp(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},fp=function(e,t){if("__proto__"===t){if(!ap.call(e,t))return;if(cp)return cp(e,t).value}return e[t]},vp=[].slice;var mp=function(e,t){var n;return function(){var t,o=vp.call(arguments,0),a=e.length>o.length;a&&o.push(r);try{t=e.apply(null,o)}catch(l){if(a&&n)throw l;return r(l)}a||(t&&"function"==typeof t.then?t.then(i,r):t instanceof Error?r(t):i(t))};function r(){n||(n=!0,t.apply(null,arguments))}function i(e){r(null,e)}},gp=bp;bp.wrap=mp;var hp=[].slice;function bp(){var e=[],t={run:function(){var t=-1,n=hp.call(arguments,0,-1),r=arguments[arguments.length-1];if("function"!=typeof r)throw new Error("Expected function as last argument, not "+r);function i(o){var a=e[++t],l=hp.call(arguments,0),s=l.slice(1),c=n.length,u=-1;if(o)r(o);else{for(;++u<c;)null!==s[u]&&void 0!==s[u]||(s[u]=n[u]);n=s,a?mp(a,i).apply(null,n):r.apply(null,[null].concat(n))}}i.apply(null,[null].concat(n))},use:function(n){if("function"!=typeof n)throw new Error("Expected `fn` to be a function, not "+n);return e.push(n),t}};return t}var yp={},xp={get exports(){return yp},set exports(e){yp=e}},wp={}.hasOwnProperty,Ep=function(e){if(!e||"object"!=typeof e)return"";if(wp.call(e,"position")||wp.call(e,"type"))return Cp(e.position);if(wp.call(e,"start")||wp.call(e,"end"))return Cp(e);if(wp.call(e,"line")||wp.call(e,"column"))return Sp(e);return""};function Sp(e){return e&&"object"==typeof e||(e={}),Ip(e.line)+":"+Ip(e.column)}function Cp(e){return e&&"object"==typeof e||(e={}),Sp(e.start)+"-"+Sp(e.end)}function Ip(e){return e&&"number"==typeof e?e:1}var kp=Ep,Rp=jp;function _p(){}_p.prototype=Error.prototype,jp.prototype=new _p;var Tp=jp.prototype;function jp(e,t,n){var r,i,o;"string"==typeof t&&(n=t,t=null),r=function(e){var t,n=[null,null];"string"==typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1)));return n}(n),i=kp(t)||"1:1",o={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(o=t,t=t.start):o.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=i,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=o,this.source=r[0],this.ruleId=r[1]}Tp.file="",Tp.name="",Tp.reason="",Tp.message="",Tp.stack="",Tp.fatal=null,Tp.column=null,Tp.line=null;var Ap={};function Op(e){var t,n;return Pp(e),t=47===e.charCodeAt(0),n=function(e,t){var n,r,i="",o=0,a=-1,l=0,s=-1;for(;++s<=e.length;){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(a===s-1||1===l);else if(a!==s-1&&2===l){if(i.length<2||2!==o||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){if((r=i.lastIndexOf("/"))!==i.length-1){r<0?(i="",o=0):o=(i=i.slice(0,r)).length-1-i.lastIndexOf("/"),a=s,l=0;continue}}else if(i.length){i="",o=0,a=s,l=0;continue}t&&(i=i.length?i+"/..":"..",o=2)}else i.length?i+="/"+e.slice(a+1,s):i=e.slice(a+1,s),o=s-a-1;a=s,l=0}else 46===n&&l>-1?l++:l=-1}return i}(e,!t),n.length||t||(n="."),n.length&&47===e.charCodeAt(e.length-1)&&(n+="/"),t?"/"+n:n}function Pp(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}Ap.basename=function(e,t){var n,r,i,o,a=0,l=-1;if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');if(Pp(e),n=e.length,void 0===t||!t.length||t.length>e.length){for(;n--;)if(47===e.charCodeAt(n)){if(i){a=n+1;break}}else l<0&&(i=!0,l=n+1);return l<0?"":e.slice(a,l)}if(t===e)return"";r=-1,o=t.length-1;for(;n--;)if(47===e.charCodeAt(n)){if(i){a=n+1;break}}else r<0&&(i=!0,r=n+1),o>-1&&(e.charCodeAt(n)===t.charCodeAt(o--)?o<0&&(l=n):(o=-1,l=r));a===l?l=r:l<0&&(l=e.length);return e.slice(a,l)},Ap.dirname=function(e){var t,n,r;if(Pp(e),!e.length)return".";t=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(n){t=r;break}}else n||(n=!0);return t<0?47===e.charCodeAt(0)?"/":".":1===t&&47===e.charCodeAt(0)?"//":e.slice(0,t)},Ap.extname=function(e){var t,n,r,i=-1,o=0,a=-1,l=0;Pp(e),r=e.length;for(;r--;)if(47!==(n=e.charCodeAt(r)))a<0&&(t=!0,a=r+1),46===n?i<0?i=r:1!==l&&(l=1):i>-1&&(l=-1);else if(t){o=r+1;break}if(i<0||a<0||0===l||1===l&&i===a-1&&i===o+1)return"";return e.slice(i,a)},Ap.join=function(){var e,t=-1;for(;++t<arguments.length;)Pp(arguments[t]),arguments[t]&&(e=void 0===e?arguments[t]:e+"/"+arguments[t]);return void 0===e?".":Op(e)},Ap.sep="/";var Np={};Np.cwd=function(){return"/"};var Dp=Ap,Lp=Np,$p=op,Mp=Fp,Bp={}.hasOwnProperty,Vp=["history","path","basename","stem","extname","dirname"];function Fp(e){var t,n;if(e){if("string"==typeof e||$p(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof Fp))return new Fp(e);for(this.data={},this.messages=[],this.history=[],this.cwd=Lp.cwd(),n=-1;++n<Vp.length;)t=Vp[n],Bp.call(e,t)&&(this[t]=e[t]);for(t in e)Vp.indexOf(t)<0&&(this[t]=e[t])}function zp(e,t){if(e&&e.indexOf(Dp.sep)>-1)throw new Error("`"+t+"` cannot be a path: did not expect `"+Dp.sep+"`")}function Hp(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Gp(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}Fp.prototype.toString=function(e){return(this.contents||"").toString(e)},Object.defineProperty(Fp.prototype,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){Hp(e,"path"),this.path!==e&&this.history.push(e)}}),Object.defineProperty(Fp.prototype,"dirname",{get:function(){return"string"==typeof this.path?Dp.dirname(this.path):void 0},set:function(e){Gp(this.path,"dirname"),this.path=Dp.join(e||"",this.basename)}}),Object.defineProperty(Fp.prototype,"basename",{get:function(){return"string"==typeof this.path?Dp.basename(this.path):void 0},set:function(e){Hp(e,"basename"),zp(e,"basename"),this.path=Dp.join(this.dirname||"",e)}}),Object.defineProperty(Fp.prototype,"extname",{get:function(){return"string"==typeof this.path?Dp.extname(this.path):void 0},set:function(e){if(zp(e,"extname"),Gp(this.path,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.indexOf(".",1)>-1)throw new Error("`extname` cannot contain multiple dots")}this.path=Dp.join(this.dirname,this.stem+(e||""))}}),Object.defineProperty(Fp.prototype,"stem",{get:function(){return"string"==typeof this.path?Dp.basename(this.path,this.extname):void 0},set:function(e){Hp(e,"stem"),zp(e,"stem"),this.path=Dp.join(this.dirname||"",e+(this.extname||""))}});var Up=Rp,Wp=Mp,qp=Wp;Wp.prototype.message=function(e,t,n){var r=new Up(e,t,n);this.path&&(r.name=this.path+":"+r.name,r.file=this.path);return r.fatal=!1,this.messages.push(r),r},Wp.prototype.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},Wp.prototype.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e},xp.exports=qp;var Yp=ip,Xp=op,Kp=function e(){var t,n,r,i,o,a,l=arguments[0],s=1,c=arguments.length,u=!1;for("boolean"==typeof l&&(u=l,l=arguments[1]||{},s=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});s<c;++s)if(null!=(t=arguments[s]))for(n in t)r=fp(l,n),l!==(i=fp(t,n))&&(u&&i&&(dp(i)||(o=up(i)))?(o?(o=!1,a=r&&up(r)?r:[]):a=r&&dp(r)?r:{},pp(l,{name:n,newValue:e(u,a,i)})):void 0!==i&&pp(l,{name:n,newValue:i}));return l},Qp=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype},Zp=gp,Jp=yp,ef=function e(){var t,n=[],r=Zp(),i={},o=-1;return a.data=function(e,n){if("string"==typeof e)return 2===arguments.length?(sf("data",t),i[e]=n,a):nf.call(i,e)&&i[e]||null;if(e)return sf("data",t),i=e,a;return i},a.freeze=l,a.attachers=n,a.use=function(e){var r;if(sf("use",t),null==e);else if("function"==typeof e)u.apply(null,arguments);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?c(e):o(e)}r&&(i.settings=Kp(i.settings||{},r));return a;function o(e){c(e.plugins),e.settings&&(r=Kp(r||{},e.settings))}function l(e){if("function"==typeof e)u(e);else{if("object"!=typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?u.apply(null,e):o(e)}}function c(e){var t=-1;if(null==e);else{if("object"!=typeof e||!("length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;)l(e[t])}}function u(e,t){var r=s(e);r?(Qp(r[1])&&Qp(t)&&(t=Kp(!0,r[1],t)),r[1]=t):n.push(tf.call(arguments))}},a.parse=function(e){var t,n=Jp(e);if(l(),af("parse",t=a.Parser),of(t,"parse"))return new t(String(n),n).parse();return t(String(n),n)},a.stringify=function(e,t){var n,r=Jp(t);if(l(),lf("stringify",n=a.Compiler),cf(e),of(n,"compile"))return new n(e,r).compile();return n(e,r)},a.run=c,a.runSync=function(e,t){var n,r;return c(e,t,i),uf("runSync","run",r),n;function i(e,t){r=!0,n=t,Yp(e)}},a.process=u,a.processSync=function(e){var t,n;return l(),af("processSync",a.Parser),lf("processSync",a.Compiler),u(t=Jp(e),r),uf("processSync","process",n),t;function r(e){n=!0,Yp(e)}},a;function a(){for(var t=e(),r=-1;++r<n.length;)t.use.apply(null,n[r]);return t.data(Kp(!0,{},i)),t}function l(){var e,i;if(t)return a;for(;++o<n.length;)!1!==(e=n[o])[1]&&(!0===e[1]&&(e[1]=void 0),"function"==typeof(i=e[0].apply(a,e.slice(1)))&&r.use(i));return t=!0,o=1/0,a}function s(e){for(var t=-1;++t<n.length;)if(n[t][0]===e)return n[t]}function c(e,t,n){if(cf(e),l(),n||"function"!=typeof t||(n=t,t=null),!n)return new Promise(i);function i(i,o){r.run(e,Jp(t),(function(t,r,a){r=r||e,t?o(t):i?i(r):n(null,r,a)}))}i(null,n)}function u(e,t){if(l(),af("process",a.Parser),lf("process",a.Compiler),!t)return new Promise(n);function n(n,r){var i=Jp(e);rf.run(a,{file:i},(function(e){e?r(e):n?n(i):t(null,i)}))}n(null,t)}}().freeze(),tf=[].slice,nf={}.hasOwnProperty,rf=Zp().use((function(e,t){t.tree=e.parse(t.file)})).use((function(e,t,n){e.run(t.tree,t.file,(function(e,r,i){e?n(e):(t.tree=r,t.file=i,n())}))})).use((function(e,t){var n=e.stringify(t.tree,t.file);null==n||("string"==typeof n||Xp(n)?("value"in t.file&&(t.file.value=n),t.file.contents=n):t.file.result=n)}));function of(e,t){return"function"==typeof e&&e.prototype&&(function(e){var t;for(t in e)return!0;return!1}(e.prototype)||t in e.prototype)}function af(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function lf(e,t){if("function"!=typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function sf(e,t){if(t)throw new Error("Cannot invoke `"+e+"` on a frozen processor.\nCreate a new processor first, by invoking it: use `processor()` instead of `processor`.")}function cf(e){if(!e||"string"!=typeof e.type)throw new Error("Expected node, got `"+e+"`")}function uf(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}var df={},pf={get exports(){return df},set exports(e){df=e}},ff=vf;function vf(e){return e&&(e.value||e.alt||e.title||"children"in e&&mf(e.children)||"length"in e&&mf(e))||""}function mf(e){for(var t=[],n=-1;++n<e.length;)t[n]=vf(e[n]);return t.join("")}var gf=Object.assign,hf={}.hasOwnProperty;var bf=function(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()},yf=String.fromCharCode,xf=yf;var wf=function(e,t){var n=parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535==(65535&n)||65534==(65535&n)||n>1114111?"":xf(n)},Ef={};var Sf=function(e){return e<-2};var Cf=function(e){return-2===e||-1===e||32===e},If=Cf;var kf=function(e,t,n,r){var i=r?r-1:1/0,o=0;return function(r){if(If(r))return e.enter(n),a(r);return t(r)};function a(r){return If(r)&&o++<i?(e.consume(r),a):(e.exit(n),t(r))}};Object.defineProperty(Ef,"__esModule",{value:!0});var Rf=Sf,_f=kf,Tf=function(e){var t,n=e.attempt(this.parser.constructs.contentInitial,(function(t){if(null===t)return void e.consume(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),_f(e,n,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));return n;function r(n){var r=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=r),t=r,i(n)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Rf(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}};Ef.tokenize=Tf;var jf={},Af=Sf,Of=kf;var Pf={tokenize:function(e,t,n){return Of(e,(function(e){return null===e||Af(e)?t(e):n(e)}),"linePrefix")},partial:!0};Object.defineProperty(jf,"__esModule",{value:!0});var Nf=Sf,Df=kf,Lf=Pf,$f=function(e){var t,n,r,i=this,o=[],a=0,l={tokenize:function(e,r){var a=0;return t={},l;function l(r){return a<o.length?(i.containerState=o[a][1],e.attempt(o[a][0].continuation,s,c)(r)):n.currentConstruct&&n.currentConstruct.concrete?(t.flowContinue=!0,p(r)):(i.interrupt=n.currentConstruct&&n.currentConstruct.interruptible,i.containerState={},e.attempt(Mf,d,p)(r))}function s(e){return a++,i.containerState._closeFlow?d(e):l(e)}function c(t){return n.currentConstruct&&n.currentConstruct.lazy?(i.containerState={},e.attempt(Mf,d,e.attempt(Bf,d,e.check(Lf,d,u)))(t)):d(t)}function u(e){return a=o.length,t.lazy=!0,t.flowContinue=!0,p(e)}function d(e){return t.flowEnd=!0,p(e)}function p(e){return t.continued=a,i.interrupt=i.containerState=void 0,r(e)}},partial:!0};return s;function s(t){return a<o.length?(i.containerState=o[a][1],e.attempt(o[a][0].continuation,c,u)(t)):u(t)}function c(e){return a++,s(e)}function u(r){return t&&t.flowContinue?p(r):(i.interrupt=n&&n.currentConstruct&&n.currentConstruct.interruptible,i.containerState={},e.attempt(Mf,d,p)(r))}function d(e){return o.push([i.currentConstruct,i.containerState]),i.containerState=void 0,u(e)}function p(t){return null===t?(g(0,!0),void e.consume(t)):(n=n||i.parser.flow(i.now()),e.enter("chunkFlow",{contentType:"flow",previous:r,_tokenizer:n}),f(t))}function f(t){return null===t?(m(e.exit("chunkFlow")),p(t)):Nf(t)?(e.consume(t),m(e.exit("chunkFlow")),e.check(l,v)):(e.consume(t),f)}function v(e){return g(t.continued,t&&t.flowEnd),a=0,s(e)}function m(e){r&&(r.next=e),r=e,n.lazy=t&&t.lazy,n.defineSkip(e.start),n.write(i.sliceStream(e))}function g(t,a){var l=o.length;for(n&&a&&(n.write([null]),r=n=void 0);l-- >t;)i.containerState=o[l][1],o[l][0].exit.call(i,e);o.length=t}},Mf={tokenize:function(e,t,n){return Df(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},Bf={tokenize:function(e,t,n){return Df(e,e.lazy(this.parser.constructs.flow,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}};jf.tokenize=$f;var Vf={};var Ff=function(e){for(var t=-1,n=0;++t<e.length;)n+="string"==typeof e[t]?e[t].length:1;return n},zf=Ff;var Hf=function(e,t){var n=e[e.length-1];return n&&n[1].type===t?zf(n[2].sliceStream(n[1])):0},Gf=[].splice;var Uf=function(e,t,n,r){var i,o=e.length,a=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),Gf.apply(e,i);else for(n&&Gf.apply(e,[t,n]);a<r.length;)(i=r.slice(a,a+1e4)).unshift(t,0),Gf.apply(e,i),a+=1e4,t+=1e4},Wf=gf;var qf=function(e){return Wf({},e)},Yf=gf,Xf=Uf,Kf=qf;function Qf(e,t){for(var n,r,i,o,a,l,s=e[t][1],c=e[t][2],u=t-1,d=[],p=s._tokenizer||c.parser[s.contentType](s.start),f=p.events,v=[],m={};s;){for(;e[++u][1]!==s;);d.push(u),s._tokenizer||(n=c.sliceStream(s),s.next||n.push(null),r&&p.defineSkip(s.start),s.isInFirstContentOfListItem&&(p._gfmTasklistFirstContentOfListItem=!0),p.write(n),s.isInFirstContentOfListItem&&(p._gfmTasklistFirstContentOfListItem=void 0)),r=s,s=s.next}for(s=r,i=f.length;i--;)"enter"===f[i][0]?o=!0:o&&f[i][1].type===f[i-1][1].type&&f[i][1].start.line!==f[i][1].end.line&&(g(f.slice(i+1,a)),s._tokenizer=s.next=void 0,s=s.previous,a=i+1);for(p.events=s._tokenizer=s.next=void 0,g(f.slice(0,a)),i=-1,l=0;++i<v.length;)m[l+v[i][0]]=l+v[i][1],l+=v[i][1]-v[i][0]-1;return m;function g(t){var n=d.pop();v.unshift([n,n+t.length-1]),Xf(e,n,2,t)}}var Zf=function(e){for(var t,n,r,i,o,a,l,s={},c=-1;++c<e.length;){for(;c in s;)c=s[c];if(t=e[c],c&&"chunkFlow"===t[1].type&&"listItemPrefix"===e[c-1][1].type&&((r=0)<(a=t[1]._tokenizer.events).length&&"lineEndingBlank"===a[r][1].type&&(r+=2),r<a.length&&"content"===a[r][1].type))for(;++r<a.length&&"content"!==a[r][1].type;)"chunkText"===a[r][1].type&&(a[r][1].isInFirstContentOfListItem=!0,r++);if("enter"===t[0])t[1].contentType&&(Yf(s,Qf(e,c)),c=s[c],l=!0);else if(t[1]._container||t[1]._movePreviousLineEndings){for(r=c,n=void 0;r--&&("lineEnding"===(i=e[r])[1].type||"lineEndingBlank"===i[1].type);)"enter"===i[0]&&(n&&(e[n][1].type="lineEndingBlank"),i[1].type="lineEnding",n=r);n&&(t[1].end=Kf(e[n][1].start),(o=e.slice(n,c)).unshift(t),Xf(e,n,c-n+1,o))}}return!l},Jf=Sf,ev=Hf,tv=Zf,nv=kf,rv={tokenize:function(e,t){var n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):Jf(t)?e.check(iv,o,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n=n.next=e.enter("chunkContent",{contentType:"content",previous:n}),r}},resolve:function(e){return tv(e),e},interruptible:!0,lazy:!0},iv={tokenize:function(e,t,n){var r=this;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),nv(e,i,"linePrefix")};function i(i){return null===i||Jf(i)?n(i):r.parser.constructs.disable.null.indexOf("codeIndented")>-1||ev(r.events,"linePrefix")<4?e.interrupt(r.parser.constructs.flow,n,t)(i):t(i)}},partial:!0};var ov=rv;Object.defineProperty(Vf,"__esModule",{value:!0});var av=ov,lv=kf,sv=Pf,cv=function(e){var t=this,n=e.attempt(sv,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,lv(e,e.attempt(this.parser.constructs.flow,r,e.attempt(av,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}};Vf.tokenize=cv;var uv={};Object.defineProperty(uv,"__esModule",{value:!0});var dv=gf,pv=qf,fv=gv("text"),vv=gv("string"),mv={resolveAll:hv()};function gv(e){return{tokenize:function(t){var n=this,r=this.parser.constructs[e],i=t.attempt(r,o,a);return o;function o(e){return s(e)?i(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),l;t.consume(e)}function l(e){return s(e)?(t.exit("data"),i(e)):(t.consume(e),l)}function s(e){var t=r[e],i=-1;if(null===e)return!0;if(t)for(;++i<t.length;)if(!t[i].previous||t[i].previous.call(n,n.previous))return!0}},resolveAll:hv("text"===e?bv:void 0)}}function hv(e){return function(t,n){var r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function bv(e,t){for(var n,r,i,o,a,l,s,c,u=-1;++u<=e.length;)if((u===e.length||"lineEnding"===e[u][1].type)&&"data"===e[u-1][1].type){for(r=e[u-1][1],o=(n=t.sliceStream(r)).length,a=-1,l=0,s=void 0;o--;)if("string"==typeof(i=n[o])){for(a=i.length;32===i.charCodeAt(a-1);)l++,a--;if(a)break;a=-1}else if(-2===i)s=!0,l++;else if(-1!==i){o++;break}l&&(c={type:u===e.length||s||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+o,_bufferIndex:o?a:r.start._bufferIndex+a},end:pv(r.end)},r.end=pv(c.start),r.start.offset===r.end.offset?dv(r,c):(e.splice(u,0,["enter",c,t],["exit",c,t]),u+=2)),u++}return e}uv.resolver=mv,uv.string=vv,uv.text=fv;var yv=function(e){return null==e?[]:"length"in e?e:[e]},xv=hf,wv=Uf,Ev=yv;function Sv(e,t){var n,r,i,o;for(n in t)for(o in r=xv.call(e,n)?e[n]:e[n]={},i=t[n])r[o]=Cv(Ev(i[o]),xv.call(r,o)?r[o]:[])}function Cv(e,t){for(var n=-1,r=[];++n<e.length;)("after"===e[n].add?t:r).push(e[n]);return wv(t,0,0,r),t}var Iv=function(e){for(var t={},n=-1;++n<e.length;)Sv(t,e[n]);return t},kv=Uf;var Rv=function(e,t){return e.length?(kv(e,e.length,0,t),e):t};var _v=function(e,t,n){for(var r,i=[],o=-1;++o<e.length;)(r=e[o].resolveAll)&&i.indexOf(r)<0&&(t=r(t,n),i.push(r));return t},Tv=yf;var jv=gf,Av=Sf,Ov=Rv,Pv=Uf,Nv=yv,Dv=_v,Lv=function(e){for(var t,n,r,i=-1,o=[];++i<e.length;){if("string"==typeof(t=e[i]))n=t;else if(-5===t)n="\r";else if(-4===t)n="\n";else if(-3===t)n="\r\n";else if(-2===t)n="\t";else if(-1===t){if(r)continue;n=" "}else n=Tv(t);r=-2===t,o.push(n)}return o.join("")},$v=qf,Mv=function(e,t){var n,r=t.start._index,i=t.start._bufferIndex,o=t.end._index,a=t.end._bufferIndex;return r===o?n=[e[r].slice(i,a)]:(n=e.slice(r,o),i>-1&&(n[0]=n[0].slice(i)),a>0&&n.push(e[o].slice(0,a))),n};var Bv=function(e,t,n){var r=n?$v(n):{line:1,column:1,offset:0},i={},o=[],a=[],l=[],s={consume:function(e){Av(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,b()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e},enter:function(e,t){var n=t||{};return n.type=e,n.start=p(),c.events.push(["enter",n,c]),l.push(n),n},exit:function(e){var t=l.pop();return t.end=p(),c.events.push(["exit",t,c]),t},attempt:g((function(e,t){h(e,t.from)})),check:g(m),interrupt:g(m,{interrupt:!0}),lazy:g(m,{lazy:!0})},c={previous:null,events:[],parser:e,sliceStream:d,sliceSerialize:function(e){return Lv(d(e))},now:p,defineSkip:function(e){i[e.line]=e.column,b()},write:function(e){if(a=Ov(a,e),f(),null!==a[a.length-1])return[];return h(t,0),c.events=Dv(o,c.events,c),c.events}},u=t.tokenize.call(c,s);return t.resolveAll&&o.push(t),r._index=0,r._bufferIndex=-1,c;function d(e){return Mv(a,e)}function p(){return $v(r)}function f(){for(var e,t;r._index<a.length;)if("string"==typeof(t=a[r._index]))for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)v(t.charCodeAt(r._bufferIndex));else v(t)}function v(e){u=u(e)}function m(e,t){t.restore()}function g(e,t){return function(n,i,o){var a,u,d,f;return n.tokenize||"length"in n?v(Nv(n)):function(e){if(e in n||null in n)return v(n.null?Nv(n[e]).concat(Nv(n.null)):n[e])(e);return o(e)};function v(e){return a=e,m(e[u=0])}function m(e){return function(n){f=function(){var e=p(),t=c.previous,n=c.currentConstruct,i=c.events.length,o=Array.from(l);return{restore:a,from:i};function a(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=i,l=o,b()}}(),d=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.indexOf(e.name)>-1)return h();return e.tokenize.call(t?jv({},c,t):c,s,g,h)(n)}}function g(t){return e(d,f),i}function h(e){return f.restore(),++u<a.length?m(a[u]):o}}}function h(e,t){e.resolveAll&&o.indexOf(e)<0&&o.push(e),e.resolve&&Pv(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function b(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}},Vv={};var Fv=function(e){return e<0||32===e},zv=yf;var Hv=function(e){return function(t){return e.test(zv(t))}},Gv=Hv(/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/),Uv=Hv(/\s/),Wv=Fv,qv=Gv,Yv=Uv;var Xv=Rv,Kv=Uf,Qv=function(e){return null===e||Wv(e)||Yv(e)?1:qv(e)?2:void 0},Zv=function(e,t){return e.column+=t,e.offset+=t,e._bufferIndex+=t,e},Jv=_v,em=qf;var tm={name:"attention",tokenize:function(e,t){var n,r=Qv(this.previous);return function(t){return e.enter("attentionSequence"),n=t,i(t)};function i(o){var a,l,s,c;return o===n?(e.consume(o),i):(a=e.exit("attentionSequence"),s=!(l=Qv(o))||2===l&&r,c=!r||2===r&&l,a._open=42===n?s:s&&(r||!c),a._close=42===n?c:c&&(l||!s),t(o))}},resolveAll:function(e,t){var n,r,i,o,a,l,s,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;o={type:(l=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1)>1?"strongSequence":"emphasisSequence",start:Zv(em(e[n][1].end),-l),end:em(e[n][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:em(e[u][1].start),end:Zv(em(e[u][1].start),l)},i={type:l>1?"strongText":"emphasisText",start:em(e[n][1].end),end:em(e[u][1].start)},r={type:l>1?"strong":"emphasis",start:em(o.start),end:em(a.end)},e[n][1].end=em(o.start),e[u][1].start=em(a.end),s=[],e[n][1].end.offset-e[n][1].start.offset&&(s=Xv(s,[["enter",e[n][1],t],["exit",e[n][1],t]])),s=Xv(s,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",i,t]]),s=Xv(s,Jv(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),s=Xv(s,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,s=Xv(s,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,Kv(e,n-1,u-n+3,s),u=n+s.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}},nm=Hv(/[A-Za-z]/),rm=Hv(/[\dA-Za-z]/),im=Hv(/[#-'*+\--9=?A-Z^-~]/);var om=function(e){return e<32||127===e},am=nm,lm=rm,sm=im,cm=om;var um={name:"autolink",tokenize:function(e,t,n){var r=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return am(t)?(e.consume(t),o):sm(t)?s(t):n(t)}function o(e){return 43===e||45===e||46===e||lm(e)?a(e):s(e)}function a(t){return 58===t?(e.consume(t),l):(43===t||45===t||46===t||lm(t))&&r++<32?(e.consume(t),a):s(t)}function l(t){return 62===t?(e.exit("autolinkProtocol"),p(t)):32===t||60===t||cm(t)?n(t):(e.consume(t),l)}function s(t){return 64===t?(e.consume(t),r=0,c):sm(t)?(e.consume(t),s):n(t)}function c(e){return lm(e)?u(e):n(e)}function u(t){return 46===t?(e.consume(t),r=0,c):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",p(t)):d(t)}function d(t){return(45===t||lm(t))&&r++<63?(e.consume(t),45===t?d:u):n(t)}function p(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}},dm=Cf,pm=kf,fm={name:"blockQuote",tokenize:function(e,t,n){var r=this;return function(t){if(62===t)return r.containerState.open||(e.enter("blockQuote",{_container:!0}),r.containerState.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i;return n(t)};function i(n){return dm(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return pm(e,e.attempt(fm,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},exit:function(e){e.exit("blockQuote")}};var vm=fm,mm=Hv(/[!-/:-@[-`{-~]/);var gm,hm={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return mm(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}},bm=function(e){var t,n="&"+e+";";if((gm=gm||document.createElement("i")).innerHTML=n,59===(t=gm.textContent).charCodeAt(t.length-1)&&"semi"!==e)return!1;return t!==n&&t};var ym=Hv(/\d/),xm=Hv(/[\dA-Fa-f]/),wm=rm,Em=ym,Sm=xm;function Cm(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var Im=Cm(bm);var km={name:"characterReference",tokenize:function(e,t,n){var r,i,o=this,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),l};function l(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),s):(e.enter("characterReferenceValue"),r=31,i=wm,c(t))}function s(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),r=6,i=Sm,c):(e.enter("characterReferenceValue"),r=7,i=Em,c(t))}function c(l){var s;return 59===l&&a?(s=e.exit("characterReferenceValue"),i!==wm||Im.default(o.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(l),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(l)):i(l)&&a++<r?(e.consume(l),c):n(l)}}},Rm=Sf,_m=Fv,Tm=Hf,jm=kf;var Am={name:"codeFenced",tokenize:function(e,t,n){var r,i=this,o={tokenize:function(e,t,n){var i=0;return jm(e,o,"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4);function o(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),a(t)}function a(t){return t===r?(e.consume(t),i++,a):i<l?n(t):(e.exit("codeFencedFenceSequence"),jm(e,s,"whitespace")(t))}function s(r){return null===r||Rm(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},a=Tm(this.events,"linePrefix"),l=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),r=t,s(t)};function s(t){return t===r?(e.consume(t),l++,s):(e.exit("codeFencedFenceSequence"),l<3?n(t):jm(e,c,"whitespace")(t))}function c(t){return null===t||Rm(t)?f(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return null===t||_m(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),jm(e,d,"whitespace")(t)):96===t&&t===r?n(t):(e.consume(t),u)}function d(t){return null===t||Rm(t)?f(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(t))}function p(t){return null===t||Rm(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(t)):96===t&&t===r?n(t):(e.consume(t),p)}function f(n){return e.exit("codeFencedFence"),i.interrupt?t(n):v(n)}function v(t){return null===t?g(t):Rm(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.attempt(o,g,a?jm(e,v,"linePrefix",a+1):v)):(e.enter("codeFlowValue"),m(t))}function m(t){return null===t||Rm(t)?(e.exit("codeFlowValue"),v(t)):(e.consume(t),m)}function g(n){return e.exit("codeFenced"),t(n)}},concrete:!0},Om=Sf,Pm=Uf,Nm=Hf,Dm=kf,Lm={name:"codeIndented",tokenize:function(e,t,n){return e.attempt($m,r,n);function r(n){return null===n?t(n):Om(n)?e.attempt($m,r,t)(n):(e.enter("codeFlowValue"),i(n))}function i(t){return null===t||Om(t)?(e.exit("codeFlowValue"),r(t)):(e.consume(t),i)}},resolve:function(e,t){var n={type:"codeIndented",start:e[0][1].start,end:e[e.length-1][1].end};return Pm(e,0,0,[["enter",n,t]]),Pm(e,e.length,0,[["exit",n,t]]),e}},$m={tokenize:function(e,t,n){var r=this;return Dm(e,(function i(o){if(Om(o))return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Dm(e,i,"linePrefix",5);return Nm(r.events,"linePrefix")<4?n(o):t(o)}),"linePrefix",5)},partial:!0};var Mm=Lm,Bm=Sf;var Vm={name:"codeText",tokenize:function(e,t,n){var r,i,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),o++,a):(e.exit("codeTextSequence"),l(t))}function l(t){return null===t?n(t):96===t?(i=e.enter("codeTextSequence"),r=0,c(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),l):Bm(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l):(e.enter("codeTextData"),s(t))}function s(t){return null===t||32===t||96===t||Bm(t)?(e.exit("codeTextData"),l(t)):(e.consume(t),s)}function c(n){return 96===n?(e.consume(n),r++,c):r===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",s(n))}},resolve:function(e){var t,n,r=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[r][1].type=e[i][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}},Fm=om,zm=Fv,Hm=Sf;var Gm=function(e,t,n,r,i,o,a,l,s){var c=s||1/0,u=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(o),e.consume(t),e.exit(o),d;if(Fm(t)||41===t)return n(t);return e.enter(r),e.enter(a),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(t)};function d(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),p(n))}function p(t){return 62===t?(e.exit("chunkString"),e.exit(l),d(t)):null===t||60===t||Hm(t)?n(t):(e.consume(t),92===t?f:p)}function f(t){return 60===t||62===t||92===t?(e.consume(t),p):p(t)}function v(i){return 40===i?++u>c?n(i):(e.consume(i),v):41===i?u--?(e.consume(i),v):(e.exit("chunkString"),e.exit(l),e.exit(a),e.exit(r),t(i)):null===i||zm(i)?u?n(i):(e.exit("chunkString"),e.exit(l),e.exit(a),e.exit(r),t(i)):Fm(i)?n(i):(e.consume(i),92===i?m:v)}function m(t){return 40===t||41===t||92===t?(e.consume(t),v):v(t)}},Um=Sf,Wm=Cf;var qm=function(e,t,n,r,i,o){var a,l=this,s=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(o),c};function c(d){return null===d||91===d||93===d&&!a||94===d&&!s&&"_hiddenFootnoteSupport"in l.parser.constructs||s>999?n(d):93===d?(e.exit(o),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):Um(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||Um(t)||s++>999?(e.exit("chunkString"),c(t)):(e.consume(t),a=a||!Wm(t),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),s++,u):u(t)}},Ym=Sf,Xm=Cf,Km=kf;var Qm=function(e,t){var n;return function r(i){if(Ym(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(Xm(i))return Km(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}},Zm=Sf,Jm=kf;var eg=function(e,t,n,r,i,o){var a;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),a=40===t?41:t,l};function l(n){return n===a?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(o),s(n))}function s(t){return t===a?(e.exit(o),l(a)):null===t?n(t):Zm(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Jm(e,s,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===a||null===t||Zm(t)?(e.exit("chunkString"),s(t)):(e.consume(t),92===t?u:c)}function u(t){return t===a||92===t?(e.consume(t),c):c(t)}},tg=Sf,ng=Fv,rg=bf,ig=Gm,og=qm,ag=kf,lg=Qm,sg=eg,cg={name:"definition",tokenize:function(e,t,n){var r,i=this;return function(t){return e.enter("definition"),og.call(i,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function o(t){return r=rg(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),lg(e,ig(e,e.attempt(ug,ag(e,a,"whitespace"),ag(e,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function a(o){return null===o||tg(o)?(e.exit("definition"),i.parser.defined.indexOf(r)<0&&i.parser.defined.push(r),t(o)):n(o)}}},ug={tokenize:function(e,t,n){return function(t){return ng(t)?lg(e,r)(t):n(t)};function r(t){return 34===t||39===t||40===t?sg(e,ag(e,i,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function i(e){return null===e||tg(e)?t(e):n(e)}},partial:!0};var dg=cg,pg=Sf;var fg={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return pg(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}},vg=Sf,mg=Fv,gg=Cf,hg=Uf,bg=kf;var yg={name:"headingAtx",tokenize:function(e,t,n){var r=this,i=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),o(t)};function o(l){return 35===l&&i++<6?(e.consume(l),o):null===l||mg(l)?(e.exit("atxHeadingSequence"),r.interrupt?t(l):a(l)):n(l)}function a(n){return 35===n?(e.enter("atxHeadingSequence"),l(n)):null===n||vg(n)?(e.exit("atxHeading"),t(n)):gg(n)?bg(e,a,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function l(t){return 35===t?(e.consume(t),l):(e.exit("atxHeadingSequence"),a(t))}function s(t){return null===t||35===t||mg(t)?(e.exit("atxHeadingText"),a(t)):(e.consume(t),s)}},resolve:function(e,t){var n,r,i=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);i-2>o&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(o===i-1||i-4>o&&"whitespace"===e[i-2][1].type)&&(i-=o+1===i?2:4);i>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},r={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},hg(e,o,i-o+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}},xg=nm,wg=rm,Eg=Sf,Sg=Fv,Cg=Cf,Ig=yf,kg=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Rg=["pre","script","style","textarea"],_g=Pf,Tg={name:"htmlFlow",tokenize:function(e,t,n){var r,i,o,a,l,s=this;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c};function c(a){return 33===a?(e.consume(a),u):47===a?(e.consume(a),f):63===a?(e.consume(a),r=3,s.interrupt?t:P):xg(a)?(e.consume(a),o=Ig(a),i=!0,v):n(a)}function u(i){return 45===i?(e.consume(i),r=2,d):91===i?(e.consume(i),r=5,o="CDATA[",a=0,p):xg(i)?(e.consume(i),r=4,s.interrupt?t:P):n(i)}function d(r){return 45===r?(e.consume(r),s.interrupt?t:P):n(r)}function p(r){return r===o.charCodeAt(a++)?(e.consume(r),a===o.length?s.interrupt?t:k:p):n(r)}function f(t){return xg(t)?(e.consume(t),o=Ig(t),v):n(t)}function v(a){return null===a||47===a||62===a||Sg(a)?47!==a&&i&&Rg.indexOf(o.toLowerCase())>-1?(r=1,s.interrupt?t(a):k(a)):kg.indexOf(o.toLowerCase())>-1?(r=6,47===a?(e.consume(a),m):s.interrupt?t(a):k(a)):(r=7,s.interrupt?n(a):i?h(a):g(a)):45===a||wg(a)?(e.consume(a),o+=Ig(a),v):n(a)}function m(r){return 62===r?(e.consume(r),s.interrupt?t:k):n(r)}function g(t){return Cg(t)?(e.consume(t),g):C(t)}function h(t){return 47===t?(e.consume(t),C):58===t||95===t||xg(t)?(e.consume(t),b):Cg(t)?(e.consume(t),h):C(t)}function b(t){return 45===t||46===t||58===t||95===t||wg(t)?(e.consume(t),b):y(t)}function y(t){return 61===t?(e.consume(t),x):Cg(t)?(e.consume(t),y):h(t)}function x(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,w):Cg(t)?(e.consume(t),x):(l=void 0,E(t))}function w(t){return t===l?(e.consume(t),S):null===t||Eg(t)?n(t):(e.consume(t),w)}function E(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||Sg(t)?y(t):(e.consume(t),E)}function S(e){return 47===e||62===e||Cg(e)?h(e):n(e)}function C(t){return 62===t?(e.consume(t),I):n(t)}function I(t){return Cg(t)?(e.consume(t),I):null===t||Eg(t)?k(t):n(t)}function k(t){return 45===t&&2===r?(e.consume(t),T):60===t&&1===r?(e.consume(t),j):62===t&&4===r?(e.consume(t),N):63===t&&3===r?(e.consume(t),P):93===t&&5===r?(e.consume(t),O):!Eg(t)||6!==r&&7!==r?null===t||Eg(t)?R(t):(e.consume(t),k):e.check(jg,N,R)(t)}function R(t){return e.exit("htmlFlowData"),_(t)}function _(t){return null===t?D(t):Eg(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),_):(e.enter("htmlFlowData"),k(t))}function T(t){return 45===t?(e.consume(t),P):k(t)}function j(t){return 47===t?(e.consume(t),o="",A):k(t)}function A(t){return 62===t&&Rg.indexOf(o.toLowerCase())>-1?(e.consume(t),N):xg(t)&&o.length<8?(e.consume(t),o+=Ig(t),A):k(t)}function O(t){return 93===t?(e.consume(t),P):k(t)}function P(t){return 62===t?(e.consume(t),N):k(t)}function N(t){return null===t||Eg(t)?(e.exit("htmlFlowData"),D(t)):(e.consume(t),N)}function D(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){var t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},jg={tokenize:function(e,t,n){return function(r){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),e.attempt(_g,t,n)}},partial:!0};var Ag=Tg,Og=nm,Pg=rm,Ng=Sf,Dg=Fv,Lg=Cf,$g=kf;var Mg={name:"htmlText",tokenize:function(e,t,n){var r,i,o,a,l=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),c):47===t?(e.consume(t),E):63===t?(e.consume(t),x):Og(t)?(e.consume(t),I):n(t)}function c(t){return 45===t?(e.consume(t),u):91===t?(e.consume(t),i="CDATA[",o=0,m):Og(t)?(e.consume(t),y):n(t)}function u(t){return 45===t?(e.consume(t),d):n(t)}function d(t){return null===t||62===t?n(t):45===t?(e.consume(t),p):f(t)}function p(e){return null===e||62===e?n(e):f(e)}function f(t){return null===t?n(t):45===t?(e.consume(t),v):Ng(t)?(a=f,P(t)):(e.consume(t),f)}function v(t){return 45===t?(e.consume(t),D):f(t)}function m(t){return t===i.charCodeAt(o++)?(e.consume(t),o===i.length?g:m):n(t)}function g(t){return null===t?n(t):93===t?(e.consume(t),h):Ng(t)?(a=g,P(t)):(e.consume(t),g)}function h(t){return 93===t?(e.consume(t),b):g(t)}function b(t){return 62===t?D(t):93===t?(e.consume(t),b):g(t)}function y(t){return null===t||62===t?D(t):Ng(t)?(a=y,P(t)):(e.consume(t),y)}function x(t){return null===t?n(t):63===t?(e.consume(t),w):Ng(t)?(a=x,P(t)):(e.consume(t),x)}function w(e){return 62===e?D(e):x(e)}function E(t){return Og(t)?(e.consume(t),S):n(t)}function S(t){return 45===t||Pg(t)?(e.consume(t),S):C(t)}function C(t){return Ng(t)?(a=C,P(t)):Lg(t)?(e.consume(t),C):D(t)}function I(t){return 45===t||Pg(t)?(e.consume(t),I):47===t||62===t||Dg(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),D):58===t||95===t||Og(t)?(e.consume(t),R):Ng(t)?(a=k,P(t)):Lg(t)?(e.consume(t),k):D(t)}function R(t){return 45===t||46===t||58===t||95===t||Pg(t)?(e.consume(t),R):_(t)}function _(t){return 61===t?(e.consume(t),T):Ng(t)?(a=_,P(t)):Lg(t)?(e.consume(t),_):k(t)}function T(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),r=t,j):Ng(t)?(a=T,P(t)):Lg(t)?(e.consume(t),T):(e.consume(t),r=void 0,O)}function j(t){return t===r?(e.consume(t),A):null===t?n(t):Ng(t)?(a=j,P(t)):(e.consume(t),j)}function A(e){return 62===e||47===e||Dg(e)?k(e):n(e)}function O(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||Dg(t)?k(t):(e.consume(t),O)}function P(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),$g(e,N,"linePrefix",l.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}function N(t){return e.enter("htmlTextData"),a(t)}function D(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}}},Bg=Fv,Vg=Rv,Fg=Uf,zg=bf,Hg=_v,Gg=qf,Ug=Gm,Wg=qm,qg=eg,Yg=Qm,Xg={name:"labelEnd",tokenize:function(e,t,n){var r,i,o=this,a=o.events.length;for(;a--;)if(("labelImage"===o.events[a][1].type||"labelLink"===o.events[a][1].type)&&!o.events[a][1]._balanced){r=o.events[a][1];break}return function(t){if(!r)return n(t);return r._inactive?s(t):(i=o.parser.defined.indexOf(zg(o.sliceSerialize({start:r.end,end:o.now()})))>-1,e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),l)};function l(n){return 40===n?e.attempt(Kg,t,i?t:s)(n):91===n?e.attempt(Qg,t,i?e.attempt(Zg,t,s):s)(n):i?t(n):s(n)}function s(e){return r._balanced=!0,n(e)}},resolveTo:function(e,t){var n,r,i,o,a,l,s,c=e.length,u=0;for(;c--;)if(o=e[c][1],a){if("link"===o.type||"labelLink"===o.type&&o._inactive)break;"enter"===e[c][0]&&"labelLink"===o.type&&(o._inactive=!0)}else if(l){if("enter"===e[c][0]&&("labelImage"===o.type||"labelLink"===o.type)&&!o._balanced&&(a=c,"labelLink"!==o.type)){u=2;break}}else"labelEnd"===o.type&&(l=c);return n={type:"labelLink"===e[a][1].type?"link":"image",start:Gg(e[a][1].start),end:Gg(e[e.length-1][1].end)},r={type:"label",start:Gg(e[a][1].start),end:Gg(e[l][1].end)},i={type:"labelText",start:Gg(e[a+u+2][1].end),end:Gg(e[l-2][1].start)},s=Vg(s=[["enter",n,t],["enter",r,t]],e.slice(a+1,a+u+3)),s=Vg(s,[["enter",i,t]]),s=Vg(s,Hg(t.parser.constructs.insideSpan.null,e.slice(a+u+4,l-3),t)),s=Vg(s,[["exit",i,t],e[l-2],e[l-1],["exit",r,t]]),s=Vg(s,e.slice(l+1)),s=Vg(s,[["exit",n,t]]),Fg(e,a,e.length,s),e},resolveAll:function(e){var t,n=-1;for(;++n<e.length;)(t=e[n][1])._used||"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},Kg={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),Yg(e,r)};function r(t){return 41===t?a(t):Ug(e,i,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",3)(t)}function i(t){return Bg(t)?Yg(e,o)(t):a(t)}function o(t){return 34===t||39===t||40===t?qg(e,Yg(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):a(t)}function a(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Qg={tokenize:function(e,t,n){var r=this;return function(t){return Wg.call(r,e,i,n,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.indexOf(zg(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))<0?n(e):t(e)}}},Zg={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};var Jg=Xg;var eh={name:"labelStartImage",tokenize:function(e,t,n){var r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Jg.resolveAll};var th={name:"labelStartLink",tokenize:function(e,t,n){var r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Jg.resolveAll},nh=kf;var rh={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),nh(e,t,"linePrefix")}}},ih=Sf,oh=Cf,ah=kf;var lh={name:"thematicBreak",tokenize:function(e,t,n){var r,i=0;return function(t){return e.enter("thematicBreak"),r=t,o(t)};function o(l){return l===r?(e.enter("thematicBreakSequence"),a(l)):oh(l)?ah(e,o,"whitespace")(l):i<3||null!==l&&!ih(l)?n(l):(e.exit("thematicBreak"),t(l))}function a(t){return t===r?(e.consume(t),i++,a):(e.exit("thematicBreakSequence"),o(t))}}},sh=ym,ch=Cf,uh=Hf,dh=Ff,ph=kf,fh=Pf,vh=lh,mh={name:"list",tokenize:function(e,t,n){var r=this,i=uh(r.events,"linePrefix"),o=0;return function(t){var i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:sh(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(vh,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),a(t)}return n(t)};function a(t){return sh(t)&&++o<10?(e.consume(t),a):(!r.interrupt||o<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(fh,r.interrupt?n:s,e.attempt(gh,u,c))}function s(e){return r.containerState.initialBlankLine=!0,i++,u(e)}function c(t){return ch(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),u):n(t)}function u(n){return r.containerState.size=i+dh(r.sliceStream(e.exit("listItemPrefix"))),t(n)}},continuation:{tokenize:function(e,t,n){var r=this;return r.containerState._closeFlow=void 0,e.check(fh,(function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ph(e,t,"listItemIndent",r.containerState.size+1)(n)}),(function(n){if(r.containerState.furtherBlankLines||!ch(n))return r.containerState.furtherBlankLines=r.containerState.initialBlankLine=void 0,i(n);return r.containerState.furtherBlankLines=r.containerState.initialBlankLine=void 0,e.attempt(hh,t,i)(n)}));function i(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,ph(e,e.attempt(mh,t,n),"linePrefix",r.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},gh={tokenize:function(e,t,n){var r=this;return ph(e,(function(e){return ch(e)||!uh(r.events,"listItemPrefixWhitespace")?n(e):t(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:5)},partial:!0},hh={tokenize:function(e,t,n){var r=this;return ph(e,(function(e){return uh(r.events,"listItemIndent")===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};var bh=mh,yh=Sf,xh=qf,wh=kf;var Eh={name:"setextUnderline",tokenize:function(e,t,n){var r,i,o=this,a=o.events.length;for(;a--;)if("lineEnding"!==o.events[a][1].type&&"linePrefix"!==o.events[a][1].type&&"content"!==o.events[a][1].type){i="paragraph"===o.events[a][1].type;break}return function(t){if(!o.lazy&&(o.interrupt||i))return e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),r=t,l(t);return n(t)};function l(t){return t===r?(e.consume(t),l):(e.exit("setextHeadingLineSequence"),wh(e,s,"lineSuffix")(t))}function s(r){return null===r||yh(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){var n,r,i,o,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),i||"definition"!==e[a][1].type||(i=a);o={type:"setextHeading",start:xh(e[r][1].start),end:xh(e[e.length-1][1].end)},e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=xh(e[i][1].end)):e[n][1]=o;return e.push(["exit",o,t]),e}};Object.defineProperty(Vv,"__esModule",{value:!0});var Sh={42:bh,43:bh,45:bh,48:bh,49:bh,50:bh,51:bh,52:bh,53:bh,54:bh,55:bh,56:bh,57:bh,62:vm},Ch={91:dg},Ih={"-2":Mm,"-1":Mm,32:Mm},kh={35:yg,42:lh,45:[Eh,lh],60:Ag,61:Eh,95:lh,96:Am,126:Am},Rh={38:km,92:hm},_h={"-5":rh,"-4":rh,"-3":rh,33:eh,38:km,42:tm,60:[um,Mg],91:th,92:[fg,hm],93:Jg,95:tm,96:Vm},Th={null:[tm,uv.resolver]};Vv.contentInitial=Ch,Vv.disable={null:[]},Vv.document=Sh,Vv.flow=kh,Vv.flowInitial=Ih,Vv.insideSpan=Th,Vv.string=Rh,Vv.text=_h;var jh=Ef,Ah=jf,Oh=Vf,Ph=uv,Nh=Iv,Dh=Bv,Lh=yv,$h=Vv;var Mh=/[\0\t\n\r]/g;var Bh=Zf;var Vh=function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);return function(e){var t=e||{},n=function(e,t){var n=-1;for(;++n<t.length;)Qh(e,t[n]);return e}({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:c(ie),autolinkProtocol:T,autolinkEmail:T,atxHeading:c(ee),blockQuote:c(X),characterEscape:T,characterReference:T,codeFenced:c(K),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:c(K,u),codeText:c(Q,u),codeTextData:T,data:T,codeFlowValue:T,definition:c(Z),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:c(J),hardBreakEscape:c(te),hardBreakTrailing:c(te),htmlFlow:c(ne,u),htmlFlowData:T,htmlText:c(ne,u),htmlTextData:T,image:c(re),label:u,link:c(ie),listItem:c(ae),listItemValue:g,listOrdered:c(oe,m),listUnordered:c(oe),paragraph:c(le),reference:H,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:c(ee),strong:c(se),thematicBreak:c(ue)},exit:{atxHeading:p(),atxHeadingSequence:I,autolink:p(),autolinkEmail:Y,autolinkProtocol:q,blockQuote:p(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:W,codeFenced:p(x),codeFencedFence:y,codeFencedFenceInfo:h,codeFencedFenceMeta:b,codeFlowValue:j,codeIndented:p(w),codeText:p(D),codeTextData:j,data:j,definition:p(),definitionDestinationString:C,definitionLabelString:E,definitionTitleString:S,emphasis:p(),hardBreakEscape:p(O),hardBreakTrailing:p(O),htmlFlow:p(P),htmlFlowData:j,htmlText:p(N),htmlTextData:j,image:p($),label:B,labelText:M,lineEnding:A,link:p(L),listItem:p(),listOrdered:p(),listUnordered:p(),paragraph:p(),referenceString:G,resourceDestinationString:V,resourceTitleString:F,resource:z,setextHeading:p(_),setextHeadingLineSequence:R,setextHeadingText:k,strong:p(),thematicBreak:p()}},t.mdastExtensions||[]),r={};return i;function i(e){for(var t,r={type:"root",children:[]},i=[],c=[],p=-1,m={stack:[r],tokenStack:i,config:n,enter:d,exit:f,buffer:u,resume:v,setData:a,getData:l};++p<e.length;)"listOrdered"!==e[p][1].type&&"listUnordered"!==e[p][1].type||("enter"===e[p][0]?c.push(p):p=o(e,c.pop(p),p));for(p=-1;++p<e.length;)t=n[e[p][0]],Hh.call(t,e[p][1].type)&&t[e[p][1].type].call(zh({sliceSerialize:e[p][2].sliceSerialize},m),e[p][1]);if(i.length)throw new Error("Cannot close document, a token (`"+i[i.length-1].type+"`, "+Kh({start:i[i.length-1].start,end:i[i.length-1].end})+") is still open");for(r.position={start:s(e.length?e[0][1].start:{line:1,column:1,offset:0}),end:s(e.length?e[e.length-2][1].end:{line:1,column:1,offset:0})},p=-1;++p<n.transforms.length;)r=n.transforms[p](r)||r;return r}function o(e,t,n){for(var r,i,o,a,l,c,u,d=t-1,p=-1,f=!1;++d<=n;)if("listUnordered"===(l=e[d])[1].type||"listOrdered"===l[1].type||"blockQuote"===l[1].type?("enter"===l[0]?p++:p--,u=void 0):"lineEndingBlank"===l[1].type?"enter"===l[0]&&(!r||u||p||c||(c=d),u=void 0):"linePrefix"===l[1].type||"listItemValue"===l[1].type||"listItemMarker"===l[1].type||"listItemPrefix"===l[1].type||"listItemPrefixWhitespace"===l[1].type||(u=void 0),!p&&"enter"===l[0]&&"listItemPrefix"===l[1].type||-1===p&&"exit"===l[0]&&("listUnordered"===l[1].type||"listOrdered"===l[1].type)){if(r){for(i=d,o=void 0;i--;)if("lineEnding"===(a=e[i])[1].type||"lineEndingBlank"===a[1].type){if("exit"===a[0])continue;o&&(e[o][1].type="lineEndingBlank",f=!0),a[1].type="lineEnding",o=i}else if("linePrefix"!==a[1].type&&"blockQuotePrefix"!==a[1].type&&"blockQuotePrefixWhitespace"!==a[1].type&&"blockQuoteMarker"!==a[1].type&&"listItemIndent"!==a[1].type)break;c&&(!o||c<o)&&(r._spread=!0),r.end=s(o?e[o][1].start:l[1].end),e.splice(o||d,0,["exit",r,l[2]]),d++,n++}"listItemPrefix"===l[1].type&&(r={type:"listItem",_spread:!1,start:s(l[1].start)},e.splice(d,0,["enter",r,l[2]]),d++,n++,c=void 0,u=!0)}return e[t][1]._spread=f,n}function a(e,t){r[e]=t}function l(e){return r[e]}function s(e){return{line:e.line,column:e.column,offset:e.offset}}function c(e,t){return n;function n(n){d.call(this,e(n),n),t&&t.call(this,n)}}function u(){this.stack.push({type:"fragment",children:[]})}function d(e,t){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push(t),e.position={start:s(t.start)},e}function p(e){return t;function t(t){e&&e.call(this,t),f.call(this,t)}}function f(e){var t=this.stack.pop(),n=this.tokenStack.pop();if(!n)throw new Error("Cannot close `"+e.type+"` ("+Kh({start:e.start,end:e.end})+"): its not open");if(n.type!==e.type)throw new Error("Cannot close `"+e.type+"` ("+Kh({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+Kh({start:n.start,end:n.end})+") is open");return t.position.end=s(e.end),t}function v(){return Fh(this.stack.pop())}function m(){a("expectingFirstListItemValue",!0)}function g(e){l("expectingFirstListItemValue")&&(this.stack[this.stack.length-2].start=parseInt(this.sliceSerialize(e),10),a("expectingFirstListItemValue"))}function h(){var e=this.resume();this.stack[this.stack.length-1].lang=e}function b(){var e=this.resume();this.stack[this.stack.length-1].meta=e}function y(){l("flowCodeInside")||(this.buffer(),a("flowCodeInside",!0))}function x(){var e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),a("flowCodeInside")}function w(){var e=this.resume();this.stack[this.stack.length-1].value=e}function E(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=Gh(this.sliceSerialize(e)).toLowerCase()}function S(){var e=this.resume();this.stack[this.stack.length-1].title=e}function C(){var e=this.resume();this.stack[this.stack.length-1].url=e}function I(e){this.stack[this.stack.length-1].depth||(this.stack[this.stack.length-1].depth=this.sliceSerialize(e).length)}function k(){a("setextHeadingSlurpLineEnding",!0)}function R(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function _(){a("setextHeadingSlurpLineEnding")}function T(e){var t=this.stack[this.stack.length-1].children,n=t[t.length-1];n&&"text"===n.type||((n=ce()).position={start:s(e.start)},this.stack[this.stack.length-1].children.push(n)),this.stack.push(n)}function j(e){var t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=s(e.end)}function A(e){var t=this.stack[this.stack.length-1];if(l("atHardBreak"))return t.children[t.children.length-1].position.end=s(e.end),void a("atHardBreak");!l("setextHeadingSlurpLineEnding")&&n.canContainEols.indexOf(t.type)>-1&&(T.call(this,e),j.call(this,e))}function O(){a("atHardBreak",!0)}function P(){var e=this.resume();this.stack[this.stack.length-1].value=e}function N(){var e=this.resume();this.stack[this.stack.length-1].value=e}function D(){var e=this.resume();this.stack[this.stack.length-1].value=e}function L(){var e=this.stack[this.stack.length-1];l("inReference")?(e.type+="Reference",e.referenceType=l("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),a("referenceType")}function $(){var e=this.stack[this.stack.length-1];l("inReference")?(e.type+="Reference",e.referenceType=l("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),a("referenceType")}function M(e){this.stack[this.stack.length-2].identifier=Gh(this.sliceSerialize(e)).toLowerCase()}function B(){var e=this.stack[this.stack.length-1],t=this.resume();this.stack[this.stack.length-1].label=t,a("inReference",!0),"link"===this.stack[this.stack.length-1].type?this.stack[this.stack.length-1].children=e.children:this.stack[this.stack.length-1].alt=t}function V(){var e=this.resume();this.stack[this.stack.length-1].url=e}function F(){var e=this.resume();this.stack[this.stack.length-1].title=e}function z(){a("inReference")}function H(){a("referenceType","collapsed")}function G(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=Gh(this.sliceSerialize(e)).toLowerCase(),a("referenceType","full")}function U(e){a("characterReferenceType",e.type)}function W(e){var t,n,r=this.sliceSerialize(e),i=l("characterReferenceType");i?(t=Uh(r,"characterReferenceMarkerNumeric"===i?10:16),a("characterReferenceType")):t=Xh(r),(n=this.stack.pop()).value+=t,n.position.end=s(e.end)}function q(e){j.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function Y(e){j.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function X(){return{type:"blockquote",children:[]}}function K(){return{type:"code",lang:null,meta:null,value:""}}function Q(){return{type:"inlineCode",value:""}}function Z(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function J(){return{type:"emphasis",children:[]}}function ee(){return{type:"heading",depth:void 0,children:[]}}function te(){return{type:"break"}}function ne(){return{type:"html",value:""}}function re(){return{type:"image",title:null,url:"",alt:null}}function ie(){return{type:"link",title:null,url:"",children:[]}}function oe(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function ae(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function le(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function ce(){return{type:"text",value:""}}function ue(){return{type:"thematicBreak"}}}(n)(Yh(Wh(n).document().write(qh()(e,t,!0))))},Fh=ff,zh=gf,Hh=hf,Gh=bf,Uh=wf,Wh=function(e){var t={defined:[],constructs:Nh([$h].concat(Lh((e||{}).extensions))),content:n(jh),document:n(Ah),flow:n(Oh),string:n(Ph.string),text:n(Ph.text)};return t;function n(e){return function(n){return Dh(t,e,n)}}},qh=function(){var e,t=!0,n=1,r="";return function(i,o,a){var l,s,c,u,d,p=[];i=r+i.toString(o),c=0,r="",t&&(65279===i.charCodeAt(0)&&c++,t=void 0);for(;c<i.length;){if(Mh.lastIndex=c,u=(l=Mh.exec(i))?l.index:i.length,d=i.charCodeAt(u),!l){r=i.slice(c);break}if(10===d&&c===u&&e)p.push(-3),e=void 0;else if(e&&(p.push(-5),e=void 0),c<u&&(p.push(i.slice(c,u)),n+=u-c),0===d)p.push(65533),n++;else if(9===d)for(s=4*Math.ceil(n/4),p.push(-2);n++<s;)p.push(-1);else 10===d?(p.push(-4),n=1):(e=!0,n=1);c=u+1}a&&(e&&p.push(-5),r&&p.push(r),p.push(null));return p}},Yh=function(e){for(;!Bh(e););return e},Xh=bm,Kh=Ep;function Qh(e,t){var n,r;for(n in t)r=Hh.call(e,n)?e[n]:e[n]={},"canContainEols"===n||"transforms"===n?e[n]=[].concat(r,t[n]):Object.assign(r,t[n])}pf.exports=Vh;var Zh=function(e){var t=this;this.Parser=function(n){return Jh(n,Object.assign({},t.data("settings"),e,{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}},Jh=df;var eb=function(e,t,n){var r=[];"function"==typeof t&&(n=t,t=null);function i(e){var o;return t&&e.type!==t||(o=n(e,r.concat())),e.children&&!1!==o?function(e,t){var n,o=e.length,a=-1;r.push(t);for(;++a<o;)if((n=e[a])&&!1===i(n))return!1;return r.pop(),!0}(e.children,e):o}i(e)};var tb=function(){return function(e){return eb(e,"list",(function(e,t){var n,r,i=0;for(n=0,r=t.length;n<r;n++)"list"===t[n].type&&(i+=1);for(n=0,r=e.children.length;n<r;n++){var o=e.children[n];o.index=n,o.ordered=e.ordered}e.depth=i})),e}};function nb(e){if(null==e)return rb;if("string"==typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"==typeof e)return"length"in e?function(e){var t=[],n=-1;for(;++n<e.length;)t[n]=nb(e[n]);return r;function r(){for(var e=-1;++e<t.length;)if(t[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function rb(){return!0}var ib=ub,ob=nb,ab=function(e){return e},lb=!0,sb="skip",cb=!1;function ub(e,t,n,r){var i,o;"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),o=ob(t),i=r?-1:1,function e(a,l,s){var c,u="object"==typeof a&&null!==a?a:{};"string"==typeof u.type&&(c="string"==typeof u.tagName?u.tagName:"string"==typeof u.name?u.name:void 0,d.displayName="node ("+ab(u.type+(c?"<"+c+">":""))+")");return d;function d(){var c,u,d=s.concat(a),p=[];if((!t||o(a,l,s[s.length-1]||null))&&(p=function(e){if(null!==e&&"object"==typeof e&&"length"in e)return e;if("number"==typeof e)return[lb,e];return[e]}(n(a,s)),p[0]===cb))return p;if(a.children&&p[0]!==sb)for(u=(r?a.children.length:-1)+i;u>-1&&u<a.children.length;){if((c=e(a.children[u],u,d)())[0]===cb)return c;u="number"==typeof c[1]?c[1]:u+i}return p}}(e,null,[])()}ub.CONTINUE=true,ub.SKIP=sb,ub.EXIT=cb;var db=gb,pb=ib,fb=pb.CONTINUE,vb=pb.SKIP,mb=pb.EXIT;function gb(e,t,n,r){"function"==typeof t&&"function"!=typeof n&&(r=n,n=t,t=null),pb(e,t,(function(e,t){var r=t[t.length-1],i=r?r.children.indexOf(e):null;return n(e,i,r)}),r)}gb.CONTINUE=fb,gb.SKIP=vb,gb.EXIT=mb;var hb=db,bb="virtualHtml",yb=/^<(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\s*\/?>$/i,xb=/^<(\/?)([a-z]+)\s*>$/;var wb={},Eb=db,Sb=[].splice;function Cb(e,t){return function(e){return Eb(e,n),e};function n(n,r,i){if(i&&!e(n,r,i)){var o=[r,1];return"unwrap"===t&&n.children&&(o=o.concat(n.children)),Sb.apply(i.children,o),r}}}wb.ofType=function(e,t){return Cb((function(t,n,r){return!e.includes(t.type)}),t)},wb.ifNotMatch=Cb;var Ib=e,kb=np,Rb=n;function _b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.renderers[e.type];e.position||(e.position={start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}});var o=e.position.start,a=[e.type,o.line,o.column,r].join("-");if(!Rb.isValidElementType(i))throw new Error("Renderer for type `".concat(e.type,"` not defined or is not renderable"));var l=Tb(e,a,t,i,n,r);return Ib.createElement(i,l,l.children||s()||void 0);function s(){return e.children&&e.children.map((function(n,r){return _b(n,t,{node:e,props:l},r)}))}}function Tb(e,t,n,r,i,o){var a,l={key:t},s="string"==typeof r||r===Ib.Fragment;n.sourcePos&&e.position&&(l["data-sourcepos"]=[(a=e.position).start.line,":",a.start.column,"-",a.end.line,":",a.end.column].map(String).join("")),n.rawSourcePos&&!s&&(l.sourcePosition=e.position),n.includeNodeIndex&&i.node&&i.node.children&&!s&&(l.index=i.node.children.indexOf(e),l.parentChildCount=i.node.children.length);var c=null!==e.identifier&&void 0!==e.identifier?n.definitions[e.identifier.toUpperCase()]||{}:null;switch(e.type){case"root":jb(l,{className:n.className});break;case"text":l.nodeKey=t,l.children=e.value;break;case"heading":l.level=e.depth;break;case"list":l.start=e.start,l.ordered=e.ordered,l.spread=e.spread,l.depth=e.depth;break;case"listItem":l.checked=e.checked,l.spread=e.spread,l.ordered=e.ordered,l.index=e.index,l.children=function(e,t){var n=t&&t.node?function(e){var t=e.children,n=e.spread,r=-1;for(;!n&&++r<t.length;)n=Ab(t[r]);return n}(t.node):Ab(e);return n?e.children:function(e){return e.children.reduce((function(e,t){return e.concat("paragraph"===t.type?t.children:[t])}),[])}(e)}(e,i).map((function(t,r){return _b(t,n,{node:e,props:l},r)}));break;case"definition":jb(l,{identifier:e.identifier,title:e.title,url:e.url});break;case"code":jb(l,{language:e.lang&&e.lang.split(/\s/,1)[0]});break;case"inlineCode":l.children=e.value,l.inline=!0;break;case"link":jb(l,{title:e.title||void 0,target:"function"==typeof n.linkTarget?n.linkTarget(e.url,e.children,e.title):n.linkTarget,href:n.transformLinkUri?n.transformLinkUri(e.url,e.children,e.title):e.url});break;case"image":jb(l,{src:n.transformImageUri?n.transformImageUri(e.url,e.children,e.title,e.alt):e.url,alt:e.alt||"",title:e.title||void 0});break;case"linkReference":jb(l,kb(c,{href:n.transformLinkUri?n.transformLinkUri(c.href):c.href}));break;case"imageReference":jb(l,{src:n.transformImageUri&&c.href?n.transformImageUri(c.href,e.children,c.title,e.alt):c.href,alt:e.alt||"",title:c.title||void 0});break;case"table":case"tableHead":case"tableBody":l.columnAlignment=e.align;break;case"tableRow":l.isHeader="tableHead"===i.node.type,l.columnAlignment=i.props.columnAlignment;break;case"tableCell":jb(l,{isHeader:i.props.isHeader,align:i.props.columnAlignment[o]});break;case"virtualHtml":l.tag=e.tag;break;case"html":l.isBlock=e.position.start.line!==e.position.end.line,l.allowDangerousHtml=n.allowDangerousHtml,l.escapeHtml=n.escapeHtml,l.skipHtml=n.skipHtml;break;case"parsedHtml":var u;e.children&&(u=e.children.map((function(t,r){return _b(t,n,{node:e,props:l},r)}))),l.allowDangerousHtml=n.allowDangerousHtml,l.escapeHtml=n.escapeHtml,l.skipHtml=n.skipHtml,l.element=e.element?function(e,t){var n=e.element;if(Array.isArray(n)){var r=Ib.Fragment||"div";return Ib.createElement(r,null,n)}if(n.props.children||t){var i=Ib.Children.toArray(n.props.children).concat(t);return Ib.cloneElement(n,null,i)}return Ib.cloneElement(n,null)}(e,u):null;break;default:jb(l,kb(e,{type:void 0,position:void 0,children:void 0}))}return!s&&e.value&&(l.value=e.value),s||(l.node=e),l}function jb(e,t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}function Ab(e){var t=e.spread;return null==t?e.children.length>1:t}var Ob=_b,Pb=db;function Nb(e){var t=e.children;e.children=[{type:"tableHead",align:e.align,children:[t[0]],position:t[0].position}],t.length>1&&e.children.push({type:"tableBody",align:e.align,children:t.slice(1),position:{start:t[1].position.start,end:t[t.length-1].position.end}})}var Db=db,Lb=["http","https","mailto","tel"],$b=np,Mb=e,Bb=parseInt((Mb.version||"16").slice(0,2),10)>=16,Vb=Mb.createElement,Fb={break:"br",paragraph:"p",emphasis:"em",strong:"strong",thematicBreak:"hr",blockquote:"blockquote",delete:"del",link:"a",image:"img",linkReference:"a",imageReference:"img",table:zb.bind(null,"table"),tableHead:zb.bind(null,"thead"),tableBody:zb.bind(null,"tbody"),tableRow:zb.bind(null,"tr"),tableCell:function(e){var t=e.align?{textAlign:e.align}:void 0,n=Hb(e);return Vb(e.isHeader?"th":"td",t?$b({style:t},n):n,e.children)},root:function(e){var t=e.className,n=!t&&Mb.Fragment||"div";return Vb(n,t?{className:t}:null,e.children)},text:function(e){var t=e.children||"";return Bb?t:Vb("span",null,t)},list:function(e){var t=Hb(e);null!==e.start&&1!==e.start&&void 0!==e.start&&(t.start=e.start.toString());return Vb(e.ordered?"ol":"ul",t,e.children)},listItem:function(e){var t=null;if(null!==e.checked&&void 0!==e.checked){var n=e.checked;t=Vb("input",{type:"checkbox",checked:n,readOnly:!0})}return Vb("li",Hb(e),t,e.children)},definition:function(){return null},heading:function(e){return Vb("h".concat(e.level),Hb(e),e.children)},inlineCode:function(e){return Vb("code",Hb(e),e.children)},code:function(e){var t=e.language&&"language-".concat(e.language),n=Vb("code",t?{className:t}:null,e.value);return Vb("pre",Hb(e),n)},html:function(e){if(e.skipHtml)return null;var t=e.allowDangerousHtml||!1===e.escapeHtml,n=e.isBlock?"div":"span";if(!t)return Vb(Mb.Fragment||n,null,e.value);var r={dangerouslySetInnerHTML:{__html:e.value}};return Vb(n,r)},virtualHtml:function(e){return Vb(e.tag,Hb(e),e.children)},parsedHtml:function(e){return e["data-sourcepos"]?Mb.cloneElement(e.element,{"data-sourcepos":e["data-sourcepos"]}):e.element}};function zb(e,t){return Vb(e,Hb(t),t.children)}function Hb(e){var t=e["data-sourcepos"];return t?{"data-sourcepos":t}:{}}var Gb={},Ub="__RMD_HTML_PARSER__";Gb.HtmlParser="undefined"==typeof Symbol?Ub:Symbol(Ub);var Wb=np,qb=ef,Yb=Zh,Xb=pe,Kb=tb,Qb=function(e){var t,n;return hb(e,"html",(function(e,r,i){n!==i&&(t=[],n=i);var o=function(e){var t=e.value.match(yb);return!!t&&t[1]}(e);if(o)return i.children.splice(r,1,{type:bb,tag:o,position:e.position}),!0;var a=function(e,t){var n=e.value.match(xb);return!!n&&{tag:n[2],opening:!n[1],node:e}}(e);if(!a)return!0;var l=function(e,t){var n=e.length;for(;n--;)if(e[n].tag===t)return e.splice(n,1)[0];return!1}(t,a.tag);return l?i.children.splice(r,0,function(e,t,n){var r=n.children.indexOf(e.node),i=n.children.indexOf(t.node),o=n.children.splice(r,i-r+1),a=o.slice(1,-1);return{type:bb,children:a,tag:e.tag,position:{start:e.node.position.start,end:t.node.position.end,indent:[]}}}(a,l,i)):a.opening||t.push(a),!0}),!0),e},Zb=wb,Jb=Ob,ey=function(e){return Pb(e,"table",Nb),e},ty=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Db(e,"definition",(function(e){var n=e.identifier.toUpperCase();n in t||(t[n]={href:e.url,title:e.title})})),t},ny=function(e){var t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;var r=t.indexOf(":");if(-1===r)return t;for(var i=Lb.length,o=-1;++o<i;){var a=Lb[o];if(r===a.length&&t.slice(0,a.length).toLowerCase()===a)return t}return-1!==(o=t.indexOf("?"))&&r>o||-1!==(o=t.indexOf("#"))&&r>o?t:"javascript:void(0)"},ry=Fb,iy=Gb,oy=Object.keys(ry),ay=function(e){var t=e.source||e.children||"";if(e.allowedTypes&&e.disallowedTypes)throw new Error("Only one of `allowedTypes` and `disallowedTypes` should be defined");var n=Wb(ry,e.renderers),r=qb().use(Yb).use(e.plugins||[]),i=r.runSync(r.parse(t)),o=Wb(e,{renderers:n,definitions:ty(i)});return function(e){var t=[ey,Kb()],n=e.disallowedTypes;e.allowedTypes&&(n=oy.filter((function(t){return"root"!==t&&-1===e.allowedTypes.indexOf(t)})));var r=e.unwrapDisallowed?"unwrap":"remove";n&&n.length>0&&t.push(Zb.ofType(n,r));e.allowNode&&t.push(Zb.ifNotMatch(e.allowNode,r));var i=(e.allowDangerousHtml||!1===e.escapeHtml)&&!e.skipHtml,o=(e.astPlugins||[]).some((function(e){return e.identity===iy.HtmlParser}));i&&!o&&t.push(Qb);e.astPlugins&&(t=t.concat(e.astPlugins));return t.push(Jb),t}(e).forEach((function(e){i=e(i,o)})),i};ay.defaultProps={transformLinkUri:ny},ay.propTypes={className:Xb.string,source:Xb.string,children:Xb.string,sourcePos:Xb.bool,rawSourcePos:Xb.bool,escapeHtml:Xb.bool,allowDangerousHtml:Xb.bool,skipHtml:Xb.bool,allowNode:Xb.func,allowedTypes:Xb.arrayOf(Xb.oneOf(oy)),disallowedTypes:Xb.arrayOf(Xb.oneOf(oy)),transformLinkUri:Xb.oneOfType([Xb.func,Xb.bool]),linkTarget:Xb.oneOfType([Xb.func,Xb.string]),transformImageUri:Xb.func,astPlugins:Xb.arrayOf(Xb.func),unwrapDisallowed:Xb.bool,renderers:Xb.object,plugins:Xb.array},ay.types=oy,ay.renderers=ry,ay.uriTransformer=ny;var ly=ay;const sy=ai.div`
    padding: 0.5em 0;
    position: relative;
    &:not(:last-child) {
        border-bottom: 1px solid ${xn.borderColor};
    }

    &:not(:hover) .floating-menu {
        display: none;
    }

    & .floating-menu {
        right: 30px;
    }
`;function cy({value:e,attribute:t,onDelete:n,isReadOnly:r}){const{t:i}=c(),o=async()=>n(),a=[{title:i("record_edition.edit_record"),button:s.jsx(Du,{record:e.treeValue.record.whoAmI})},{title:i("record_edition.value_details"),button:s.jsx(ju,{value:e,attribute:t})}];return r||a.push({title:i("global.delete"),button:s.jsx(Nu,{onDelete:o})}),s.jsxs(sy,{children:[s.jsx(Vn,{record:e.treeValue.record.whoAmI,size:ae.small}),s.jsx(q,{actions:a})]})}const uy=ai.div`
    background-color: ${xn.defaultBg};
    z-index: 1;
    position: relative;
`,dy=ai.div`
    padding: 1em;
    max-height: 350px;
    overflow: auto;
`,py=ai.div`
    padding: 0.5em 1em;
    display: flex;
    justify-content: flex-end;
    background: ${xn.lightBg};
`,fy=ai.div`
    & .record-card .label {
        font-weight: normal;
    }
`,vy=ai(Qo)`
    display: flex;
    align-items: center;
`,my=ai(Qo.Item)`
    display: flex;
    align-items: center;

    padding: 0.5em 0;
`;function gy({attribute:t,onAdd:n,onClose:r}){var i,o;const{t:a}=c(),{lang:l}=wn(),u=(null==(i=null==t?void 0:t.treeValuesList)?void 0:i.enable)?(null==(o=null==t?void 0:t.treeValuesList)?void 0:o.values)??[]:[],d=e.useRef(),[p,f]=e.useState([]),[v,m]=e.useState([]);e.useEffect((()=>{d.current.scrollIntoView({block:"nearest"})}),[]);return s.jsx(s.Fragment,{children:s.jsxs(uy,{"data-testid":"values-add",ref:d,children:[s.jsxs(dy,{children:[!!u.length&&s.jsxs(s.Fragment,{children:[s.jsx(el,{orientation:"left",children:a("record_edition.values_list")}),s.jsx(fd,{dataSource:u,onItemClick:e=>{const t=e.id;n([{record:e.record,key:t,id:t,title:e.record.whoAmI.label,children:null}])},renderItemContent:e=>{const t=e.ancestors,n=t.slice(0,-1),r=t.slice(-1)[0],i={withLibrary:!1,withPreview:!1};return s.jsx(fy,{children:s.jsxs(vy,{separator:"",children:[n.map((e=>s.jsxs(my,{children:[s.jsx(Vn,{record:e.record.whoAmI,size:ae.small,...i}),s.jsx(Qo.Separator,{children:">"})]},e.record.id))),s.jsx(my,{children:s.jsx(Vn,{record:r.record.whoAmI,size:ae.small,...i})},r.record.id)]})})},selectable:t.multiple_values,selectedItems:v,onSelectionChange:e=>m(e),pagination:!1})]}),s.jsx(el,{orientation:"left",children:P(t.linked_tree.label,l)}),s.jsx(Mu,{tree:t.linked_tree,onSelect:(e,t)=>{t&&n([e])},onCheck:e=>f(e),multiple:t.multiple_values})]}),t.multiple_values&&s.jsx(py,{children:s.jsxs(En,{children:[s.jsx(Kt,{size:"small",onClick:()=>r(),children:a("global.cancel")}),s.jsx(Kt,{type:"primary",size:"small",onClick:()=>{const e=[...v.map((e=>{const t=fe(e.record);return{record:e.record,id:t,key:t,title:e.record.whoAmI.label,children:null}})),...p];n(e)},children:a("global.submit")})]})})]})})}const hy=ai.div`
    position: relative;
    border: 1px solid ${xn.borderColor};
    margin-bottom: 1.5em;
    border-radius: ${e=>e.themeToken.borderRadius}px;
    background: ${xn.defaultBg};
    z-index: ${e=>e.isValuesAddVisible?1:"auto"};

    .ant-list-items {
        max-height: 320px;
        overflow-y: auto;
    }

    .ant-list-footer {
        padding: 0;
        border-radius: ${e=>e.themeToken.borderRadius}px;
    }
`,by=ai(Fn)`
    && {
        top: calc(50% - 0.9em);
        font-size: 0.9em;
        padding: 0 0.5em;
        color: ${xn.secondaryTextColor};
        z-index: 1;
        margin-bottom: 0;
    }
`;const yy={[Dr.FIELDS_CONTAINER]:function({element:e,onValueSubmit:t,onValueDelete:n,onDeleteMultipleValues:r}){const{elements:i}=Qc(),o=i[e.id]??[];return s.jsx(s.Fragment,{children:o.map((e=>s.jsx(bn,{"data-testid":"container-child-element",children:s.jsx(yn,{span:24,children:e.uiElement&&s.jsx(e.uiElement,{element:e,onValueSubmit:t,onValueDelete:n,onDeleteMultipleValues:r})})},e.id)))})},[Hr.TEXT_INPUT]:tp,[Hr.DATE]:tp,[Hr.CHECKBOX]:tp,[Hr.ENCRYPTED]:tp,[Hr.LINK]:function({element:t,onValueSubmit:n,onValueDelete:r,onDeleteMultipleValues:i}){var o,a,l,u,d,p;const{t:f}=c(),{lang:v}=wn(),{token:m}=Mr.useToken(),{readOnly:g,record:h}=Qc(),{state:b,dispatch:y}=Yc(),x=e.useContext(Jc),w=null===h,[E,S]=e.useReducer(bu,hu({element:t,formVersion:b.valuesVersion,isRecordReadOnly:g,record:h})),{fetchValues:C}=cu(null==(o=null==h?void 0:h.library)?void 0:o.id,E.attribute.id,null==h?void 0:h.id),I=E.attribute,k=E.formElement.settings,R=(null==k?void 0:k.columns)??[],_=uu(E),T=E.values[E.activeScope].version,{loading:j,data:A,refetch:O}=au(null==(a=null==I?void 0:I.linked_library)?void 0:a.gqlNames.query,R.map((e=>e.id)),_.map((e=>{var t;return null==(t=e.linkValue)?void 0:t.id})));e.useEffect((()=>{null===b.activeValue&&E.isValuesAddVisible&&D()}),[b.activeValue]),e.useEffect((()=>{x[I.id]&&S({type:vu.SET_ERROR_MESSAGE,errorMessage:x[I.id].message})}),[x,I.id]);const N=()=>{y({type:Gc.SET_ACTIVE_VALUE,value:{attribute:I,value:null}}),S({type:vu.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!0})},D=()=>{S({type:vu.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!1}),y({type:Gc.SET_ACTIVE_VALUE,value:null})},L=async()=>{var e;const t=await i(I.id,uu(E),E.values[E.activeScope].version);if(t.status===pu.SUCCESS&&(S({type:vu.DELETE_ALL_VALUES}),!w)){const e=await C(E.values[E.activeScope].version);S({type:vu.REFRESH_VALUES,formVersion:b.valuesVersion,values:e})}(null==(e=null==t?void 0:t.errors)?void 0:e.length)&&S({type:vu.SET_ERROR_MESSAGE,errorMessage:t.errors.map((e=>e.message))})},$=e=>{S({type:vu.CHANGE_ACTIVE_SCOPE,scope:e})},M=(null==(l=t.attribute)?void 0:l.readonly)||g||!I.permissions.edit_value;let V=[];!k.displayRecordIdentity&&(null==(u=null==k?void 0:k.columns)?void 0:u.length)||V.push({title:f("record_edition.whoAmI"),key:"whoAmI"}),V=[...V,...R.map((e=>({title:P(e.label,v),key:e.id})))];const F=V.map(((e,t)=>({title:e.title,dataIndex:e.key,render:(n,i)=>{var o;const a="whoAmI"===e.key?s.jsx(Vn,{record:n,size:ae.small}):j?s.jsx(sn,{title:!0,paragraph:!1,active:!0}):s.jsx("span",{children:"boolean"==typeof n?s.jsx(ci,{checked:n,disabled:!0}):String(n??"")}),l=s.jsxs(s.Fragment,{children:[!t&&(null==(o=I.versions_conf)?void 0:o.versionable)&&s.jsx(Pu,{activeScope:E.activeScope}),a]});return t===V.length-1?s.jsx(Lu,{record:i.whoAmI,onDelete:()=>(async e=>{if((await r({value:e.linkValue.id,id_value:e.id_value},I.id)).status!==pu.SUCCESS);else if(S({type:vu.DELETE_VALUE,idValue:e.id_value}),!w){const e=await C(E.values[E.activeScope].version);S({type:vu.REFRESH_VALUES,formVersion:b.valuesVersion,values:e})}})(i.value),value:i.value,attribute:I,isReadOnly:M,children:l}):l}}))),z=_.map((e=>{var t,n,r,i;return{key:e.id_value+(null==(t=e.linkValue)?void 0:t.id),value:e,whoAmI:null==(n=e.linkValue)?void 0:n.whoAmI,...(i=null==(r=e.linkValue)?void 0:r.id,R.reduce(((e,t)=>{var n;return e[t.id]=((null==(n=null==A?void 0:A[i])?void 0:n[t.id])??[]).map((e=>void 0!==e.value?e.value:(e=>void 0!==e.linkValue)(e)?e.linkValue.whoAmI.label??e.linkValue.id:(e=>void 0!==e.treeValue)(e)?e.treeValue.record.whoAmI.label??e.treeValue.record.id:"")).join(", "),e}),{}))}})),H=!M&&(I.multiple_values||!_.length),G={[fu.CURRENT]:(null==(d=E.values[fu.CURRENT])?void 0:d.version)??null,[fu.INHERITED]:(null==(p=E.values[fu.INHERITED])?void 0:p.version)??null};return s.jsxs(s.Fragment,{children:[E.isValuesAddVisible&&s.jsx(tu,{onClick:D}),s.jsxs(Pd,{isValuesAddVisible:E.isValuesAddVisible,$themeToken:m,children:[s.jsxs(Nd,{ellipsis:{rows:1,tooltip:!0},$themeToken:m,children:[t.settings.label,E.activeScope===fu.INHERITED&&s.jsx(ku,{version:E.values[fu.INHERITED].version})]}),s.jsx(zn,{columns:F,dataSource:z,size:"small",pagination:!1,locale:{emptyText:s.jsx(Tu,{canAddValue:H,onAddValue:N,linkField:!0})},"data-testid":"linked-field-values",footer:()=>{var e;return s.jsxs(Cu,{children:[s.jsxs("div",{children:[(null==(e=null==I?void 0:I.versions_conf)?void 0:e.versionable)&&s.jsx(Au,{versions:G,activeScope:E.activeScope,onScopeChange:$,basic:!0}),!M&&!!_.length&&s.jsx(Eu,{onDelete:L}),s.jsx(ju,{attribute:I,value:null,size:"small",basic:!0})]}),!!_.length&&H&&s.jsx(wu,{activeScope:E.activeScope,onClick:N,disabled:E.isValuesAddVisible,linkField:!0})]})},scroll:{y:280}}),E.isValuesAddVisible&&H&&s.jsx(Od,{onAdd:async e=>{var t;const r=e.map((e=>({attribute:I,idValue:null,value:e}))),i=await n(r,T);if(i.status===pu.ERROR)S({type:vu.SET_ERROR_MESSAGE,errorMessage:i.error});else if(i.values){const e=i.values.map((e=>({...e,version:B(e.version)})));S({type:vu.ADD_VALUES,values:e}),h&&O(r.map((e=>e.value.id)))}if(null==(t=null==i?void 0:i.errors)?void 0:t.length){const t=e.reduce(((e,t)=>({...e,[t.id]:t})),{}),n=i.errors.map((e=>`${t[e.input].label||t[e.input].id}: ${e.message}`));S({type:vu.SET_ERROR_MESSAGE,errorMessage:n})}else S({type:vu.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!1})},attribute:I,onClose:D})]}),E.errorMessage&&s.jsx(le,{placement:"bottomLeft",open:!!E.errorMessage,content:s.jsx(iu,{error:E.errorMessage,onClose:()=>{S({type:vu.CLEAR_ERROR_MESSAGE})}})})]})},[Hr.TREE]:function({element:t,onValueSubmit:n,onValueDelete:r,onDeleteMultipleValues:i}){var o,a,l,c,u;const{token:d}=Mr.useToken(),{state:p,dispatch:f}=Yc(),{readOnly:v,record:m}=Qc(),g=e.useContext(Jc),h=null===m,[b,y]=e.useReducer(bu,hu({element:t,formVersion:p.valuesVersion,isRecordReadOnly:v,record:m})),{fetchValues:x}=cu(null==(o=null==m?void 0:m.library)?void 0:o.id,b.attribute.id,null==m?void 0:m.id),w=b.attribute,E=(null==w?void 0:w.readonly)||v||!w.permissions.edit_value,S=uu(b),C=null==(a=b.values[b.activeScope])?void 0:a.version,I=S.map((e=>({...e,key:e.id_value})));e.useEffect((()=>{null===p.activeValue&&b.isValuesAddVisible&&j()}),[p.activeValue]),e.useEffect((()=>{g[w.id]&&y({type:vu.SET_ERROR_MESSAGE,errorMessage:g[w.id].message})}),[g,w.id]);const k=!E&&(w.multiple_values||!S.length),R=()=>{f({type:Gc.SET_ACTIVE_VALUE,value:{attribute:w,value:null}}),y({type:vu.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!0})},_={[fu.CURRENT]:(null==(l=b.values[fu.CURRENT])?void 0:l.version)??null,[fu.INHERITED]:(null==(c=b.values[fu.INHERITED])?void 0:c.version)??null},T=s.jsxs(Cu,{children:[s.jsxs("div",{children:[(null==(u=null==w?void 0:w.versions_conf)?void 0:u.versionable)&&s.jsx(Au,{versions:_,activeScope:b.activeScope,onScopeChange:e=>{y({type:vu.CHANGE_ACTIVE_SCOPE,scope:e})},basic:!0}),!E&&!!S.length&&s.jsx(Eu,{onDelete:async()=>{var e;const t=await i(w.id,S,C);if(t.status===pu.SUCCESS&&(y({type:vu.DELETE_ALL_VALUES}),!h)){const e=await x(b.values[b.activeScope].version);y({type:vu.REFRESH_VALUES,formVersion:p.valuesVersion,values:e})}(null==(e=null==t?void 0:t.errors)?void 0:e.length)&&y({type:vu.SET_ERROR_MESSAGE,errorMessage:t.errors.map((e=>e.message))})}}),s.jsx(ju,{attribute:w,value:null,size:"small",basic:!0})]}),!!S.length&&k&&s.jsx(wu,{activeScope:b.activeScope,onClick:R,disabled:b.isValuesAddVisible,linkField:!0})]}),j=()=>{y({type:vu.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!1}),f({type:Gc.SET_ACTIVE_VALUE,value:null})};return s.jsxs(s.Fragment,{children:[b.isValuesAddVisible&&s.jsx(tu,{onClick:j}),s.jsxs(hy,{isValuesAddVisible:b.isValuesAddVisible,themeToken:d,children:[s.jsxs(by,{ellipsis:{rows:1,tooltip:!0},children:[t.settings.label,b.activeScope===fu.INHERITED&&s.jsx(ku,{version:b.values[fu.INHERITED].version})]}),s.jsx(re,{dataSource:I,renderItem:e=>{var t;return s.jsxs(s.Fragment,{children:[(null==(t=w.versions_conf)?void 0:t.versionable)&&s.jsx(Pu,{activeScope:b.activeScope}),s.jsx(cy,{value:e,attribute:w,onDelete:async()=>{if((await r({id_value:e.id_value},w.id)).status!==pu.SUCCESS);else if(y({type:vu.DELETE_VALUE,idValue:e.id_value}),!h){const e=await x(b.values[b.activeScope].version);y({type:vu.REFRESH_VALUES,formVersion:p.valuesVersion,values:e})}},isReadOnly:E})]})},split:!0,locale:{emptyText:s.jsx(Tu,{canAddValue:k,onAddValue:R,linkField:!0})},footer:T}),b.isValuesAddVisible&&s.jsx(gy,{attribute:w,onAdd:async e=>{var t;const r=e.map((e=>({attribute:w,idValue:null,value:e}))),i=await n(r,C);if(i.status===pu.ERROR)y({type:vu.SET_ERROR_MESSAGE,errorMessage:i.error});else if(i.values){const e=i.values.map((e=>({...e,version:B(e.version)})));y({type:vu.ADD_VALUES,values:e})}if(null==(t=null==i?void 0:i.errors)?void 0:t.length){const t=e.reduce(((e,t)=>({...e,[t.id]:t})),{}),n=i.errors.map((e=>`${t[e.input].title||t[e.input].id}: ${e.message}`));y({type:vu.SET_ERROR_MESSAGE,errorMessage:n})}else y({type:vu.SET_IS_VALUES_ADD_VISIBLE,isValuesAddVisible:!1})},onClose:j})]}),b.errorMessage&&s.jsx(le,{placement:"bottomLeft",open:!!b.errorMessage,content:s.jsx(iu,{error:b.errorMessage,onClose:()=>{y({type:vu.CLEAR_ERROR_MESSAGE})}})})]})},[Dr.TABS]:function({element:e,...t}){const{lang:n}=wn(),r=e.settings.direction===Nr.VERTICAL?"left":"top",i=e.settings.tabs.map((r=>{const i={id:`${e.id}/${r.id}`,containerId:e.id,settings:{},attribute:null,type:Xt.layout,uiElement:yy[Dr.FIELDS_CONTAINER],uiElementType:Dr.FIELDS_CONTAINER,valueError:null,values:null};return{label:P(r.label,n),key:r.id,children:s.jsx(i.uiElement,{...t,element:i})}}));return s.jsx(Zc,{tabPosition:r,"data-testid":"form-tabs",items:i})},[Dr.TEXT_BLOCK]:function({element:e}){return s.jsx(ly,{children:e.settings.content})},[Dr.DIVIDER]:function({element:e}){const t=e.settings.title??null;return s.jsx(el,{children:t})}},xy=ai.div`
    position: relative;
    border: 1px solid ${xn.errorColor};
    margin-bottom: 1.5em;
    border-radius: ${e=>e.themeToken.borderRadius}px;

    label {
        font-size: 0.9em;
        background: transparent;
        text-shadow: 0px 0px 4px #fff;
        background: transparent;
        padding: 0 0.5em;
        color: ${xn.errorColor};
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        width: 100%;
    }
`,wy=ai.div`
    display: grid;
    grid-template-areas:
        'icon title'
        'icon message';
    grid-template-columns: 4rem 1fr;
`,Ey=ai.div`
    grid-area: icon;
    font-size: 1.5rem;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    color: ${xn.errorColor};
`,Sy=ai.div`
    grid-area: title;
    align-content: flex-end;
    font-size: 0.95rem;
    align-self: end;
`,Cy=ai.div`
    grid-area: message;
    color: ${xn.secondaryTextColor};
    font-size: 0.8rem;
    align-self: start;
`;function Iy({element:e}){const{t:t}=c(),{token:n}=Mr.useToken();return s.jsxs(xy,{themeToken:n,children:[s.jsx("label",{children:e.settings.label}),s.jsxs(wy,{children:[s.jsx(Ey,{children:s.jsx(Zi,{color:"yellow",size:48})}),s.jsx(Sy,{children:t("error.error_occurred")}),s.jsx(Cy,{children:e.valueError})]})]})}function ky({record:e,library:n,onValueSubmit:r,onValueDelete:i,onDeleteMultipleValues:o,readonly:a}){var l,u,d,p;const f=e?"edition":"creation",{t:v}=c(),{state:m}=Yc();!async function(e,t){const n=`records_consultation_${e}`,[r]=V(F);R(_,{skip:!e||!t,variables:{keys:[n]},onCompleted:async e=>{const i=e.userData.data[n]?[...e.userData.data[n]]:[],o=i.indexOf(t);-1!==o?i.splice(o,1):i.length>=10&&i.pop(),i.unshift(t),await r({variables:{key:n,value:i,global:!1}})}})}((null==(l=null==e?void 0:e.library)?void 0:l.id)??null,(null==e?void 0:e.id)??null);const{loading:g,error:h,recordForm:b}=(({libraryId:e,recordId:n,formId:r,version:i})=>{const[o,a]=t.useState(null),l=i?Pr(i).filter((e=>!!e.value)).map((({name:e,value:t})=>({treeId:e,treeNodeId:t.id}))):null,{loading:s,error:c}=R(Hc,{fetchPolicy:"network-only",variables:{libraryId:e,recordId:n,formId:r,version:l},onCompleted:e=>{const t={...e.recordForm,elements:e.recordForm.elements.map((e=>({...e,values:((null==e?void 0:e.values)??[]).map((e=>({...e,version:B(e.version??[])})))})))};a(t)}});return{loading:s||!o&&!c,error:c,recordForm:o}})({libraryId:n,recordId:null==e?void 0:e.id,formId:f,version:m.valuesVersion});if(g)return s.jsx(Xc,{rows:5});if(h){const e=Object.values((null==(p=null==(d=null==(u=h.graphQLErrors[0])?void 0:u.extensions)?void 0:d.exception)?void 0:p.fields)??{}).join("\n")??(null==h?void 0:h.message);return s.jsx(Y,{message:e??v("record_edition.no_form_error")})}const y=b.elements.reduce(((e,t)=>{void 0===e[t.containerId]&&(e[t.containerId]=[]);const n=t.valueError?Iy:yy[t.uiElementType];return e[t.containerId].push({...t,uiElement:n,settings:t.settings.reduce(((e,t)=>({...e,[t.key]:t.value})),{})}),e}),{});const x={id:Gr,containerId:null,type:Xt.layout,uiElementType:Dr.FIELDS_CONTAINER,settings:{},attribute:null,valueError:null,values:null,uiElement:yy[Dr.FIELDS_CONTAINER]};return s.jsx(Kc.Provider,{value:{elements:y,readOnly:a,record:e},children:s.jsx(x.uiElement,{element:x,onValueSubmit:r,onValueDelete:i,onDeleteMultipleValues:o})})}const Ry=mn`
    mutation DELETE_VALUE($library: ID!, $recordId: ID!, $attribute: ID!, $value: ValueInput) {
        deleteValue(library: $library, recordId: $recordId, attribute: $attribute, value: $value) {
            id_value
            attribute {
                id
                format
                type
                system
            }
        }
    }
`,_y=e=>`property({"attribute":"${e}"})`;const Ty=gn`
    ${E}
    ${zc}
    mutation SAVE_VALUE_BATCH(
        $library: ID!
        $recordId: ID!
        $version: [ValueVersionInput!]
        $values: [ValueBatchInput!]!
        $deleteEmpty: Boolean
    ) {
        saveValueBatch(
            library: $library
            recordId: $recordId
            version: $version
            values: $values
            deleteEmpty: $deleteEmpty
        ) {
            values {
                id_value
                modified_at
                modified_by {
                    ...RecordIdentity
                }
                created_at
                created_by {
                    ...RecordIdentity
                }
                version {
                    ...ValuesVersionDetails
                }
                attribute {
                    id
                    format
                    type
                    system
                }
                metadata {
                    name
                    value {
                        id_value
                        modified_at
                        modified_by {
                            ...RecordIdentity
                        }
                        created_at
                        created_by {
                            ...RecordIdentity
                        }
                        version {
                            ...ValuesVersionDetails
                        }
                        value
                        raw_value
                    }
                }

                ... on Value {
                    value
                    raw_value
                }

                ... on LinkValue {
                    linkValue: value {
                        ...RecordIdentity
                    }
                }

                ... on TreeValue {
                    treeValue: value {
                        id
                        record {
                            ...RecordIdentity
                        }

                        ancestors {
                            record {
                                ...RecordIdentity
                            }
                        }
                    }
                }
            }
            errors {
                type
                attribute
                input
                message
            }
        }
    }
`;function jy({items:e}){return s.jsx(Ka,{layout:"horizontal",column:1,children:e.map(((e,t)=>{const{title:n,value:r}=e;return s.jsx(Ka.Item,{label:n,style:{paddingBottom:"5px"},labelStyle:{fontWeight:"bold",width:"50%"},children:e.divider?s.jsx(el,{"data-testid":"divider"},t):r},t)}))})}function Ay(t,n){const[r,i]=e.useState(),o=R((e=>A`
    ${E}
    query GET_FILE_DATA($fileId: String!) {
        ${Fr(e).query}(
            filters: [{field: "id", value: $fileId, condition: EQUAL}])
        {
            list {
                ...RecordIdentity
                created_at
                created_by {
                    ...RecordIdentity
                }
                modified_at
                modified_by {
                    ...RecordIdentity
                }
                file_name
                file_path
                file_type
                library {
                    behavior
                }
                previews_status
            }
        }
    }`)(t),{fetchPolicy:"cache-and-network",skip:!n,variables:{fileId:n},onCompleted:e=>{var n,r,o;if(!(null==(r=null==(n=e[t])?void 0:n.list)?void 0:r.length))return void i(null);const a=null==(o=e[t])?void 0:o.list[0],l=(null==a?void 0:a.previews_status)?JSON.parse(a.previews_status):null,s={...a,previews_status:l,isPreviewsGenerationPending:!!l&&Object.keys(l).some((e=>{var t;return-1===(null==(t=l[e])?void 0:t.status)}))};i(s)}});return{error:o.error,loading:o.loading||!o.loading&&void 0===typeof r,fileData:r}}function Oy({fileData:t,fallback:n}){var r,i;const[o,a]=e.useState(!1);return!(null==(i=null==(r=null==t?void 0:t.whoAmI)?void 0:r.preview)?void 0:i.original)||o?n:s.jsx("audio",{controls:!0,src:t.whoAmI.preview.original,title:t.file_name,"data-testid":"audio-player",onError:()=>{a(!0)}})}const Py=ai(Kt)`
    && {
        position: absolute;
        right: 0.5rem;
        bottom: 0.5rem;
    }
`;function Ny({fileData:t,fallback:n}){var r,i;const o=e.useRef();if(!(null==(i=null==(r=null==t?void 0:t.whoAmI)?void 0:r.preview)?void 0:i.pdf))return n;return s.jsxs(s.Fragment,{children:[s.jsx(Py,{onClick:()=>{o.current.requestFullscreen()},icon:s.jsx(Ni,{}),shape:"circle"}),s.jsx("iframe",{"data-testid":"document-viewer",ref:o,src:`${t.whoAmI.preview.pdf}#toolbar=0`,width:"100%",height:"100%",allowFullScreen:!0})]})}const Dy=mn`
    mutation FORCE_PREVIEWS_GENERATION(
        $libraryId: ID!
        $filters: [RecordFilterInput!]
        $recordIds: [ID!]
        $failedOnly: Boolean
    ) {
        forcePreviewsGeneration(
            libraryId: $libraryId
            filters: $filters
            recordIds: $recordIds
            failedOnly: $failedOnly
        )
    }
`;function Ly({libraryId:t,recordIds:n,filters:r,onClose:i}){const{t:o}=c(),[a,l]=e.useState(!1),[u,{loading:d,data:p}]=V(Dy),f=me();return s.jsx(K,{open:!0,title:o("files.previews_generation_confirm"),cancelText:o("global.cancel"),okText:o("global.submit"),onCancel:i,width:600,onOk:async()=>{var e;try{const l=(null==(e=(await u({variables:{libraryId:t,recordIds:n,filters:r?wc(r):null,failedOnly:a}})).data)?void 0:e.forcePreviewsGeneration)??!1,s=o(l?"files.previews_generation_success":"files.previews_generation_nothing_to_do");f(ge({type:he.success,channel:be.passive,content:s})),i()}catch(l){}},confirmLoading:d,children:s.jsx(Mn,{onChange:()=>{l(!a)},checked:a,children:o("files.previews_generation_failed_only")})})}const $y=ai.div`
    position: relative;
    grid-area: sidebar;
    background: ${xn.secondaryBg};
    border-top-right-radius: 3px;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    flex-direction: column;
`,My=ai.div`
    overflow-x: auto;
    height: 2em;
    white-space: nowrap;
    background: ${xn.defaultBg};
    padding: 0.5em;
    line-height: 1em;
    width: 135px;
    font-family: monospace;
`,By=ai.div`
    padding: 0.5rem 1rem;
    border-top: 1px solid ${xn.borderColor};
    text-align: center;
`;function Vy({fileData:t}){const{t:n}=c(),[r,i]=e.useState(!1),o=[{title:n("record_summary.id"),value:t.id},{title:n("record_summary.label"),value:t.whoAmI.label},{title:n("record_summary.created_at"),value:n("record_summary.created_at_value",{date:t.created_at,user:t.created_by.whoAmI.label,interpolation:{escapeValue:!1}})},{title:n("record_summary.modified_at"),value:n("record_summary.modified_at_value",{date:t.modified_at,user:t.modified_by.whoAmI.label,interpolation:{escapeValue:!1}})},{title:n("file_data.path"),value:s.jsx(My,{children:"/"+t.file_path})}];return s.jsxs(s.Fragment,{children:[s.jsxs($y,{"data-testid":"sidebar-section",children:[s.jsx(Ka,{layout:"horizontal",column:1,style:{padding:"1rem"},children:o.map(((e,t)=>{const{title:n,value:r}=e;return s.jsx(Ka.Item,{label:n,style:{paddingBottom:"5px"},labelStyle:{fontWeight:"bold",width:"50%"},children:r},t)}))}),!t.isPreviewsGenerationPending&&s.jsx(By,{children:s.jsx(xu,{icon:s.jsx(Un,{}),onClick:()=>{i(!0)},children:n("files.generate_previews")})})]}),r&&s.jsx(Ly,{libraryId:t.whoAmI.library.id,recordIds:[t.id],onClose:()=>{i(!1)}})]})}var Fy,zy={},Hy={},Gy={get exports(){return Hy},set exports(e){Hy=e}},Uy={},Wy={};var qy=Yn,Yy=Xn;Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.default=void 0;var Xy=qy(Wn()),Ky=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Yy(e)&&"function"!=typeof e)return{default:e};var n=Jy(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e),Qy=qy((Fy||(Fy=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"}),Wy)),Zy=qy(qn());function Jy(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Jy=function(e){return e?n:t})(e)}var ex=function(e,t){return Ky.createElement(Zy.default,(0,Xy.default)((0,Xy.default)({},e),{},{ref:t,icon:Qy.default}))};ex.displayName="CloseOutlined";var tx=Ky.forwardRef(ex);Uy.default=tx,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=Uy)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(Gy,Hy);var nx,rx={},ix={get exports(){return rx},set exports(e){rx=e}},ox={},ax={};var lx=Yn,sx=Xn;Object.defineProperty(ox,"__esModule",{value:!0}),ox.default=void 0;var cx=lx(Wn()),ux=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==sx(e)&&"function"!=typeof e)return{default:e};var n=fx(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e),dx=lx((nx||(nx=1,Object.defineProperty(ax,"__esModule",{value:!0}),ax.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"}),ax)),px=lx(qn());function fx(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(fx=function(e){return e?n:t})(e)}var vx=function(e,t){return ux.createElement(px.default,(0,cx.default)((0,cx.default)({},e),{},{ref:t,icon:dx.default}))};vx.displayName="LeftOutlined";var mx=ux.forwardRef(vx);ox.default=mx,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=ox)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(ix,rx);var gx,hx={},bx={get exports(){return hx},set exports(e){hx=e}},yx={},xx={};var wx=Yn,Ex=Xn;Object.defineProperty(yx,"__esModule",{value:!0}),yx.default=void 0;var Sx=wx(Wn()),Cx=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Ex(e)&&"function"!=typeof e)return{default:e};var n=Rx(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e),Ix=wx((gx||(gx=1,Object.defineProperty(xx,"__esModule",{value:!0}),xx.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"}),xx)),kx=wx(qn());function Rx(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Rx=function(e){return e?n:t})(e)}var _x=function(e,t){return Cx.createElement(kx.default,(0,Sx.default)((0,Sx.default)({},e),{},{ref:t,icon:Ix.default}))};_x.displayName="RightOutlined";var Tx=Cx.forwardRef(_x);yx.default=Tx,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=yx)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(bx,hx);var jx,Ax={},Ox={get exports(){return Ax},set exports(e){Ax=e}},Px={},Nx={};var Dx=Yn,Lx=Xn;Object.defineProperty(Px,"__esModule",{value:!0}),Px.default=void 0;var $x=Dx(Wn()),Mx=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Lx(e)&&"function"!=typeof e)return{default:e};var n=Fx(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e),Bx=Dx((jx||(jx=1,Object.defineProperty(Nx,"__esModule",{value:!0}),Nx.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"}),Nx)),Vx=Dx(qn());function Fx(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Fx=function(e){return e?n:t})(e)}var zx=function(e,t){return Mx.createElement(Vx.default,(0,$x.default)((0,$x.default)({},e),{},{ref:t,icon:Bx.default}))};zx.displayName="RotateLeftOutlined";var Hx=Mx.forwardRef(zx);Px.default=Hx,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=Px)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(Ox,Ax);var Gx,Ux={},Wx={get exports(){return Ux},set exports(e){Ux=e}},qx={},Yx={};var Xx=Yn,Kx=Xn;Object.defineProperty(qx,"__esModule",{value:!0}),qx.default=void 0;var Qx=Xx(Wn()),Zx=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Kx(e)&&"function"!=typeof e)return{default:e};var n=tw(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e),Jx=Xx((Gx||(Gx=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"}),Yx)),ew=Xx(qn());function tw(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(tw=function(e){return e?n:t})(e)}var nw=function(e,t){return Zx.createElement(ew.default,(0,Qx.default)((0,Qx.default)({},e),{},{ref:t,icon:Jx.default}))};nw.displayName="RotateRightOutlined";var rw=Zx.forwardRef(nw);qx.default=rw,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=qx)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(Wx,Ux);var iw,ow={},aw={get exports(){return ow},set exports(e){ow=e}},lw={},sw={};var cw=Yn,uw=Xn;Object.defineProperty(lw,"__esModule",{value:!0}),lw.default=void 0;var dw=cw(Wn()),pw=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==uw(e)&&"function"!=typeof e)return{default:e};var n=mw(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e),fw=cw((iw||(iw=1,Object.defineProperty(sw,"__esModule",{value:!0}),sw.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"}),sw)),vw=cw(qn());function mw(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(mw=function(e){return e?n:t})(e)}var gw=function(e,t){return pw.createElement(vw.default,(0,dw.default)((0,dw.default)({},e),{},{ref:t,icon:fw.default}))};gw.displayName="ZoomInOutlined";var hw=pw.forwardRef(gw);lw.default=hw,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=lw)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(aw,ow);var bw,yw={},xw={get exports(){return yw},set exports(e){yw=e}},ww={},Ew={};var Sw=Yn,Cw=Xn;Object.defineProperty(ww,"__esModule",{value:!0}),ww.default=void 0;var Iw=Sw(Wn()),kw=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Cw(e)&&"function"!=typeof e)return{default:e};var n=Tw(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e),Rw=Sw((bw||(bw=1,Object.defineProperty(Ew,"__esModule",{value:!0}),Ew.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"}),Ew)),_w=Sw(qn());function Tw(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Tw=function(e){return e?n:t})(e)}var jw=function(e,t){return kw.createElement(_w.default,(0,Iw.default)((0,Iw.default)({},e),{},{ref:t,icon:Rw.default}))};jw.displayName="ZoomOutOutlined";var Aw=kw.forwardRef(jw);ww.default=Aw,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=ww)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(xw,yw);const Ow=u(us);var Pw={},Nw={};Object.defineProperty(Nw,"__esModule",{value:!0}),Nw.genModalMaskStyle=Nw.default=void 0;var Dw=Kn,Lw=Rn(),$w=_n();function Mw(e){return{position:e,top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0}}const Bw=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}${e.antCls}-zoom-enter, ${t}${e.antCls}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}-mask`]:Object.assign(Object.assign({},Mw("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},Mw("fixed")),{overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${t}-root`]:(0,Dw.initFadeMotion)(e)}]};Nw.genModalMaskStyle=Bw;const Vw=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap`]:{zIndex:e.zIndexPopupBase,position:"fixed",inset:0,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"},[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax})`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${e.marginXS} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},(0,$w.resetComponent)(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${2*e.margin}px)`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.modalHeadingColor,fontWeight:e.fontWeightStrong,fontSize:e.modalHeaderTitleFontSize,lineHeight:e.modalHeaderTitleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.modalContentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`},[`${t}-close`]:Object.assign({position:"absolute",top:(e.modalHeaderCloseSize-e.modalCloseBtnSize)/2,insetInlineEnd:(e.modalHeaderCloseSize-e.modalCloseBtnSize)/2,zIndex:e.zIndexPopupBase+10,padding:0,color:e.modalCloseColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalConfirmIconSize,height:e.modalConfirmIconSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"block",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:`${e.modalCloseBtnSize}px`,textAlign:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:e.modalIconHoverColor,backgroundColor:e.wireframe?"transparent":e.colorFillContent,textDecoration:"none"},"&:active":{backgroundColor:e.wireframe?"transparent":e.colorFillContentHover}},(0,$w.genFocusStyle)(e)),[`${t}-header`]:{color:e.colorText,background:e.modalHeaderBg,borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`,marginBottom:e.marginXS},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word"},[`${t}-footer`]:{textAlign:"end",background:e.modalFooterBg,marginTop:e.marginSM,[`${e.antCls}-btn + ${e.antCls}-btn:not(${e.antCls}-dropdown-trigger)`]:{marginBottom:0,marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,\n          ${t}-body,\n          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},Fw=e=>{const{componentCls:t}=e,n=`${t}-confirm`;return{[n]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${n}-body-wrapper`]:Object.assign({},(0,$w.clearFix)()),[`${n}-body`]:{display:"flex",flexWrap:"wrap",alignItems:"center",[`${n}-title`]:{flex:"0 0 100%",display:"block",overflow:"hidden",color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.modalHeaderTitleFontSize,lineHeight:e.modalHeaderTitleLineHeight,[`+ ${n}-content`]:{marginBlockStart:e.marginXS,flexBasis:"100%",maxWidth:`calc(100% - ${e.modalConfirmIconSize+e.marginSM}px)`}},[`${n}-content`]:{color:e.colorText,fontSize:e.fontSize},[`> ${e.iconCls}`]:{flex:"none",marginInlineEnd:e.marginSM,fontSize:e.modalConfirmIconSize,[`+ ${n}-title`]:{flex:1},[`+ ${n}-title + ${n}-content`]:{marginInlineStart:e.modalConfirmIconSize+e.marginSM}}},[`${n}-btns`]:{textAlign:"end",marginTop:e.marginSM,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${n}-error ${n}-body > ${e.iconCls}`]:{color:e.colorError},[`${n}-warning ${n}-body > ${e.iconCls},\n        ${n}-confirm ${n}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${n}-info ${n}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${n}-success ${n}-body > ${e.iconCls}`]:{color:e.colorSuccess},[`${t}-zoom-leave ${t}-btns`]:{pointerEvents:"none"}}},zw=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},Hw=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-confirm`;return{[t]:{[`${t}-content`]:{padding:0},[`${t}-header`]:{padding:e.modalHeaderPadding,borderBottom:`${e.modalHeaderBorderWidth}px ${e.modalHeaderBorderStyle} ${e.modalHeaderBorderColorSplit}`,marginBottom:0},[`${t}-body`]:{padding:e.modalBodyPadding},[`${t}-footer`]:{padding:`${e.modalFooterPaddingVertical}px ${e.modalFooterPaddingHorizontal}px`,borderTop:`${e.modalFooterBorderWidth}px ${e.modalFooterBorderStyle} ${e.modalFooterBorderColorSplit}`,borderRadius:`0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px`,marginTop:0}},[r]:{[`${n}-modal-body`]:{padding:`${2*e.padding}px ${2*e.padding}px ${e.paddingLG}px`},[`${r}-body`]:{[`> ${e.iconCls}`]:{marginInlineEnd:e.margin,[`+ ${r}-title + ${r}-content`]:{marginInlineStart:e.modalConfirmIconSize+e.margin}}},[`${r}-btns`]:{marginTop:e.marginLG}}}};var Gw=(0,Lw.genComponentStyleHook)("Modal",(e=>{const t=e.padding,n=e.fontSizeHeading5,r=e.lineHeightHeading5,i=(0,Lw.mergeToken)(e,{modalBodyPadding:e.paddingLG,modalHeaderBg:e.colorBgElevated,modalHeaderPadding:`${t}px ${e.paddingLG}px`,modalHeaderBorderWidth:e.lineWidth,modalHeaderBorderStyle:e.lineType,modalHeaderTitleLineHeight:r,modalHeaderTitleFontSize:n,modalHeaderBorderColorSplit:e.colorSplit,modalHeaderCloseSize:r*n+2*t,modalContentBg:e.colorBgElevated,modalHeadingColor:e.colorTextHeading,modalCloseColor:e.colorTextDescription,modalFooterBg:"transparent",modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterPaddingVertical:e.paddingXS,modalFooterPaddingHorizontal:e.padding,modalFooterBorderWidth:e.lineWidth,modalConfirmTitleFontSize:e.fontSizeLG,modalIconHoverColor:e.colorIconHover,modalConfirmIconSize:e.fontSize*e.lineHeight,modalCloseBtnSize:.55*e.controlHeightLG});return[Vw(i),Fw(i),zw(i),Bw(i),e.wireframe&&Hw(i),(0,Dw.initZoomMotion)(i,"zoom")]}));Nw.default=Gw,Object.defineProperty(Pw,"__esModule",{value:!0}),Pw.genPreviewSwitchStyle=Pw.genPreviewOperationsStyle=Pw.genImagePreviewStyle=Pw.genImageMaskStyle=Pw.genBoxStyle=Pw.default=void 0;var Uw=Qn,Ww=Nw,qw=Kn,Yw=Rn(),Xw=_n();const Kw=e=>({position:e||"absolute",inset:0});Pw.genBoxStyle=Kw;const Qw=e=>{const{iconCls:t,motionDurationSlow:n,paddingXXS:r,marginXXS:i,prefixCls:o}=e;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",background:new Uw.TinyColor("#000").setAlpha(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${n}`,[`.${o}-mask-info`]:Object.assign(Object.assign({},Xw.textEllipsis),{padding:`0 ${r}px`,[t]:{marginInlineEnd:i,svg:{verticalAlign:"baseline"}}})}};Pw.genImageMaskStyle=Qw;const Zw=e=>{const{previewCls:t,modalMaskBg:n,paddingSM:r,imagePreviewOperationDisabledColor:i,motionDurationSlow:o}=e,a=new Uw.TinyColor(n).setAlpha(.1),l=a.clone().setAlpha(.2);return{[`${t}-operations`]:Object.assign(Object.assign({},(0,Xw.resetComponent)(e)),{display:"flex",flexDirection:"row-reverse",alignItems:"center",color:e.imagePreviewOperationColor,listStyle:"none",background:a.toRgbString(),pointerEvents:"auto","&-operation":{marginInlineStart:r,padding:r,cursor:"pointer",transition:`all ${o}`,"&:hover":{background:l.toRgbString()},"&-disabled":{color:i,pointerEvents:"none"},"&:last-of-type":{marginInlineStart:0}},"&-progress":{position:"absolute",left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%)"},"&-icon":{fontSize:e.imagePreviewOperationSize}})}};Pw.genPreviewOperationsStyle=Zw;const Jw=e=>{const{modalMaskBg:t,iconCls:n,imagePreviewOperationDisabledColor:r,previewCls:i,zIndexPopup:o,motionDurationSlow:a}=e,l=new Uw.TinyColor(t).setAlpha(.1),s=l.clone().setAlpha(.2);return{[`${i}-switch-left, ${i}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:o+1,display:"flex",alignItems:"center",justifyContent:"center",width:e.imagePreviewSwitchSize,height:e.imagePreviewSwitchSize,marginTop:-e.imagePreviewSwitchSize/2,color:e.imagePreviewOperationColor,background:l.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${a}`,pointerEvents:"auto","&:hover":{background:s.toRgbString()},"&-disabled":{"&, &:hover":{color:r,background:"transparent",cursor:"not-allowed",[`> ${n}`]:{cursor:"not-allowed"}}},[`> ${n}`]:{fontSize:e.imagePreviewOperationSize}},[`${i}-switch-left`]:{insetInlineStart:e.marginSM},[`${i}-switch-right`]:{insetInlineEnd:e.marginSM}}};Pw.genPreviewSwitchStyle=Jw;const eE=e=>{const{motionEaseOut:t,previewCls:n,motionDurationSlow:r,componentCls:i}=e;return[{[`${i}-preview-root`]:{[n]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${n}-body`]:Object.assign(Object.assign({},Kw()),{overflow:"hidden"}),[`${n}-img`]:{maxWidth:"100%",maxHeight:"100%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${r} ${t} 0s`,userSelect:"none",pointerEvents:"auto","&-wrapper":Object.assign(Object.assign({},Kw()),{transition:`transform ${r} ${t} 0s`,display:"flex",justifyContent:"center",alignItems:"center","&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${n}-moving`]:{[`${n}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${i}-preview-root`]:{[`${n}-wrap`]:{zIndex:e.zIndexPopup}}},{[`${i}-preview-operations-wrapper`]:{position:"fixed",insetBlockStart:0,insetInlineEnd:0,zIndex:e.zIndexPopup+1,width:"100%"},"&":[Zw(e),Jw(e)]}]};Pw.genImagePreviewStyle=eE;const tE=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-mask`]:Object.assign({},Qw(e)),[`${t}-mask:hover`]:{opacity:1},[`${t}-placeholder`]:Object.assign({},Kw())}}},nE=e=>{const{previewCls:t}=e;return{[`${t}-root`]:(0,qw.initZoomMotion)(e,"zoom"),"&":(0,qw.initFadeMotion)(e,!0)}};var rE=(0,Yw.genComponentStyleHook)("Image",(e=>{const t=new Uw.TinyColor(e.colorTextLightSolid),n=`${e.componentCls}-preview`,r=(0,Yw.mergeToken)(e,{previewCls:n,imagePreviewOperationColor:t.toRgbString(),imagePreviewOperationDisabledColor:new Uw.TinyColor(t).setAlpha(.25).toRgbString(),modalMaskBg:new Uw.TinyColor("#000").setAlpha(.45).toRgbString(),imagePreviewOperationSize:1.5*e.fontSizeIcon,imagePreviewSwitchSize:e.controlHeightLG});return[tE(r),eE(r),(0,Ww.genModalMaskStyle)((0,Yw.mergeToken)(r,{componentCls:n})),nE(r)]}),(e=>({zIndexPopup:e.zIndexPopupBase+80})));Pw.default=rE;var iE=jn.default,oE=An.default;Object.defineProperty(zy,"__esModule",{value:!0});var aE=zy.icons=zy.default=void 0,lE=oE(Hy),sE=oE(rx),cE=oE(hx),uE=oE(Ax),dE=oE(Ux),pE=oE(ow),fE=oE(yw),vE=oE(Ow),mE=iE(e),gE=Nn,hE=Zn,bE=oE(Pw);const yE={rotateLeft:mE.createElement(uE.default,null),rotateRight:mE.createElement(dE.default,null),zoomIn:mE.createElement(pE.default,null),zoomOut:mE.createElement(fE.default,null),close:mE.createElement(lE.default,null),left:mE.createElement(sE.default,null),right:mE.createElement(cE.default,null)};aE=zy.icons=yE;var xE=e=>{var{previewPrefixCls:t,preview:n}=e,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["previewPrefixCls","preview"]);const{getPrefixCls:i}=mE.useContext(gE.ConfigContext),o=i("image",t),a=`${o}-preview`,l=i(),[s,c]=(0,bE.default)(o),u=mE.useMemo((()=>{if(!1===n)return n;const e="object"==typeof n?n:{};return Object.assign(Object.assign({},e),{transitionName:(0,hE.getTransitionName)(l,"zoom",e.transitionName),maskTransitionName:(0,hE.getTransitionName)(l,"fade",e.maskTransitionName),rootClassName:c})}),[n]);return s(mE.createElement(vE.default.PreviewGroup,Object.assign({preview:u,previewPrefixCls:a,icons:yE},r)))};zy.default=xE;const wE=()=>{var e;const{currentApp:t}=ye();return(null==(e=null==t?void 0:t.settings)?void 0:e.showTransparency)??!1},EE=ai(Cs)`
    display: ${e=>e.$loaded?"block":"none"};
`;function SE({fileData:t,fallback:n}){var r;const i=null==(r=null==t?void 0:t.whoAmI)?void 0:r.preview,[o,a]=e.useState(!1),[l,c]=e.useState(!1),u=wE();if(!(null==i?void 0:i.huge)||l)return n;return s.jsxs(s.Fragment,{children:[!o&&s.jsx(Jn,{style:{height:"50%",width:"50%"}}),s.jsx(EE,{$loaded:o,src:i.huge,onLoad:()=>{a(!0)},onError:()=>{a(!0),c(!0)},style:{background:u?xn.checkerBoard:xn.imageDefaultBackground},preview:{icons:{...aE,rotateLeft:!1,rotateRight:!1}}})]})}const CE=ai.div`
    width: 80%;
    height: 80%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border-radius: ${e=>e.themeToken.borderRadius}px;
`,IE=ai.div`
    font-size: ${e=>e.isDirectory?"4em":"7em"};
`,kE=ai(En)`
    font-size: 1.2em;
`;function RE({fileData:e,noPreviewMessage:t=!1}){const{t:n}=c(),r=e.file_name.split(".").pop().toUpperCase(),i=e.whoAmI.color||xe(e.whoAmI.label),o=we(i),a="directories"===e.library.behavior,{token:l}=Mr.useToken();let u;return e.isPreviewsGenerationPending?u=s.jsxs(s.Fragment,{children:[s.jsx(Ee,{}),n("file_data.previews_generation_pending")]}):t&&(u=s.jsxs(s.Fragment,{children:[s.jsx(Se,{}),n("file_data.no_preview")]})),s.jsxs(CE,{style:{backgroundColor:i,color:o},themeToken:l,children:[s.jsx(IE,{isDirectory:a,children:a?s.jsxs(En,{children:[s.jsx(er,{}),n("file_data.directory")]}):r}),u&&s.jsx(kE,{children:u})]})}const _E=ai.video`
    max-height: 100%;
    max-width: 100%;
`;function TE({fileData:t,fallback:n}){var r,i;const[o,a]=e.useState(!1);return!(null==(i=null==(r=null==t?void 0:t.whoAmI)?void 0:r.preview)?void 0:i.original)||o?n:s.jsx(_E,{controls:!0,src:t.whoAmI.preview.original,title:t.file_name,"data-testid":"video-player",onError:()=>{a(!0)}})}const jE=ai.div`
    height: calc(100vh - 12rem);
    display: grid;
    grid-template-columns: minmax(0, ${900}px) ${300}px;
    grid-template-rows: 5rem auto;
    grid-template-areas:
        'title title'
        'content sidebar';
    overflow: hidden;
    grid-gutter: 0;
`,AE=ai.div`
    grid-area: title;
    align-self: center;
    font-size: 1rem;
    padding: 1rem;
    border-bottom: 1px solid ${xn.borderColor};
`,OE=ai.div`
    position: relative;
    height: calc(100vh - 17rem);
    grid-area: content;
    overflow-x: hidden;
    overflow-y: scroll;
    padding: 1rem;
    display: flex;
    align-content: center;
    justify-content: center;
    align-items: center;
    justify-items: center;

    .ant-image {
        max-height: calc(100vh - 19rem);
        border: 1px solid ${xn.borderLightColor};

        height: fit-content;
        img {
            max-height: calc(100vh - 19rem);
        }
    }
`;function PE({fileData:e}){let t;const n={fileData:e,fallback:s.jsx(RE,{fileData:e,noPreviewMessage:!0,fallback:null})};switch(e.file_type){case"image":t=s.jsx(SE,{...n});break;case"video":t=s.jsx(TE,{...n});break;case"audio":t=s.jsx(Oy,{...n});break;case"document":t=s.jsx(Ny,{...n});break;default:t=s.jsx(RE,{fileData:e,fallback:null})}return s.jsxs(jE,{children:[s.jsx(AE,{"data-testid":"title-section",children:s.jsx(Vn,{record:e.whoAmI,size:ae.small})}),s.jsx(OE,{"data-testid":"content-section",children:t}),s.jsx(Vy,{fileData:e})]})}const NE=ai(K)`
    .ant-modal-close {
        top: 0;
        right: 0;
        width: 4rem;
        height: 4rem;
        line-height: 4rem;
    }

    && .ant-modal-content {
        padding: 0;
    }
`,DE=ai.div`
    padding: 0.5rem 1rem;
`;function LE({fileId:e,libraryId:t,open:n,onClose:r}){const{t:i}=c(),{loading:o,error:a,fileData:l}=Ay(t,e),u=[s.jsx(Kt,{"aria-label":i("global.close"),onClick:r,children:i("global.close")},"close")],d=s.jsx(DE,{children:u});return s.jsxs(NE,{open:n,destroyOnClose:!0,okText:i("global.close"),onCancel:r,width:"90vw",centered:!0,style:{padding:0,maxWidth:"1200px"},bodyStyle:{height:"calc(100vh - 12rem)",overflowY:"auto",padding:0},footer:d,children:[o&&s.jsx(te,{}),!o&&(a||!l)&&s.jsx(Y,{message:(null==a?void 0:a.message)??i("global.element_not_found")}),!o&&!a&&l&&s.jsx(PE,{fileData:l})]})}const $E=ai.div`
    position: relative;
    cursor: pointer;
    width: fit-content;
    height: fit-content;
    margin: auto;
`,ME=ai.div`
    background: ${xn.secondaryBg}99; // Hexadecimal color + opacity
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: none;
    justify-content: center;
    align-items: center;
    font-size: 2em;

    ${$E}:hover & {
        display: flex;
    }
`;function BE({previewFile:t,imageStyle:n,...r}){var i;const[o,a]=e.useState(!1),l=null==t?void 0:t.id,c=null==(i=null==t?void 0:t.library)?void 0:i.id,u=wE();return s.jsxs(s.Fragment,{children:[s.jsxs($E,{onClick:()=>{a(!0)},"data-testid":"click-handler",children:[s.jsx(tr,{imageStyle:{background:u?xn.checkerBoard:"transparent",...n},...r}),s.jsx(ME,{children:s.jsx(_r,{})})]}),o&&s.jsx(LE,{open:o,fileId:l,libraryId:c,onClose:()=>a(!1)})]})}const VE=ai(En)`
    padding: 1em;
    display: flex;
`;function FE({record:e}){var t,n,r,i,o,a,l,u,d,p,f,v,m,g,h;const b=null==(t=null==e?void 0:e.preview)?void 0:t.medium,y=null==(n=null==e?void 0:e.preview)?void 0:n.file,{token:x}=Mr.useToken(),{t:w}=c(),{lang:E}=wn(),{loading:S,error:C,data:I}=au(null==(r=null==e?void 0:e.library)?void 0:r.gqlNames.query,["created_at","created_by","modified_at","modified_by"],[null==e?void 0:e.id]);if(S)return s.jsx(te,{});if(C)return s.jsx(Y,{message:C.message});const k=null==I?void 0:I[null==e?void 0:e.id],R=[{title:w("record_summary.label"),value:null==e?void 0:e.label},{title:w("record_summary.id"),value:null==e?void 0:e.id},{title:w("record_summary.library"),value:P(null==e?void 0:e.library.label,E)}];return k&&((null==(i=k.created_at)?void 0:i[0])&&R.push({title:w("record_summary.created_at"),value:w("record_summary.created_at_value",{date:(null==(o=null==k?void 0:k.created_at)?void 0:o[0]).value,user:null==(d=null==(u=null==(l=null==(a=null==k?void 0:k.created_by)?void 0:a[0])?void 0:l.linkValue)?void 0:u.whoAmI)?void 0:d.label,interpolation:{escapeValue:!1}})}),(null==(p=k.modified_at)?void 0:p[0])&&R.push({title:w("record_summary.modified_at"),value:w("record_summary.modified_at_value",{date:(null==(f=null==k?void 0:k.modified_at)?void 0:f[0]).value,user:null==(h=null==(g=null==(m=null==(v=null==k?void 0:k.modified_by)?void 0:v[0])?void 0:m.linkValue)?void 0:g.whoAmI)?void 0:h.label,interpolation:{escapeValue:!1}})})),s.jsxs(VE,{direction:"vertical",children:[s.jsx(BE,{label:(null==e?void 0:e.label)??(null==e?void 0:e.id),color:null==e?void 0:e.color,image:b&&Ce(b),tile:!0,size:ae.medium,style:{borderRadius:x.borderRadius},previewFile:y,imageStyle:{borderRadius:x.borderRadius}}),s.jsx(jy,{items:R})]})}const zE=ai($a)`
    &&& {
        margin: 1rem;
        background: none;

        .ant-collapse-header {
            justify-content: flex-end;
        }

        .ant-collapse-content {
            background: ${xn.defaultBg};
            border: 1px solid ${xn.borderColor};
            border-radius: ${e=>e.themeToken.borderRadius}px;
        }
    }
`;function HE({attribute:e}){const{t:t}=c(),{token:n}=Mr.useToken(),r=[{title:t("record_edition.attribute.id"),value:e.id},{title:t("record_edition.attribute.type"),value:t(`record_edition.attribute.type_${e.type}`)}];return W(e.type)&&r.push({title:t("record_edition.attribute.format"),value:e.format?t(`record_edition.attribute.format_${e.format}`):null}),s.jsx(zE,{destroyInactivePanel:!0,bordered:!1,ghost:!0,themeToken:n,children:s.jsx($a.Panel,{header:t("record_edition.attribute_details_section"),children:s.jsx(jy,{items:r})},"attribute")})}const GE=ai(Cn)`
    && {
        border: 1px solid ${xn.borderColor};
    }
`;function UE({value:e,attribute:t}){const{lang:n}=wn(),r=e.treeValue.ancestors??[],i={checkable:!1,selectable:!1},o=[...r].reverse().reduce(((e,t)=>[{...i,title:t.record.whoAmI.label,key:t.record.id,children:e??[]}]),[]),a=[{...i,title:P(t.linked_tree.label,n),key:t.linked_tree.id,children:o}];return s.jsx(GE,{showIcon:!1,treeData:a,defaultExpandAll:!0},e.id_value)}const WE=ai.div`
    padding: 1rem;
`,qE=ai.div`
    background: ${xn.activeColor};
    padding: 0px 15px;
    border-radius: 1em;
    width: fit-content;
`,YE=ai.div`
    margin-bottom: 1rem;
    display: flex;
    gap: 1rem;
`;function XE(){var e,t,n;const{t:r}=c(),{state:i}=Yc(),{value:o,attribute:a}=i.activeValue,l=(null==o?void 0:o.modified_at)?[{title:W(a.type)?r("record_edition.created_at"):r("record_edition.link_created_at"),value:`${new Date(1e3*o.created_at).toLocaleString()} ${(null==o?void 0:o.created_by)?` ${r("record_edition.by")} ${o.created_by.whoAmI.label}`:""}`},{title:r("record_edition.modified_at"),value:`${new Date(1e3*o.modified_at).toLocaleString()} ${(null==o?void 0:o.modified_by)?` ${r("record_edition.by")} ${o.modified_by.whoAmI.label}`:""}`}]:[];(null==o?void 0:o.version)&&l.push({title:r("values_version.version"),value:G(o.version)});const u=W(a.type)&&a.format===Ft.text&&!!i.activeValue.value;if(!l.length&&!u)return null;const d=u?String(i.activeValue.editingValue).length:null,p=W(a.type)?r("record_edition.value_details"):r("record_edition.link_details"),f=W(a.type)?null:w(a.type)?null==(e=null==o?void 0:o.linkValue)?void 0:e.whoAmI:null==(n=null==(t=null==o?void 0:o.treeValue)?void 0:t.record)?void 0:n.whoAmI;return s.jsxs(WE,{children:[s.jsxs(YE,{children:[p,":",u&&s.jsx(qE,{children:r("record_edition.value_length",{length:d})})]}),f&&s.jsx(Vn,{record:f,size:ae.big,tile:!0,style:{marginBottom:"1rem"}}),s.jsx(jy,{items:l})]})}const KE={[Ft.text]:Hr.TEXT_INPUT,[Ft.numeric]:Hr.TEXT_INPUT,[Ft.date]:Hr.DATE,[Ft.boolean]:Hr.CHECKBOX,[Ft.date_range]:Hr.DATE,[Ft.encrypted]:Hr.TEXT_INPUT,[Ft.extended]:Hr.TEXT_INPUT};function QE({value:e,attribute:t,onMetadataSubmit:n}){const{lang:r}=wn(),i=r=>i=>n(e,t,{[r.id]:i[0].value}),o=r=>i=>n(e,t,{[r.id]:null});return s.jsx(En,{direction:"vertical",style:{width:"100%"},size:"small",children:t.metadata_fields.map((t=>{var n,a;const l={id:t.id,attribute:t,containerId:"__root",type:Xt.field,uiElementType:KE[t.format],valueError:null,values:[null==(a=null==(n=null==e?void 0:e.metadata)?void 0:n.find((({name:e})=>e===t.id)))?void 0:a.value],settings:{label:Ur(t.label,r)},uiElement:yy[KE[t.format]]};return s.jsx(tp,{element:l,onValueSubmit:i(t),onValueDelete:o(t),onDeleteMultipleValues:null,metadataEdit:!0},`${t.id}_${null==e?void 0:e.id_value}`)}))})}const ZE=ai.div`
    padding: 1rem;

    .attribute-label {
        font-weight: bold;
    }
`,JE=ai.div`
    color: rgba(0, 0, 0, 0.5);
    padding: 0 1rem;
`,eS=ai(kr)`
    cursor: pointer;
    position: absolute;
    right: 1em;
    top: 1em;
`,{Panel:tS}=$a;function nS({attribute:e,value:t,onMetadataSubmit:n}){const{lang:r}=wn(),{t:i}=c(),{state:o,dispatch:a}=Yc(),l=((null==e?void 0:e.metadata_fields)??[]).filter((e=>e.permissions.access_attribute)).length>0&&null!==t;return s.jsxs(s.Fragment,{children:[s.jsx(eS,{onClick:()=>a({type:Gc.SET_ACTIVE_VALUE,value:null})}),s.jsxs(ZE,{children:[i("record_edition.attribute.info_title"),":",s.jsx("span",{className:"attribute-label",children:P(e.label,r)})]}),s.jsx(JE,{children:P(e.description,r)}),s.jsx(HE,{attribute:e}),s.jsx(el,{style:{margin:".5em 0"}}),s.jsx(XE,{}),s.jsxs($a,{bordered:!1,defaultActiveKey:["value","metadata"],style:{background:"none"},destroyInactivePanel:!0,children:[l&&s.jsx(tS,{header:W(e.type)?i("record_edition.metadata_section"):i("record_edition.metadata_section_link"),children:s.jsx(QE,{value:t,attribute:e,onMetadataSubmit:n})},"metadata"),e.type===zt.tree&&t&&s.jsx(tS,{header:i("record_edition.path_section"),children:s.jsx(UE,{value:t,attribute:e})},"path")]})]})}const rS=mn`
    query GET_VERSIONABLE_ATTRIBUTES_BY_LIBRARY($libraryId: String!) {
        attributes(filters: {libraries: [$libraryId], versionable: true}) {
            list {
                id
                versions_conf {
                    versionable
                    profile {
                        id
                        trees {
                            id
                            label
                        }
                    }
                }
            }
        }
    }
`,iS=e=>{var t,n;const{loading:r,error:i,data:o}=R(rS,{variables:{libraryId:e}});let a=[];if(((null==(t=null==o?void 0:o.attributes)?void 0:t.list)??[]).length){const e=((null==(n=null==o?void 0:o.attributes)?void 0:n.list)??[]).reduce(((e,t)=>{var n;const r=null==(n=t.versions_conf)?void 0:n.profile;for(const i of(null==r?void 0:r.trees)??[])e[i.id]=i;return e}),{});a=Object.values(e)}return{loading:r,error:i,trees:a}};function oS({tree:t,selectedNodeKey:n,onSubmit:r,visible:i,onClose:o,canSelectRoot:a=!1}){const{t:l}=c(),[u,d]=e.useState({id:n,key:n,title:"",children:[]}),p=()=>{o()};return s.jsx(K,{open:i,onCancel:p,title:l("tree-node-selection.title"),width:"70rem",bodyStyle:{maxHeight:"80vh",overflowY:"auto"},centered:!0,footer:[s.jsx(Kt,{onClick:p,children:l("global.cancel")},"cancel"),s.jsx(Kt,{type:"primary",onClick:()=>{r(u),o()},children:l("global.apply")},"add")],destroyOnClose:!0,children:s.jsx(Mu,{tree:t,onSelect:(e,t)=>{d(t?e:void 0)},selectedNode:null==u?void 0:u.key,canSelectRoot:a})})}const aS=ai.div`
    background: ${xn.lightBg};
    padding: 1rem;
    border-radius: 3px;
    margin-bottom: 8px;
    border: 2px solid transparent;
`,lS=ai(En)`
    font-weight: bold;
    font-size: 1em;
`,sS=ai(Kt)`
    && {
        width: 100%;
        margin-top: 0.5rem;
        padding: 0.5rem;
        background: ${xn.defaultBg};
        border: 1px solid ${xn.borderColor};
        border-radius: ${e=>e.$themeToken.borderRadius}px;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        color: ${e=>e.$hasSelection?xn.defaultTextColor:xn.secondaryTextColor};
        align-items: center;
    }
`,cS=ai(tn)`
    && {
        cursor: pointer;
        color: ${xn.secondaryTextColor};
        font-size: 0.8em;
        display: none;

        ${sS}:hover & {
            display: block;
        }
    }
`;function uS({tree:e,selectedNode:n,readOnly:r,onNodeChange:i}){const{lang:o}=wn(),{t:a}=c(),{token:l}=Mr.useToken(),[u,d]=t.useState(!1),p=Ur(e.label,o),f=!!n;return s.jsxs(s.Fragment,{children:[s.jsxs(aS,{children:[s.jsxs(lS,{children:[s.jsx(Ie,{}),p]}),s.jsxs(sS,{disabled:r,onClick:()=>{d(!0)},$hasSelection:f,$themeToken:l,children:[(null==n?void 0:n.title)||a("values_version.select_version")+"...",f&&s.jsx(cS,{onClick:e=>{e.stopPropagation(),i(null)}})]})]}),u&&s.jsx(oS,{tree:e,onClose:()=>{d(!1)},visible:u,onSubmit:e=>{i(e)},selectedNodeKey:null==n?void 0:n.id})]})}const dS=ai.div`
    width: 100%;
    padding: 0.5rem;
    display: flex;
    flex-flow: column nowrap;
    border-right: ${xn.borderLightColor} 1px solid;
    overflow-y: auto;
`;function pS({libraryId:e,selectedVersion:t,readOnly:n=!1,onVersionChange:r}){const{loading:i,error:o,trees:a}=iS(e);if(i)return s.jsx(te,{});if(o)return s.jsx(Y,{message:o.message});return s.jsx(dS,{children:a.map((e=>{var i,o,a,l;return s.jsx(uS,{tree:e,selectedNode:{id:null==(i=null==t?void 0:t[e.id])?void 0:i.id,title:null==(o=null==t?void 0:t[e.id])?void 0:o.label,key:null==(a=null==t?void 0:t[e.id])?void 0:a.id,children:[]},onNodeChange:(l=e.id,e=>{r({...t,[l]:e?{id:e.id??null,label:String(e.title)}:null})}),readOnly:n},e.id)}))})}function fS(e){return Mc({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M15,16 L21,22 L15,16 Z M10,18 C13.8659932,18 17,14.8659932 17,11 C17,7.13400675 13.8659932,4 10,4 C6.13400675,4 3,7.13400675 3,11 C3,14.8659932 6.13400675,18 10,18 Z M20,1 L20,7 M17,4 L23,4"}}]})(e)}function vS(e){return Mc({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7.18,4,8.6,5.44,6.06,8h9.71a6,6,0,0,1,0,12h-2V18h2a4,4,0,0,0,0-8H6.06L8.6,12.51,7.18,13.92,2.23,9Z"}}]})(e)}const mS=ai.div`
    display: grid;
    grid-template-rows: 3em 1fr 3em;
    height: 100%;
`,gS=ai.div`
    background-color: ${xn.headerBg};
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.3rem 0.3rem 0.3rem 1rem;
    font-weight: 700;
    border-bottom: 1px solid ${xn.borderLightColor};
`;ai(En)`
    background-color: ${xn.headerBg};
    border-top: 1px solid ${xn.borderLightColor};
    justify-content: flex-end;
    padding: 0.3rem;
`;const hS=ai(kr)`
    cursor: pointer;
    background: none;
    box-shadow: none;
    margin: 0.5rem;
`;function bS(){const{t:e}=c(),{state:t,dispatch:n}=Yc(),r=!(null==t?void 0:t.record);return s.jsxs(mS,{children:[s.jsxs(gS,{children:[s.jsx("span",{children:e("values_version.title")}),s.jsxs("span",{children:[!r&&s.jsx(xu,{title:e("values_version.reset"),shape:"circle",centered:!0,icon:s.jsx(vS,{}),onClick:()=>{n({type:Gc.SET_VALUES_VERSION,valuesVersion:t.originValuesVersion})}}),s.jsx(hS,{onClick:()=>{n({type:Gc.SET_SIDEBAR_CONTENT,content:"summary"})}})]})]}),s.jsx(pS,{libraryId:t.libraryId,selectedVersion:t.valuesVersion,onVersionChange:e=>{n({type:Gc.SET_VALUES_VERSION,valuesVersion:e})},readOnly:r})]})}function yS({onMetadataSubmit:e}){const{state:t}=Yc();switch(t.sidebarContent){case"valueDetails":return s.jsx(nS,{value:t.activeValue.value,attribute:t.activeValue.attribute,onMetadataSubmit:e});case"valuesVersions":return s.jsx(bS,{});default:return s.jsx(FE,{record:t.record})}}const xS=ai(Ns)`
    cursor: pointer;
`;function wS({libraryId:e,version:t,onVersionClick:n}){const{t:r}=c(),{lang:i}=wn(),{loading:o,error:a,trees:l}=iS(e),u=()=>{n()};return o?s.jsx(te,{}):a?s.jsx(Y,{message:"error.message"}):s.jsxs(En,{size:"small",children:[s.jsxs("span",{children:[r("values_version.version"),":"]}),s.jsx("div",{children:l.filter((e=>!!(null==t?void 0:t[e.id]))).map((e=>{var n;return s.jsx($r,{title:Ur(e.label,i),children:s.jsx(xS,{onClick:u,children:null==(n=null==t?void 0:t[e.id])?void 0:n.label})},e.id)}))})]})}const ES=ai.div`
    height: calc(100vh - 12rem);
    display: grid;
    grid-template-columns: minmax(0, ${900}px) ${300}px;
    grid-template-rows: calc(3.5rem + 1px) auto; // +1px for border
    grid-template-areas:
        'title title'
        'content sidebar';
    overflow: hidden;
    grid-gutter: 0;
`,SS=ai.div`
    grid-area: title;
    align-self: center;
    font-size: 1rem;
    padding: 0.5rem;
    border-bottom: 1px solid ${xn.borderColor};
    display: flex;
    justify-content: space-between;
    align-items: center;
`,CS=ai.div`
    margin-right: 60px;
    font-size: 1.5em;
    display: flex;
    align-items: center;

    > * {
        cursor: pointer;
    }
`,IS=ai.div`
    grid-area: content;
    padding: 1em;
    overflow-x: hidden;
    overflow-y: scroll;
    padding-right: 1rem;
`,kS=ai.div`
    overflow-x: hidden;
    overflow-y: scroll;
    position: relative;
    grid-area: sidebar;
    background: ${xn.secondaryBg};
    border-top-right-radius: 3px;
    z-index: 1;
`,RS=ai.div`
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 1rem;
`,_S=ai(K)`
    .ant-modal-close {
        top: 0;
        right: 0;
        width: 4rem;
        height: 4rem;
        line-height: 4rem;
    }

    && .ant-modal-content {
        padding: 0;
    }
`;function TS({open:t,record:n,library:r,onClose:i,afterCreate:o,valuesVersion:a}){const{t:l}=c(),u=!n,[d,p]=e.useReducer(Wc,{...Uc,record:n,libraryId:r,valuesVersion:a,originValuesVersion:a}),{loading:f,canEdit:v,isReadOnly:m}=((e,t)=>{const n=!t,{loading:r,error:i,data:o}=R(Oc,{variables:{type:qt.record,applyTo:e.id,target:{recordId:t},actions:[Yt.access_record,Yt.create_record,Yt.edit_record,Yt.delete_record]},skip:n,fetchPolicy:"cache-and-network"}),{loading:a,error:l,data:s}=R(Ac,{variables:{libraryId:e.id},skip:!n,fetchPolicy:"cache-and-network"});if(i||l)return{loading:!1,canEdit:!1,isReadOnly:!0};const c=null==s?void 0:s.libraries.list[0],u=null==o?void 0:o.isAllowed.reduce(((e,t)=>(e[t.name]=t.allowed,e)),{});return{loading:r||a,canEdit:n?null==c?void 0:c.permissions.create_record:null==u?void 0:u.access_record,isReadOnly:n?!(null==c?void 0:c.permissions.create_record):!(null==u?void 0:u.edit_record)}})({...null==n?void 0:n.library,id:r},null==n?void 0:n.id),{saveValues:g,loading:h}=function(){const{cache:e}=ve(),[t,{loading:n}]=V(Ty),{t:r}=c();return{saveValues:async(n,i,o,a=!1)=>{var l,s;try{const r=await t({variables:{library:n.library.id,recordId:n.id,values:i.map((e=>({attribute:e.attribute,id_value:e.idValue,value:null!==e.value?String(e.value):null,metadata:e.metadata?Pr(e.metadata).map((({name:e,value:t})=>({name:e,value:String(t)}))):null}))),version:o?Pr(o).map((e=>({treeId:e.name,treeNodeId:e.value.id}))):null,deleteEmpty:a}}),{values:l,errors:s}=r.data.saveValueBatch,c={...n,__typename:n.library.gqlNames.type};for(const t of l)e.modify({id:e.identify(c),fields:{[_y(t.attribute.id)]:e=>{const n=[...e],r=e.findIndex((e=>e.id_value===t.id_value));return-1!==r?n[r]=t:n.push(t),n}}});return{status:(null==s?void 0:s.length)&&l.length?pu.PARTIAL:(null==s?void 0:s.length)&&!l.length?pu.ERROR:pu.SUCCESS,...r.data.saveValueBatch}}catch(c){const e=null==(l=c.graphQLErrors)?void 0:l[0],t=(null==(s=null==e?void 0:e.extensions)?void 0:s.code)?e.extensions.code===zr.VALIDATION_ERROR?Object.values(e.extensions.fields).join("\n"):r(`error.${e.extensions.code}`):c.message;return{status:pu.ERROR,error:t}}},loading:n}}(),{deleteValue:b}=function(e){const[t]=V(Ry,{update:(t,{data:{deleteValue:n}})=>{const r={...e,__typename:e.library.gqlNames.type};t.modify({id:t.identify(r),fields:{[_y(n.attribute.id)]:e=>e.filter((e=>e.id_value!==n.id_value))}})}}),{t:n}=c();return{deleteValue:async(r,i)=>{var o;try{return await t({variables:{library:e.library.id,attribute:i,recordId:e.id,value:r}}),{status:pu.SUCCESS}}catch(a){const e=a.graphQLErrors[0],t=(null==(o=null==e?void 0:e.extensions)?void 0:o.code)?e.extensions.code===zr.VALIDATION_ERROR?e.extensions.fields[i]:n(`error.${e.extensions.code}`):a.message;return{status:pu.ERROR,error:t}}}}}(n),[y]=V(jc,{variables:{library:r}}),[x,w]=e.useState({}),[E,S]=e.useState({}),C=!!Object.keys(E).length,I=async(e,t)=>{if(!u)return g(n,e.map((e=>{const t={...e,attribute:e.attribute.id,metadata:e.metadata};switch(e.attribute.type){case zt.advanced_link:case zt.simple_link:case zt.tree:t.value=e.value.id;break;default:t.value=e.value}return t})),t);const r={...E},i=[];for(const n of e){const e=n.attribute.id;r[e]||(r[e]={});const t={id_value:n.idValue??`pending_${Object.keys(r[e]).length+1}`,modified_at:null,modified_by:null,created_at:null,created_by:null,version:null,attribute:n.attribute};switch(n.attribute.type){case zt.advanced_link:case zt.simple_link:t.linkValue=n.value;break;case zt.tree:const e=n.value,r=e.record;t.treeValue={id:e.id,record:r,ancestors:[{record:r}]};break;default:t.value=n.value,t.raw_value=n.value}r[e][t.id_value]={...t},i.push(t)}return S(r),{status:pu.SUCCESS,values:i}},k=async()=>{if(!C)return;let e=d.record??null;if(!e)try{e=(await y()).data.createRecord.whoAmI,p({type:Gc.SET_RECORD,record:e})}catch(t){return void ge({type:he.error,content:t.message,priority:Re.high})}try{const t=Object.values(E).reduce(((e,t)=>[...e,...Object.values(t).map((e=>{let t;switch(e.attribute.type){case zt.advanced_link:case zt.simple_link:t=e.linkValue.id;break;case zt.tree:t=e.treeValue.id;break;default:t=e.raw_value}return{...e,value:t,id_value:null,attribute:e.attribute.id}}))]),[]),n=await g(e,t,d.valuesVersion);if(n.status===pu.ERROR||n.status===pu.PARTIAL)return void w(n.errors.reduce(((e,t)=>({...e,[t.attribute]:t})),{}));o&&await o(e),i()}catch(t){return void console.error(t)}},_=()=>{p({type:Gc.SET_SIDEBAR_CONTENT,content:"valuesVersions"===d.sidebarContent?"summary":"valuesVersions"})},T=n?s.jsx(Vn,{record:n,size:ae.small}):l("record_edition.new_record"),j=[s.jsx(Kt,{"aria-label":l("global.close"),onClick:i,children:l("global.close")},"close")];u&&j.push(s.jsx(Kt,{type:"primary","aria-label":l("global.submit"),onClick:k,disabled:!C||f,loading:h,children:l("global.submit")},"submit"));const A=s.jsxs(RS,{children:[d.valuesVersion?s.jsx(wS,{libraryId:r,version:d.valuesVersion,onVersionClick:_}):s.jsx("div",{}),s.jsx(En,{children:j})]});return t?s.jsx("div",{onClick:e=>e.stopPropagation(),onDoubleClick:e=>e.stopPropagation(),children:s.jsx(_S,{open:t,onCancel:i,destroyOnClose:!0,cancelText:l("global.cancel"),width:"90vw",centered:!0,style:{maxWidth:"1200px"},bodyStyle:{height:"calc(100vh - 12rem)",overflowY:"auto"},footer:A,children:s.jsx(ke,{showRecoveryButtons:!1,children:f?s.jsx(te,{}):s.jsx(qc.Provider,{value:{state:d,dispatch:p},children:s.jsx(Jc.Provider,{value:x,children:s.jsxs(ES,{children:[s.jsxs(SS,{children:[T,s.jsx(CS,{children:s.jsx($r,{title:l("values_version.title"),children:s.jsx(Fc,{onClick:_})})})]}),s.jsx(IS,{className:"content",children:v?s.jsx(ky,{record:n,library:r,onValueSubmit:I,onValueDelete:async(e,t)=>{if(!u)return b(e,t);const n={...E};return delete n[t][e.id_value],S(n),{status:pu.SUCCESS}},onDeleteMultipleValues:async(e,t,r)=>{if(!u){const i=t.map((t=>({idValue:t.id_value,attribute:e,value:null})));return g(n,i,r,!0)}const i={...E};return i[e]={},S(i),{status:pu.SUCCESS}},readonly:m}):s.jsx(Y,{type:ee.PERMISSION_ERROR,showActionButton:!1})}),s.jsx(kS,{className:"sidebar",children:s.jsx(yS,{onMetadataSubmit:(e,t,n)=>{let r;switch(t.type){case zt.simple:case zt.advanced:r=e.raw_value;break;case zt.advanced_link:case zt.simple_link:r=e.linkValue;break;case zt.tree:r=e.treeValue}return I([{idValue:e.id_value,attribute:t,value:r,metadata:n}],null)}})})]})})})})})}):s.jsx(s.Fragment,{})}const jS=ai.span`
    padding: 0 0.75em;
    height: 1.75em;
    line-height: 1.75em;
    margin: 0 1em;
    border-radius: 2em;
    background: ${xn.activeColor};
    color: ${xn.secondaryTextColor};
    font-weight: bold;
    font-size: 0.9em;
    cursor: pointer;
`;function AS({values:e}){const{t:t}=c(),n=n=>{_e(n),K.info({icon:null,content:s.jsx(fd,{dataSource:e.map((e=>(null==e?void 0:e.whoAmI)?s.jsx(Vn,{record:null==e?void 0:e.whoAmI,size:ae.small}):e)),size:"small",maxHeight:"50vh"}),okText:t("global.close")})},r=s.jsx(fd,{dataSource:e.slice(0,5).map((e=>{var t,n;return(null==(t=null==e?void 0:e.whoAmI)?void 0:t.label)??(null==(n=null==e?void 0:e.whoAmI)?void 0:n.id)})),size:"small",maxHeight:"50vh",footer:e.length>5&&s.jsx("a",{onClick:n,children:t("items_list.show_more_links")})});return s.jsx(s.Fragment,{children:s.jsx($r,{overlay:r,color:"white",children:s.jsx(jS,{onClick:n,onDoubleClick:_e,children:e.length})})})}var OS,PS={},NS={},DS={},LS={get exports(){return DS},set exports(e){DS=e}},$S={},MS={};var BS=Yn,VS=Xn;Object.defineProperty($S,"__esModule",{value:!0}),$S.default=void 0;var FS=BS(Wn()),zS=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==VS(e)&&"function"!=typeof e)return{default:e};var n=US(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e),HS=BS((OS||(OS=1,Object.defineProperty(MS,"__esModule",{value:!0}),MS.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"}),MS)),GS=BS(qn());function US(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(US=function(e){return e?n:t})(e)}var WS=function(e,t){return zS.createElement(GS.default,(0,FS.default)((0,FS.default)({},e),{},{ref:t,icon:HS.default}))};WS.displayName="CheckCircleFilled";var qS=zS.forwardRef(WS);$S.default=qS,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=$S)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(LS,DS);var YS,XS={},KS={get exports(){return XS},set exports(e){XS=e}},QS={},ZS={};var JS=Yn,eC=Xn;Object.defineProperty(QS,"__esModule",{value:!0}),QS.default=void 0;var tC=JS(Wn()),nC=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==eC(e)&&"function"!=typeof e)return{default:e};var n=oC(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e),rC=JS((YS||(YS=1,Object.defineProperty(ZS,"__esModule",{value:!0}),ZS.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"}),ZS)),iC=JS(qn());function oC(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(oC=function(e){return e?n:t})(e)}var aC=function(e,t){return nC.createElement(iC.default,(0,tC.default)((0,tC.default)({},e),{},{ref:t,icon:rC.default}))};aC.displayName="ExclamationCircleFilled";var lC=nC.forwardRef(aC);QS.default=lC,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=QS)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(KS,XS);var sC,cC={},uC={get exports(){return cC},set exports(e){cC=e}},dC={},pC={};var fC=Yn,vC=Xn;Object.defineProperty(dC,"__esModule",{value:!0}),dC.default=void 0;var mC=fC(Wn()),gC=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==vC(e)&&"function"!=typeof e)return{default:e};var n=yC(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e),hC=fC((sC||(sC=1,Object.defineProperty(pC,"__esModule",{value:!0}),pC.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"}),pC)),bC=fC(qn());function yC(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(yC=function(e){return e?n:t})(e)}var xC=function(e,t){return gC.createElement(bC.default,(0,mC.default)((0,mC.default)({},e),{},{ref:t,icon:hC.default}))};xC.displayName="InfoCircleFilled";var wC=gC.forwardRef(xC);dC.default=wC,function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=dC)&&n.__esModule?n:{default:n};t.default=r,e.exports=r}(uC,cC);var EC={},SC=jn.default,CC=An.default;Object.defineProperty(EC,"__esModule",{value:!0}),EC.default=void 0;var IC=CC(nr),kC=SC(e),RC=CC(Te),_C=je;function TC(e){return!(!e||!e.then)}var jC=e=>{const{type:t,children:n,prefixCls:r,buttonProps:i,close:o,autoFocus:a,emitEvent:l,quitOnNullishReturnValue:s,actionFn:c}=e,u=kC.useRef(!1),d=kC.useRef(null),[p,f]=(0,IC.default)(!1),v=function(){null==o||o.apply(void 0,arguments)};kC.useEffect((()=>{let e=null;return a&&(e=setTimeout((()=>{var e;null===(e=d.current)||void 0===e||e.focus()}))),()=>{e&&clearTimeout(e)}}),[]);return kC.createElement(RC.default,Object.assign({},(0,_C.convertLegacyProps)(t),{onClick:e=>{if(u.current)return;if(u.current=!0,!c)return void v();let t;if(l){if(t=c(e),s&&!TC(t))return u.current=!1,void v(e)}else if(c.length)t=c(o),u.current=!1;else if(t=c(),!t)return void v();(e=>{TC(e)&&(f(!0),e.then((function(){v.apply(void 0,arguments),u.current=!1}),(e=>(f(!1,!0),u.current=!1,Promise.reject(e)))))})(t)},loading:p,prefixCls:r},i,{ref:d}),n)};EC.default=jC;var AC={};const OC=u(nl);var PC,NC,DC,LC={};function $C(){if(PC)return LC;PC=1;var t=jn.default,n=An.default;Object.defineProperty(LC,"__esModule",{value:!0}),LC.default=LC.Footer=void 0,LC.renderCloseIcon=v;var r=n(Hy),i=n(Zt),o=OC,a=t(e),l=n(Te),s=je,c=Nn,u=n(rr),d=BC(),p=ir,f=n(Nw);function v(e,t){return a.createElement("span",{className:`${e}-close-x`},t||a.createElement(r.default,{className:`${e}-close-icon`}))}const m=e=>{const{okText:t,okType:n="primary",cancelText:r,confirmLoading:i,onOk:o,onCancel:c,okButtonProps:d,cancelButtonProps:f,footer:v}=e,[m]=(0,u.default)("Modal",(0,p.getConfirmLocale)());return void 0===v?a.createElement(a.Fragment,null,a.createElement(l.default,Object.assign({onClick:c},f),r||(null==m?void 0:m.cancelText)),a.createElement(l.default,Object.assign({},(0,s.convertLegacyProps)(n),{loading:i,onClick:o},d),t||(null==m?void 0:m.okText))):v};LC.Footer=m;var g=e=>{const{prefixCls:t,className:n,closeIcon:r,closable:l,type:s,title:u,children:p}=e,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","closeIcon","closable","type","title","children"]),{getPrefixCls:h}=a.useContext(c.ConfigContext),b=h(),y=t||h("modal"),[,x]=(0,f.default)(y),w=`${y}-confirm`;let E={};return E=s?{closable:null!=l&&l,title:"",footer:"",children:a.createElement(d.ConfirmContent,Object.assign({},e,{confirmPrefixCls:w,rootPrefixCls:b,content:p}))}:{closable:null==l||l,title:u,footer:null===e.footer?e.footer:a.createElement(m,Object.assign({},e)),children:p},a.createElement(o.Panel,Object.assign({prefixCls:y,className:(0,i.default)(x,`${y}-pure-panel`,s&&w,s&&`${w}-${s}`,n)},g,{closeIcon:v(y,r),closable:l},E))};return LC.default=g,LC}function MC(){if(NC)return AC;NC=1;var t=jn.default,n=An.default;Object.defineProperty(AC,"__esModule",{value:!0}),AC.default=void 0;var r=n(Zt),i=n(OC),o=t(e),a=Nn,l=$n,s=ar,c=Zn,u=or;n(Dn);var d=$C(),p=n(Nw);let f;const v=e=>{f={x:e.pageX,y:e.pageY},setTimeout((()=>{f=null}),100)};(0,u.canUseDocElement)()&&document.documentElement.addEventListener("click",v,!0);var m=e=>{var t;const{getPopupContainer:n,getPrefixCls:u,direction:v}=o.useContext(a.ConfigContext),m=t=>{const{onCancel:n}=e;null==n||n(t)},{prefixCls:g,className:h,rootClassName:b,open:y,wrapClassName:x,centered:w,getContainer:E,closeIcon:S,focusTriggerAfterClose:C=!0,visible:I,width:k=520}=e,R=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","visible","width"]),_=u("modal",g),T=u(),[j,A]=(0,p.default)(_),O=(0,r.default)(x,{[`${_}-centered`]:!!w,[`${_}-wrap-rtl`]:"rtl"===v});return j(o.createElement(s.NoCompactStyle,null,o.createElement(l.NoFormStyle,{status:!0,override:!0},o.createElement(i.default,Object.assign({width:k},R,{getContainer:void 0===E?n:E,prefixCls:_,rootClassName:(0,r.default)(A,b),wrapClassName:O,footer:null===e.footer?e.footer:o.createElement(d.Footer,Object.assign({},e,{onOk:t=>{const{onOk:n}=e;null==n||n(t)},onCancel:m})),visible:null!=y?y:I,mousePosition:null!==(t=R.mousePosition)&&void 0!==t?t:f,onClose:m,closeIcon:(0,d.renderCloseIcon)(_,S),focusTriggerAfterClose:C,transitionName:(0,c.getTransitionName)(T,"zoom",e.transitionName),maskTransitionName:(0,c.getTransitionName)(T,"fade",e.maskTransitionName),className:(0,r.default)(A,h)})))))};return AC.default=m,AC}function BC(){if(DC)return NS;DC=1;var t=jn.default,n=An.default;Object.defineProperty(NS,"__esModule",{value:!0}),NS.ConfirmContent=v,NS.default=void 0;var r=n(DS),i=n(lr),o=n(XS),a=n(cC),l=n(Zt),s=t(e),c=n(Nn),u=n(rr),d=n(EC),p=Zn;n(Dn);var f=n(MC());function v(e){const{icon:t,onCancel:n,onOk:l,close:c,okText:p,okButtonProps:f,cancelText:v,cancelButtonProps:m,confirmPrefixCls:g,rootPrefixCls:h,type:b,okCancel:y,footer:x,locale:w}=e;let E=t;if(!t&&null!==t)switch(b){case"info":E=s.createElement(a.default,null);break;case"success":E=s.createElement(r.default,null);break;case"error":E=s.createElement(i.default,null);break;default:E=s.createElement(o.default,null)}const S=e.okType||"primary",C=null!=y?y:"confirm"===b,I=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),[k]=(0,u.default)("Modal"),R=w||k,_=C&&s.createElement(d.default,{actionFn:n,close:c,autoFocus:"cancel"===I,buttonProps:m,prefixCls:`${h}-btn`},v||(null==R?void 0:R.cancelText));return s.createElement("div",{className:`${g}-body-wrapper`},s.createElement("div",{className:`${g}-body`},E,void 0===e.title?null:s.createElement("span",{className:`${g}-title`},e.title),s.createElement("div",{className:`${g}-content`},e.content)),void 0!==x?x:s.createElement("div",{className:`${g}-btns`},_,s.createElement(d.default,{type:S,actionFn:l,close:c,autoFocus:"ok"===I,buttonProps:f,prefixCls:`${h}-btn`},p||(C?null==R?void 0:R.okText:null==R?void 0:R.justOkText))))}var m=e=>{const{close:t,zIndex:n,afterClose:r,visible:i,open:o,keyboard:a,centered:u,getContainer:d,maskStyle:m,direction:g,prefixCls:h,wrapClassName:b,rootPrefixCls:y,iconPrefixCls:x,bodyStyle:w,closable:E=!1,closeIcon:S,modalRender:C,focusTriggerAfterClose:I}=e,k=`${h}-confirm`,R=e.width||416,_=e.style||{},T=void 0===e.mask||e.mask,j=void 0!==e.maskClosable&&e.maskClosable,A=(0,l.default)(k,`${k}-${e.type}`,{[`${k}-rtl`]:"rtl"===g},e.className);return s.createElement(c.default,{prefixCls:y,iconPrefixCls:x,direction:g},s.createElement(f.default,{prefixCls:h,className:A,wrapClassName:(0,l.default)({[`${k}-centered`]:!!e.centered},b),onCancel:()=>null==t?void 0:t({triggerCancel:!0}),open:o,title:"",footer:"",transitionName:(0,p.getTransitionName)(y,"zoom",e.transitionName),maskTransitionName:(0,p.getTransitionName)(y,"fade",e.maskTransitionName),mask:T,maskClosable:j,maskStyle:m,style:_,bodyStyle:w,width:R,zIndex:n,afterClose:r,keyboard:a,centered:u,getContainer:d,closable:E,closeIcon:S,modalRender:C,focusTriggerAfterClose:I},s.createElement(v,Object.assign({},e,{confirmPrefixCls:k}))))};return NS.default=m,NS}var VC={};Object.defineProperty(VC,"__esModule",{value:!0}),VC.default=void 0;var FC=[];VC.default=FC;var zC=jn.default,HC=An.default;Object.defineProperty(PS,"__esModule",{value:!0});var GC=PS.default=function(e){const t=document.createDocumentFragment();let n,r=Object.assign(Object.assign({},e),{close:a,open:!0});function i(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const o=r.some((e=>e&&e.triggerCancel));e.onCancel&&o&&e.onCancel.apply(e,[()=>{}].concat((0,UC.default)(r.slice(1))));for(let e=0;e<KC.default.length;e++){if(KC.default[e]===a){KC.default.splice(e,1);break}}(0,WC.unmount)(t)}function o(e){var{okText:r,cancelText:i,prefixCls:o}=e,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["okText","cancelText","prefixCls"]);clearTimeout(n),n=setTimeout((()=>{const e=(0,QC.getConfirmLocale)(),{getPrefixCls:n,getIconPrefixCls:l}=(0,YC.globalConfig)(),s=n(void 0,ZC),c=o||`${s}-modal`,u=l();(0,WC.render)(qC.createElement(XC.default,Object.assign({},a,{prefixCls:c,rootPrefixCls:s,iconPrefixCls:u,okText:r,locale:e,cancelText:i||e.cancelText})),t)}))}function a(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];r=Object.assign(Object.assign({},r),{open:!1,afterClose:()=>{"function"==typeof e.afterClose&&e.afterClose(),i.apply(this,n)}}),r.visible&&delete r.visible,o(r)}return o(r),KC.default.push(a),{destroy:a,update:function(e){r="function"==typeof e?e(r):Object.assign(Object.assign({},r),e);o(r)}}};PS.modalGlobalConfig=function(e){let{rootPrefixCls:t}=e;ZC=t},PS.withConfirm=function(e){return Object.assign(Object.assign({},e),{type:"confirm"})},PS.withError=function(e){return Object.assign(Object.assign({},e),{type:"error"})},PS.withInfo=function(e){return Object.assign(Object.assign({},e),{type:"info"})},PS.withSuccess=function(e){return Object.assign(Object.assign({},e),{type:"success"})},PS.withWarn=function(e){return Object.assign(Object.assign({},e),{type:"warning"})};var UC=HC(On),WC=Ae,qC=zC(e),YC=Nn;HC(Dn);var XC=HC(BC()),KC=HC(VC),QC=ir;let ZC="";const JC=mn`
    mutation DEACTIVATE_RECORDS($libraryId: String!, $recordsIds: [String!], $filters: [RecordFilterInput!]) {
        deactivateRecords(recordsIds: $recordsIds, filters: $filters, libraryId: $libraryId) {
            id
        }
    }
`;function eI({record:e,...t}){const{t:n}=c(),{dispatch:r}=Ec(),[i]=V(JC,{variables:{libraryId:e.library.id,recordsIds:[e.id]}}),o=async()=>{await i(),r({type:hc.SET_LOADING,loading:!0})};return s.jsx(Kt,{name:"deactivate",icon:s.jsx(ui,{}),shape:"circle",...t,onClick:async e=>{e.preventDefault(),e.stopPropagation(),GC({content:n("records_deactivation.confirm_one"),okText:n("global.submit"),cancelText:n("global.cancel"),onOk:o})}})}var tI=(e=>(e.ONLY="ONLY",e.ALL="ALL",e))(tI||{});function nI({selectionType:e,record:t,size:n,text:r,...i}){const o=me();return s.jsx(Kt,{...i,"aria-label":"select-records",size:n,onClick:n=>{n.stopPropagation();const r={id:t.id,library:t.library.id,label:t.label};"ONLY"===e?(o(Oe()),o(Pe({selectionType:Ne.search,elementSelected:r}))):"ALL"===e&&o(De({type:Ne.search,selected:[],allSelected:!0}))},children:r})}const rI=ai.div`
    min-width: 150px;
`;function iI({record:e,previewSize:t,lang:n}){const{t:r}=c(),[i]=Le(),o=i.permissions.delete_record,{state:a}=Ec(),{selectionState:l}=Z((e=>({selectionState:e.selection,display:e.display}))),u="middle",d=[{title:r("global.details"),button:s.jsx(Du,{shape:"circle",record:e,size:u,valuesVersion:a.valuesVersions})}];o&&d.push({title:r("records_deactivation.title_one"),button:s.jsx(eI,{record:e})});const p=[{title:r("items-list-row.select-only"),button:s.jsx(nI,{selectionType:tI.ONLY,text:r("items-list-row.select-only"),record:e,size:u})},{title:r("items-list-row.select-all"),button:s.jsx(nI,{selectionType:tI.ALL,text:r("items-list-row.select-all"),record:e,size:u})}],f=l.selection.selected.length||l.selection.allSelected;return s.jsxs(s.Fragment,{children:[s.jsx(rI,{children:s.jsx(Vn,{record:e,size:t,lang:n})}),s.jsx(q,{actions:f?p:d,size:u})]})}const oI={[Ft.text]:"left",[Ft.numeric]:"right",[Ft.boolean]:"center",[Ft.date]:"left",[Ft.date_range]:"left",[Ft.extended]:"left",[Ft.encrypted]:"left"},aI=ai.div`
    padding: 5px;
    width: 100%;
    text-align: ${e=>oI[e.format]};
`;function lI({cellData:e,values:t}){const{t:n}=c(),r=t.map((t=>(t=>{if(e.format===Ft.date_range)return ue(t,n);return t})(t))).join(", ");return s.jsx(aI,{format:e.format,children:e.format===Ft.extended?s.jsx($r,{overlay:r,children:s.jsx(Hi,{size:256,style:{fontSize:"2em"}})}):s.jsx(sr.Paragraph,{ellipsis:{rows:1,tooltip:r},style:{margin:0},children:e.format===Ft.boolean?s.jsx(ci,{disabled:!0,checked:!!t[0],checkedChildren:s.jsx(Wr,{}),unCheckedChildren:s.jsx(kr,{})}):r})})}const sI=ai.div`
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
`,cI=({columnName:e,data:t})=>{var n;const{value:r,type:i}=t,{lang:o}=wn(),{state:a}=Ec(),l=$e(a.display.size),c=Array.isArray(r)?r:[r];if(!c.length)return s.jsx(s.Fragment,{});switch(i){case zt.simple:case zt.advanced:return s.jsx(lI,{cellData:t,values:c});case zt.simple_link:case zt.advanced_link:case zt.tree:const[a,...u]=c,d=i===zt.tree?null==(n=null==a?void 0:a.record)?void 0:n.whoAmI:null==a?void 0:a.whoAmI;return d?s.jsxs(sI,{children:[s.jsx(Vn,{record:d,size:ae.small,lang:o,withPreview:!0,withLibrary:!1,simplistic:!0},d.id),u.length?s.jsx(AS,{values:c}):s.jsx(s.Fragment,{})]}):null;default:return e===Me?s.jsx(iI,{record:r,previewSize:l,lang:o}):s.jsx(s.Fragment,{})}},uI=ai.div`
    display: grid;
    place-items: center;
    position: relative;
    height: 100%;
    width: 100%;
`,dI=ai.span`
    && {
        display: ${e=>e.checked?"block":"none"};
        color: ${e=>e.checked?xn.primaryColor:xn.defaultTextColor};
        font-size: 1.5em;

        .ant-checkbox-checked::after {
            border: none;
        }
    }

    [role='row']:hover & {
        display: block;
    }
`;function pI({selected:e}){return s.jsx(uI,{children:s.jsx(dI,{checked:e,role:"checkbox",children:e?s.jsx(nn,{}):s.jsx(Be,{})})})}const fI=ai.div`
    // Inherit background from row. If background is transparent, the sticky column won't behave properly
    background-color: inherit;
    padding: 4px 0;

    :not(:first-child) {
        border-left: 1px solid ${e=>e.selected?xn.activeColor:xn.borderLightColor};
    }

    max-width: ${e=>e.id===Ve?"35px":"auto"};

    display: flex;
    align-items: center;
`;function vI({cell:e,selected:t}){var n,r,i,o,a,l,c;const u=e.getCellProps();e.column.id===Me&&(u.style={...u.style,flex:"1 0 auto",maxWidth:tA,minWidth:tA,zIndex:3});const d={id:null==(n=null==e?void 0:e.value)?void 0:n.id,key:null==(r=null==e?void 0:e.value)?void 0:r.id,library:null==(i=null==e?void 0:e.value)?void 0:i.library,label:null==(o=null==e?void 0:e.value)?void 0:o.label,value:null==(a=null==e?void 0:e.value)?void 0:a.value,type:null==(l=null==e?void 0:e.value)?void 0:l.type,format:null==(c=null==e?void 0:e.value)?void 0:c.format};return e.value?s.jsx(fI,{...u,id:e.column.id,selected:t,className:"body-cell",children:e.column.id===Ve?s.jsx(pI,{selected:t}):s.jsx(cI,{columnName:e.column.id,data:d})}):s.jsx(fI,{selected:t,...u})}const mI=ai.div`
    position: relative;
    border-bottom: 1px solid ${e=>e.selected?xn.activeColor:xn.borderLightColor};
    border-collapse: collapse;

    // Must set background on row for the case where we just have the infos column (part of the row is empty)
    background-color: ${e=>e.selected?xn.activeColor:xn.defaultBg};

    &:not(:hover) .floating-menu {
        display: none;
    }

    &:hover {
        background-color: ${e=>e.selected?xn.activeColor:`${xn.activeColor}`};
    }
`;function gI({row:t}){var n,r,i;const o=t.getRowProps(),a=e.useContext(pc),{state:l}=Ec(),{selectionState:c}=Z((e=>({selectionState:e.selection,display:e.display}))),[u,d]=e.useState(!1),p=me(),f=null==(i=null==(r=null==(n=t.cells[0])?void 0:n.row)?void 0:r.original)?void 0:i.record;if(!t.cells.length||void 0===f)return s.jsx(s.Fragment,{});const v=function(e,t,n,r){const i=t?e.searchSelection:e.selection;return i.type===Ne.search&&!!i.selected.find((e=>e.id===n&&e.library===r))}(c,a,f.id,f.library.id),m=function(e,t){return t?e.searchSelection.type===Ne.search&&e.searchSelection.allSelected:e.selection.type===Ne.search&&e.selection.allSelected}(c,a),g=m||v;return s.jsxs(mI,{...o,onClick:()=>{const e={id:f.id,library:f.library.id,label:f.label};p(a?Fe(e):Pe({selectionType:Ne.search,elementSelected:e}))},onDoubleClick:()=>{d(!0)},selected:g,children:[u&&s.jsx(TS,{open:u,library:f.library.id,record:f,onClose:()=>{d(!1)},valuesVersion:l.valuesVersions}),t.cells.map((e=>s.jsx(vI,{selected:g,cell:e},e.column.id)))]})}var hI=(e=>(e.SET_ATTRIBUTES="SET_ATTRIBUTES",e.TOGGLE_ATTRIBUTE_SELECTION="TOGGLE_ATTRIBUTE_SELECTION",e.TOGGLE_ATTRIBUTE_EXPAND="TOGGLE_ATTRIBUTE_EXPAND",e.MOVE_SELECTED_ATTRIBUTE="MOVE_SELECTED_ATTRIBUTE",e))(hI||{});const bI={library:"",multiple:!0,canExpandExtendedAttributes:!0,selectedAttributes:[],expandedAttributePath:"",attributes:[]},yI=(e,t)=>{switch(t.type){case"SET_ATTRIBUTES":return{...e,attributes:t.attributes};case"TOGGLE_ATTRIBUTE_EXPAND":{const n={...e};return 0===e.expandedAttributePath.indexOf(t.attributePath)?n.expandedAttributePath=t.attributePath.split(".").slice(0,-1).join("."):n.expandedAttributePath=t.attributePath,n}case"TOGGLE_ATTRIBUTE_SELECTION":{let n=[...e.selectedAttributes];const r=e.selectedAttributes.findIndex((e=>e.path===t.attribute.path));return n=e.multiple?-1===r?[...n,t.attribute]:[...n.slice(0,r),...n.slice(r+1)]:-1===r?[t.attribute]:[],{...e,selectedAttributes:n}}case"MOVE_SELECTED_ATTRIBUTE":{let n=[...e.selectedAttributes],{from:r,to:i}=t;return n[r]?(i>n.length-1&&(i=n.length-1),r<0&&(r=0),n=ze(n,r,i),{...e,selectedAttributes:n}):e}}},xI=t.createContext({state:bI,dispatch:()=>bI}),wI=()=>e.useContext(xI),EI=ai.span`
    color: hsl(0, 0%, 13%);
    font-weight: 700;
`,SI=ai.span`
    color: hsl(0, 0%, 45%);
    font-weight: 400;
`,CI=ai.form`
    width: 100%;
`,II=ai.div`
    padding: 0.5em;
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    cursor: pointer;
    border: 2px solid transparent;

    &:hover {
        border-color: ${xn.primaryColor};
        background-color: ${xn.activeColor};
    }
`,kI=ai.div`
    margin-left: 1em;
`;function RI({attribute:e,depth:t,path:n,library:r,parentAttribute:i}){const o=[n,e.id].filter((e=>!!e)).join("."),{lang:a}=wn(),{state:l,dispatch:c}=wI(),u=P(e.label,a),d=He(o,l.selectedAttributes);return s.jsxs(II,{onClick:()=>{c({type:hI.TOGGLE_ATTRIBUTE_SELECTION,attribute:Ge(e,{path:o,library:r,parentAttributeData:i})})},"data-testid":"attribute-in-list",children:[s.jsxs(En,{children:[s.jsx(EI,{children:u??e.id}),u&&s.jsx(SI,{children:e.id})]}),s.jsx(kI,{children:l.multiple?s.jsx(Mn,{checked:d}):s.jsx(cr,{checked:d})})]})}function _I(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var TI="function"==typeof Symbol&&Symbol.observable||"@@observable",jI=function(){return Math.random().toString(36).substring(7).split("").join(".")},AI={INIT:"@@redux/INIT"+jI(),REPLACE:"@@redux/REPLACE"+jI(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+jI()}};function OI(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function PI(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(_I(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(_I(1));return n(PI)(e,t)}if("function"!=typeof e)throw new Error(_I(2));var i=e,o=t,a=[],l=a,s=!1;function c(){l===a&&(l=a.slice())}function u(){if(s)throw new Error(_I(3));return o}function d(e){if("function"!=typeof e)throw new Error(_I(4));if(s)throw new Error(_I(5));var t=!0;return c(),l.push(e),function(){if(t){if(s)throw new Error(_I(6));t=!1,c();var n=l.indexOf(e);l.splice(n,1),a=null}}}function p(e){if(!OI(e))throw new Error(_I(7));if(void 0===e.type)throw new Error(_I(8));if(s)throw new Error(_I(9));try{s=!0,o=i(o,e)}finally{s=!1}for(var t=a=l,n=0;n<t.length;n++){(0,t[n])()}return e}function f(e){if("function"!=typeof e)throw new Error(_I(10));i=e,p({type:AI.REPLACE})}function v(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(_I(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[TI]=function(){return this},e}return p({type:AI.INIT}),(r={dispatch:p,subscribe:d,getState:u,replaceReducer:f})[TI]=v,r}function NI(e,t){return function(){return t(e.apply(this,arguments))}}function DI(e,t){if("function"==typeof e)return NI(e,t);if("object"!=typeof e||null===e)throw new Error(_I(16));var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=NI(i,t))}return n}function LI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function $I(t,n){var r=e.useState((function(){return{inputs:n,result:t()}}))[0],i=e.useRef(!0),o=e.useRef(r),a=i.current||Boolean(n&&o.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(n,o.current.inputs))?o.current:{inputs:n,result:t()};return e.useEffect((function(){i.current=!1,o.current=a}),[a]),a.result}var MI=$I,BI=function(e,t){return $I((function(){return e}),t)},VI=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return{top:t,right:n,bottom:r,left:i,width:n-i,height:r-t,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}}},FI=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},zI=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},HI={top:0,right:0,bottom:0,left:0},GI=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?HI:n,i=e.border,o=void 0===i?HI:i,a=e.padding,l=void 0===a?HI:a,s=VI(FI(t,r)),c=VI(zI(t,o)),u=VI(zI(c,l));return{marginBox:s,borderBox:VI(t),paddingBox:c,contentBox:u,margin:r,border:o,padding:l}},UI=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&Ue(!1),n},WI=function(e,t){var n,r,i=e.borderBox,o=e.border,a=e.margin,l=e.padding,s=(r=t,{top:(n=i).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return GI({borderBox:s,border:o,margin:a,padding:l})},qI=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),WI(e,t)},YI=function(e,t){var n={top:UI(t.marginTop),right:UI(t.marginRight),bottom:UI(t.marginBottom),left:UI(t.marginLeft)},r={top:UI(t.paddingTop),right:UI(t.paddingRight),bottom:UI(t.paddingBottom),left:UI(t.paddingLeft)},i={top:UI(t.borderTopWidth),right:UI(t.borderRightWidth),bottom:UI(t.borderBottomWidth),left:UI(t.borderLeftWidth)};return GI({borderBox:e,margin:n,padding:r,border:i})},XI=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return YI(t,n)},KI=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function QI(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||KI(r)&&KI(i)))return!1;var r,i;return!0}function ZI(e,t){var n;void 0===t&&(t=QI);var r,i=[],o=!1;return function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return o&&n===this&&t(a,i)||(r=e.apply(this,a),o=!0,n=this,i=a),r}}const JI=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t=i,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function ek(e,t){}function tk(){}function nk(e,t,n){var r=t.map((function(t){var r,i,o=(r=n,i=t.options,Ot({},r,{},i));return e.addEventListener(t.eventName,t.fn,o),function(){e.removeEventListener(t.eventName,t.fn,o)}}));return function(){r.forEach((function(e){e()}))}}ek.bind(null,"warn"),ek.bind(null,"error");function rk(e){this.message=e}function ik(e,t){if(!e)throw new rk("Invariant failed")}rk.prototype.toString=function(){return this.message};var ok=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=tk,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof rk&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}We(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=nk(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof rk))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(t.Component),ak=function(e){return e+1},lk=function(e,t){var n=e.droppableId===t.droppableId,r=ak(e.index),i=ak(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+i+"\n  "},sk=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},ck=function(e){return"\n  The item has returned to its starting position\n  of "+ak(e.index)+"\n"},uk="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",dk=function(e){return"\n  You have lifted an item in position "+ak(e.source.index)+"\n"},pk=function(e){var t=e.destination;if(t)return lk(e.source,t);var n=e.combine;return n?sk(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},fk=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+ck(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+lk(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+sk(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+ck(e.source)+"\n  "},vk={x:0,y:0},mk=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},gk=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},hk=function(e,t){return e.x===t.x&&e.y===t.y},bk=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},yk=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},xk=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},wk=function(e,t){return Math.min.apply(Math,t.map((function(t){return xk(e,t)})))},Ek=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},Sk=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},Ck=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Ik=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=VI({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):VI(e)},kk=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,o=function(e,t){return t?Sk(e,t.scroll.diff.displacement):e}(t.marginBox,i),a=function(e,t,n){var r;return n&&n.increasedBy?Ot({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(o,r,n);return{page:t,withPlaceholder:n,active:Ik(a,i)}},Rk=function(e,t){e.frame||ik(!1);var n=e.frame,r=gk(t,n.scroll.initial),i=bk(r),o=Ot({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}}),a=kk({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return Ot({},e,{frame:o,subject:a})};function _k(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function Tk(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function jk(e,t){if(e.find)return e.find(t);var n=Tk(e,t);return-1!==n?e[n]:void 0}function Ak(e){return Array.prototype.slice.call(e)}var Ok=ZI((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),Pk=ZI((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),Nk=ZI((function(e){return _k(e)})),Dk=ZI((function(e){return _k(e)})),Lk=ZI((function(e,t){return Dk(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}))}));function $k(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function Mk(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var Bk=ZI((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),Vk=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Fk={point:vk,value:0},zk={invisible:{},visible:{},all:[]},Hk={displaced:zk,displacedBy:Fk,at:null},Gk=function(e,t){return function(n){return e<=n&&n<=t}},Uk=function(e){var t=Gk(e.top,e.bottom),n=Gk(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var i=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(i&&o)return!0;var a=r.top<e.top&&r.bottom>e.bottom,l=r.left<e.left&&r.right>e.right;return!(!a||!l)||(a&&o||l&&i)}},Wk=function(e){var t=Gk(e.top,e.bottom),n=Gk(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},qk={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Yk={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Xk=function(e){var t=e.target,n=e.destination,r=e.viewport,i=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,a=i?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:vk;return Sk(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(a,n,o)&&function(e,t,n){return n(t)(e)}(a,r,o)},Kk=function(e){return Xk(Ot({},e,{isVisibleThroughFrameFn:Wk}))};function Qk(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,o=e.forceShouldAnimate,a=e.last;return t.reduce((function(e,t){var l=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return VI(FI(n,r))}(t,r),s=t.descriptor.id;if(e.all.push(s),!Xk(Ot({},{target:l,destination:n,viewport:i,withDroppableDisplacement:!0},{isVisibleThroughFrameFn:Uk})))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,n){if("boolean"==typeof n)return n;if(!t)return!0;var r=t.invisible,i=t.visible;if(r[e])return!1;var o=i[e];return!o||o.shouldAnimate}(s,a,o),u={draggableId:s,shouldAnimate:c};return e.visible[s]=u,e}),{all:[],visible:{},invisible:{}})}function Zk(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,o=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:zk,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:o}}}}function Jk(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,o=e.displacedBy,a=e.last,l=e.index,s=e.forceShouldAnimate,c=Vk(t,r);if(null==l)return Zk({insideDestination:n,inHomeList:c,displacedBy:o,destination:r});var u=jk(n,(function(e){return e.descriptor.index===l}));if(!u)return Zk({insideDestination:n,inHomeList:c,displacedBy:o,destination:r});var d=Bk(t,n),p=n.indexOf(u);return{displaced:Qk({afterDragging:d.slice(p),destination:r,displacedBy:o,last:a,viewport:i.frame,forceShouldAnimate:s}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:l}}}}function eR(e,t){return Boolean(t.effected[e])}var tR=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,o=e.destination,a=e.insideDestination,l=e.previousImpact,s=e.viewport,c=e.afterCritical,u=l.at;if(u||ik(!1),"REORDER"===u.type){var d=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var o=i.index,a=t?o+1:o-1,l=r[0].descriptor.index,s=r[r.length-1].descriptor.index;return a<l||a>(n?s:s+1)?null:a}({isMovingForward:t,isInHomeList:n,location:u.destination,insideDestination:a});return null==d?null:Jk({draggable:r,insideDestination:a,destination:o,viewport:s,last:l.displaced,displacedBy:l.displacedBy,index:d})}var p=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,o=e.afterCritical;if(!n.isCombineEnabled)return null;var a=i.draggableId,l=r[a].descriptor.index;return eR(a,o)?t?l:l-1:t?l+1:l}({isMovingForward:t,destination:o,displaced:l.displaced,draggables:i,combine:u.combine,afterCritical:c});return null==p?null:Jk({draggable:r,insideDestination:a,destination:o,viewport:s,last:l.displaced,displacedBy:l.displacedBy,index:p})},nR=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=Mk(n);i||ik(!1);var o=i.draggableId,a=r[o].page.borderBox.center,l=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,o=Boolean(t.visible[r]||t.invisible[r]);return eR(r,n)?o?vk:bk(i.point):o?i.point:vk}({displaced:n.displaced,afterCritical:t,combineWith:o,displacedBy:n.displacedBy});return mk(a,l)},rR=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},iR=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},oR=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return yk(t.line,n.marginBox[t.end]+rR(t,r),iR(t,n.marginBox,r))},aR=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return yk(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),iR(t,n.marginBox,r))},lR=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,o=e.afterCritical,a=Lk(i.descriptor.id,r),l=n.page,s=i.axis;if(!a.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return yk(t.line,n.contentBox[t.start]+rR(t,r),iR(t,n.contentBox,r))}({axis:s,moveInto:i.page,isMoving:l});var c=t.displaced,u=t.displacedBy,d=c.all[0];if(d){var p=r[d];if(eR(d,o))return aR({axis:s,moveRelativeTo:p.page,isMoving:l});var f=WI(p.page,u.point);return aR({axis:s,moveRelativeTo:f,isMoving:l})}var v=a[a.length-1];if(v.descriptor.id===n.descriptor.id)return l.borderBox.center;if(eR(v.descriptor.id,o)){var m=WI(v.page,bk(o.displacedBy.point));return oR({axis:s,moveRelativeTo:m,isMoving:l})}return oR({axis:s,moveRelativeTo:v.page,isMoving:l})},sR=function(e,t){var n=e.frame;return n?mk(t,n.scroll.diff.displacement):t},cR=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,o=e.afterCritical,a=n.page.borderBox.center,l=t.at;return r&&l?"REORDER"===l.type?lR({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:o}):nR({impact:t,draggables:i,afterCritical:o}):a}(e),n=e.droppable;return n?sR(n,t):t},uR=function(e,t){var n=gk(t,e.scroll.initial),r=bk(n);return{frame:VI({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function dR(e,t){return e.map((function(e){return t[e]}))}var pR=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=function(e,t){return mk(e.scroll.diff.displacement,t)}(e.viewport,t),i=gk(r,n.page.borderBox.center);return mk(n.client.borderBox.center,i)},fR=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,o=e.withDroppableDisplacement,a=e.onlyOnMainAxis,l=void 0!==a&&a,s=gk(r,t.page.borderBox.center),c={target:Sk(t.page.borderBox,s),destination:n,withDroppableDisplacement:o,viewport:i};return l?function(e){return Xk(Ot({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=Gk(e.top,e.bottom),r=Gk(e.left,e.right);return function(e){return t===qk?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(c):Kk(c)},vR=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,o=e.previousImpact,a=e.viewport,l=e.previousPageBorderBoxCenter,s=e.previousClientSelection,c=e.afterCritical;if(!r.isEnabled)return null;var u=Lk(r.descriptor.id,i),d=Vk(n,r),p=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,o=e.previousImpact;if(!r.isCombineEnabled)return null;if(!$k(o))return null;function a(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return Ot({},o,{at:t})}var l=o.displaced.all,s=l.length?l[0]:null;if(t)return s?a(s):null;var c=Bk(n,i);if(!s)return c.length?a(c[c.length-1].descriptor.id):null;var u=Tk(c,(function(e){return e.descriptor.id===s}));-1===u&&ik(!1);var d=u-1;return d<0?null:a(c[d].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:u,previousImpact:o})||tR({isMovingForward:t,isInHomeList:d,draggable:n,draggables:i,destination:r,insideDestination:u,previousImpact:o,viewport:a,afterCritical:c});if(!p)return null;var f=cR({impact:p,draggable:n,droppable:r,draggables:i,afterCritical:c});if(fR({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:pR({pageBorderBoxCenter:f,draggable:n,viewport:a}),impact:p,scrollJumpRequest:null};var v=gk(f,l),m=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,o=e.maxScrollChange,a=uR(n,mk(n.scroll.current,o)),l=r.frame?Rk(r,mk(r.frame.scroll.current,o)):r,s=t.displaced,c=Qk({afterDragging:dR(s.all,i),destination:r,displacedBy:t.displacedBy,viewport:a.frame,last:s,forceShouldAnimate:!1}),u=Qk({afterDragging:dR(s.all,i),destination:l,displacedBy:t.displacedBy,viewport:n.frame,last:s,forceShouldAnimate:!1}),d={},p={},f=[s,c,u];return s.all.forEach((function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,f);t?p[e]=t:d[e]=!0})),Ot({},t,{displaced:{all:s.all,invisible:d,visible:p}})}({impact:p,viewport:a,destination:r,draggables:i,maxScrollChange:v});return{clientSelection:s,impact:m,scrollJumpRequest:v}},mR=function(e){var t=e.subject.active;return t||ik(!1),t},gR=function(e,t){var n=e.page.borderBox.center;return eR(e.descriptor.id,t)?gk(n,t.displacedBy.point):n},hR=function(e,t){var n=e.page.borderBox;return eR(e.descriptor.id,t)?Sk(n,bk(t.displacedBy.point)):n},bR=ZI((function(e,t){var n=t[e.line];return{value:n,point:yk(e.line,n)}})),yR=function(e,t){return Ot({},e,{scroll:Ot({},e.scroll,{max:t})})},xR=function(e,t,n){var r=e.frame;Vk(t,e)&&ik(!1),e.subject.withPlaceholder&&ik(!1);var i=bR(e.axis,t.displaceBy).point,o=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return yk(r.line,t[r.line]);var i=e.subject.page.contentBox[r.size],o=Lk(e.descriptor.id,n).reduce((function(e,t){return e+t.client.marginBox[r.size]}),0)+t[r.line]-i;return o<=0?null:yk(r.line,o)}(e,i,n),a={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){var l=kk({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return Ot({},e,{subject:l})}var s=o?mk(r.scroll.max,o):r.scroll.max,c=yR(r,s),u=kk({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:c});return Ot({},e,{subject:u,frame:c})},wR=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,o=e.draggables,a=e.droppables,l=e.viewport,s=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,o=e.viewport,a=r.subject.active;if(!a)return null;var l=r.axis,s=Gk(a[l.start],a[l.end]),c=Nk(i).filter((function(e){return e!==r})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return Uk(o.frame)(mR(e))})).filter((function(e){var n=mR(e);return t?a[l.crossAxisEnd]<n[l.crossAxisEnd]:n[l.crossAxisStart]<a[l.crossAxisStart]})).filter((function(e){var t=mR(e),n=Gk(t[l.start],t[l.end]);return s(t[l.start])||s(t[l.end])||n(a[l.start])||n(a[l.end])})).sort((function(e,n){var r=mR(e)[l.crossAxisStart],i=mR(n)[l.crossAxisStart];return t?r-i:i-r})).filter((function(e,t,n){return mR(e)[l.crossAxisStart]===mR(n[0])[l.crossAxisStart]}));if(!c.length)return null;if(1===c.length)return c[0];var u=c.filter((function(e){return Gk(mR(e)[l.start],mR(e)[l.end])(n[l.line])}));return 1===u.length?u[0]:u.length>1?u.sort((function(e,t){return mR(e)[l.start]-mR(t)[l.start]}))[0]:c.sort((function(e,t){var r=wk(n,Ck(mR(e))),i=wk(n,Ck(mR(t)));return r!==i?r-i:mR(e)[l.start]-mR(t)[l.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:a,viewport:l});if(!c)return null;var u=Lk(c.descriptor.id,o),d=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,o=e.afterCritical;return i.filter((function(e){return Kk({target:hR(e,o),destination:r,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(e,n){var i=xk(t,sR(r,gR(e,o))),a=xk(t,sR(r,gR(n,o)));return i<a?-1:a<i?1:e.descriptor.index-n.descriptor.index}))[0]||null}({pageBorderBoxCenter:n,viewport:l,destination:c,insideDestination:u,afterCritical:s}),p=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,o=e.draggables,a=e.destination,l=e.viewport,s=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:zk,displacedBy:Fk,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},u=cR({impact:c,draggable:i,droppable:a,draggables:o,afterCritical:s}),d=Vk(i,a)?a:xR(a,i,o);return fR({draggable:i,destination:d,newPageBorderBoxCenter:u,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var p,f=Boolean(t[a.axis.line]<=n.page.borderBox.center[a.axis.line]),v=(p=n.descriptor.index,n.descriptor.id===i.descriptor.id||f?p:p+1),m=bR(a.axis,i.displaceBy);return Jk({draggable:i,insideDestination:r,destination:a,viewport:l,displacedBy:m,last:zk,index:v})}({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:o,moveRelativeTo:d,insideDestination:u,viewport:l,afterCritical:s});if(!p)return null;var f=cR({impact:p,draggable:r,droppable:c,draggables:o,afterCritical:s});return{clientSelection:pR({pageBorderBoxCenter:f,draggable:r,viewport:l}),impact:p,scrollJumpRequest:null}},ER=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},SR=function(e){var t=e.state,n=e.type,r=function(e,t){var n=ER(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),i=Boolean(r),o=t.dimensions.droppables[t.critical.droppable.id],a=r||o,l=a.axis.direction,s="vertical"===l&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===l&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(s&&!i)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,p=t.dimensions,f=p.draggables,v=p.droppables;return s?vR({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:a,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):wR({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:a,draggables:f,droppables:v,viewport:t.viewport,afterCritical:t.afterCritical})};function CR(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function IR(e){var t=Gk(e.top,e.bottom),n=Gk(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function kR(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=Nk(r).filter((function(e){if(!e.isEnabled)return!1;var n,r,i=e.subject.active;if(!i)return!1;if(r=i,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(IR(i)(t.center))return!0;var o=e.axis,a=i.center[o.crossAxisLine],l=t[o.crossAxisStart],s=t[o.crossAxisEnd],c=Gk(i[o.crossAxisStart],i[o.crossAxisEnd]),u=c(l),d=c(s);return!u&&!d||(u?l<a:s>a)}));return i.length?1===i.length?i[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,o=r.map((function(e){var n=e.axis,r=yk(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:xk(i,r)}})).sort((function(e,t){return t.distance-e.distance}));return o[0]?o[0].id:null}({pageBorderBox:t,draggable:n,candidates:i}):null}var RR=function(e,t){return VI(Sk(e,t))};function _R(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var TR=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,o=e.previousImpact,a=e.viewport,l=e.afterCritical,s=RR(n.page.borderBox,t),c=kR({pageBorderBox:s,draggable:n,droppables:i});if(!c)return Hk;var u,d,p=i[c],f=Lk(p.descriptor.id,r),v=(u=s,(d=p.frame)?RR(u,d.scroll.diff.value):u);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,o=e.insideDestination,a=e.afterCritical;if(!i.isCombineEnabled)return null;var l=i.axis,s=bR(i.axis,t.displaceBy),c=s.value,u=n[l.start],d=n[l.end],p=jk(Bk(t,o),(function(e){var t=e.descriptor.id,n=e.page.borderBox,i=n[l.size]/4,o=eR(t,a),s=_R({displaced:r.displaced,id:t});return o?s?d>n[l.start]+i&&d<n[l.end]-i:u>n[l.start]-c+i&&u<n[l.end]-c-i:s?d>n[l.start]+c+i&&d<n[l.end]+c-i:u>n[l.start]+i&&u<n[l.end]-i}));return p?{displacedBy:s,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:i.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:v,draggable:n,previousImpact:o,destination:p,insideDestination:f,afterCritical:l})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,o=e.last,a=e.viewport,l=e.afterCritical,s=r.axis,c=bR(r.axis,n.displaceBy),u=c.value,d=t[s.start],p=t[s.end],f=function(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:jk(Bk(n,i),(function(e){var t=e.descriptor.id,n=e.page.borderBox.center[s.line],r=eR(t,l),i=_R({displaced:o,id:t});return r?i?p<=n:d<n-u:i?p<=n+u:d<n})),inHomeList:Vk(n,r)});return Jk({draggable:n,insideDestination:i,destination:r,viewport:a,last:o,displacedBy:c,index:f})}({pageBorderBoxWithDroppableScroll:v,draggable:n,destination:p,insideDestination:f,last:o.displaced,viewport:a,afterCritical:l})},jR=function(e,t){var n;return Ot({},e,((n={})[t.descriptor.id]=t,n))},AR=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,i=ER(t),o=ER(n);if(!i)return r;if(i===o)return r;var a=r[i];if(!a.subject.withPlaceholder)return r;var l=function(e){var t=e.subject.withPlaceholder;t||ik(!1);var n=e.frame;if(!n){var r=kk({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return Ot({},e,{subject:r})}var i=t.oldFrameMaxScroll;i||ik(!1);var o=yR(n,i),a=kk({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return Ot({},e,{subject:a,frame:o})}(a);return jR(r,l)},OR=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,o=e.impact,a=e.scrollJumpRequest,l=i||t.viewport,s=r||t.dimensions,c=n||t.current.client.selection,u=gk(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:mk(t.initial.client.borderBoxCenter,u)},p={selection:mk(d.selection,l.scroll.current),borderBoxCenter:mk(d.borderBoxCenter,l.scroll.current),offset:mk(d.offset,l.scroll.diff.value)},f={client:d,page:p};if("COLLECTING"===t.phase)return Ot({phase:"COLLECTING"},t,{dimensions:s,viewport:l,current:f});var v=s.draggables[t.critical.draggable.id],m=o||TR({pageOffset:p.offset,draggable:v,draggables:s.draggables,droppables:s.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),g=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,o=e.impact,a=AR({previousImpact:i,impact:o,droppables:r}),l=ER(o);if(!l)return a;var s=r[l];if(Vk(t,s))return a;if(s.subject.withPlaceholder)return a;var c=xR(s,t,n);return jR(a,c)}({draggable:v,impact:m,previousImpact:t.impact,draggables:s.draggables,droppables:s.droppables});return Ot({},t,{current:f,dimensions:{draggables:s.draggables,droppables:g},impact:m,viewport:l,scrollJumpRequest:a||null,forceShouldAnimate:!a&&null})};var PR=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,o=e.forceShouldAnimate,a=t.displaced,l=function(e,t){return e.map((function(e){return t[e]}))}(a.all,r),s=Qk({afterDragging:l,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:o,last:a});return Ot({},t,{displaced:s})},NR=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,o=e.viewport,a=e.afterCritical,l=cR({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:a});return pR({pageBorderBoxCenter:l,draggable:n,viewport:o})},DR=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&ik(!1);var i=t.impact,o=r||t.viewport,a=n||t.dimensions,l=a.draggables,s=a.droppables,c=l[t.critical.draggable.id],u=ER(i);u||ik(!1);var d=s[u],p=PR({impact:i,viewport:o,destination:d,draggables:l}),f=NR({impact:p,draggable:c,droppable:d,draggables:l,viewport:o,afterCritical:t.afterCritical});return OR({impact:p,clientSelection:f,state:t,dimensions:a,viewport:o})},LR=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,o=bR(n.axis,t.displaceBy),a=Lk(n.descriptor.id,r),l=a.indexOf(t);-1===l&&ik(!1);var s,c=a.slice(l+1),u=c.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),d={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:o,effected:u};return{impact:{displaced:Qk({afterDragging:c,destination:n,displacedBy:o,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:(s=t.descriptor,{index:s.index,droppableId:s.droppableId})}},afterCritical:d}},$R=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,o=function(e){var t=e.frame;return t||ik(!1),t}(n[t]).scroll.diff.value,a=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=WI(t.client,n),o=qI(i,r);return Ot({},t,{placeholder:Ot({},t.placeholder,{client:i}),client:i,page:o})}({draggable:e,offset:mk(i,o),initialWindowScroll:r.scroll.initial});return a}))},MR=function(e){return"SNAP"===e.movementMode},BR=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:jR(e.droppables,t)}}(e.dimensions,t);return!MR(e)||n?OR({state:e,dimensions:r}):DR({state:e,dimensions:r})};function VR(e){return e.isDragging&&"SNAP"===e.movementMode?Ot({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var FR={phase:"IDLE",completed:null,shouldFlush:!1},zR=function(e,t){if(void 0===e&&(e=FR),"FLUSH"===t.type)return Ot({},FR,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&ik(!1);var n=t.payload,r=n.critical,i=n.clientSelection,o=n.viewport,a=n.dimensions,l=n.movementMode,s=a.draggables[r.draggable.id],c=a.droppables[r.droppable.id],u={selection:i,borderBoxCenter:s.client.borderBox.center,offset:vk},d={client:u,page:{selection:mk(u.selection,o.scroll.initial),borderBoxCenter:mk(u.selection,o.scroll.initial),offset:mk(u.selection,o.scroll.diff.value)}},p=Nk(a.droppables).every((function(e){return!e.isFixedOnPage})),f=LR({draggable:s,home:c,draggables:a.draggables,viewport:o}),v=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:l,dimensions:a,initial:d,current:d,isWindowScrollAllowed:p,impact:v,afterCritical:f.afterCritical,onLiftImpact:v,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&ik(!1),Ot({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&ik(!1),function(e){var t=e.state,n=e.published,r=n.modified.map((function(e){var n=t.dimensions.droppables[e.droppableId];return Rk(n,e.scroll)})),i=Ot({},t.dimensions.droppables,{},Ok(r)),o=Pk($R({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),a=Ot({},t.dimensions.draggables,{},o);n.removals.forEach((function(e){delete a[e]}));var l={droppables:i,draggables:a},s=ER(t.impact),c=s?l.droppables[s]:null,u=l.draggables[t.critical.draggable.id],d=l.droppables[t.critical.droppable.id],p=LR({draggable:u,home:d,draggables:a,viewport:t.viewport}),f=p.impact,v=p.afterCritical,m=c&&c.isCombineEnabled?t.impact:f,g=TR({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:m,viewport:t.viewport,afterCritical:v}),h=Ot({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:g,onLiftImpact:f,dimensions:l,afterCritical:v,forceShouldAnimate:!1});return"COLLECTING"===t.phase?h:Ot({phase:"DROP_PENDING"},h,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;CR(e)||ik(!1);var m=t.payload.client;return hk(m,e.current.client.selection)?e:OR({state:e,clientSelection:m,impact:MR(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return VR(e);if("COLLECTING"===e.phase)return VR(e);CR(e)||ik(!1);var g=t.payload,h=g.id,b=g.newScroll,y=e.dimensions.droppables[h];if(!y)return e;var x=Rk(y,b);return BR(e,x,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;CR(e)||ik(!1);var w=t.payload,E=w.id,S=w.isEnabled,C=e.dimensions.droppables[E];C||ik(!1),C.isEnabled===S&&ik(!1);var I=Ot({},C,{isEnabled:S});return BR(e,I,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;CR(e)||ik(!1);var k=t.payload,R=k.id,_=k.isCombineEnabled,T=e.dimensions.droppables[R];T||ik(!1),T.isCombineEnabled===_&&ik(!1);var j=Ot({},T,{isCombineEnabled:_});return BR(e,j,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;CR(e)||ik(!1),e.isWindowScrollAllowed||ik(!1);var A=t.payload.newScroll;if(hk(e.viewport.scroll.current,A))return VR(e);var O=uR(e.viewport,A);return MR(e)?DR({state:e,viewport:O}):OR({state:e,viewport:O})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!CR(e))return e;var P=t.payload.maxScroll;if(hk(P,e.viewport.scroll.max))return e;var N=Ot({},e.viewport,{scroll:Ot({},e.viewport.scroll,{max:P})});return Ot({phase:"DRAGGING"},e,{viewport:N})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&ik(!1);var D=SR({state:e,type:t.type});return D?OR({state:e,impact:D.impact,clientSelection:D.clientSelection,scrollJumpRequest:D.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var L=t.payload.reason;return"COLLECTING"!==e.phase&&ik(!1),Ot({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:L})}if("DROP_ANIMATE"===t.type){var $=t.payload,M=$.completed,B=$.dropDuration,V=$.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&ik(!1),{phase:"DROP_ANIMATING",completed:M,dropDuration:B,newHomeClientOffset:V,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},HR=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},GR=function(){return{type:"COLLECTION_STARTING",payload:null}},UR=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},WR=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},qR=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},YR=function(e){return{type:"MOVE",payload:e}},XR=function(){return{type:"MOVE_UP",payload:null}},KR=function(){return{type:"MOVE_DOWN",payload:null}},QR=function(){return{type:"MOVE_RIGHT",payload:null}},ZR=function(){return{type:"MOVE_LEFT",payload:null}},JR=function(e){return{type:"DROP_COMPLETE",payload:e}},e_=function(e){return{type:"DROP",payload:e}},t_=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},n_="cubic-bezier(.2,1,.1,1)",r_={drop:0,combining:.7},i_={drop:.75},o_=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",a_={fluid:"opacity "+o_,snap:"transform "+o_+", opacity "+o_,drop:function(e){var t=e+"s "+n_;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+o_,placeholder:"height "+o_+", width "+o_+", margin "+o_},l_=function(e){return hk(e,vk)?null:"translate("+e.x+"px, "+e.y+"px)"},s_=l_,c_=function(e,t){var n=l_(e);return n?t?n+" scale("+i_.drop+")":n:null},u_=.33,d_=.55,p_=d_-u_,f_=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var i=t(),o=r.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&ik(!1),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&ik(!1);var a=i.critical,l=i.dimensions,s=l.draggables[i.critical.draggable.id],c=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,o=e.viewport,a=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:Ot({},r,{displaced:zk}),didDropInsideDroppable:!0}:{impact:PR({draggables:t,impact:a,destination:i,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),u=c.impact,d=c.didDropInsideDroppable,p=d?$k(u):null,f=d?Mk(u):null,v={index:a.draggable.index,droppableId:a.droppable.id},m={draggableId:s.descriptor.id,type:s.descriptor.type,source:v,reason:o,mode:i.movementMode,destination:p,combine:f},g=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,o=e.afterCritical,a=r.draggables,l=r.droppables,s=ER(t),c=s?l[s]:null,u=l[n.descriptor.droppableId],d=NR({impact:t,draggable:n,draggables:a,afterCritical:o,droppable:c||u,viewport:i});return gk(d,n.client.borderBox.center)}({impact:u,draggable:s,dimensions:l,viewport:i.viewport,afterCritical:i.afterCritical}),h={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:u};if(!hk(i.current.client.offset,g)||Boolean(m.combine)){var b=function(e){var t=e.current,n=e.destination,r=e.reason,i=xk(t,n);if(i<=0)return u_;if(i>=1500)return d_;var o=u_+p_*(i/1500);return Number(("CANCEL"===r?.6*o:o).toFixed(2))}({current:i.current.client.offset,destination:g,reason:o});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:g,dropDuration:b,completed:h}))}else n(JR({completed:h}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:o}))}else e(r)}}},v_=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function m_(e){var t=e.onWindowScroll;var n,r=JI((function(){t(v_())})),i=(n=r,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||n()}}),o=tk;function a(){return o!==tk}return{start:function(){a()&&ik(!1),o=nk(window,[i])},stop:function(){a()||ik(!1),r.cancel(),o(),o=tk},isActive:a}}var g_=function(e){var t=m_({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},h_=function(){var e=[];return{add:function(t){var n=setTimeout((function(){return function(t){var n=Tk(e,(function(e){return e.timerId===t}));-1===n&&ik(!1),e.splice(n,1)[0].callback()}(n)})),r={timerId:n,callback:t};e.push(r)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}},b_=function(e,t){t()},y_=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},x_=function(e,t,n,r){if(e){var i=function(e){var t=!1,n=!1,r=setTimeout((function(){n=!0})),i=function(i){t||n||(t=!0,e(i),clearTimeout(r))};return i.wasCalled=function(){return t},i}(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}else n(r(t))},w_=function(e,t){var n=function(e,t){var n=h_(),r=null,i=function(n){r||ik(!1),r=null,b_(0,(function(){return x_(e().onDragEnd,n,t,fk)}))};return{beforeCapture:function(t,n){r&&ik(!1),b_(0,(function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})}))},beforeStart:function(t,n){r&&ik(!1),b_(0,(function(){var r=e().onBeforeDragStart;r&&r(y_(t,n))}))},start:function(i,o){r&&ik(!1);var a=y_(i,o);r={mode:o,lastCritical:i,lastLocation:a.source,lastCombine:null},n.add((function(){b_(0,(function(){return x_(e().onDragStart,a,t,dk)}))}))},update:function(i,o){var a=$k(o),l=Mk(o);r||ik(!1);var s=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(i,r.lastCritical);s&&(r.lastCritical=i);var c,u,d=(u=a,!(null==(c=r.lastLocation)&&null==u||null!=c&&null!=u&&c.droppableId===u.droppableId&&c.index===u.index));d&&(r.lastLocation=a);var p=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(r.lastCombine,l);if(p&&(r.lastCombine=l),s||d||p){var f=Ot({},y_(i,r.mode),{combine:l,destination:a});n.add((function(){b_(0,(function(){return x_(e().onDragUpdate,f,t,pk)}))}))}},flush:function(){r||ik(!1),n.flush()},drop:i,abort:function(){if(r){var e=Ot({},y_(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var i=r.payload.critical;return n.beforeStart(i,r.payload.movementMode),t(r),void n.start(i,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var o=r.payload.completed.result;return n.flush(),t(r),void n.drop(o)}if(t(r),"FLUSH"!==r.type){var a=e.getState();"DRAGGING"===a.phase&&n.update(a.critical,a.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},E_=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&ik(!1),e.dispatch(JR({completed:r.completed}))}else t(n)}}},S_=function(e){var t=null,n=null;return function(r){return function(i){if("FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type&&"DROP_ANIMATION_FINISHED"!==i.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(i),"DROP_ANIMATE"===i.type){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((function(){n=null,t=nk(window,[o])}))}}}},C_=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(e_({reason:r.reason})))}}}},I_=LI,k_=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,i=e.styleMarshal,o=e.getResponders,a=e.announce,l=e.autoScroller;return PI(zR,I_(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(_I(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=LI.apply(void 0,o)(n.dispatch),bt(bt({},n),{},{dispatch:r})}}}((t=i,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(i){if("LIFT"===i.type){var o=i.payload,a=o.id,l=o.clientSelection,s=o.movementMode,c=n();"DROP_ANIMATING"===c.phase&&r(JR({completed:c.completed})),"IDLE"!==n().phase&&ik(!1),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:a,movementMode:s}});var u={draggableId:a,scrollOptions:{shouldPublishImmediately:"SNAP"===s}},d=e.startPublishing(u),p=d.critical,f=d.dimensions,v=d.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:p,dimensions:f,clientSelection:l,movementMode:s,viewport:v}})}else t(i)}}}}(n),f_,E_,S_,C_,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var i=t.getState();return"DRAGGING"!==i.phase&&ik(!1),void e.start(i)}n(r),e.scroll(t.getState())}}}}(l),g_,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),w_(o,a))))};var R_=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,o=gk({x:n,y:t},{x:i,y:r});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},__=function(){var e=document.documentElement;return e||ik(!1),e},T_=function(){var e=__();return R_({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},j_=function(e){var t,n,r,i,o,a,l,s=e.critical,c=e.scrollOptions,u=e.registry,d=(t=v_(),n=T_(),r=t.y,i=t.x,o=__(),a=o.clientWidth,l=o.clientHeight,{frame:VI({top:r,left:i,right:i+a,bottom:r+l}),scroll:{initial:t,current:t,max:n,diff:{value:vk,displacement:vk}}}),p=d.scroll.current,f=s.droppable,v=u.droppable.getAllByType(f.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(p,c)})),m=u.draggable.getAllByType(s.draggable.type).map((function(e){return e.getDimension(p)}));return{dimensions:{draggables:Pk(m),droppables:Ok(v)},critical:s,viewport:d}};function A_(e,t,n){return n.descriptor.id!==t.id&&(n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var O_,P_,N_=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},i=null,o=function(){i||(n.collectionStarting(),i=requestAnimationFrame((function(){i=null;var e=r,o=e.additions,a=e.removals,l=e.modified,s=Object.keys(o).map((function(e){return t.draggable.getById(e).getDimension(vk)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),c=Object.keys(l).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),u={additions:s,removals:Object.keys(a),modified:c};r={additions:{},removals:{},modified:{}},n.publish(u)})))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],o()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],o()},stop:function(){i&&(cancelAnimationFrame(i),i=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(t){n||ik(!1);var i=n.critical.draggable;"ADDITION"===t.type&&A_(e,i,t.value)&&r.add(t.value),"REMOVAL"===t.type&&A_(e,i,t.value)&&r.remove(t.value)};return{updateDroppableIsEnabled:function(r,i){e.droppable.exists(r)||ik(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:i})},updateDroppableIsCombineEnabled:function(r,i){n&&(e.droppable.exists(r)||ik(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:i}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,i){n&&(e.droppable.exists(r)||ik(!1),t.updateDroppableScroll({id:r,newScroll:i}))},startPublishing:function(t){n&&ik(!1);var r=e.draggable.getById(t.draggableId),o=e.droppable.getById(r.descriptor.droppableId),a={draggable:r.descriptor,droppable:o.descriptor},l=e.subscribe(i);return n={critical:a,unsubscribe:l},j_({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),n.unsubscribe(),n=null}}}},D_=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},L_=function(e){window.scrollBy(e.x,e.y)},$_=ZI((function(e){return Nk(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),M_=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var o=function(e,t){return jk($_(t),(function(t){return t.frame||ik(!1),IR(t.frame.pageMarginBox)(e)}))}(t,r);return o},B_=.25,V_=.05,F_=28,z_=function(e){return Math.pow(e,2)},H_={stopDampeningAt:1200,accelerateAt:360},G_=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;return 0===i?0:(r-t)/i},U_=H_.accelerateAt,W_=H_.stopDampeningAt,q_=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,o=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return F_;if(e===t.startScrollingFrom)return 1;var n=G_({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=F_*z_(1-n);return Math.ceil(r)}(t,n);return 0===o?0:i?Math.max(function(e,t){var n=t,r=W_,i=Date.now()-n;if(i>=W_)return e;if(i<U_)return 1;var o=G_({startOfRange:U_,endOfRange:r,current:i}),a=e*z_(o);return Math.ceil(a)}(o,r),1):o},Y_=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,o=e.shouldUseTimeDampening,a=function(e,t){return{startScrollingFrom:e[t.size]*B_,maxScrollValueAt:e[t.size]*V_}}(t,i);return n[i.end]<n[i.start]?q_({distanceToEdge:n[i.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:o}):-1*q_({distanceToEdge:n[i.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:o})},X_=Ek((function(e){return 0===e?0:e})),K_=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,o=e.shouldUseTimeDampening,a={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},l=Y_({container:n,distanceToEdges:a,dragStartTime:t,axis:qk,shouldUseTimeDampening:o}),s=Y_({container:n,distanceToEdges:a,dragStartTime:t,axis:Yk,shouldUseTimeDampening:o}),c=X_({x:s,y:l});if(hk(c,vk))return null;var u=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,o=n.width>t.width;return o||i?o&&i?null:{x:o?0:r.x,y:i?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return u?hk(u,vk)?null:u:null},Q_=Ek((function(e){return 0===e?0:e>0?1:-1})),Z_=(O_=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,n=e.max,r=e.change,i=mk(t,r),o={x:O_(i.x,n.x),y:O_(i.y,n.y)};return hk(o,vk)?null:o}),J_=function(e){var t=e.max,n=e.current,r=e.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},o=Q_(r),a=Z_({max:i,current:n,change:o});return!a||(0!==o.x&&0===a.x||0!==o.y&&0===a.y)},eT=function(e,t){return J_({current:e.scroll.current,max:e.scroll.max,change:t})},tT=function(e,t){var n=e.frame;return!!n&&J_({current:n.scroll.current,max:n.scroll.max,change:t})},nT=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,o=e.scrollDroppable,a=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var s=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,a=K_({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:o});return a&&eT(t,a)?a:null}({dragStartTime:n,viewport:t.viewport,subject:l,center:a,shouldUseTimeDampening:r});if(s)return void i(s)}var c=M_({center:a,destination:ER(t.impact),droppables:t.dimensions.droppables});if(c){var u=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var l=K_({dragStartTime:i,container:a.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:o});return l&&tT(t,l)?l:null}({dragStartTime:n,droppable:c,subject:l,center:a,shouldUseTimeDampening:r});u&&o(c.descriptor.id,u)}},rT=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(e,t){if(!tT(e,t))return t;var r=function(e,t){var n=e.frame;return n&&tT(e,t)?Z_({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var i=gk(t,r);return n(e.descriptor.id,i),gk(t,i)},o=function(e,t,n){if(!e)return n;if(!eT(t,n))return n;var i=function(e,t){if(!eT(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return Z_({current:r,max:n,change:t})}(t,n);if(!i)return r(n),null;var o=gk(n,i);return r(o),gk(n,o)};return function(e){var n=e.scrollJumpRequest;if(n){var r=ER(e.impact);r||ik(!1);var a=i(e.dimensions.droppables[r],n);if(a){var l=e.viewport,s=o(e.isWindowScrollAllowed,l,a);s&&function(e,n){var r=mk(e.current.client.selection,n);t({client:r})}(e,s)}}}},iT=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=JI(t),i=JI(n),o=null,a=function(e){o||ik(!1);var t=o,n=t.shouldUseTimeDampening,a=t.dragStartTime;nT({state:e,scrollWindow:r,scrollDroppable:i,dragStartTime:a,shouldUseTimeDampening:n})};return{start:function(e){o&&ik(!1);var t=Date.now(),n=!1,r=function(){n=!0};nT({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),o={dragStartTime:t,shouldUseTimeDampening:n},n&&a(e)},stop:function(){o&&(r.cancel(),i.cancel(),o=null)},scroll:a}}({scrollWindow:n,scrollDroppable:t}),o=rT({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&o(e):i.scroll(e))},start:i.start,stop:i.stop}},oT="data-rbd",aT={base:P_=oT+"-drag-handle",draggableId:P_+"-draggable-id",contextId:P_+"-context-id"},lT=function(){var e=oT+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),sT=function(){var e=oT+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),cT={contextId:oT+"-scroll-container-context-id"},uT=function(e,t){return e.map((function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""})).join(" ")},dT="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?e.useLayoutEffect:e.useEffect,pT=function(){var e=document.querySelector("head");return e||ik(!1),e},fT=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function vT(t,n){var r=MI((function(){return function(e){var t,n,r,i=(t=e,function(e){return"["+e+'="'+t+'"]'}),o=(n="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:i(aT.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:n,dragging:"pointer-events: none;",dropAnimating:n}}),a=[(r="\n      transition: "+a_.outOfTheWay+";\n    ",{selector:i(lT.contextId),styles:{dragging:r,dropAnimating:r,userCancel:r}}),o,{selector:i(sT.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:uT(a,"always"),resting:uT(a,"resting"),dragging:uT(a,"dragging"),dropAnimating:uT(a,"dropAnimating"),userCancel:uT(a,"userCancel")}}(t)}),[t]),i=e.useRef(null),o=e.useRef(null),a=BI(ZI((function(e){var t=o.current;t||ik(!1),t.textContent=e})),[]),l=BI((function(e){var t=i.current;t||ik(!1),t.textContent=e}),[]);dT((function(){(i.current||o.current)&&ik(!1);var e=fT(n),s=fT(n);return i.current=e,o.current=s,e.setAttribute(oT+"-always",t),s.setAttribute(oT+"-dynamic",t),pT().appendChild(e),pT().appendChild(s),l(r.always),a(r.resting),function(){var e=function(e){var t=e.current;t||ik(!1),pT().removeChild(t),e.current=null};e(i),e(o)}}),[n,l,a,r.always,r.resting,t]);var s=BI((function(){return a(r.dragging)}),[a,r.dragging]),c=BI((function(e){a("DROP"!==e?r.userCancel:r.dropAnimating)}),[a,r.dropAnimating,r.userCancel]),u=BI((function(){o.current&&a(r.resting)}),[a,r.resting]);return MI((function(){return{dragging:s,dropping:c,resting:u}}),[s,c,u])}var mT=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function gT(e){return e instanceof mT(e).HTMLElement}function hT(t){var n=e.useRef({}),r=e.useRef(null),i=e.useRef(null),o=e.useRef(!1),a=BI((function(e,t){var r={id:e,focus:t};return n.current[e]=r,function(){var t=n.current;t[e]!==r&&delete t[e]}}),[]),l=BI((function(e){var n=function(e,t){var n="["+aT.contextId+'="'+e+'"]',r=Ak(document.querySelectorAll(n));if(!r.length)return null;var i=jk(r,(function(e){return e.getAttribute(aT.draggableId)===t}));return i&&gT(i)?i:null}(t,e);n&&n!==document.activeElement&&n.focus()}),[t]),s=BI((function(e,t){r.current===e&&(r.current=t)}),[]),c=BI((function(){i.current||o.current&&(i.current=requestAnimationFrame((function(){i.current=null;var e=r.current;e&&l(e)})))}),[l]),u=BI((function(e){r.current=null;var t=document.activeElement;t&&t.getAttribute(aT.draggableId)===e&&(r.current=e)}),[]);return dT((function(){return o.current=!0,function(){o.current=!1;var e=i.current;e&&cancelAnimationFrame(e)}}),[]),MI((function(){return{register:a,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:s}}),[a,u,c,s])}function bT(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach((function(t){return t(e)}))}function r(t){return e.draggables[t]||null}function i(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var i=t.descriptor.id,o=r(i);o&&t.uniqueId===o.uniqueId&&(delete e.draggables[i],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||ik(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return _k(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=i(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=i(e);return t||ik(!1),t},findById:i,exists:function(e){return Boolean(i(e))},getAllByType:function(t){return _k(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var yT=t.createContext(null),xT=function(){var e=document.body;return e||ik(!1),e},wT={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var ET=0,ST={separator:"::"};function CT(e,t){return void 0===t&&(t=ST),MI((function(){return""+e+t.separator+ET++}),[t.separator,e])}var IT=t.createContext(null);function kT(t){var n=e.useRef(t);return e.useEffect((function(){n.current=t})),n}var RT,_T=((RT={})[13]=!0,RT[9]=!0,RT),TT=function(e){_T[e.keyCode]&&e.preventDefault()},jT=function(){var e="visibilitychange";return"undefined"==typeof document?e:jk([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}();var AT,OT={type:"IDLE"};function PT(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,o=e.clientY;if(0===t){var a={x:n,y:o},l=r();if("DRAGGING"===l.type)return e.preventDefault(),void l.actions.move(a);"PENDING"!==l.type&&ik(!1);var s=l.point;if(c=s,u=a,Math.abs(u.x-c.x)>=5||Math.abs(u.y-c.y)>=5){var c,u;e.preventDefault();var d=l.actions.fluidLift(a);i({type:"DRAGGING",actions:d})}}}},{eventName:"mouseup",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void TT(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&ik(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:jT,fn:t}]}function NT(){}var DT=((AT={})[34]=!0,AT[33]=!0,AT[36]=!0,AT[35]=!0,AT);function LT(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(DT[r.keyCode]?r.preventDefault():TT(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:jT,fn:n}]}var $T={type:"IDLE"};var MT={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function BT(e,t){if(null==t)return!1;if(Boolean(MT[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&BT(e,t.parentElement)}function VT(e,t){var n=t.target;return!!gT(n)&&BT(e,n)}var FT=function(e){return VI(e.getBoundingClientRect()).center};var zT=function(){var e="matches";return"undefined"==typeof document?e:jk([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function HT(e,t){return null==e?null:e[zT](t)?e:HT(e.parentElement,t)}function GT(e,t){return e.closest?e.closest(t):HT(e,t)}function UT(e,t){var n,r=t.target;if(!((n=r)instanceof mT(n).Element))return null;var i=function(e){return"["+aT.contextId+'="'+e+'"]'}(e),o=GT(r,i);return o&&gT(o)?o:null}function WT(e){e.preventDefault()}function qT(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,!!r()&&t===n}function YT(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var o=r.draggable.findById(i);return!!o&&(!!o.options.isEnabled&&!!D_(n.getState(),i))}function XT(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,o=e.draggableId,a=e.forceSensorStop,l=e.sourceEvent;if(!YT({lockAPI:t,store:r,registry:i,draggableId:o}))return null;var s=i.draggable.getById(o),c=function(e,t){var n="["+lT.contextId+'="'+e+'"]',r=jk(Ak(document.querySelectorAll(n)),(function(e){return e.getAttribute(lT.id)===t}));return r&&gT(r)?r:null}(n,s.descriptor.id);if(!c)return null;if(l&&!s.options.canDragInteractiveElements&&VT(c,l))return null;var u=t.claim(a||tk),d="PRE_DRAG";function p(){return s.options.shouldRespectForcePress}function f(){return t.isActive(u)}var v=function(e,t){qT({expected:e,phase:d,isLockActive:f,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function m(e){function n(){t.release(),d="COMPLETED"}function i(t,i){if(void 0===i&&(i={shouldBlockNextClick:!1}),e.cleanup(),i.shouldBlockNextClick){var o=nk(window,[{eventName:"click",fn:WT,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(o)}n(),r.dispatch(e_({reason:t}))}return"PRE_DRAG"!==d&&(n(),"PRE_DRAG"!==d&&ik(!1)),r.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),d="DRAGGING",Ot({isActive:function(){return qT({expected:"DRAGGING",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return i("DROP",e)},cancel:function(e){return i("CANCEL",e)}},e.actions)}return{isActive:function(){return qT({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(e){var t=JI((function(e){v((function(){return YR({client:e})}))})),n=m({liftActionArgs:{id:o,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}});return Ot({},n,{move:t})},snapLift:function(){var e={moveUp:function(){return v(XR)},moveRight:function(){return v(QR)},moveDown:function(){return v(KR)},moveLeft:function(){return v(ZR)}};return m({liftActionArgs:{id:o,clientSelection:FT(c),movementMode:"SNAP"},cleanup:tk,actions:e})},abort:function(){qT({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!0})&&t.release()}}}var KT=[function(t){var n=e.useRef(OT),r=e.useRef(tk),i=MI((function(){return{eventName:"mousedown",fn:function(e){if(!e.defaultPrevented&&0===e.button&&!(e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)){var n=t.findClosestDraggableId(e);if(n){var i=t.tryGetLock(n,l,{sourceEvent:e});if(i){e.preventDefault();var o={x:e.clientX,y:e.clientY};r.current(),u(i,o)}}}}}}),[t]),o=MI((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(e){if(!e.defaultPrevented){var n=t.findClosestDraggableId(e);if(n){var r=t.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||t.canGetLock(n)&&e.preventDefault())}}}}}),[t]),a=BI((function(){r.current=nk(window,[o,i],{passive:!1,capture:!0})}),[o,i]),l=BI((function(){"IDLE"!==n.current.type&&(n.current=OT,r.current(),a())}),[a]),s=BI((function(){var e=n.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),c=BI((function(){var e=PT({cancel:s,completed:l,getPhase:function(){return n.current},setPhase:function(e){n.current=e}});r.current=nk(window,e,{capture:!0,passive:!1})}),[s,l]),u=BI((function(e,t){"IDLE"!==n.current.type&&ik(!1),n.current={type:"PENDING",point:t,actions:e},c()}),[c]);dT((function(){return a(),function(){r.current()}}),[a])},function(t){var n=e.useRef(NT),r=MI((function(){return{eventName:"keydown",fn:function(e){if(!e.defaultPrevented&&32===e.keyCode){var r=t.findClosestDraggableId(e);if(r){var o=t.tryGetLock(r,s,{sourceEvent:e});if(o){e.preventDefault();var a=!0,l=o.snapLift();n.current(),n.current=nk(window,LT(l,s),{capture:!0,passive:!1})}}}function s(){a||ik(!1),a=!1,n.current(),i()}}}}),[t]),i=BI((function(){n.current=nk(window,[r],{passive:!1,capture:!0})}),[r]);dT((function(){return i(),function(){n.current()}}),[i])},function(t){var n=e.useRef($T),r=e.useRef(tk),i=BI((function(){return n.current}),[]),o=BI((function(e){n.current=e}),[]),a=MI((function(){return{eventName:"touchstart",fn:function(e){if(!e.defaultPrevented){var n=t.findClosestDraggableId(e);if(n){var i=t.tryGetLock(n,s,{sourceEvent:e});if(i){var o=e.touches[0],a={x:o.clientX,y:o.clientY};r.current(),p(i,a)}}}}}}),[t]),l=BI((function(){r.current=nk(window,[a],{capture:!0,passive:!1})}),[a]),s=BI((function(){var e=n.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),o($T),r.current(),l())}),[l,o]),c=BI((function(){var e=n.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[s]),u=BI((function(){var e={capture:!0,passive:!1},t={cancel:c,completed:s,getPhase:i},n=nk(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var i=e.touches[0],o={x:i.clientX,y:i.clientY};e.preventDefault(),n.actions.move(o)}else t()}},{eventName:"touchend",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&ik(!1);var i=e.touches[0];if(i&&i.force>=.15){var o=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return o?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();o&&t()}}},{eventName:jT,fn:t}]}(t),e),o=nk(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:jT,fn:t}]}(t),e);r.current=function(){n(),o()}}),[c,i,s]),d=BI((function(){var e=i();"PENDING"!==e.type&&ik(!1);var t=e.actions.fluidLift(e.point);o({type:"DRAGGING",actions:t,hasMoved:!1})}),[i,o]),p=BI((function(e,t){"IDLE"!==i().type&&ik(!1);var n=setTimeout(d,120);o({type:"PENDING",point:t,actions:e,longPressTimerId:n}),u()}),[u,i,o,d]);dT((function(){return l(),function(){r.current();var e=i();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),o($T))}}),[i,l,o]),dT((function(){return nk(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function QT(t){var n=t.contextId,r=t.store,i=t.registry,o=t.customSensors,a=t.enableDefaultSensors,l=[].concat(a?KT:[],o||[]),s=e.useState((function(){return function(){var e=null;function t(){e||ik(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&ik(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],c=BI((function(e,t){e.isDragging&&!t.isDragging&&s.tryAbandon()}),[s]);dT((function(){var e=r.getState();return r.subscribe((function(){var t=r.getState();c(e,t),e=t}))}),[s,r,c]),dT((function(){return s.tryAbandon}),[s.tryAbandon]);for(var u=BI((function(e){return YT({lockAPI:s,registry:i,store:r,draggableId:e})}),[s,i,r]),d=BI((function(e,t,o){return XT({lockAPI:s,registry:i,contextId:n,store:r,draggableId:e,forceSensorStop:t,sourceEvent:o&&o.sourceEvent?o.sourceEvent:null})}),[n,s,i,r]),p=BI((function(e){return function(e,t){var n=UT(e,t);return n?n.getAttribute(aT.draggableId):null}(n,e)}),[n]),f=BI((function(e){var t=i.draggable.findById(e);return t?t.options:null}),[i.draggable]),v=BI((function(){s.isClaimed()&&(s.tryAbandon(),"IDLE"!==r.getState().phase&&r.dispatch({type:"FLUSH",payload:null}))}),[s,r]),m=BI(s.isClaimed,[s]),g=MI((function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:p,findOptionsForDraggable:f,tryReleaseLock:v,isLockClaimed:m}}),[u,d,p,f,v,m]),h=0;h<l.length;h++)l[h](g)}function ZT(e){return e.current||ik(!1),e.current}function JT(n){var r=n.contextId,i=n.setCallbacks,o=n.sensors,a=n.nonce,l=n.dragHandleUsageInstructions,s=e.useRef(null),c=kT(n),u=BI((function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(c.current)}),[c]),d=function(t){var n=MI((function(){return function(e){return"rbd-announcement-"+e}(t)}),[t]),r=e.useRef(null);return e.useEffect((function(){var e=document.createElement("div");return r.current=e,e.id=n,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),Ot(e.style,wT),xT().appendChild(e),function(){setTimeout((function(){var t=xT();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)}))}}),[n]),BI((function(e){var t=r.current;t&&(t.textContent=e)}),[])}(r),p=function(t){var n=t.contextId,r=t.text,i=CT("hidden-text",{separator:"-"}),o=MI((function(){return"rbd-hidden-text-"+(e={contextId:n,uniqueId:i}).contextId+"-"+e.uniqueId;var e}),[i,n]);return e.useEffect((function(){var e=document.createElement("div");return e.id=o,e.textContent=r,e.style.display="none",xT().appendChild(e),function(){var t=xT();t.contains(e)&&t.removeChild(e)}}),[o,r]),o}({contextId:r,text:l}),f=vT(r,a),v=BI((function(e){ZT(s).dispatch(e)}),[]),m=MI((function(){return DI({publishWhileDragging:HR,updateDroppableScroll:UR,updateDroppableIsEnabled:WR,updateDroppableIsCombineEnabled:qR,collectionStarting:GR},v)}),[v]),g=function(){var t=MI(bT,[]);return e.useEffect((function(){return function(){requestAnimationFrame(t.clean)}}),[t]),t}(),h=MI((function(){return N_(g,m)}),[g,m]),b=MI((function(){return iT(Ot({scrollWindow:L_,scrollDroppable:h.scrollDroppable},DI({move:YR},v)))}),[h.scrollDroppable,v]),y=hT(r),x=MI((function(){return k_({announce:d,autoScroller:b,dimensionMarshal:h,focusMarshal:y,getResponders:u,styleMarshal:f})}),[d,b,h,y,u,f]);s.current=x;var w=BI((function(){var e=ZT(s);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})}),[]),E=BI((function(){var e=ZT(s).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);i(MI((function(){return{isDragging:E,tryAbort:w}}),[E,w]));var S=BI((function(e){return D_(ZT(s).getState(),e)}),[]),C=BI((function(){return CR(ZT(s).getState())}),[]),I=MI((function(){return{marshal:h,focus:y,contextId:r,canLift:S,isMovementAllowed:C,dragHandleUsageInstructionsId:p,registry:g}}),[r,h,p,y,S,C,g]);return QT({contextId:r,store:x,registry:g,customSensors:o,enableDefaultSensors:!1!==n.enableDefaultSensors}),e.useEffect((function(){return w}),[w]),t.createElement(IT.Provider,{value:I},t.createElement(qe,{context:yT,store:x},n.children))}var ej=0;function tj(e){var n=MI((function(){return""+ej++}),[]),r=e.dragHandleUsageInstructions||uk;return t.createElement(ok,null,(function(i){return t.createElement(JT,{nonce:e.nonce,contextId:n,setCallbacks:i,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var nj=function(e){return function(t){return e===t}},rj=nj("scroll"),ij=nj("auto"),oj=function(e,t){return t(e.overflowX)||t(e.overflowY)},aj=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return oj(n,rj)||oj(n,ij)}(t)?t:e(t.parentElement)},lj=function(e){return{x:e.scrollLeft,y:e.scrollTop}},sj=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},cj=function(e){return{closestScrollable:aj(e),isFixedOnPage:sj(e)}},uj=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,o=e.direction,a=e.isDropDisabled,l=e.isCombineEnabled,s=e.shouldClipSubject,c=r.closestScrollable,u=function(e,t){var n=XI(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,o=r+t.scrollHeight,a=i+t.scrollWidth,l=FI({top:r,right:a,bottom:o,left:i},n.border);return GI({borderBox:l,margin:n.margin,border:n.border,padding:n.padding})}(t,c),d=qI(u,i),p=function(){if(!c)return null;var e=XI(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:qI(e,i),scroll:lj(c),scrollSize:t,shouldClipSubject:s}}(),f=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,o=e.direction,a=e.client,l=e.page,s=e.closest,c=function(){if(!s)return null;var e=s.scrollSize,t=s.client,n=R_({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:n,diff:{value:vk,displacement:vk}}}}(),u="vertical"===o?qk:Yk;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:u,isEnabled:n,client:a,page:l,frame:c,subject:kk({page:l,withPlaceholder:null,axis:u,frame:c})}}({descriptor:n,isEnabled:!a,isCombineEnabled:l,isFixedOnPage:r.isFixedOnPage,direction:o,client:u,page:d,closest:p});return f},dj={passive:!1},pj={passive:!0},fj=function(e){return e.shouldPublishImmediately?dj:pj};function vj(t){var n=e.useContext(t);return n||ik(!1),n}var mj=function(e){return e&&e.env.closestScrollable||null};function gj(){}var hj={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},bj=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,i=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||"close"===r?hj:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?a_.placeholder:null}};var yj=t.memo((function(n){var r=e.useRef(null),i=BI((function(){r.current&&(clearTimeout(r.current),r.current=null)}),[]),o=n.animate,a=n.onTransitionEnd,l=n.onClose,s=n.contextId,c=e.useState("open"===n.animate),u=c[0],d=c[1];e.useEffect((function(){return u?"open"!==o?(i(),d(!1),gj):r.current?gj:(r.current=setTimeout((function(){r.current=null,d(!1)})),i):gj}),[o,u,i]);var p=BI((function(e){"height"===e.propertyName&&(a(),"close"===o&&l())}),[o,l,a]),f=bj({isAnimatingOpenOnMount:u,animate:n.animate,placeholder:n.placeholder});return t.createElement(n.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":s,onTransitionEnd:p,ref:n.innerRef})})),xj=t.createContext(null),wj=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return We(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(t.PureComponent),Ej=5e3,Sj=4500,Cj=function(e,t){return t?a_.drop(t.duration):e?a_.snap:a_.fluid},Ij=function(e,t){return e?t?r_.drop:r_.combining:null};function kj(e){return"DRAGGING"===e.type?(r=(n=e).dimension.client,i=n.offset,o=n.combineWith,a=n.dropping,l=Boolean(o),s=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(n),c=Boolean(a),u=c?c_(i,l):s_(i),{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Cj(s,a),transform:u,opacity:Ij(l,c),zIndex:c?Sj:Ej,pointerEvents:"none"}):{transform:s_((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t,n,r,i,o,a,l,s,c,u}function Rj(t){var n=CT("draggable"),r=t.descriptor,i=t.registry,o=t.getDraggableRef,a=t.canDragInteractiveElements,l=t.shouldRespectForcePress,s=t.isEnabled,c=MI((function(){return{canDragInteractiveElements:a,shouldRespectForcePress:l,isEnabled:s}}),[a,s,l]),u=BI((function(e){var t=o();return t||ik(!1),function(e,t,n){void 0===n&&(n=vk);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),o=YI(i,r),a=qI(o,n);return{descriptor:e,placeholder:{client:o,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:o.marginBox.width,y:o.marginBox.height},client:o,page:a}}(r,t,e)}),[r,o]),d=MI((function(){return{uniqueId:n,descriptor:r,options:c,getDimension:u}}),[r,u,c,n]),p=e.useRef(d),f=e.useRef(!0);dT((function(){return i.draggable.register(p.current),function(){return i.draggable.unregister(p.current)}}),[i.draggable]),dT((function(){if(f.current)f.current=!1;else{var e=p.current;p.current=d,i.draggable.update(d,e)}}),[d,i.draggable])}function _j(e){e.preventDefault()}var Tj=function(e,t){return e===t},jj=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function Aj(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Oj={mapped:{type:"SECONDARY",offset:vk,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Aj(null)}};var Pj=sc((function(){var e,t,n,r=(e=ZI((function(e,t){return{x:e,y:t}})),t=ZI((function(e,t,n,r,i){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}})),n=ZI((function(e,n,r,i,o,a,l){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:o,combineWith:a,mode:n,offset:e,dimension:r,forceShouldAnimate:l,snapshot:t(n,i,o,a,null)}}})),function(r,i){if(r.isDragging){if(r.critical.draggable.id!==i.draggableId)return null;var o=r.current.client.offset,a=r.dimensions.draggables[i.draggableId],l=ER(r.impact),s=(u=r.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,c=r.forceShouldAnimate;return n(e(o.x,o.y),r.movementMode,a,i.isClone,l,s,c)}var u;if("DROP_ANIMATING"===r.phase){var d=r.completed;if(d.result.draggableId!==i.draggableId)return null;var p=i.isClone,f=r.dimensions.draggables[i.draggableId],v=d.result,m=v.mode,g=jj(v),h=function(e){return e.combine?e.combine.draggableId:null}(v),b={duration:r.dropDuration,curve:n_,moveTo:r.newHomeClientOffset,opacity:h?r_.drop:null,scale:h?i_.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:f,dropping:b,draggingOver:g,combineWith:h,mode:m,forceShouldAnimate:null,snapshot:t(m,p,g,h,b)}}}return null}),i=function(){var e=ZI((function(e,t){return{x:e,y:t}})),t=ZI(Aj),n=ZI((function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}})),r=function(e){return e?n(vk,e,!0):null},i=function(t,i,o,a){var l=o.displaced.visible[t],s=Boolean(a.inVirtualList&&a.effected[t]),c=Mk(o),u=c&&c.draggableId===t?i:null;if(!l){if(!s)return r(u);if(o.displaced.invisible[t])return null;var d=bk(a.displacedBy.point),p=e(d.x,d.y);return n(p,u,!0)}if(s)return r(u);var f=o.displacedBy.point,v=e(f.x,f.y);return n(v,u,l.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:i(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(e,t){return r(e,t)||i(e,t)||Oj}}),{dropAnimationFinished:t_},null,{context:yT,pure:!0,areStatePropsEqual:Tj})((function(t){var n=e.useRef(null),r=BI((function(e){n.current=e}),[]),i=BI((function(){return n.current}),[]),o=vj(IT),a=o.contextId,l=o.dragHandleUsageInstructionsId,s=o.registry,c=vj(xj),u=c.type,d=c.droppableId,p=MI((function(){return{id:t.draggableId,index:t.index,type:u,droppableId:d}}),[t.draggableId,t.index,u,d]),f=t.children,v=t.draggableId,m=t.isEnabled,g=t.shouldRespectForcePress,h=t.canDragInteractiveElements,b=t.isClone,y=t.mapped,x=t.dropAnimationFinished;b||Rj(MI((function(){return{descriptor:p,registry:s,getDraggableRef:i,canDragInteractiveElements:h,shouldRespectForcePress:g,isEnabled:m}}),[p,s,i,h,g,m]));var w=MI((function(){return m?{tabIndex:0,role:"button","aria-describedby":l,"data-rbd-drag-handle-draggable-id":v,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:_j}:null}),[a,l,v,m]),E=BI((function(e){"DRAGGING"===y.type&&y.dropping&&"transform"===e.propertyName&&x()}),[x,y]),S=MI((function(){var e=kj(y),t="DRAGGING"===y.type&&y.dropping?E:null;return{innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":v,style:e,onTransitionEnd:t},dragHandleProps:w}}),[a,w,v,y,E,r]),C=MI((function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}}),[p.droppableId,p.id,p.index,p.type]);return f(S,y.snapshot,C)}));function Nj(e){return vj(xj).isUsingCloneFor!==e.draggableId||e.isClone?t.createElement(Pj,e):null}function Dj(e){var n="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,r=Boolean(e.disableInteractiveElementBlocking),i=Boolean(e.shouldRespectForcePress);return t.createElement(Nj,Ot({},e,{isClone:!1,isEnabled:n,canDragInteractiveElements:r,shouldRespectForcePress:i}))}var Lj=function(e,t){return e===t.droppable.type},$j=function(e,t){return t.draggables[e.draggable.id]};var Mj={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||ik(!1),document.body}},Bj=sc((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=Ot({},e,{shouldAnimatePlaceholder:!1}),n=ZI((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),r=ZI((function(r,i,o,a,l,s){var c=l.descriptor.id;if(l.descriptor.droppableId===r){var u=s?{render:s,dragging:n(l.descriptor)}:null,d={isDraggingOver:o,draggingOverWith:o?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:u}}if(!i)return t;if(!a)return e;var p={isDraggingOver:o,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}}));return function(n,i){var o=i.droppableId,a=i.type,l=!i.isDropDisabled,s=i.renderClone;if(n.isDragging){var c=n.critical;if(!Lj(a,c))return t;var u=$j(c,n.dimensions),d=ER(n.impact)===o;return r(o,l,d,d,u,s)}if("DROP_ANIMATING"===n.phase){var p=n.completed;if(!Lj(a,p.critical))return t;var f=$j(p.critical,n.dimensions);return r(o,l,jj(p.result)===o,ER(p.impact)===o,f,s)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var v=n.completed;if(!Lj(a,v.critical))return t;var m=ER(v.impact)===o,g=Boolean(v.impact.at&&"COMBINE"===v.impact.at.type),h=v.critical.droppable.id===o;return m?g?e:t:h?e:t}return t}}),{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:yT,pure:!0,areStatePropsEqual:Tj})((function(n){var r=e.useContext(IT);r||ik(!1);var i=r.contextId,o=r.isMovementAllowed,a=e.useRef(null),l=e.useRef(null),s=n.children,c=n.droppableId,u=n.type,d=n.mode,p=n.direction,f=n.ignoreContainerClipping,v=n.isDropDisabled,m=n.isCombineEnabled,g=n.snapshot,h=n.useClone,b=n.updateViewportMaxScroll,y=n.getContainerForClone,x=BI((function(){return a.current}),[]),w=BI((function(e){a.current=e}),[]);BI((function(){return l.current}),[]);var E=BI((function(e){l.current=e}),[]),S=BI((function(){o()&&b({maxScroll:T_()})}),[o,b]);!function(t){var n=e.useRef(null),r=vj(IT),i=CT("droppable"),o=r.registry,a=r.marshal,l=kT(t),s=MI((function(){return{id:t.droppableId,type:t.type,mode:t.mode}}),[t.droppableId,t.mode,t.type]),c=e.useRef(s),u=MI((function(){return ZI((function(e,t){n.current||ik(!1);var r={x:e,y:t};a.updateDroppableScroll(s.id,r)}))}),[s.id,a]),d=BI((function(){var e=n.current;return e&&e.env.closestScrollable?lj(e.env.closestScrollable):vk}),[]),p=BI((function(){var e=d();u(e.x,e.y)}),[d,u]),f=MI((function(){return JI(p)}),[p]),v=BI((function(){var e=n.current,t=mj(e);e&&t||ik(!1),e.scrollOptions.shouldPublishImmediately?p():f()}),[f,p]),m=BI((function(e,t){n.current&&ik(!1);var i=l.current,o=i.getDroppableRef();o||ik(!1);var a=cj(o),c={ref:o,descriptor:s,env:a,scrollOptions:t};n.current=c;var u=uj({ref:o,descriptor:s,env:a,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),d=a.closestScrollable;return d&&(d.setAttribute(cT.contextId,r.contextId),d.addEventListener("scroll",v,fj(c.scrollOptions))),u}),[r.contextId,s,v,l]),g=BI((function(){var e=n.current,t=mj(e);return e&&t||ik(!1),lj(t)}),[]),h=BI((function(){var e=n.current;e||ik(!1);var t=mj(e);n.current=null,t&&(f.cancel(),t.removeAttribute(cT.contextId),t.removeEventListener("scroll",v,fj(e.scrollOptions)))}),[v,f]),b=BI((function(e){var t=n.current;t||ik(!1);var r=mj(t);r||ik(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x}),[]),y=MI((function(){return{getDimensionAndWatchScroll:m,getScrollWhileDragging:g,dragStopped:h,scroll:b}}),[h,m,g,b]),x=MI((function(){return{uniqueId:i,descriptor:s,callbacks:y}}),[y,s,i]);dT((function(){return c.current=x.descriptor,o.droppable.register(x),function(){n.current&&h(),o.droppable.unregister(x)}}),[y,s,h,x,a,o.droppable]),dT((function(){n.current&&a.updateDroppableIsEnabled(c.current.id,!t.isDropDisabled)}),[t.isDropDisabled,a]),dT((function(){n.current&&a.updateDroppableIsCombineEnabled(c.current.id,t.isCombineEnabled)}),[t.isCombineEnabled,a])}({droppableId:c,type:u,mode:d,direction:p,isDropDisabled:v,isCombineEnabled:m,ignoreContainerClipping:f,getDroppableRef:x});var C=t.createElement(wj,{on:n.placeholder,shouldAnimate:n.shouldAnimatePlaceholder},(function(e){var n=e.onClose,r=e.data,o=e.animate;return t.createElement(yj,{placeholder:r,onClose:n,innerRef:E,animate:o,contextId:i,onTransitionEnd:S})})),I=MI((function(){return{innerRef:w,placeholder:C,droppableProps:{"data-rbd-droppable-id":c,"data-rbd-droppable-context-id":i}}}),[i,c,C,w]),k=h?h.dragging.draggableId:null,R=MI((function(){return{droppableId:c,type:u,isUsingCloneFor:k}}),[c,k,u]);return t.createElement(xj.Provider,{value:R},s(I,g),function(){if(!h)return null;var e=h.dragging,n=h.render,r=t.createElement(Nj,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(t,r){return n(t,r,e)}));return Lt.createPortal(r,y())}())}));Bj.defaultProps=Mj;const Vj=ai.div`
    border-right: 1px solid #f0f0f0;
    padding: 0.5em;
    display: flex;
    align-items: center;
`,Fj=ai(En)`
    padding: 0.5em;
    flex-grow: 1;
`,zj=ai.div`
    padding: 8px;
`,Hj=({selectedAttribute:e,handleProps:t})=>{const{lang:n}=wn(),{dispatch:r}=wI(),i=P(e.label,n);return s.jsxs(s.Fragment,{children:[s.jsx(Vj,{...t,children:s.jsx(ur,{})}),s.jsxs(Fj,{direction:"vertical",children:[s.jsx(EI,{children:i??e.id}),i&&s.jsx("div",{children:s.jsx(SI,{children:e.id})})]}),s.jsx(zj,{children:s.jsx(Kt,{icon:s.jsx(kr,{}),size:"small",onClick:()=>{r({type:hI.TOGGLE_ATTRIBUTE_SELECTION,attribute:e})}})})]})},Gj=ai.div`
    overflow-y: auto;
    height: calc(100vh - 15rem);

    &&& > *:first-child {
        margin-top: 0;
    }

    &&& > *:last-child {
        margin-bottom: 0;
    }
`,Uj=ai.div`
    &&& {
        padding: 0;
        margin: 0 10px 10px 10px;
        display: flex;
        justify-content: space-between;
        border: 1px solid #f0f0f0;
        border-radius: 2px;
        min-height: 3rem;
        box-shadow: 0 2px 0 rgba(0, 0, 0, 0.015);
        background: #fff;
    }
`;function Wj(){const{state:e,dispatch:t}=wI(),n=e.selectedAttributes;return s.jsx(Gj,{children:s.jsx(tj,{onDragEnd:e=>{e.destination&&e.destination.index!==e.source.index&&t({type:hI.MOVE_SELECTED_ATTRIBUTE,from:e.source.index,to:e.destination.index})},children:s.jsx(Bj,{droppableId:"list-attributes-selected",children:e=>s.jsxs("div",{ref:e.innerRef,...e.droppableProps,children:[n.map(((e,t)=>e.path!==Me&&s.jsx(Dj,{index:t,draggableId:e.path,children:t=>s.jsx(Uj,{ref:t.innerRef,...t.draggableProps,children:s.jsx(Hj,{selectedAttribute:e,handleProps:t.dragHandleProps})})},e.path))),e.placeholder]})})})})}const qj=ai.div`
    padding: 0.3rem 1rem 0 1rem;
    overflow-y: scroll;
    height: calc(100vh - 15rem);
`,Yj=ai.div`
    display: Grid;
    grid-template-columns: repeat(${e=>e.multiple?2:1}, 1fr);
    grid-column-gap: 0.3rem;
`;function Xj({library:t,multiple:n=!0,selectedAttributes:r=[],canExpandExtendedAttributes:i=!0,onSelectionChange:o}){const{t:a}=c(),l=e.useRef(null),{lang:u}=wn(),[d,p]=e.useState(""),[f,v]=e.useReducer(yI,{...bI,library:t,multiple:n,selectedAttributes:r,canExpandExtendedAttributes:i}),{loading:m,error:g}=R(Ye,{variables:{library:t},onCompleted:e=>{var t;v({type:hI.SET_ATTRIBUTES,attributes:(null==(t=e.attributes)?void 0:t.list)||[]})}});if(e.useEffect((()=>{o(f.selectedAttributes)}),[o,f.selectedAttributes]),m)return s.jsx(Br,{});const h=f.attributes.filter((e=>{if(!d)return!0;return-1!==P(e.label,u).toLowerCase().indexOf(d)||-1!==e.id.indexOf(d)}));return s.jsx(xI.Provider,{value:{state:f,dispatch:v},children:s.jsxs(Yj,{multiple:f.multiple,children:[s.jsxs(qj,{"data-testid":"attributes-list",children:[s.jsx(CI,{children:s.jsx(In.Search,{placeholder:a("attributes-list.search"),"aria-label":"search",ref:l,onChange:e=>{return t=e.target.value??"",void p(t);var t}})}),g?s.jsx(Y,{message:g.message}):s.jsx(re,{children:h.map((e=>s.jsx(RI,{attribute:e,depth:0,library:t,path:""},e.id)))})]}),n&&s.jsx(Wj,{"data-testid":"selected-attributes-list"})]})})}function Kj({visible:t,onClose:n}){const{t:r}=c(),{lang:i}=wn(),{state:o,dispatch:a}=Ec(),[l,u]=e.useState(((null==o?void 0:o.fields)??[]).map((e=>{const t=o.attributes.find((t=>t.id===e.id&&t.library===e.library));return{...e,path:e.key,label:(null==t?void 0:t.label)??null,multiple_values:!!e.multipleValues}}))),d=()=>{n()},p=document.getElementsByClassName("ant-modal-wrap");return p.length&&(p[0].style.overflow="initial"),s.jsx(K,{open:t,onCancel:d,title:r("table-columns-selection.header"),width:"70rem",centered:!0,footer:[s.jsx(Kt,{onClick:d,children:r("table-columns-selection.cancel")},"Cancel"),s.jsx(Kt,{type:"primary",onClick:()=>{const e=l.filter((e=>!o.attributes.some((t=>t.id===e.id&&t.library===e.library)))).map((e=>({...e,isLink:e.type===zt.tree,isMultiple:e.multiple_values,format:e.format??void 0}))),t=[...(null==o?void 0:o.attributes)??[],...e];a({type:hc.SET_ATTRIBUTES,attributes:t});const r=l.reduce(((e,n)=>{var r,o;const a=t.find((e=>e.id===n.id&&e.library===n.library));if(!a)return e;const l=Xe(n),s="string"==typeof a.label?a.label:P(a.label,i),c=n.embeddedFieldData&&{format:(null==(r=n.embeddedFieldData)?void 0:r.format)??Ft.text,path:n.path},u={id:n.id,library:n.library,label:s,key:l,type:n.type,format:a.format,parentAttributeData:null==n?void 0:n.parentAttributeData,treeData:n.treeData,embeddedData:c,recordLibrary:(null==(o=null==n?void 0:n.parentAttributeData)?void 0:o.type)===zt.tree?n.path.split(".")[1]:null};return[...e,u]}),[]);a({type:hc.SET_FIELDS,fields:r}),n()},children:r("table-columns-selection.submit")},"Submit")],children:s.jsx(Xj,{library:o.library.id,selectedAttributes:l,onSelectionChange:u})})}const Qj=ai.div`
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;

    &:hover {
        border-left: ${xn.primaryColor} 3px solid;
        border-right: ${xn.primaryColor} 3px solid;
        box-shadow: 0px 3px 6px #00000029;

        .wrapper-arrow {
            background: ${xn.defaultBg};
            box-shadow: 0px 3px 6px #00000029;
            border: 1px solid ${xn.borderLightColor};
        }
    }
`,Zj=ai.div`
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.3rem 0.3rem;

    word-break: 'keep-all';
    user-select: 'none';
`,Jj=ai.div`
    border-radius: 50%;
    cursor: pointer;
    border: 1px solid transparent;
    height: 2rem;
    width: 2rem;
    display: grid;
    grid-template-rows: 8px 8px;
    place-items: center;
    align-content: center;
    margin: 0 8px;
    flex-shrink: 0;

    & > * {
        transform: scale(0.7);
    }

    & > span:first-child {
        opacity: ${({filterDirection:e,filterActive:t})=>t&&e===rn.asc?1:.5};
    }

    & > span:last-child {
        opacity: ${({filterDirection:e,filterActive:t})=>t&&e===rn.desc?1:.5};
    }
`;Jj.displayName="WrapperArrow";const eA=({id:t,children:n,type:r})=>{var i,o,a;const{t:l}=c(),{state:u,dispatch:d}=Ec(),[p,f]=e.useState(!1),[v,m]=e.useState(!1),g=(e,t,n)=>{const r=Ke(e,n);d({type:hc.SET_SORT,sort:{field:r,order:t}}),d({type:hc.SET_LOADING,loading:!0})};return s.jsxs(Qj,{isHover:v,isInfoColumn:Me===t,id:t,children:[n,s.jsx(on,{placement:"bottom",trigger:["click"],menu:{style:{transform:"translateY(-8px)"},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),items:[{key:"sort-ascend",onClick:()=>{return e=r,void g(t,rn.asc,e);var e},label:l("items_list.table.header-cell-menu.sort-ascend")},{key:"sort-descend",onClick:()=>{return e=r,void g(t,rn.desc,e);var e},label:l("items_list.table.header-cell-menu.sort-descend")},{key:"cancel-sort",onClick:()=>{d({type:hc.CANCEL_SORT})},label:l("items_list.table.header-cell-menu.cancel-sort")},t!==Me?{key:"hide-column",onClick:()=>{return e=t,void d({type:hc.SET_FIELDS,fields:u.fields.filter((t=>t.id!==e))});var e},label:l("items_list.table.header-cell-menu.hide-column")}:null,{key:"choose-columns",onClick:()=>f(!0),label:l("items_list.table.header-cell-menu.choose-columns")}]},children:s.jsx(Zj,{children:s.jsxs(Jj,{className:"wrapper-arrow","data-testid":`wrapper-arrow-${null==(i=u.sort)?void 0:i.order}`,filterDirection:null==(o=u.sort)?void 0:o.order,filterActive:(null==(a=u.sort)?void 0:a.field)===t,style:{fontSize:"130%"},children:[s.jsx(dr,{}),s.jsx(pr,{})]})})}),p&&s.jsx(Kj,{visible:p,onClose:()=>f(!1)})]})},tA="350px",nA=ai.div`
    grid-area: data;
    height: 100%;
    min-width: 0px;
    width: 100%;
    border: 1px solid ${xn.borderLightColor};
    overflow-y: scroll;

    &.sticky {
        overflow: scroll;

        .header {
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .body {
            position: relative;
            z-index: 0;
        }

        [data-sticky-td] {
            position: sticky;
        }
    }
`;nA.displayName="CustomTable";const rA=ai.div`
    background: ${xn.headerBg};
    width: fit-content;
    min-width: 100%;
`,iA=ai.div`
    margin-left: 1px; // For better alignment with rows
`,oA=ai.div`
    background: ${xn.headerBg};
    border-right: 1px solid ${xn.borderLightColor};
    min-width: 35px;
    max-width: ${e=>e.id===Ve?"35px":"auto"};

    &:last-child {
        border-right: none;
    }
`,aA=ai.div`
    width: fit-content;
    min-width: 100%;
`,lA=ai.div`
    align-self: start;
    grid-area: pagination;
    display: flex;
    justify-content: center;
    align-items: center;
    border-top: 1px solid ${xn.borderLightColor};
    padding-top: 8px;
`,sA=e=>{if(!W(e.type)||e.multipleValues)return 300;switch(e.format){case Ft.boolean:return 125;case Ft.numeric:case Ft.date:return 150;case Ft.date_range:return 300;default:return 250}},cA=()=>{const{t:t}=c(),{lang:n}=wn(),{state:r}=Ec(),[i,o]=e.useState([]),[a,l]=e.useState([]),[u,d]=e.useState(!1);e.useEffect((()=>{const e=[{Header:"",accessor:Ve,key:Ve,sticky:"left",width:35,maxWidth:35,minWidth:30},{Header:t("items_list.table.infos"),accessor:Me,key:Me,sticky:"left"}];let n=[];r.attributes.length&&r.fields.length&&(n=r.fields.map((e=>{var t,n;const r=e.key.replaceAll(".","");return{Header:s.jsx(Fn,{ellipsis:{rows:2,tooltip:e.label},style:{marginBottom:0,textAlign:"center"},children:e.label}),accessor:r,key:e.key,type:e.type,format:(null==(t=e.embeddedData)?void 0:t.format)||e.format,embeddedPath:null==(n=e.embeddedData)?void 0:n.path,width:sA(e)}})));const i=[...e,...n];o((e=>Vr(e,i)?e:i))}),[r.fields,r.attributes,t]),e.useEffect((()=>{if(!i.length)return;const e=r.records.reduce(((e,t,n)=>{if(n<r.pagination){const n=i.reduce(((e,n)=>{if(!n.type&&n.accessor===Me){const r={value:t.whoAmI,type:n.type};return e[n.accessor]=r,e}const r=n.key;let i=t.fields[r];if(n.embeddedPath&&n.embeddedPath.length){const e=n.embeddedPath.split(".").slice(1).join(".");try{const n=JSON.parse(t.fields[r]);i=Cc(n,e)}catch(o){i="error"}}return e[n.accessor]={value:i,type:n.type,format:n.format},e}),{[Ve]:null,record:t.whoAmI});return[...e,n]}return e}),[]);e&&l([...e])}),[r.records,r.pagination,i,n]);const p=Ic.useTable({columns:i,data:a},Ic.useFlexLayout,_c.useSticky),{getTableProps:f,getTableBodyProps:v,headerGroups:m,prepareRow:g,rows:h,data:b}=p;return r.records.length&&!b.length?s.jsx(te,{}):s.jsxs(s.Fragment,{children:[s.jsxs(nA,{...f(),className:"table sticky","data-testid":"table",onScroll:e=>{const t=e.target.scrollLeft;d(t>0)},scrollHorizontalActive:u,children:[s.jsx(rA,{className:"header sticky",children:m.map((e=>s.jsx(iA,{...e.getHeaderGroupProps(),children:e.headers.map((e=>{const t=e.getHeaderProps();return e.id===Me&&(t.style={...t.style,minWidth:tA,maxWidth:tA}),s.jsx(oA,{...t,id:e.id,children:e.key!==Ve&&s.jsx(eA,{id:e.key,type:zt.simple,children:e.render("Header")})})}))})))}),s.jsx(aA,{...v(),className:"body sticky",children:h.map((e=>(g(e),s.jsx(gI,{row:e},e.id))))})]}),s.jsx(lA,{children:s.jsx(Tc,{})})]})},uA={[ae.small]:"100px",[ae.medium]:"200px",[ae.big]:"300px"},dA=e=>uA[e],pA="#333333",fA=`${xn.activeColor}AA`,vA=`${xn.activeColor}DF`,mA=ai(va)`
    && {
        width: ${e=>e.$previewSize};
        margin: 0.5em;
        outline: 2px solid transparent;

        & .ant-card-cover {
            width: ${e=>e.$previewSize};
            height: ${e=>e.$previewSize};
        }

        &:hover {
            outline-color: ${xn.primaryColor};
        }
    }
`,gA=ai.div`
    position: relative;
    border-bottom: 1px solid ${xn.borderLightColor};
`,hA=ai.div`
    display: flex;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    justify-content: center;

    &:hover {
        .actions {
            animation: show-actions 300ms ease;
            opacity: 1;
            background: ${fA};
        }
    }

    @keyframes show-actions {
        from {
            opacity: 0;
            background: none;
        }
        to {
            opacity: 1;
            background: ${fA};
        }
    }
`,bA=ai.div`
    position: absolute;
    width: 100%;
    height: 100%;
    cursor: pointer;

    display: flex;
    align-items: center;
    justify-content: center;
    background: ${e=>e.checked?vA:"none"};

    &:hover {
        background: ${e=>e.checked?vA:fA};
    }
`,yA=ai(En)`
    && {
        display: none;
        position: absolute;
        top: 1em;
    }
    ${bA}:hover & {
        display: inherit;
    }
    button {
        color: ${pA};
        border-color: ${pA};
    }
`,xA=ai.div`
    position: absolute;
    display: grid;
    grid-template-columns: 1fr 1fr;
    opacity: 0;
    width: 100%;
    height: 100%;
    grid-gap: 1rem;

    justify-items: center;
    align-items: center;
    justify-content: center;

    border-radius: 0.25rem 0.25rem 0 0;

    button {
        color: ${pA};
        border-color: ${pA}66;

        // Arrange buttons, depending on their position on the grid
        &:nth-child(1) {
            justify-self: end;
            align-self: end;
        }
        &:nth-child(2) {
            justify-self: start;
            align-self: end;
        }
        &:nth-child(3) {
            justify-self: end;
            align-self: start;
        }
        &:nth-child(4) {
            justify-self: start;
            align-self: start;
        }
    }
`,wA=ai.div`
    font-size: 3em;
    color: ${xn.primaryColor};
`;function EA({item:t}){var n;const{t:r}=c(),[i]=Le(),o=i.permissions.delete_record,{state:a}=Ec(),l=e.useContext(pc),[u,d]=e.useState(!1),p=$e(a.display.size),{selectionState:f}=Z((e=>({selectionState:e.selection}))),v=me(),{lang:m}=wn(),[g,h]=e.useState(!!f.selection.selected.some((e=>e.id===t.whoAmI.id&&e.library===t.whoAmI.library.id))),b=wE(),y=l?f.searchSelection.type===Ne.search&&f.searchSelection.allSelected:f.selection.type===Ne.search&&f.selection.allSelected,x=e=>{_e(e),h(!g);const n={id:t.whoAmI.id,library:t.whoAmI.library.id,label:P(t.whoAmI.label,m)};v(l?Fe(n):Pe({selectionType:Ne.search,elementSelected:n}))};e.useEffect((()=>{h(f[l?"searchSelection":"selection"].selected.some((e=>e.id===t.whoAmI.id&&e.library===t.whoAmI.library.id)))}),[f.selection,f.searchSelection,t,f,l]);const w=g||y,E=f.selection.selected.length||f.selection.allSelected,S=dA(p);return s.jsxs(s.Fragment,{children:[u&&s.jsx(TS,{open:u,record:t.whoAmI,library:t.whoAmI.library.id,onClose:()=>{d(!1)}}),s.jsx(mA,{$previewSize:S,size:"small",onClick:x,onDoubleClick:()=>d(!0),cover:s.jsxs(gA,{children:[s.jsx(tr,{label:t.whoAmI.label||t.whoAmI.id,image:(null==(n=t.whoAmI.preview)?void 0:n[p])?Ce(t.whoAmI.preview[p]):"",tile:!0,style:{width:S,height:S},placeholderStyle:{width:S,height:S},imageStyle:{background:b?xn.checkerBoard:"transparent"}}),s.jsx(hA,{children:w||E?s.jsxs(bA,{checked:w,children:[s.jsxs(yA,{children:[s.jsx(nI,{selectionType:tI.ONLY,text:r("items-list-row.select-only"),record:t.whoAmI,size:"small"}),s.jsx(nI,{selectionType:tI.ALL,text:r("items-list-row.select-all"),record:t.whoAmI,size:"small"})]}),w&&s.jsx(wA,{className:"checked-icon",children:s.jsx(nn,{})})]}):s.jsxs(xA,{className:"actions",children:[s.jsx($r,{title:r("global.select"),children:s.jsx(Kt,{shape:"circle",icon:s.jsx(Wr,{}),onClick:e=>{_e(e),x(e)}})},"select"),s.jsx($r,{title:r("global.edit"),children:s.jsx(Du,{shape:"circle",record:t.whoAmI,valuesVersion:a.valuesVersions})},"edit"),o?s.jsx($r,{title:r("global.delete"),children:s.jsx(eI,{record:t.whoAmI})},"delete"):s.jsx("div",{})]})})]}),children:s.jsx(va.Meta,{title:s.jsx(Fn,{ellipsis:{rows:1,tooltip:!0},style:{marginBottom:0,fontSize:p===ae.small?".8em":"1em"},children:t.whoAmI.label||t.whoAmI.id})})})]})}const SA=ai.div`
    height: 30rem;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
`,CA=ai.div`
    grid-area: data;
    height: 100%;
    overflow-y: scroll;
    border-radius: 0.25rem 0.25rem 0 0;
    border-bottom: none;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(calc(${({size:e})=>e} + 1rem), 1fr));
    align-content: flex-start;
`,IA=ai.div`
    grid-area: pagination;
    display: flex;
    justify-content: space-around;
    border: 1px solid ${xn.borderLightColor};
    padding: 0.5rem;
`;function kA(){const{state:t}=Ec(),n=dA($e(t.display.size)),r=me(),i=e.useContext(pc);return s.jsxs(s.Fragment,{children:[s.jsx(CA,{size:n,onClick:()=>{r(i?ne():Oe())},children:t.loading?s.jsx(SA,{children:s.jsx(Br,{size:"large"})}):s.jsx(s.Fragment,{children:t.records.map((e=>s.jsx(EA,{item:e},e.whoAmI.id)))})}),s.jsx(IA,{children:s.jsx(Tc,{})})]})}function RA(){const{state:e}=Ec();switch(e.display.type){case Ht.list:return s.jsx(cA,{});case Ht.timeline:return s.jsx("div",{children:"Not supported yet"});case Ht.cards:default:return s.jsx(kA,{})}}const _A=()=>{const{t:t}=c(),{state:n}=Ec(),[r,i]=e.useState(!1),[o,a]=e.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx(fr,{image:fr.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:60},description:s.jsxs("span",{children:[t("items_list.no_data"),"."]}),children:s.jsxs(bn,{children:[s.jsx(yn,{span:11,children:s.jsx(bn,{justify:"end",children:s.jsx(yn,{children:s.jsx(Kt,{type:"primary",block:!0,style:{width:"fit-content"},icon:s.jsx(si,{}),className:"primary-btn",onClick:()=>{i(!0)},children:t("items_list.new_record")})})})}),s.jsx(yn,{span:2,children:s.jsx("span",{children:t("global.or")})}),s.jsx(yn,{span:11,children:s.jsx(bn,{justify:"start",children:s.jsx(yn,{children:s.jsx(Kt,{type:"primary",style:{width:"fit-content"},block:!0,icon:s.jsx(oe,{}),className:"primary-btn",onClick:()=>{a(!0)},children:t("items_list.import_data")})})})})]})}),r&&s.jsx(TS,{record:null,library:n.library.id,open:r,onClose:()=>{i(!1)},valuesVersion:n.valuesVersions}),o&&s.jsx(Qe,{open:o,library:n.library.id,onClose:()=>{a(!1)}})]})};var TA={};({get exports(){return TA},set exports(e){TA=e}}).exports=function(){var e=Object.prototype.toString;function t(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function n(e){if(!e)return!0;if(o(e)&&0===e.length)return!0;if("string"!=typeof e){for(var n in e)if(t(e,n))return!1;return!0}return!1}function r(t){return e.call(t)}function i(e){return"object"==typeof e&&"[object Object]"===r(e)}var o=Array.isArray||function(t){return"[object Array]"===e.call(t)};function a(e){return"boolean"==typeof e||"[object Boolean]"===r(e)}function l(e){var t=parseInt(e);return t.toString()===e?t:e}function s(e){var r,s,c=function(e){return Object.keys(c).reduce((function(t,n){return"create"===n||"function"==typeof c[n]&&(t[n]=c[n].bind(c,e)),t}),{})};function u(e,t){if(r(e,t))return e[t]}function d(e,t,n,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return d(e,t.split(".").map(l),n,r);var i=t[0],o=s(e,i);return 1===t.length?(void 0!==o&&r||(e[i]=n),o):(void 0===o&&("number"==typeof t[1]?e[i]=[]:e[i]={}),d(e[i],t.slice(1),n,r))}return r=(e=e||{}).includeInheritedProps?function(){return!0}:function(e,n){return"number"==typeof n&&Array.isArray(e)||t(e,n)},s=e.includeInheritedProps?function(e,t){"string"!=typeof t&&"number"!=typeof t&&(t=String(t));var n=u(e,t);if("__proto__"===t||"prototype"===t||"constructor"===t&&"function"==typeof n)throw new Error("For security reasons, object's magic properties cannot be set");return n}:function(e,t){return u(e,t)},c.has=function(n,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!n;for(var i=0;i<r.length;i++){var a=l(r[i]);if(!("number"==typeof a&&o(n)&&a<n.length||(e.includeInheritedProps?a in Object(n):t(n,a))))return!1;n=n[a]}return!0},c.ensureExists=function(e,t,n){return d(e,t,n,!0)},c.set=function(e,t,n,r){return d(e,t,n,r)},c.insert=function(e,t,n,r){var i=c.get(e,t);r=~~r,o(i)||(i=[],c.set(e,t,i)),i.splice(r,0,n)},c.empty=function(e,t){var l,s;if(!n(t)&&null!=e&&(l=c.get(e,t))){if("string"==typeof l)return c.set(e,t,"");if(a(l))return c.set(e,t,!1);if("number"==typeof l)return c.set(e,t,0);if(o(l))l.length=0;else{if(!i(l))return c.set(e,t,null);for(s in l)r(l,s)&&delete l[s]}}},c.push=function(e,t){var n=c.get(e,t);o(n)||(n=[],c.set(e,t,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},c.coalesce=function(e,t,n){for(var r,i=0,o=t.length;i<o;i++)if(void 0!==(r=c.get(e,t[i])))return r;return n},c.get=function(e,t,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return n;if("string"==typeof t)return c.get(e,t.split("."),n);var r=l(t[0]),i=s(e,r);return void 0===i?n:1===t.length?i:c.get(e[r],t.slice(1),n)},c.del=function(e,t){if("number"==typeof t&&(t=[t]),null==e)return e;if(n(t))return e;if("string"==typeof t)return c.del(e,t.split("."));var i=l(t[0]);return s(e,i),r(e,i)?1!==t.length?c.del(e[i],t.slice(1)):(o(e)?e.splice(i,1):delete e[i],e):e},c}var c=s();return c.create=s,c.withInheritedProps=s({includeInheritedProps:!0}),c}();const jA=TA,AA=(e,t)=>(e.parentAttributeData.type===zt.tree?t.record:t)[e.id],OA=({items:e,fields:t})=>{const n=e.map(((e,n)=>{const r=((e,t)=>e.reduce(((e,n)=>{const r=n.key;if(n.format===Ft.extended){const[n,...o]=r.split(".");try{if(!o.length)return e[r]=t[n],e;const i=JSON.parse(t[n]);if(i)return e[r]=jA.get(i,o),e}catch(i){return console.error(i),e[r]="error",e}}switch(n.type){case zt.simple_link:case zt.advanced_link:if((null==n?void 0:n.parentAttributeData)&&t[n.parentAttributeData.id]){let i=t[n.parentAttributeData.id][n.id];qr(t[n.parentAttributeData.id])&&(i=t[n.parentAttributeData.id].map((e=>e.record[n.id]))),Array.isArray(i)&&(i=i.shift()),e[r]=i}else e[r]=t[n.id];return e;case zt.tree:return(null==n?void 0:n.parentAttributeData)&&t[n.parentAttributeData.id]?e[r]=t[n.parentAttributeData.id][n.id]:e[r]=t[n.id],e;case zt.simple:case zt.advanced:default:if(!(null==n?void 0:n.parentAttributeData))return e[r]=t[n.id],e;if(!t[n.parentAttributeData.id])return e[r]=null,e;if(qr(t[n.parentAttributeData.id]))return e[r]=t[n.parentAttributeData.id].map((e=>AA(n,e))),e;const i=t[n.parentAttributeData.id];return e[r]=AA(n,i),e}}),{}))(t,e);return{index:n+1,whoAmI:{...e.whoAmI},fields:r}}));return n},PA=({type:e,style:t})=>{switch(e){case Ht.list:return s.jsx(lo,{style:t});case Ht.cards:return s.jsx(yi,{style:t});case Ht.timeline:return s.jsx(Ze,{style:t})}},NA=ai.div`
    display: flex;
    justify-content: space-between;

    &&& {
        background: none;
    }
`;function DA(){const{t:t}=c(),{state:n,dispatch:r}=Ec(),[i,o]=e.useState(!1),a={[Gt.SMALL]:t("items_list.display.small"),[Gt.MEDIUM]:t("items_list.display.medium"),[Gt.BIG]:t("items_list.display.big")};let l;var u;(u=l||(l={})).LESS="LESS",u.MORE="MORE";const d=e=>{r({type:hc.SET_DISPLAY,display:{type:e,size:n.display.size}})},p=e=>{let t=Object.keys(a).indexOf(n.display.size);t="LESS"===e?t-1:t+1,t=t<0?0:t>2?2:t,r({type:hc.SET_DISPLAY,display:{type:n.display.type,size:Gt[Object.keys(a)[t]]}})},f={style:{minWidth:"11em"},items:[{key:"display_size",label:s.jsxs(NA,{children:[s.jsx(Kt,{shape:"circle",disabled:n.display.size===Gt.SMALL,onClick:()=>p("LESS"),size:"small",children:"-"}),` ${a[n.display.size]} `,s.jsx(Kt,{shape:"circle",disabled:n.display.size===Gt.BIG,onClick:()=>p("MORE"),size:"small",children:"+"})]})},{type:"divider",key:"divider"},{key:"display_list",label:t("view.type-list"),onClick:()=>d(Ht.list),icon:s.jsx(lo,{})},{key:"display_cards",label:t("view.type-cards"),onClick:()=>d(Ht.cards),icon:s.jsx(yi,{})}]};return s.jsx(on,{open:i,onOpenChange:()=>o(!i),trigger:["click"],placement:"bottomRight",menu:f,children:s.jsxs(Kt,{children:[s.jsx(PA,{type:n.display.type}),s.jsx(an,{})]})})}function LA(){const{t:t}=c(),[n,r]=e.useState(!1),i={items:[{key:"sort-advanced",disabled:!0,icon:s.jsx(Oo,{}),label:s.jsxs(s.Fragment,{children:[t("items_list.table.header-cell-menu.sort-advance")," ",s.jsx(Je,{})]})},{key:"regroup",disabled:!0,icon:s.jsx(to,{}),label:s.jsxs(s.Fragment,{children:[t("items_list.table.header-cell-menu.regroup")," ",s.jsx(Je,{})]})}]};return s.jsx(s.Fragment,{children:s.jsx(on,{open:n,onOpenChange:()=>r(!n),trigger:["click"],menu:i,placement:"bottomRight",children:s.jsx(Kt,{children:s.jsx(To,{})})})})}function $A(){const{t:t}=c(),n=e.useContext(pc),{state:r}=Ec(),{selectionState:i}=Z((e=>({selectionState:e.selection,display:e.display}))),o=me(),{lang:a}=wn();return s.jsx("span",{"data-testid":"dropdown-menu-selection",children:s.jsx(on,{menu:{items:[n?null:{key:"select_all",onClick:()=>{n||o(De({type:Ne.search,selected:[],allSelected:!0}))},label:t("items-menu-dropdown.select-all",{nb:r.totalCount})},{key:"select",onClick:()=>{let e=[...i.selection.selected];if(r.records)for(const t of r.records)e=[...e,{id:t.whoAmI.id,library:t.whoAmI.library.id,label:P(t.whoAmI.label,a)}];o(n?et({type:Ne.search,selected:e,allSelected:!1}):De({type:Ne.search,selected:e,allSelected:!1}))},label:t("items-menu-dropdown.select-visible",{nb:r.records.length})}]},children:s.jsx(Kt,{icon:s.jsx(an,{}),children:t("items-list-row.nb-elements",{nbItems:r.totalCount})})})})}const MA=gn`
    ${uc}
    mutation ADD_VIEW($view: ViewInput!) {
        saveView(view: $view) {
            ...ViewDetails
        }
    }
`,BA=gn`
    ${uc}
    query GET_VIEWS_LIST($libraryId: String!) {
        views(library: $libraryId) {
            totalCount
            list {
                ...ViewDetails
            }
        }
    }
`;function VA(e){const[t]=V(MA);return{addView:e=>t({variables:e,update:(e,t,n)=>{if(n.variables.view.id)return;const r={query:BA,variables:{libraryId:n.variables.view.library}},i=e.readQuery(r);i&&e.writeQuery({...r,data:{views:{list:[...i.views.list,t.data.saveView],totalCount:i.views.totalCount+1}}})}})}}const FA=ai.img`
    transform: translate(0px, -1px);
`,zA=()=>s.jsx("div",{children:s.jsx(FA,{src: window.__dynamic_base__+"/assets/svgIconClosePanel-91f6e351.svg",alt:"icon column choice"})});function HA({visible:t,onClose:n,view:r,libraryId:i}){const{t:o}=c(),{state:a,dispatch:l}=Ec(),{lang:u,defaultLang:d}=wn(),[p]=Gn.useForm(),[f,v]=e.useState(!1),[m]=V(MA),{updateViewsOrder:g}=sO(i);return s.jsx(K,{forceRender:!0,title:o("view.edit-view.title"),open:t,onCancel:()=>{p.resetFields(),n()},onOk:async()=>{p.submit()},confirmLoading:f,children:s.jsxs(Gn,{labelCol:{span:8},wrapperCol:{span:16},form:p,onFinish:async e=>{v(!0);const t={id:r.id,library:i,display:{type:e.type,size:r.display.size},shared:e.shared,label:e.label,description:Object.values(e.description).every((e=>""===e))?null:e.description,settings:r.settings,filters:wc(r.filters),sort:r.sort};try{await m({variables:{view:t}})}catch(o){console.error(o)}if(r.shared!==e.shared){const t=e.shared?a.userViewsOrder.filter((e=>e!==r.id)):[...a.userViewsOrder,r.id];await g({key:oO+a.library.id,value:t,global:!1});const n=e.shared?[...a.sharedViewsOrder,r.id]:a.sharedViewsOrder.filter((e=>e!==r.id));await g({key:aO+a.library.id,value:n,global:!1})}r.id===a.view.current.id&&l({type:hc.CHANGE_VIEW,view:{...a.view.current,label:e.label,description:Object.values(e.description).every((e=>""===e))?null:e.description,display:{type:e.type,size:r.display.size},shared:e.shared}}),v(!1),n()},children:[u.map((e=>s.jsxs("div",{children:[s.jsx("h2",{children:o(`language.${e}`)}),s.jsx(Gn.Item,{label:o("view.edit-view.label"),name:["label",e],initialValue:r.label[e],rules:d===e?[{required:!0}]:[],"data-testid":`viewName-input-${e}`,children:s.jsx(In,{})}),s.jsx(Gn.Item,{label:o("view.edit-view.description"),initialValue:r.description&&r.description[e]||"",name:["description",e],"data-testid":`description-input-${e}`,children:s.jsx(In,{})}),s.jsx(el,{})]},e))),s.jsx(Gn.Item,{label:o("view.edit-view.type"),name:"type","data-testid":"input-type",initialValue:r.display.type,children:s.jsxs(vr,{children:[s.jsx(vr.Option,{value:Ht.list,children:o("view.type-list")}),s.jsx(vr.Option,{value:Ht.cards,children:o("view.type-cards")})]})}),s.jsx(Gn.Item,{name:"shared",initialValue:r.shared,valuePropName:"checked","data-testid":"input-shared",wrapperCol:{offset:8,span:16},children:s.jsx(Mn,{children:o("view.edit-view.shared")})})]})})}const GA=gn`
    mutation DELETE_VIEW($viewId: String!) {
        deleteView(viewId: $viewId) {
            id
            library
        }
    }
`;function UA(e){return Mc({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M14 14.252v2.09A6 6 0 0 0 6 22l-2-.001a8 8 0 0 1 10-7.748zM12 13c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6zm0-2c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm7.418 6h3.586v2h-3.586l1.829 1.828-1.414 1.415L15.59 18l4.243-4.243 1.414 1.415L19.418 17z"}}]}]})(e)}const WA=ai.div`
    width: 100%;
`,qA=ai.div`
    background: ${({selected:e})=>e?`${xn.activeColor} `:"none"};
    padding: 0.5rem;
    display: flex;
    align-items: center;
`,YA=ai.div`
    content: '....';
    width: 20px;
    height: 30px;
    display: inline-block;
    line-height: 5px;
    padding: 3px 4px;
    vertical-align: middle;
    font-size: 12px;
    font-family: sans-serif;
    letter-spacing: 2px;
    color: ${xn.borderLightColor};
    text-shadow: 1px 0 1px black;

    &::after {
        content: '.. .. .. ..';
    }
`,XA=ai.div`
    display: flex;
    align-items: center;
    margin-left: 10px;
`,KA=ai.div`
    opacity: 0.8;
    margin-left: 10px;
    overflow: hidden;
`;function QA({view:t,onEdit:n,handleProps:r}){var i;const{t:o}=c(),{lang:a,defaultLang:l}=wn();S();const{state:u,dispatch:d}=Ec(),[p,f]=e.useState({expand:!1,key:0}),{addView:v}=VA(u.library.id),{deleteView:m}=function(){const[e]=V(GA);return{deleteView:t=>e({variables:{viewId:t},update:(e,{data:t})=>{const n=e.identify(t.deleteView);e.evict({id:n}),e.gc()}})}}(),{updateViewsOrder:g}=sO(u.library.id),h=t.id===(null==(i=u.view.current)?void 0:i.id),[b,y]=e.useState(!1),x=P(t.label,a);return s.jsxs(qA,{selected:h,onClick:()=>{d({type:hc.CHANGE_VIEW,view:t})},color:t.color,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[s.jsx(YA,{className:"view-handle",...r}),s.jsxs(WA,{children:[s.jsxs(XA,{"data-testid":"view-title",children:[s.jsx(PA,{type:t.display.type}),s.jsx(sr.Text,{ellipsis:{tooltip:!0},style:{padding:"0 .5em",width:"calc(100% - 1em)"},children:x})]}),t.description&&s.jsxs(KA,{children:[s.jsx(sr.Paragraph,{ellipsis:{rows:3,expandable:!0,onExpand:()=>{f({expand:!0,key:p.key})},symbol:o("view.see-more")},style:{marginBottom:0},children:P(t.description,a)},p.key),p.expand&&s.jsx("a",{href:"!#",onClick:e=>{e.preventDefault(),f({expand:!1,key:p.key+1})},children:o("global.close")})]})]}),!t.owner&&!b&&s.jsx(UA,{size:"1.3em"}),b&&s.jsxs(s.Fragment,{children:[s.jsx($r,{title:o("global.edit"),children:s.jsx(Kt,{onClick:e=>{e.stopPropagation(),n(t.id)},disabled:!t.owner,type:"text",size:"small",shape:"circle",icon:s.jsx(mr,{})},"edit")}),s.jsx($r,{title:o("global.duplicate"),children:s.jsx(Kt,{onClick:async e=>{e.stopPropagation();try{const e={...tt(t,["id","owner"]),library:u.library.id,label:{[l]:`${P(t.label,a)} (${o("global.copy")})`},filters:wc(t.filters),valuesVersions:Pr(t.valuesVersions).map((e=>({treeId:e.name,treeNode:e.value.id}))),shared:!1},n=await v({view:e});await g({key:oO+e.library,value:[...u.userViewsOrder,n.data.saveView.id],global:!1})}catch(n){console.error(n)}},type:"text",size:"small",shape:"circle",icon:s.jsx(Hn,{})},"duplicate")}),s.jsx($r,{title:o("global.delete"),children:s.jsx(Kt,{onClick:async e=>{e.stopPropagation(),await m(t.id);const n=(t.shared?u.sharedViewsOrder:u.userViewsOrder).filter((e=>e!==t.id));await g({key:(t.shared?aO:oO)+u.library.id,value:n,global:!1}),t.id===u.view.current.id&&d({type:hc.CHANGE_VIEW,view:C})},disabled:!t.owner,type:"text",size:"small",shape:"circle",icon:s.jsx(ui,{})},"delete")})]})]},t.id)}const ZA=ai.div`
    width: 100%;
    display: flex;
    flex-flow: column nowrap;
    border-right: ${xn.borderLightColor} 1px solid;
    overflow-y: auto;
`,JA=ai.div`
    width: 100%;
    background-color: ${xn.headerBg};
    display: grid;
    grid-template-columns: repeat(2, auto);
    justify-content: space-between;
    padding: 0.3rem 0.3rem 0.3rem 1rem;
    font-weight: 700;
    border-bottom: 1px solid ${xn.borderLightColor};

    & > * {
        :first-of-type {
            display: grid;
            column-gap: 8px;
            grid-template-columns: repeat(3, auto);
            align-items: center;
            justify-items: center;
        }

        :last-of-type {
            display: grid;
            align-items: center;
            justify-content: flex-end;
            column-gap: 8px;
            grid-template-columns: repeat(2, auto);
        }
    }
`,eO=ai.div`
    width: 100%;
    border-top: ${xn.activeColor} 1px solid;
    border-bottom: ${xn.activeColor} 1px solid;
    padding: 0.3rem;
    padding-left: 1rem;
    font-weight: 700;
    font-size: 14px;
`,tO=ai.div`
    width: 100%;
`,nO=ai.div`
    margin: 1rem;
`,rO=ai(nt)`
    margin-left: 8px;
    && > * {
        background-color: ${xn.borderLightColor};
        color: ${xn.defaultTextColor};
    }
`,iO=e=>(t,n)=>{const r=e.indexOf(t.id),i=e.indexOf(n.id),o=-1!==r,a=-1!==i;return o&&a?r-i:o&&!a?-1:!o&&a?1:Number(t.id)-Number(n.id)},oO="user_views_order_",aO="shared_views_order_";function lO(){var t,n;const{t:r}=c(),[i]=S(),{lang:o}=wn(),[a,l]=e.useState(""),{state:u,dispatch:d}=Ec(),[p,f]=e.useState(!1),v=me(),{updateViewsOrder:m}=sO(u.library.id),g=R(BA,{variables:{libraryId:(null==(t=null==u?void 0:u.library)?void 0:t.id)||""}}),h=R(_,{variables:{keys:[oO+u.library.id,aO+u.library.id]},onCompleted:e=>{var t,n;d({type:hc.SET_USER_VIEWS_ORDER,userViewsOrder:(null==(t=e.userData)?void 0:t.data[oO+u.library.id])||[]}),d({type:hc.SET_SHARED_VIEWS_ORDER,sharedViewsOrder:(null==(n=e.userData)?void 0:n.data[aO+u.library.id])||[]})}});if(g.loading)return s.jsx(te,{});const{sharedViews:b,userViews:y}=(null==(n=g.data)?void 0:n.views.list.reduce(((e,t)=>{const n=j(t,u.attributes,u.library.id,null==i?void 0:i.userId);return a&&!P(n.label,o).toUpperCase().includes(a.toUpperCase())?e:n.shared?{...e,sharedViews:[...e.sharedViews,n]}:{...e,userViews:[...e.userViews,n]}}),{sharedViews:[],userViews:[]}))??{sharedViews:[],userViews:[]};if(g.error||h.error)return s.jsx(Y,{message:(g.error||h.error).message});if(!b||!y)return s.jsx(Y,{message:r("error.error_occurred")});const x=e=>{f(e)},w=async(e,t)=>{if(!e.destination)return;const n="user"===e.source.droppableId,r=(n?y:b).map((e=>e.id)),i=r[e.source.index];r.splice(e.source.index,1),r.splice(e.destination.index,0,i);const o=n?oO+u.library.id:aO+u.library.id;await m({key:o,value:r,global:!1})};y.sort(iO(u.userViewsOrder)),b.sort(iO(u.sharedViewsOrder));return s.jsxs(ZA,{children:[p&&s.jsx(HA,{view:p,visible:!!p,onClose:()=>{f(!1)},libraryId:u.library.id}),s.jsxs(JA,{children:[s.jsx("span",{children:r("view.views")}),s.jsx(Kt,{onClick:()=>{v(rt({visible:!1,type:it.view}))},icon:s.jsx(zA,{})})]}),s.jsx(nO,{children:s.jsx(In.Search,{placeholder:r("view.search"),onSearch:e=>{l(e)}})}),s.jsx(eO,{children:r("view.shared-views")}),s.jsx(tj,{onDragEnd:w,children:s.jsx(Bj,{droppableId:"shared",children:e=>s.jsxs(tO,{...e.droppableProps,ref:e.innerRef,children:[b.map(((e,t)=>s.jsx(Dj,{draggableId:t.toString(),index:t,children:t=>s.jsx("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:s.jsx(QA,{view:e,onEdit:()=>x(e),handleProps:t.dragHandleProps},e.id)})},t))),e.placeholder]})})}),s.jsxs(eO,{children:[r("view.my-views"),s.jsx(rO,{count:y.length})]}),s.jsx(tj,{onDragEnd:w,children:s.jsx(Bj,{droppableId:"user",children:e=>s.jsxs(tO,{...e.droppableProps,ref:e.innerRef,children:[y.map(((e,t)=>s.jsx(Dj,{draggableId:t.toString(),index:t,children:t=>s.jsx("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:s.jsx(QA,{view:e,onEdit:()=>x(e),handleProps:t.dragHandleProps},e.id)})},t))),e.placeholder]})})})]})}function sO(e){const[t]=V(F);return{updateViewsOrder:n=>t({variables:n,update:(t,n,r)=>{const i={query:_,variables:{keys:[oO+e,aO+e]}},o=t.readQuery(i);o&&t.writeQuery({...i,data:{userData:{global:o.userData.global,data:{...o.userData.data,[r.variables.key]:n.data.saveUserData.data[r.variables.key]}}}})}})}}const cO=({filter:e,updateFilterValue:t})=>{var n,r,i,o;const a=(null==(r=null==(n=null==e?void 0:e.value)?void 0:n.value)?void 0:r.from)&&(null==(o=null==(i=null==e?void 0:e.value)?void 0:i.value)?void 0:o.to)?e.value.value:null,l=a?[se(1e3*Number(a.from)),se(1e3*Number(a.to))]:null;return s.jsx(ce.RangePicker,{popupStyle:{background:xn.defaultBg},disabled:!e.active,onChange:n=>{if(!n)return void t(null);const[r,i]=n;r.startOf("day"),i.startOf("day"),t({...e.value,value:{from:String(r.unix()),to:String(i.unix())}})},value:l})};function uO({children:e,secondary:t=!1,...n}){return s.jsx(Kt,{icon:s.jsx(an,{}),type:"text",style:{minWidth:"50%",padding:"0 .5em"},...n,children:s.jsx(sr.Text,{ellipsis:{tooltip:!0},type:t?"secondary":null,style:{width:"calc(100% - 1em)"},children:e})})}const dO={[Ft.text]:[L.CONTAINS,L.NOT_CONTAINS,L.EQUAL,L.NOT_EQUAL,L.BEGIN_WITH,L.END_WITH,L.IS_EMPTY,L.IS_NOT_EMPTY],[Ft.extended]:[L.CONTAINS,L.NOT_CONTAINS,L.EQUAL,L.NOT_EQUAL,L.BEGIN_WITH,L.END_WITH,L.IS_EMPTY,L.IS_NOT_EMPTY],[Ft.encrypted]:[L.IS_EMPTY,L.IS_NOT_EMPTY],[Ft.numeric]:[L.EQUAL,L.NOT_EQUAL,L.GREATER_THAN,L.LESS_THAN,L.IS_EMPTY,L.IS_NOT_EMPTY],[Ft.boolean]:[L.EQUAL,L.NOT_EQUAL],[Ft.date]:[L.EQUAL,L.NOT_EQUAL,L.GREATER_THAN,L.LESS_THAN,L.IS_EMPTY,L.IS_NOT_EMPTY,L.TODAY,L.TOMORROW,L.YESTERDAY,L.LAST_MONTH,L.NEXT_MONTH,L.BETWEEN],[Ft.date_range]:[L.CONTAINS,L.START_ON,L.START_AFTER,L.START_BEFORE,L.END_ON,L.END_AFTER,L.END_BEFORE,L.IS_EMPTY,L.IS_NOT_EMPTY]};const pO=(e,t,n)=>{const r=function(e){return[{text:e("filters.contains"),value:L.CONTAINS},{text:e("filters.not-contains"),value:L.NOT_CONTAINS},{text:e("filters.equal"),value:L.EQUAL},{text:e("filters.not-equal"),value:L.NOT_EQUAL},{text:e("filters.begin-with"),value:L.BEGIN_WITH},{text:e("filters.end-with"),value:L.END_WITH},{text:e("filters.greater-than"),textByFormat:{[Ft.date]:e("filters.before")},value:L.LESS_THAN},{text:e("filters.less-than"),textByFormat:{[Ft.date]:e("filters.after")},value:L.GREATER_THAN},{text:e("filters.today"),value:L.TODAY},{text:e("filters.tomorrow"),value:L.TOMORROW},{text:e("filters.yesterday"),value:L.YESTERDAY},{text:e("filters.last-month"),value:L.LAST_MONTH},{text:e("filters.next-month"),value:L.NEXT_MONTH},{text:e("filters.between"),value:L.BETWEEN},{text:e("filters.start-on"),value:L.START_ON},{text:e("filters.start-after"),value:L.START_AFTER},{text:e("filters.start-before"),value:L.START_BEFORE},{text:e("filters.end-on"),value:L.END_ON},{text:e("filters.end-after"),value:L.END_AFTER},{text:e("filters.end-before"),value:L.END_BEFORE},{text:e("filters.is-empty"),value:L.IS_EMPTY},{text:e("filters.is-not-empty"),value:L.IS_NOT_EMPTY},{text:e("filters.values-count-equal"),value:L.VALUES_COUNT_EQUAL},{text:e("filters.values-count-greater-than"),value:L.VALUES_COUNT_GREATER_THAN},{text:e("filters.values-count-lower-than"),value:L.VALUES_COUNT_LOWER_THAN},{text:e("filters.through"),value:L.THROUGH}]}(n);return r.filter((n=>{var r,i,o;if(n.value===L.THROUGH&&t)return!0;if(e.type===at.LIBRARY&&dO[Ft.text].includes(n.value))return!0;if(e.type===at.ATTRIBUTE){const t=e;if((null==(r=e.attribute)?void 0:r.format)&&(null==(i=dO[t.attribute.format])?void 0:i.includes(n.value))||t.attribute.isMultiple&&(o=n.value,[L.VALUES_COUNT_EQUAL,L.VALUES_COUNT_GREATER_THAN,L.VALUES_COUNT_LOWER_THAN].includes(o)))return!0}return!1}))},fO=({filter:e})=>{const{t:t}=c(),{state:n,dispatch:r}=Ec(),i=function(e){return[{text:e("filters.classified-in"),value:ot.CLASSIFIED_IN},{text:e("filters.not-classified-in"),value:ot.NOT_CLASSIFIED_IN}]}(t),o={items:i.map((t=>({key:t.value,onClick:()=>(t=>{const i=n.filters.map((n=>n.index===e.index?{...e,condition:ot[t]}:n));r({type:hc.SET_FILTERS,filters:i})})(t.value),label:t.text})))};return s.jsx(on,{disabled:!e.active,menu:o,trigger:["click"],children:s.jsx(uO,{"data-testid":"filter-condition-dropdown",children:i.filter((t=>t.value===e.condition))[0].text})})},vO=e=>[L.IS_EMPTY,L.IS_NOT_EMPTY,L.TODAY,L.TOMORROW,L.YESTERDAY,L.LAST_MONTH,L.NEXT_MONTH].includes(e);function mO({filter:e,updateFilterValue:t}){return s.jsx(ci,{disabled:!e.active,"data-test-id":"filter-input-boolean",checked:!!e.value.value,onChange:n=>{t({...e.value,value:n})}})}const gO=ai.span`
    padding: 0 1rem;
    height: 100%;
    display: grid;
    place-items: center;
`,hO=({filter:e,updateFilterValue:t})=>{var n,r,i,o,a,l;const{t:u}=c(),{state:d,dispatch:p}=Ec(),f=((null==(n=e.attribute)?void 0:n.format)===Ft.extended||e.type===at.LIBRARY||w(null==(r=e.attribute)?void 0:r.type)||(null==(i=e.attribute)?void 0:i.type)===zt.tree)&&void 0===(null==(o=e.attribute)?void 0:o.parentAttribute)&&void 0===e.parentTreeLibrary&&e.condition!==L.THROUGH,v=pO(e,f,u),m=!lt.find((t=>e.type===at.LIBRARY&&t===Ft.text||e.type===at.ATTRIBUTE&&t===e.attribute.format)),g=v.filter((e=>e.value!==L.THROUGH||f)).reduce(((t,n)=>{var r,i;return n.value===L.THROUGH&&t.push({key:"through-divider",type:"divider"}),t.push({key:n.value,label:(null==(i=n.textByFormat)?void 0:i[null==(r=null==e?void 0:e.attribute)?void 0:r.format])??(null==n?void 0:n.text),onClick:()=>(t=>{const n=d.filters.map((n=>{if(n.index===e.index){let n={...e.value};return vO(t)?n=null:(null===n||"object"==typeof(null==n?void 0:n.value)&&t!==L.BETWEEN)&&(n.value=AO(e.attribute.format)),{...e,value:n,condition:L[t]}}return n}));p({type:hc.SET_FILTERS,filters:n})})(n.value)}),t}),[]);if(m){const t=v.filter((t=>t.value===e.condition))[0];return s.jsx(on,{disabled:!e.active||e.condition===L.THROUGH,menu:{items:g},trigger:["click"],children:s.jsx(uO,{"aria-label":"filter-condition",children:(null==(l=null==t?void 0:t.textByFormat)?void 0:l[null==(a=null==e?void 0:e.attribute)?void 0:a.format])??(null==t?void 0:t.text)})})}return e.attribute.format===Ft.boolean?s.jsx(gO,{children:s.jsx(mO,{filter:e,updateFilterValue:t})}):s.jsx(s.Fragment,{})},bO=({filter:e,updateFilterValue:t})=>{var n;const r=n=>{n?(n.startOf("day"),t({...e.value,value:n.unix()})):t(null)},i=(null==(n=null==e?void 0:e.value)?void 0:n.value)?se(1e3*Number(e.value.value)):null;return s.jsx(ce,{popupStyle:{background:xn.defaultBg},disabled:!e.active,onOk:r,onChange:r,"aria-label":"date-filter",value:i})},yO=ai(In)`
    // Remove arrows on number input
    && {
        -moz-appearance: textfield;
        ::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
    }
`,xO=({filter:e,updateFilterValue:t,onPressEnter:n})=>{const r=isNaN(Number(e.value.value))?"":e.value.value;return s.jsx(yO,{type:"number",disabled:!e.active,value:r,onChange:n=>{const r=n.target.value||0;t({...e.value,value:r})},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),n())}})},wO=ai(In.TextArea)`
    background: ${xn.defaultBg} 0% 0% no-repeat padding-box;
    border: 1px solid ${xn.borderColor};
    border-radius: 3px;
`,EO=({filter:e,updateFilterValue:t,onPressEnter:n})=>{const r=e.value.value?String(e.value.value):null,i=r?r.split("\n").length:1,o=i<=5?i:5;return s.jsx(wO,{disabled:!e.active,rows:o,value:r,onChange:n=>{const r=(n.target.value??"").toString();t({...e.value,value:r})},onPressEnter:e=>{e.shiftKey||(e.preventDefault(),e.stopPropagation(),n())},"data-testid":"filter-textarea"})},SO=ai.div`
    background: ${xn.lightBg};
    padding: 8px 8px 8px 0px;
    border-radius: 3px;
    display: grid;
    grid-template-columns: 1.375rem 1fr;
    margin-bottom: 8px;
    border: 2px solid transparent;

    ${({active:e})=>e?`\n        :hover,\n        :active {\n            border: 2px solid ${xn.primaryColor};\n\n            &&& .filter-handle {\n                color: ${xn.primaryColor};\n            }\n        }\n    `:"opacity: .5;"}
`,CO=ai.div`
    content: '....';
    width: 20px;
    height: 30px;
    display: inline-block;
    overflow: hidden;
    line-height: 5px;
    padding: 3px 4px;
    vertical-align: middle;
    margin: auto;
    font-size: 12px;
    font-family: sans-serif;
    letter-spacing: 2px;
    color: ${xn.borderLightColor};
    text-shadow: 1px 0 1px black;

    &::after {
        content: '.. .. .. ..';
    }
`,IO=ai.div`
    display: grid;
    grid-template-rows: ${e=>e.hasParent?"auto auto 1fr":"auto 1fr"};
    row-gap: 8px;
`,kO=ai.div`
    display: grid;
    grid-template-columns: 1fr 1.5rem;
    align-items: center;
    column-gap: 8px;
    min-width: 0;
`,RO=ai.div`
    display: grid;
    grid-template-columns: 1fr 1fr;
    justify-items: space-around;
    align-items: center;
    justify-content: center;

    background: ${xn.defaultBg} 0% 0% no-repeat padding-box;
    border: 1px solid ${xn.borderColor};
    border-radius: 3px;

    min-width: 0;
`,_O=ai.div`
    display: grid;
    place-items: center;
    height: 32px;

    background: ${xn.defaultBg} 0% 0% no-repeat padding-box;
    border: 1px solid ${xn.borderColor};
    border-radius: 3px;
`,TO=ai.div`
    display: flex;
    align-content: flex-start;
`,jO=ai(Kt)`
    && {
        border: none;
        color: ${xn.secondaryTextColor};

        :hover {
            border: none;
            color: ${xn.secondaryTextColor};
        }
    }
`,AO=e=>{switch(e){case Ft.boolean:return!0;case Ft.date:return de().utcOffset(0).startOf("day").unix();default:return""}};function OO({filter:t,handleProps:n}){var r;const{t:i}=c(),{lang:o}=wn(),{state:a,dispatch:l}=Ec(),[u,d]=e.useState(!1),[p]=Le(),f=e=>{const n=a.filters.map((n=>n.index===t.index?{...n,value:e}:n));l({type:hc.SET_FILTERS,filters:n})},v={items:[{key:"deactivate",label:t.active?i("filters.deactivate"):i("filters.activate"),onClick:()=>{const e=a.filters.map((e=>e.index===t.index?{...e,active:!e.active}:e));l({type:hc.SET_FILTERS,filters:e})}},{key:"delete",label:i("global.delete"),onClick:()=>{l({type:hc.SET_FILTERS,filters:a.filters.filter((e=>e.index!==t.index))})}}]},m=e.useCallback((e=>{var t;const n=e.filter.condition in L&&!(e.filter.condition in ot)&&!lt.find((t=>{var n;return t===(null==(n=e.filter.attribute)?void 0:n.format)})),r=e.filter.condition in ot;if(n){if(vO(e.filter.condition))return s.jsx(s.Fragment,{});switch(null==(t=e.filter.attribute)?void 0:t.format){case Ft.date:return e.filter.condition===L.BETWEEN?s.jsx(cO,{...e}):s.jsx(bO,{...e});case Ft.date_range:return s.jsx(bO,{...e});case Ft.numeric:return s.jsx(xO,{...e});case Ft.text:default:return s.jsx(EO,{...e})}}else if(r)return s.jsx(Kt,{disabled:!e.filter.active,onClick:()=>d(!0),children:e.filter.value.label||i("global.select")});return s.jsx(s.Fragment,{})}),[i]),g=e=>e?e.map((e=>({...e,type:zt.simple,multiple_values:void 0,linked_tree:void 0,system:!1}))):[],h=!(t.condition!==D.THROUGH&&!(null==(r=t.attribute)?void 0:r.parentAttribute)&&!t.parentTreeLibrary&&t.type!==at.LIBRARY);return s.jsxs(s.Fragment,{children:[u&&s.jsx(oS,{selectedNodeKey:t.value.value||t.tree.id,tree:t.tree,onSubmit:e=>f((e=>void 0===e||e.id===t.tree.id?{value:null}:{value:e.id,label:String(e.title)})(e)),onClose:()=>d(!1),visible:u,canSelectRoot:!0}),s.jsxs(SO,{"data-testid":"filter",active:t.active,children:[s.jsx(CO,{className:"filter-handle",...n}),s.jsxs(IO,{hasParent:h,children:[h&&s.jsxs(TO,{children:[s.jsxs("span",{children:[i("filters.through"),":"]}),s.jsx("span",{children:P(t.condition===D.THROUGH?null==(b=t.attribute)?void 0:b.label:(null==(x=null==(y=t.attribute)?void 0:y.parentAttribute)?void 0:x.label)||(null==(w=t.parentAttribute)?void 0:w.label),o)||`${P(t.condition===D.THROUGH?null==(E=t.parentAttribute)?void 0:E.label:null==(C=null==(S=t.parentTreeLibrary)?void 0:S.parentAttribute)?void 0:C.label,o)} > ${P(t.condition===D.THROUGH?null==t?void 0:t.library.label:null==(I=t.parentTreeLibrary)?void 0:I.library.label,o)} `}),s.jsx(jO,{disabled:!t.active,size:"small",onClick:()=>{const e=[...a.filters],n=t.type===at.ATTRIBUTE&&void 0!==t.parentTreeLibrary?t.parentTreeLibrary.parentAttribute:t.type===at.ATTRIBUTE?t.attribute.parentAttribute??t.attribute:t.parentAttribute,r={type:at.ATTRIBUTE,index:t.index,key:null==n?void 0:n.id,value:{value:AO(n.format)},active:!0,condition:Ut[st(n.format)],attribute:n},i=a.filters.findIndex((e=>e.index===t.index));e.splice(i,1,r),l({type:hc.SET_FILTERS,filters:e})},shape:"circle",icon:s.jsx(tn,{})})]}),s.jsxs(kO,{children:[s.jsxs(RO,{children:[s.jsx(PO,{libraryId:p.id,button:s.jsx(uO,{secondary:t.condition===D.THROUGH,children:(()=>{var e,n;return t.condition===D.THROUGH?`${i("global.select")}...`:t.type===at.ATTRIBUTE?P(null==(e=t.attribute)?void 0:e.label,o)||(null==(n=t.attribute)?void 0:n.id):t.type===at.TREE?P(t.tree.label,o)||t.tree.id:P(t.library.label,o)||t.library.id})()}),filter:t,attributes:(()=>{var e,n,r,i,o,a;if(t.type===at.ATTRIBUTE){if(t.condition===D.THROUGH&&(null==(e=t.attribute)?void 0:e.format)===Ft.extended)return g(t.attribute.embedded_fields);if(t.condition===D.THROUGH&&void 0===t.attribute.linkedTree)return null==(n=t.attribute.linkedLibrary)?void 0:n.attributes;if(void 0!==t.attribute.parentAttribute)return(null==(i=null==(r=t.attribute.parentAttribute)?void 0:r.linkedLibrary)?void 0:i.attributes)||g(null==(o=t.attribute.parentAttribute)?void 0:o.embedded_fields);if(void 0!==t.parentTreeLibrary){return t.parentTreeLibrary.parentAttribute.linkedTree.libraries.find((e=>e.library.id===t.parentTreeLibrary.library.id)).library.attributes}if(void 0!==t.attribute.linkedTree&&t.condition===D.THROUGH)return[]}if(t.type===at.LIBRARY){if(t.condition!==D.THROUGH)return[];if(t.condition===D.THROUGH){return(null==(a=t.parentAttribute.linkedTree)?void 0:a.libraries.find((e=>e.library.id===t.library.id))).library.attributes}}return p.attributes})(),libraries:(()=>{var e,n;return t.type===at.LIBRARY?null==(e=t.parentAttribute.linkedTree)?void 0:e.libraries:t.type===at.ATTRIBUTE&&void 0!==t.attribute.linkedTree&&t.condition===D.THROUGH?null==(n=t.attribute.linkedTree)?void 0:n.libraries:[]})(),trees:t.type===at.TREE||t.condition!==D.THROUGH&&t.type===at.ATTRIBUTE&&!t.parentTreeLibrary&&!t.attribute.parentAttribute?p.trees:[]}),(t.type===at.ATTRIBUTE||t.type===at.LIBRARY)&&s.jsx(hO,{filter:t,updateFilterValue:f}),t.type===at.TREE&&s.jsx(fO,{filter:t})]}),s.jsx(on,{menu:v,placement:"bottomRight",children:s.jsx(_O,{children:s.jsx(uo,{})})})]}),s.jsx(m,{filter:t,updateFilterValue:f,onPressEnter:()=>{l({type:hc.APPLY_FILTERS})}})]})]})]});var b,y,x,w,E,S,C,I}function PO({libraryId:t,button:n,attributes:r,libraries:i,trees:o,filter:a}){const{t:l}=c(),{state:u,dispatch:d}=Ec(),{lang:p}=wn(),[f,v]=e.useState(!1),[m,g]=e.useState(),h=me(),b=e=>{const t=[...u.filters];if(void 0!==a){const n=u.filters.findIndex((e=>e.index===a.index));t.splice(n,1,{...e,index:a.index}),v(!1)}else t.push(e);d({type:hc.SET_FILTERS,filters:t}),h(rt({visible:!0,type:it.filters}))},y=function(e){return{...e,localizedLabel:P(e.label,p)||e.id}},x=function(e){const t=new RegExp(`${m}`,"i");return!m||!!e.id.match(t)||!!e.localizedLabel.match(t)},E=o.map(y).filter(x),S=r.map(y).filter(x),C=i.map((e=>({...e,library:y(e.library)}))).filter((e=>x(e.library))),I=e=>u.filters.some((t=>{var n,r,i,o,a;return(null==t?void 0:t.key)===e||(null==(r=null==(n=t.attribute)?void 0:n.parentAttribute)?void 0:r.id)===e||(null==(i=t.parentAttribute)?void 0:i.id)===e||(null==(a=null==(o=t.parentTreeLibrary)?void 0:o.parentAttribute)?void 0:a.id)===e})),k=[{key:"search",label:s.jsx(In.Search,{placeholder:l("global.search"),onChange:e=>{g(e.target.value)}})},{key:"divider",type:"divider"}];let R=[];E.length>0&&(R=[...R,{key:"trees-group",type:"group",label:l("filters.trees-group"),children:E.map((e=>({key:e.id,icon:s.jsx(Ii,{}),onClick:()=>b((e=>({type:at.TREE,index:Date.now(),active:!0,key:e.id,condition:ot[ot.CLASSIFIED_IN],tree:e,value:{value:null}}))(e)),label:I(e.id)?s.jsx(nt,{color:"blue",text:e.localizedLabel}):e.localizedLabel})))}]),S.length>0&&(R=[...R,{key:"attributes-group",type:"group",label:l("filters.attributes-group"),children:S.map((e=>({key:e.id,icon:s.jsx(vo,{}),onClick:()=>b((e=>{var n,r,i,o,l,s;let c=e.id;void 0!==(null==a?void 0:a.parentTreeLibrary)?c=`${null==a?void 0:a.parentTreeLibrary.key}.${e.id}`:(null==a?void 0:a.condition)===D.THROUGH&&a.type===at.LIBRARY?c=`${a.key}.${e.id}`:(null==a?void 0:a.condition)===D.THROUGH?c=`${null==(n=null==a?void 0:a.attribute)?void 0:n.id}.${e.id}`:(null==(r=null==a?void 0:a.attribute)?void 0:r.parentAttribute)&&(c=`${null==(i=null==a?void 0:a.attribute)?void 0:i.parentAttribute.id}.${e.id}`);const u={type:at.ATTRIBUTE,index:Date.now(),active:!0,key:c,condition:L[st(e.format)],attribute:{id:e.id,type:e.type,format:w(e.type)||e.type===zt.tree?ct:e.format,label:e.label,isLink:w(e.type),isMultiple:e.multiple_values,linkedLibrary:e.linked_library,linkedTree:e.linked_tree,library:(null==(o=e.linked_library)?void 0:o.id)||t,embedded_fields:e.embedded_fields},value:{value:AO(e.format)}};return(null==a?void 0:a.condition)===D.THROUGH?u.attribute.parentAttribute=null==a?void 0:a.attribute:(null==(l=null==a?void 0:a.attribute)?void 0:l.parentAttribute)&&(u.attribute.parentAttribute=null==(s=null==a?void 0:a.attribute)?void 0:s.parentAttribute),(null==a?void 0:a.type)===at.LIBRARY?u.parentTreeLibrary=a:void 0!==(null==a?void 0:a.parentTreeLibrary)&&(u.parentTreeLibrary=null==a?void 0:a.parentTreeLibrary),u})(e)),label:I(e.id)?s.jsx(nt,{color:"blue",text:e.localizedLabel}):e.localizedLabel})))}]),C.length>0&&(R=[...R,{key:"libraries-group",type:"group",label:l("filters.libraries-group"),children:C.map((({library:e})=>({key:e.id,icon:s.jsx(vo,{}),onClick:()=>b((e=>{var t,n;const r=(null==a?void 0:a.type)!==at.LIBRARY?`${null==(t=a.attribute)?void 0:t.id}.${e.id}`:`${null==(n=a.parentAttribute)?void 0:n.id}.${e.id}`;return{type:at.LIBRARY,index:Date.now(),active:!0,key:r,condition:L[st(ct)],library:{id:e.id,label:e.label},value:{value:AO(ct)},parentAttribute:(null==a?void 0:a.condition)===D.THROUGH?a.attribute??a.parentAttribute:a.parentAttribute}})(e)),label:I(e.id)?s.jsx(nt,{color:"blue",text:e.localizedLabel}):e.localizedLabel})))}]),k.push({key:"elements-wrapper",type:"group",children:R,label:null,className:"elements-wrapper",style:{maxHeight:"75vh",overflowY:"auto"}});const _={items:k};return s.jsx(on,{disabled:!!a&&!a.active,open:f,onOpenChange:()=>v(!f),menu:_,trigger:["click"],children:n})}ai(ln)`
    & .elements-wrapper {
        max-height: 75vh;
        overflow-y: auto;

        > .ant-dropdown-menu-item-group-title {
            display: none;
        }
    }
`;const NO=ai(Kt)`
    && {
        display: flex;
        align-items: center;
    }
`,DO=ai.span`
    width: 180px;
    overflow: hidden;
    text-overflow: ellipsis;
    whitespace: nowrap;
`;function LO({library:e}){var t,n,r,i;const{t:o}=c(),{lang:a,defaultLang:l}=wn(),u=me(),{display:d}=Z((e=>e)),{state:p,dispatch:f}=Ec(),[v]=S(),{addView:m}=VA(e.id),{updateViewsOrder:g}=sO(e.id),h=()=>({library:e.id,label:{[l]:o("view.add-view.title")},display:p.display,shared:!1,sort:p.sort,filters:wc(p.filters),valuesVersions:p.valuesVersions?Pr(p.valuesVersions).map((e=>{var t;return{treeId:(null==e?void 0:e.name)??null,treeNode:(null==(t=null==e?void 0:e.value)?void 0:t.id)??null}})).filter((e=>null!==e.treeId&&null!==e.treeNode)):null,settings:[{name:N,value:p.display.type===Ht.list?p.fields.map((e=>e.key)):[]}]}),b=async e=>{const t={...h(),display:{...p.display,type:e}},n=await m({view:t});await g({key:oO+t.library,value:[...p.userViewsOrder,n.data.saveView.id],global:!1}),f({type:hc.CHANGE_VIEW,view:j(n.data.saveView,p.attributes,p.library.id,null==v?void 0:v.userId)})},y={items:[{key:"add-group",type:"group",label:o("view.add-view.title"),children:[{key:"list",onClick:()=>b(Ht.list),icon:s.jsx(lo,{}),label:o("view.type-list")},{key:"cards",onClick:()=>b(Ht.cards),icon:s.jsx(yi,{}),label:o("view.type-cards")}]}]};return s.jsxs(En,{size:"large",children:[s.jsxs(Kt.Group,{children:[s.jsx($r,{title:P(null==(t=p.view.current)?void 0:t.label,a)||o("select-view.default-view"),children:s.jsx(NO,{icon:s.jsx(PA,{style:{marginRight:"8px"},type:p.view.current.display.type}),"data-testid":"dropdown-view-options",onClick:()=>{const e=!d.side.visible||d.side.type!==it.view;u(rt({visible:e,type:it.view}))},color:null==(n=p.view.current)?void 0:n.color,children:s.jsx(DO,{children:P(null==(r=p.view.current)?void 0:r.label,a)||o("select-view.default-view")})})}),s.jsx(Kt,{disabled:p.view.sync,icon:s.jsx(vS,{}),onClick:()=>{f({type:hc.CHANGE_VIEW,view:p.view.current})},style:{paddingTop:"6px"}}),s.jsx(Kt,{icon:s.jsx(ko,{}),onClick:async()=>{if(p.view.current.id!==C.id)try{await m({view:{...h(),id:p.view.current.id,label:p.view.current.label,description:p.view.current.description,shared:p.view.current.shared,color:p.view.current.color,sort:p.sort??null}}),f({type:hc.SET_VIEW_SYNC,sync:!0})}catch(e){u(ge({type:he.error,content:`${o("error.error_occurred")}: ${e.message}`,channel:be.trigger})),console.error(e)}},disabled:p.view.sync||(null==(i=p.view.current)?void 0:i.id)===C.id||!p.view.current.owner}),s.jsx(on,{menu:y,trigger:["click"],children:s.jsx(Kt,{icon:s.jsx(si,{})})})]}),s.jsx(nt,{dot:!!p.filters.length,children:s.jsxs(Kt.Group,{children:[s.jsx(Kt,{onClick:()=>{u(rt({visible:!d.side.visible||d.side.type!==it.filters,type:it.filters}))},icon:s.jsx(Wi,{}),children:o("filters.filters")}),s.jsx(PO,{libraryId:e.id,button:s.jsx(Kt,{icon:s.jsx(si,{}),type:"default"}),attributes:e.attributes,trees:e.linkedTrees,libraries:[]})]})}),s.jsx(Kt,{onClick:()=>{u(rt({visible:!d.side.visible||d.side.type!==it.versions,type:it.versions}))},icon:s.jsx(Fc,{}),style:{paddingTop:"5px"}})]})}function $O(){const{state:e,dispatch:t}=Ec(),{t:n}=c(),r=e=>{t({type:hc.APPLY_FILTERS})};return s.jsx(In.Search,{style:{maxWidth:500,minWidth:250},placeholder:n("search.placeholder"),value:e.fullText,onChange:e=>{t({type:hc.SET_FULLTEXT,fullText:e.target.value})},onPressEnter:r,onSearch:r,loading:e.loading,allowClear:!0})}const MO=ai(En)`
    width: 100%;
`;function BO({refetch:t,library:n}){const{t:r}=c(),{state:i}=Ec(),[o,a]=e.useState(!1),[l,u]=e.useState(!1),[d,p]=e.useState(!1),f=n.permissions.create_record,v=e.useContext(pc);return s.jsxs(MO,{children:[(null==n?void 0:n.id)&&s.jsx(LO,{library:n}),s.jsxs(En,{size:"large",children:[s.jsx($A,{}),s.jsx($O,{})]}),s.jsxs(En,{size:"large",children:[!v&&f&&s.jsx(Kt,{type:"primary",icon:s.jsx(si,{}),className:"primary-btn",onClick:()=>{n.behavior===Jt.standard?a(!0):n.behavior===Jt.files?u(!0):n.behavior===Jt.directories&&p(!0)},children:r("items_list.new")}),s.jsxs(En,{size:"small",children:[s.jsx(LA,{}),s.jsx(DA,{}),s.jsx(Kt,{icon:s.jsx(ho,{}),onClick:()=>t&&t()})]})]}),o&&s.jsx(TS,{record:null,library:n.id,open:o,onClose:()=>{a(!1)},valuesVersion:i.valuesVersions}),l&&s.jsx(Sd,{libraryId:n.id,multiple:!0,onClose:()=>{u(!1)}}),d&&s.jsx(Hu,{libraryId:n.id,onClose:()=>{p(!1)}})]})}var VO=Yr,FO=Xr;var zO=Kr;var HO=function(e){return e==e&&!zO(e)},GO=HO,UO=Qr;var WO=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},qO=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var l=n[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){var s=(l=n[i])[0],c=e[s],u=l[1];if(a&&l[2]){if(void 0===c&&!(s in e))return!1}else{var d=new VO;if(r)var p=r(c,u,s,e,t,d);if(!(void 0===p?FO(u,c,3,r,d):p))return!1}}return!0},YO=function(e){for(var t=UO(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,GO(i)]}return t},XO=WO;var KO=Xr,QO=Cc,ZO=ut,JO=dt,eP=HO,tP=WO,nP=pt;var rP=$;var iP=function(e){return function(t){return null==t?void 0:t[e]}},oP=function(e){return function(t){return rP(t,e)}},aP=dt,lP=pt;var sP=function(e){var t=YO(e);return 1==t.length&&t[0][2]?XO(t[0][0],t[0][1]):function(n){return n===e||qO(n,e,t)}},cP=function(e,t){return JO(e)&&eP(t)?tP(nP(e),t):function(n){var r=QO(n,e);return void 0===r&&r===t?ZO(n,e):KO(t,r,3)}},uP=Zr,dP=qr,pP=function(e){return aP(e)?iP(lP(e)):oP(e)};var fP=function(e){return"function"==typeof e?e:null==e?uP:"object"==typeof e?dP(e)?cP(e[0],e[1]):sP(e):pP(e)};var vP=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1},mP=Jr,gP=ei,hP=mP&&1/ti(new mP([,-0]))[1]==1/0?function(e){return new mP(e)}:gP,bP=ni,yP=ri,xP=vP,wP=ii,EP=hP,SP=ti;var CP=fP,IP=function(e,t,n){var r=-1,i=yP,o=e.length,a=!0,l=[],s=l;if(n)a=!1,i=xP;else if(o>=200){var c=t?null:EP(e);if(c)return SP(c);a=!1,i=wP,s=new bP}else s=t?[]:l;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,a&&d==d){for(var p=s.length;p--;)if(s[p]===d)continue e;t&&s.push(d),l.push(u)}else i(s,d,n)||(s!==l&&s.push(d),l.push(u))}return l};var kP=function(e,t){return e&&e.length?IP(e,CP(t)):[]};function RP({onClose:e,open:t}){const{t:n}=c(),{selectionState:r}=Z((e=>({selectionState:e.selection}))),i=me(),{state:o,dispatch:a}=Ec(),l=!!r.selection.allSelected,u=l?o.totalCount:r.selection.selected.length,[d,{loading:p,error:f,called:v}]=V(JC,{variables:{libraryId:o.library.id,recordsIds:l?null:r.selection.selected.map((e=>e.id)),filters:l?wc(o.filters):null}});return s.jsxs(K,{title:n("records_deactivation.title"),okText:n("global.submit"),cancelText:n("global.cancel"),onOk:async()=>{try{await d(),i(Oe()),a({type:hc.SET_LOADING,loading:!0}),e()}catch(t){}},onCancel:e,confirmLoading:p,open:t,closable:!0,centered:!0,okButtonProps:{className:"submit-btn"},destroyOnClose:!0,children:[p&&s.jsx(te,{}),!p&&f&&s.jsx(Y,{message:f.message}),!v&&n("records_deactivation.confirm",{count:u})]})}const _P=mn`
    query EXPORT($library: ID!, $attributes: [ID!], $filters: [RecordFilterInput!]) {
        export(library: $library, attributes: $attributes, filters: $filters)
    }
`,TP=ai.div`
    margin-top: 2em;
`,jP=ai.div`
    text-align: center;
`;function AP({onClose:t,open:n}){const{t:r}=c(),i=me(),{selectionState:o}=Z((e=>({selectionState:e.selection}))),a=vt(),{state:l}=Ec(),[u]=Le(),[d,p]=e.useState([]),[f,v]=e.useState(0),[m,g]=e.useState(""),[h,{error:b}]=k(_P,{fetchPolicy:"no-cache",onCompleted:e=>{v(2),a.triggerNotification({message:r("export.export_notification_title"),icon:s.jsx(di,{style:{color:"#108ee9"}}),onClick:x,duration:2.5}),g(null==e?void 0:e.export)},onError:e=>{const t={type:he.error,priority:Re.high,channel:be.passive,content:`${r("error.error_occurred")}: ${e.message}`};i(ge(t)),v(2)}}),y=r(2===f?"global.close":"export.start"),x=()=>{i(ft(!0)),t()},w=[{title:r("export.attributes_selection")},{title:r("export.export_generation"),icon:1===f?s.jsx(en,{}):null},{title:r("export.export_done"),status:b?"error":null}];return s.jsxs(K,{title:r("export.title"),okText:y,okType:"primary",cancelText:r("global.cancel"),onOk:()=>{2!==f?(()=>{let e;if(v(1),o.selection.type===Ne.search&&o.selection.allSelected)e=wc(l.filters);else{const t=o.selection.selected.map((e=>e.id));e=t.length?[{operator:Wt.OPEN_BRACKET},...t.reduce(((e,n,r)=>(e.push({field:"id",condition:Ut.EQUAL,value:n}),r<t.length-1&&e.push({operator:Wt.OR}),e)),[]),{operator:Wt.CLOSE_BRACKET}]:[]}const t=d.length?d.map((e=>{var t;return(null==(t=null==e?void 0:e.parentAttributeData)?void 0:t.type)===zt.tree?`${null==e?void 0:e.parentAttributeData.id}.${e.id}`:e.path})):["id"];h({variables:{library:(null==u?void 0:u.id)||"",attributes:t,filters:e}})})():t()},onCancel:t,open:n,closable:!0,width:"90vw",centered:!0,confirmLoading:1===f,bodyStyle:{height:"calc(100vh - 10rem)"},cancelButtonProps:{disabled:2===f},destroyOnClose:!0,children:[s.jsx(Q,{current:f,style:{marginBottom:"2em"},items:w}),s.jsxs(TP,{children:[0===f&&s.jsx(Xj,{library:u.id,multiple:!0,onSelectionChange:p,selectedAttributes:d,canExpandExtendedAttributes:!1}),1===f&&s.jsx(jP,{"data-test-id":"processing",children:r("global.processing")+"..."}),2===f&&s.jsx(jP,{"data-test-id":"done",children:b?s.jsx(Y,{message:b.message}):s.jsx(gi,{status:"success",title:r("export.export_done"),subTitle:r("export.export_done_description"),extra:[s.jsx(Kt,{type:"primary",onClick:x,children:r("export.export_done_open_notifications")})]})})]})]})}function OP(){const{t:t}=c(),[n,r]=e.useState(),[i]=Le(),{state:o}=Ec(),{selection:a}=Z((e=>e.selection)),l=a.selected.map((e=>e.id)),u=o.filters,d=[{key:"export",icon:s.jsx($i,{rotate:270}),title:t("export.title"),modalComp:AP,display:!0},{key:"deactivate",icon:s.jsx(ui,{}),title:t("records_deactivation.title"),modalComp:RP,display:!0},{key:"generate_previews",icon:s.jsx(Un,{}),title:t("files.generate_previews"),modalComp:Ly,display:i.behavior===Jt.files,modalProps:{libraryId:i.id,recordIds:l,filters:u}}].filter((e=>e.display)),p=()=>r("");return s.jsxs(s.Fragment,{children:[s.jsx(on,{menu:{items:d.map((e=>{return{icon:e.icon,key:e.key,title:e.title,label:e.title,onClick:(t=e.key,()=>{r(t)})};var t}))},children:s.jsxs(Kt,{children:[t("menu-selection.actions")," ",s.jsx(an,{})]})}),d.filter((e=>n===e.key)).map((e=>s.jsx(e.modalComp,{open:n===e.key,onClose:p,...e.modalProps},e.key)))]})}const PP=ai.div`
    display: ${({active:e})=>e?"grid":"none"};
    place-items: center;

    position: absolute;
    top: 0;

    width: 100%;
    background: ${xn.defaultBg};
    height: 4rem;
    z-index: 11;

    animation: ${({active:e})=>e?"moveToBottom .3s ease":"none"};

    & > div {
        display: grid;
        place-items: center;
        grid-template-columns: repeat(4, auto);
        column-gap: 1rem;
    }

    @keyframes moveToBottom {
        from {
            top: -100px;
        }
        to {
            top: 0;
        }
    }
`,NP=ai.div`
    && {
        display: flex;
        padding: 0;
    }
`,DP=ai(Kt)`
    && {
        padding: 0 1em;
        display: flex;
        align-items: center;
        border-right-color: transparent;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
    }
`,LP=ai(Kt)`
    && {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        display: flex;
        padding: 0 1em;
        align-items: center;
    }
`;function $P({active:t}){const{t:n}=c(),r=e.useContext(pc),{selectionState:i}=Z((e=>({selectionState:e.selection,display:e.display}))),o=me(),{state:a}=Ec(),{lang:l}=wn(),[u,d]=e.useState(0);e.useEffect((()=>{d(r?i.searchSelection.selected.length:i.selection.selected.length)}),[i.selection,i.searchSelection,r,d]);const p=r?i.searchSelection.type===Ne.search&&i.searchSelection.allSelected:i.selection.type===Ne.search&&i.selection.allSelected;return s.jsx(PP,{active:t,children:s.jsxs("div",{children:[s.jsx(on,{menu:{items:[{key:"select-visible",onClick:()=>{let e=[...i.selection.selected];if(a.records)for(const t of a.records)e=[...e,{id:t.whoAmI.id,library:t.whoAmI.library.id,label:P(t.whoAmI.label,l)}];e=kP(e,(e=>`${e.id}_${e.library}`)),o(r?et({type:Ne.search,selected:e,allSelected:!1}):De({type:Ne.search,selected:e,allSelected:!1}))},label:n("items-menu-dropdown.select-visible",{nb:a.records.length})},r?null:{key:"select-all",onClick:()=>{r||o(De({type:Ne.search,selected:[],allSelected:!0}))},label:n("items-menu-dropdown.select-all",{nb:a.totalCount})},{key:"unselect-all",onClick:()=>{o(r?ne():Oe())},label:n("menu-selection.unselect-all")}]},children:s.jsxs(NP,{children:[s.jsxs(DP,{children:[n("menu-selection.nb-selected",{nbSelected:p?a.totalCount:u,total:a.totalCount}),s.jsx(an,{style:{paddingLeft:12}})]}),s.jsx(LP,{onClick:()=>{o(r?ne():Oe())},children:s.jsx(kr,{})})]})}),!r&&s.jsxs(s.Fragment,{children:[s.jsx(OP,{}),s.jsx("div",{children:s.jsx(Kt,{icon:s.jsx(ui,{}),onClick:()=>{pi.warning(n("global.feature_not_available"))},children:n("global.delete")})})]})]})})}const MP=ai.div`
    width: 100%;
    display: flex;
    flex-flow: column nowrap;
    border-right: ${xn.borderLightColor} 1px solid;
    overflow-y: auto;
    width: 1000px;
`,BP=ai.div`
    width: 100%;
    background-color: ${xn.headerBg};
    display: grid;
    grid-template-columns: repeat(2, auto);
    justify-content: space-between;
    padding: 0.3rem 0.3rem 0.3rem 1rem;
    font-weight: 700;
    border-bottom: 1px solid ${xn.borderLightColor};

    & > * {
        :first-of-type {
            display: grid;
            column-gap: 8px;
            grid-template-columns: repeat(3, auto);
            align-items: center;
            justify-items: center;
        }

        :last-of-type {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            column-gap: 8px;
            grid-template-columns: repeat(2, auto);
        }
    }
`,VP=ai.div`
    height: calc(100% - 7rem);
    overflow: auto;
`,FP=ai.div`
    display: grid;
`;function zP(){const{t:e}=c(),{state:t,dispatch:n}=Ec(),r=me(),i=t.filters.sort(((e,t)=>e.index-t.index)),o=t.filters.every((e=>!1===e.active)),a=t.filters.every((e=>!0===e.active));return s.jsxs(MP,{children:[s.jsxs(BP,{children:[s.jsx(on,{menu:{items:[{key:"disable",disabled:o,onClick:()=>{n({type:hc.DISABLE_FILTERS})},label:e("filters.disable-filters")},{key:"enable",disabled:a,onClick:()=>{n({type:hc.ENABLE_FILTERS})},label:e("filters.enable-filters")},{key:"remove",disabled:!t.filters.length,onClick:()=>{n({type:hc.RESET_FILTERS})},label:e("filters.remove-filters")},{key:"add",disabled:!0,label:s.jsxs(s.Fragment,{children:[e("filters.add-condition")," ",s.jsx(Je,{})]})}]},children:s.jsxs(Kt,{type:"text",children:[e("filters.filters"),s.jsx(an,{style:{marginTop:"5px",marginLeft:"-3px"}})]})}),s.jsxs("div",{children:[s.jsx(Kt,{disabled:!t.filters.length,onClick:()=>{n({type:hc.APPLY_FILTERS})},children:e("filters.apply")}),s.jsx(Kt,{onClick:()=>{r(rt({visible:!1,type:it.filters}))},icon:s.jsx(zA,{})})]})]}),s.jsx(VP,{children:s.jsx(tj,{onDragEnd:(e,r)=>{if(!e.destination)return;const i=t.filters.map((t=>({...t,index:e.source.index===t.index?e.destination.index:e.destination.index===t.index?e.source.index:t.index}))).sort(((e,t)=>e.index-t.index));n({type:hc.SET_FILTERS,filters:i})},children:s.jsx(Bj,{droppableId:"droppable",children:e=>s.jsxs(FP,{...e.droppableProps,ref:e.innerRef,children:[i.map((e=>s.jsx(Dj,{draggableId:e.index.toString(),index:e.index,children:t=>s.jsx("div",{ref:t.innerRef,...t.draggableProps,children:s.jsx(OO,{filter:e,handleProps:t.dragHandleProps},e.index)})},e.index))),e.placeholder]})})})})]})}const HP=ai.div`
    width: 100%;
    display: flex;
    flex-flow: column nowrap;
    border-right: ${xn.borderLightColor} 1px solid;
    overflow-y: auto;
`,GP=ai.div`
    width: 100%;
    background-color: ${xn.headerBg};
    display: grid;
    grid-template-columns: repeat(2, auto);
    justify-content: space-between;
    padding: 0.3rem 0.3rem 0.3rem 1rem;
    font-weight: 700;
    border-bottom: 1px solid ${xn.borderLightColor};

    & > * {
        :first-of-type {
            display: grid;
            column-gap: 8px;
            grid-template-columns: repeat(3, auto);
            align-items: center;
            justify-items: center;
        }

        :last-of-type {
            display: grid;
            align-items: center;
            justify-content: flex-end;
            column-gap: 8px;
            grid-template-columns: repeat(2, auto);
        }
    }
`;function UP(){const{t:e}=c(),[t]=Le(),n=me(),{state:r,dispatch:i}=Ec();return s.jsxs(HP,{children:[s.jsxs(GP,{children:[s.jsx("span",{children:e("values_version.title")}),s.jsx(Kt,{onClick:()=>{n(rt({visible:!1,type:it.versions}))},icon:s.jsx(zA,{})})]}),s.jsx(pS,{libraryId:t.id,selectedVersion:r.valuesVersions,onVersionChange:e=>{i({type:hc.SET_VALUES_VERSIONS,valuesVersions:e})}})]})}const WP=ai.div`
    grid-area: side;
    display: ${({visible:e})=>e?"flex":"none"};
    position: relative;
    height: calc(100vh - 7rem);
    overflow: hidden;

    &.wrapped-filter-open {
        animation-name: filter-animation-open;
        animation-duration: 1s;
        animation-timing-function: ease;
    }

    @keyframes filter-animation-open {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    &.wrapped-filter-close {
        animation-name: filter-animation-close;
        animation-duration: 1s;
        animation-timing-function: ease-out;
    }

    @keyframes filter-animation-close {
        from {
            /* transform: translate(0); */
            opacity: 1;
        }

        to {
            /* transform: translate(-50rem); */
            opacity: 0;
        }
    }
`;function qP(){const{visible:e,type:t}=Z((e=>e.display.side));return s.jsxs(WP,{visible:e,className:e?"wrapped-filter-open":"wrapped-filter-close",children:[e&&t===it.filters&&s.jsx(zP,{}),e&&t===it.view&&s.jsx(lO,{}),e&&t===it.versions&&s.jsx(UP,{})]})}const YP=ai.div`
    border-bottom: 1px solid rgb(235, 237, 240);
    padding: 0 1rem;
    height: 4rem;

    display: flex;
    align-content: center;
    justify-content: space-around;
`,XP=ai.div`
    display: grid;

    ${({showSide:e})=>e?`\n            grid-template-columns: ${mt} calc(100% - ${mt});\n            grid-template-rows: 92% auto;\n            grid-template-areas:\n                'side data'\n                'side pagination';`:"\n            grid-template-columns: auto;\n            grid-template-rows: 92% auto;\n            grid-template-areas:\n                'data'\n                'pagination';"}

    height: calc(100vh - 7rem);
    position: relative;
    overflow: auto;
`;function KP({selectionMode:t,library:n,defaultView:r,style:i}){const{lang:o}=wn(),{display:a,selection:l}=Z((e=>e)),c=cc(n),[u,d]=e.useReducer(yc,{...bc,library:n,loading:!0,attributes:c,fields:(p=r,(null==(f=p.settings)?void 0:f.find((e=>e.name===N)))?p.settings.find((e=>e.name===N)).value.reduce(((e,t)=>{const r=mc(t,n,c,o);return r?[...e,r]:e}),[]):[]),filters:r.filters,sort:r.sort,display:r.display,view:{current:r,reload:!1,sync:!0},lang:o,valuesVersions:r.valuesVersions});var p,f;const[v]=V(F),m=I(n.id),g=e=>{var t;const r=e?e[n.gqlNames.query||""].list:[],i=OA({items:r,fields:u.fields});d({type:hc.UPDATE_RESULT,records:i,totalCount:(null==(t=null==e?void 0:e[n.gqlNames.query])?void 0:t.totalCount)??u.totalCount})},h=()=>u.valuesVersions?gt(u.valuesVersions).filter((e=>!!e.treeNodeId)):[],{error:b,loading:y,fetchMore:x}=R(vc(n.gqlNames.query,u.fields,!u.offset),{fetchPolicy:"network-only",skip:!u.loading,variables:{limit:u.pagination,offset:u.offset,filters:wc(u.filters),sort:u.sort,fullText:u.fullText,version:h()},onCompleted:g,onError:e=>{d({type:hc.SET_LOADING,loading:!1})}}),w=y||u.view.reload||u.loading;e.useEffect((()=>{u.view.reload&&((async()=>{try{const e=wc(u.filters),t={limit:u.pagination,offset:u.offset,filters:e,sort:u.sort,fullText:u.fullText,version:h()},r=(await x({query:vc(n.gqlNames.query,u.fields,!u.offset),variables:t})).data;g(r)}catch(e){d({type:hc.SET_LOADING,loading:!1})}})(),v({variables:{key:m,value:u.view.current.id,global:!1}}),d({type:hc.SET_VIEW_RELOAD,reload:!1}))}),[m,v,u.view,u.fields,d,n]);const E=t?!!l.searchSelection.selected.length||l.searchSelection.type===Ne.search&&l.searchSelection.allSelected:!!l.selection.selected.length||l.selection.type===Ne.search&&l.selection.allSelected;return s.jsx(xc.Provider,{value:{state:u,dispatch:d},children:s.jsxs(pc.Provider,{value:t,children:[s.jsxs(YP,{children:[s.jsx(BO,{refetch:()=>{d({type:hc.SET_LOADING,loading:!0})},library:n}),s.jsx($P,{active:E})]}),s.jsxs(XP,{showSide:a.side.visible,className:a.side.visible?"wrapper-open":"wrapper-close",style:i,children:[s.jsx(qP,{}),w&&s.jsx(te,{}),!w&&b&&s.jsx(Y,{message:b.message}),!w&&!b&&(u.records.length?s.jsx(RA,{}):s.jsx(_A,{}))]})]})})}function QP({selectionMode:t,library:n,style:r}){const{loading:i,view:o}=(t=>{const[n]=S(),[r,i]=e.useState(!0),[o,a]=e.useState(null),[l,s]=e.useState(C),c=t.permissions.access_library,u=I(t.id),d=()=>{const e=cc(t);return{id:t.defaultView.id,owner:!0,library:t.id,label:t.defaultView.label,description:t.defaultView.description,display:t.defaultView.display,color:t.defaultView.color,shared:t.defaultView.shared,filters:T(t.defaultView.filters??[],t.id,e),sort:t.defaultView.sort,settings:t.defaultView.settings}},[p]=k(dc,{onCompleted:e=>{e||(a(new Error("Unknown view")),i(!1));const r=j(e.view,cc(t),t.id,null==n?void 0:n.userId);s(r),i(!1)},onError:e=>{if(t.defaultView){const e=d();s(e)}a(e),i(!1)}});return R(_,{fetchPolicy:"no-cache",variables:{keys:[u]},skip:!c,onCompleted:e=>{var n,r,o;if(!(null==(r=null==(n=e.userData)?void 0:n.data)?void 0:r[u])){if(t.defaultView){const e=d();s(e)}return void i(!1)}const a=null==(o=e.userData)?void 0:o.data[u];a!==C.id?p({variables:{viewId:a}}):i(!1)},onError:e=>{a(e),i(!1)}}),{loading:r,error:o,view:l}})(n);return n.permissions.access_library?i?s.jsx(te,{}):s.jsx(KP,{library:n,selectionMode:t,defaultView:o,style:r}):s.jsx(Y,{type:ee.PERMISSION_ERROR})}export{Hu as C,TS as E,Xi as F,fS as G,QP as L,BE as R,qu as S,Ly as T,Sd as U,Du as a,cd as b,Bu as g,$u as t,Uu as u};
