fragment PropertyValue on GenericValue {
    ... on Value {
        valuePayload: payload
    }
    ... on LinkValue {
        linkPayload: payload {
            ...RecordIdentity
        }
    }
    ... on TreeValue {
        treePayload: payload {
            record {
                ...RecordIdentity
            }
        }
    }
}

fragment AttributeProperties on Attribute {
    id
    label
    type
    format
    multiple_values
}

query Explorer($libraryId: ID!, $attributeIds: [ID!]!, $filters: [RecordFilterInput]) {
    records(library: $libraryId, filters: $filters) {
        list {
            ...RecordIdentity
            properties(attributeIds: $attributeIds) {
                attributeId
                attributeProperties {
                    ...AttributeProperties
                }
                values {
                    ...PropertyValue
                }
            }
        }
    }
}
